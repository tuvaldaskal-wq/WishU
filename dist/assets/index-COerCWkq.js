var eD=Object.defineProperty;var tD=(t,e,n)=>e in t?eD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var qx=(t,e,n)=>tD(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function nD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eS={exports:{}},mf={},tS={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),rD=Symbol.for("react.portal"),sD=Symbol.for("react.fragment"),iD=Symbol.for("react.strict_mode"),oD=Symbol.for("react.profiler"),aD=Symbol.for("react.provider"),lD=Symbol.for("react.context"),cD=Symbol.for("react.forward_ref"),uD=Symbol.for("react.suspense"),dD=Symbol.for("react.memo"),hD=Symbol.for("react.lazy"),Gx=Symbol.iterator;function fD(t){return t===null||typeof t!="object"?null:(t=Gx&&t[Gx]||t["@@iterator"],typeof t=="function"?t:null)}var nS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rS=Object.assign,sS={};function Wa(t,e,n){this.props=t,this.context=e,this.refs=sS,this.updater=n||nS}Wa.prototype.isReactComponent={};Wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iS(){}iS.prototype=Wa.prototype;function rv(t,e,n){this.props=t,this.context=e,this.refs=sS,this.updater=n||nS}var sv=rv.prototype=new iS;sv.constructor=rv;rS(sv,Wa.prototype);sv.isPureReactComponent=!0;var Kx=Array.isArray,oS=Object.prototype.hasOwnProperty,iv={current:null},aS={key:!0,ref:!0,__self:!0,__source:!0};function lS(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)oS.call(e,r)&&!aS.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:au,type:t,key:i,ref:o,props:s,_owner:iv.current}}function pD(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ov(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function mD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qx=/\/+/g;function Fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mD(""+t.key):e.toString(36)}function Cd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case au:case rD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fp(o,0):r,Kx(s)?(n="",t!=null&&(n=t.replace(Qx,"$&/")+"/"),Cd(s,e,n,"",function(c){return c})):s!=null&&(ov(s)&&(s=pD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Qx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Kx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Fp(i,a);o+=Cd(i,e,n,l,s)}else if(l=fD(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Fp(i,a++),o+=Cd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gu(t,e,n){if(t==null)return t;var r=[],s=0;return Cd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function gD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},kd={transition:null},yD={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:kd,ReactCurrentOwner:iv};function cS(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Gu,forEach:function(t,e,n){Gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gu(t,function(){e++}),e},toArray:function(t){return Gu(t,function(e){return e})||[]},only:function(t){if(!ov(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Wa;xe.Fragment=sD;xe.Profiler=oD;xe.PureComponent=rv;xe.StrictMode=iD;xe.Suspense=uD;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yD;xe.act=cS;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rS({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=iv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oS.call(e,l)&&!aS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:au,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:lD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aD,_context:t},t.Consumer=t};xe.createElement=lS;xe.createFactory=function(t){var e=lS.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:cD,render:t}};xe.isValidElement=ov;xe.lazy=function(t){return{$$typeof:hD,_payload:{_status:-1,_result:t},_init:gD}};xe.memo=function(t,e){return{$$typeof:dD,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=kd.transition;kd.transition={};try{t()}finally{kd.transition=e}};xe.unstable_act=cS;xe.useCallback=function(t,e){return fn.current.useCallback(t,e)};xe.useContext=function(t){return fn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return fn.current.useEffect(t,e)};xe.useId=function(){return fn.current.useId()};xe.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return fn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};xe.useRef=function(t){return fn.current.useRef(t)};xe.useState=function(t){return fn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return fn.current.useTransition()};xe.version="18.3.1";tS.exports=xe;var y=tS.exports;const un=nD(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD=y,wD=Symbol.for("react.element"),xD=Symbol.for("react.fragment"),_D=Object.prototype.hasOwnProperty,bD=vD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ED={key:!0,ref:!0,__self:!0,__source:!0};function uS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_D.call(e,r)&&!ED.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:wD,type:t,key:i,ref:o,props:s,_owner:bD.current}}mf.Fragment=xD;mf.jsx=uS;mf.jsxs=uS;eS.exports=mf;var f=eS.exports,rg={},dS={exports:{}},zn={},hS={exports:{}},fS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var j=F.length;F.push(U);e:for(;0<j;){var L=j-1>>>1,G=F[L];if(0<s(G,U))F[L]=U,F[j]=G,j=L;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],j=F.pop();if(j!==U){F[0]=j;e:for(var L=0,G=F.length,ee=G>>>1;L<ee;){var re=2*(L+1)-1,oe=F[re],te=re+1,ne=F[te];if(0>s(oe,j))te<G&&0>s(ne,oe)?(F[L]=ne,F[te]=j,L=te):(F[L]=oe,F[re]=j,L=re);else if(te<G&&0>s(ne,j))F[L]=ne,F[te]=j,L=te;else break e}}return U}function s(F,U){var j=F.sortIndex-U.sortIndex;return j!==0?j:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,x=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function C(F){if(w=!1,E(F),!x)if(n(l)!==null)x=!0,Y(P);else{var U=n(c);U!==null&&H(C,U.startTime-F)}}function P(F,U){x=!1,w&&(w=!1,b(S),S=-1),m=!0;var j=p;try{for(E(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!D());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var G=L(h.expirationTime<=U);U=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),E(U)}else r(l);h=n(l)}if(h!==null)var ee=!0;else{var re=n(c);re!==null&&H(C,re.startTime-U),ee=!1}return ee}finally{h=null,p=j,m=!1}}var M=!1,I=null,S=-1,k=5,R=-1;function D(){return!(t.unstable_now()-R<k)}function O(){if(I!==null){var F=t.unstable_now();R=F;var U=!0;try{U=I(!0,F)}finally{U?N():(M=!1,I=null)}}else M=!1}var N;if(typeof _=="function")N=function(){_(O)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,W=X.port2;X.port1.onmessage=O,N=function(){W.postMessage(null)}}else N=function(){T(O,0)};function Y(F){I=F,M||(M=!0,N())}function H(F,U){S=T(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,Y(P))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var j=p;p=U;try{return F()}finally{p=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var j=p;p=F;try{return U()}finally{p=j}},t.unstable_scheduleCallback=function(F,U,j){var L=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?L+j:L):j=L,F){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=j+G,F={id:d++,callback:U,priorityLevel:F,startTime:j,expirationTime:G,sortIndex:-1},j>L?(F.sortIndex=j,e(c,F),n(l)===null&&F===n(c)&&(w?(b(S),S=-1):w=!0,H(C,j-L))):(F.sortIndex=G,e(l,F),x||m||(x=!0,Y(P))),F},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(F){var U=p;return function(){var j=p;p=U;try{return F.apply(this,arguments)}finally{p=j}}}})(fS);hS.exports=fS;var TD=hS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD=y,Fn=TD;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pS=new Set,xc={};function Io(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(xc[t]=e,t=0;t<e.length;t++)pS.add(e[t])}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sg=Object.prototype.hasOwnProperty,ID=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yx={},Xx={};function CD(t){return sg.call(Xx,t)?!0:sg.call(Yx,t)?!1:ID.test(t)?Xx[t]=!0:(Yx[t]=!0,!1)}function kD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AD(t,e,n,r){if(e===null||typeof e>"u"||kD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var av=/[\-:]([a-z])/g;function lv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(av,lv);$t[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(av,lv);$t[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(av,lv);$t[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function cv(t,e,n,r){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AD(e,n,s,r)&&(n=null),r||s===null?CD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cs=SD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ku=Symbol.for("react.element"),qo=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),uv=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),dv=Symbol.for("react.forward_ref"),og=Symbol.for("react.suspense"),ag=Symbol.for("react.suspense_list"),hv=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),yS=Symbol.for("react.offscreen"),Jx=Symbol.iterator;function bl(t){return t===null||typeof t!="object"?null:(t=Jx&&t[Jx]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Up;function Vl(t){if(Up===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Up=e&&e[1]||""}return`
`+Up+t}var Bp=!1;function $p(t,e){if(!t||Bp)return"";Bp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Bp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vl(t):""}function RD(t){switch(t.tag){case 5:return Vl(t.type);case 16:return Vl("Lazy");case 13:return Vl("Suspense");case 19:return Vl("SuspenseList");case 0:case 2:case 15:return t=$p(t.type,!1),t;case 11:return t=$p(t.type.render,!1),t;case 1:return t=$p(t.type,!0),t;default:return""}}function lg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case qo:return"Portal";case ig:return"Profiler";case uv:return"StrictMode";case og:return"Suspense";case ag:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gS:return(t.displayName||"Context")+".Consumer";case mS:return(t._context.displayName||"Context")+".Provider";case dv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hv:return e=t.displayName||null,e!==null?e:lg(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return lg(t(e))}catch{}}return null}function PD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lg(e);case 8:return e===uv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ND(t){var e=vS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qu(t){t._valueTracker||(t._valueTracker=ND(t))}function wS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cg(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xS(t,e){e=e.checked,e!=null&&cv(t,"checked",e,!1)}function ug(t,e){xS(t,e);var n=di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dg(t,e.type,n):e.hasOwnProperty("defaultValue")&&dg(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function e_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dg(t,e,n){(e!=="number"||eh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fl=Array.isArray;function fa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+di(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function t_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Fl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:di(n)}}function _S(t,e){var n=di(e.value),r=di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function n_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yu,ES=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yu=Yu||document.createElement("div"),Yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _c(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DD=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(t){DD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ql[e]=Ql[t]})});function TS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ql.hasOwnProperty(t)&&Ql[t]?(""+e).trim():e+"px"}function SS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=TS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var LD=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pg(t,e){if(e){if(LD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function mg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gg=null;function fv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yg=null,pa=null,ma=null;function r_(t){if(t=uu(t)){if(typeof yg!="function")throw Error(q(280));var e=t.stateNode;e&&(e=xf(e),yg(t.stateNode,t.type,e))}}function IS(t){pa?ma?ma.push(t):ma=[t]:pa=t}function CS(){if(pa){var t=pa,e=ma;if(ma=pa=null,r_(t),e)for(t=0;t<e.length;t++)r_(e[t])}}function kS(t,e){return t(e)}function AS(){}var zp=!1;function RS(t,e,n){if(zp)return t(e,n);zp=!0;try{return kS(t,e,n)}finally{zp=!1,(pa!==null||ma!==null)&&(AS(),CS())}}function bc(t,e){var n=t.stateNode;if(n===null)return null;var r=xf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var vg=!1;if(gs)try{var El={};Object.defineProperty(El,"passive",{get:function(){vg=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{vg=!1}function jD(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Yl=!1,th=null,nh=!1,wg=null,MD={onError:function(t){Yl=!0,th=t}};function OD(t,e,n,r,s,i,o,a,l){Yl=!1,th=null,jD.apply(MD,arguments)}function VD(t,e,n,r,s,i,o,a,l){if(OD.apply(this,arguments),Yl){if(Yl){var c=th;Yl=!1,th=null}else throw Error(q(198));nh||(nh=!0,wg=c)}}function Co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function s_(t){if(Co(t)!==t)throw Error(q(188))}function FD(t){var e=t.alternate;if(!e){if(e=Co(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return s_(s),t;if(i===r)return s_(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function NS(t){return t=FD(t),t!==null?DS(t):null}function DS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=DS(t);if(e!==null)return e;t=t.sibling}return null}var LS=Fn.unstable_scheduleCallback,i_=Fn.unstable_cancelCallback,UD=Fn.unstable_shouldYield,BD=Fn.unstable_requestPaint,ht=Fn.unstable_now,$D=Fn.unstable_getCurrentPriorityLevel,pv=Fn.unstable_ImmediatePriority,jS=Fn.unstable_UserBlockingPriority,rh=Fn.unstable_NormalPriority,zD=Fn.unstable_LowPriority,MS=Fn.unstable_IdlePriority,gf=null,Fr=null;function WD(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:GD,HD=Math.log,qD=Math.LN2;function GD(t){return t>>>=0,t===0?32:31-(HD(t)/qD|0)|0}var Xu=64,Ju=4194304;function Ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ul(a):(i&=o,i!==0&&(r=Ul(i)))}else o=n&~s,o!==0?r=Ul(o):i!==0&&(r=Ul(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yr(e),s=1<<n,r|=t[n],e&=~s;return r}function KD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=KD(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function xg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OS(){var t=Xu;return Xu<<=1,!(Xu&4194240)&&(Xu=64),t}function Wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yr(e),t[e]=n}function YD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function mv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var De=0;function VS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FS,gv,US,BS,$S,_g=!1,Zu=[],Zs=null,ei=null,ti=null,Ec=new Map,Tc=new Map,zs=[],XD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o_(t,e){switch(t){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ec.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(e.pointerId)}}function Tl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=uu(e),e!==null&&gv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JD(t,e,n,r,s){switch(e){case"focusin":return Zs=Tl(Zs,t,e,n,r,s),!0;case"dragenter":return ei=Tl(ei,t,e,n,r,s),!0;case"mouseover":return ti=Tl(ti,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ec.set(i,Tl(Ec.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Tc.set(i,Tl(Tc.get(i)||null,t,e,n,r,s)),!0}return!1}function zS(t){var e=Qi(t.target);if(e!==null){var n=Co(e);if(n!==null){if(e=n.tag,e===13){if(e=PS(n),e!==null){t.blockedOn=e,$S(t.priority,function(){US(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gg=r,n.target.dispatchEvent(r),gg=null}else return e=uu(n),e!==null&&gv(e),t.blockedOn=n,!1;e.shift()}return!0}function a_(t,e,n){Ad(t)&&n.delete(e)}function ZD(){_g=!1,Zs!==null&&Ad(Zs)&&(Zs=null),ei!==null&&Ad(ei)&&(ei=null),ti!==null&&Ad(ti)&&(ti=null),Ec.forEach(a_),Tc.forEach(a_)}function Sl(t,e){t.blockedOn===e&&(t.blockedOn=null,_g||(_g=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,ZD)))}function Sc(t){function e(s){return Sl(s,t)}if(0<Zu.length){Sl(Zu[0],t);for(var n=1;n<Zu.length;n++){var r=Zu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zs!==null&&Sl(Zs,t),ei!==null&&Sl(ei,t),ti!==null&&Sl(ti,t),Ec.forEach(e),Tc.forEach(e),n=0;n<zs.length;n++)r=zs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zs.length&&(n=zs[0],n.blockedOn===null);)zS(n),n.blockedOn===null&&zs.shift()}var ga=Cs.ReactCurrentBatchConfig,ih=!0;function eL(t,e,n,r){var s=De,i=ga.transition;ga.transition=null;try{De=1,yv(t,e,n,r)}finally{De=s,ga.transition=i}}function tL(t,e,n,r){var s=De,i=ga.transition;ga.transition=null;try{De=4,yv(t,e,n,r)}finally{De=s,ga.transition=i}}function yv(t,e,n,r){if(ih){var s=bg(t,e,n,r);if(s===null)em(t,e,r,oh,n),o_(t,r);else if(JD(s,t,e,n,r))r.stopPropagation();else if(o_(t,r),e&4&&-1<XD.indexOf(t)){for(;s!==null;){var i=uu(s);if(i!==null&&FS(i),i=bg(t,e,n,r),i===null&&em(t,e,r,oh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else em(t,e,r,null,n)}}var oh=null;function bg(t,e,n,r){if(oh=null,t=fv(r),t=Qi(t),t!==null)if(e=Co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oh=t,null}function WS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($D()){case pv:return 1;case jS:return 4;case rh:case zD:return 16;case MS:return 536870912;default:return 16}default:return 16}}var Ys=null,vv=null,Rd=null;function HS(){if(Rd)return Rd;var t,e=vv,n=e.length,r,s="value"in Ys?Ys.value:Ys.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Rd=s.slice(t,1<r?1-r:void 0)}function Pd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ed(){return!0}function l_(){return!1}function Wn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ed:l_,this.isPropagationStopped=l_,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ed)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ed)},persist:function(){},isPersistent:ed}),e}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wv=Wn(Ha),cu=tt({},Ha,{view:0,detail:0}),nL=Wn(cu),Hp,qp,Il,yf=tt({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Il&&(Il&&t.type==="mousemove"?(Hp=t.screenX-Il.screenX,qp=t.screenY-Il.screenY):qp=Hp=0,Il=t),Hp)},movementY:function(t){return"movementY"in t?t.movementY:qp}}),c_=Wn(yf),rL=tt({},yf,{dataTransfer:0}),sL=Wn(rL),iL=tt({},cu,{relatedTarget:0}),Gp=Wn(iL),oL=tt({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),aL=Wn(oL),lL=tt({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cL=Wn(lL),uL=tt({},Ha,{data:0}),u_=Wn(uL),dL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fL[t])?!!e[t]:!1}function xv(){return pL}var mL=tt({},cu,{key:function(t){if(t.key){var e=dL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xv,charCode:function(t){return t.type==="keypress"?Pd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gL=Wn(mL),yL=tt({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d_=Wn(yL),vL=tt({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xv}),wL=Wn(vL),xL=tt({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),_L=Wn(xL),bL=tt({},yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EL=Wn(bL),TL=[9,13,27,32],_v=gs&&"CompositionEvent"in window,Xl=null;gs&&"documentMode"in document&&(Xl=document.documentMode);var SL=gs&&"TextEvent"in window&&!Xl,qS=gs&&(!_v||Xl&&8<Xl&&11>=Xl),h_=" ",f_=!1;function GS(t,e){switch(t){case"keyup":return TL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function IL(t,e){switch(t){case"compositionend":return KS(e);case"keypress":return e.which!==32?null:(f_=!0,h_);case"textInput":return t=e.data,t===h_&&f_?null:t;default:return null}}function CL(t,e){if(Ko)return t==="compositionend"||!_v&&GS(t,e)?(t=HS(),Rd=vv=Ys=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qS&&e.locale!=="ko"?null:e.data;default:return null}}var kL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kL[t.type]:e==="textarea"}function QS(t,e,n,r){IS(r),e=ah(e,"onChange"),0<e.length&&(n=new wv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jl=null,Ic=null;function AL(t){oI(t,0)}function vf(t){var e=Xo(t);if(wS(e))return t}function RL(t,e){if(t==="change")return e}var YS=!1;if(gs){var Kp;if(gs){var Qp="oninput"in document;if(!Qp){var m_=document.createElement("div");m_.setAttribute("oninput","return;"),Qp=typeof m_.oninput=="function"}Kp=Qp}else Kp=!1;YS=Kp&&(!document.documentMode||9<document.documentMode)}function g_(){Jl&&(Jl.detachEvent("onpropertychange",XS),Ic=Jl=null)}function XS(t){if(t.propertyName==="value"&&vf(Ic)){var e=[];QS(e,Ic,t,fv(t)),RS(AL,e)}}function PL(t,e,n){t==="focusin"?(g_(),Jl=e,Ic=n,Jl.attachEvent("onpropertychange",XS)):t==="focusout"&&g_()}function NL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vf(Ic)}function DL(t,e){if(t==="click")return vf(e)}function LL(t,e){if(t==="input"||t==="change")return vf(e)}function jL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var br=typeof Object.is=="function"?Object.is:jL;function Cc(t,e){if(br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sg.call(e,s)||!br(t[s],e[s]))return!1}return!0}function y_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v_(t,e){var n=y_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y_(n)}}function JS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZS(){for(var t=window,e=eh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eh(t.document)}return e}function bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ML(t){var e=ZS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JS(n.ownerDocument.documentElement,n)){if(r!==null&&bv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=v_(n,i);var o=v_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OL=gs&&"documentMode"in document&&11>=document.documentMode,Qo=null,Eg=null,Zl=null,Tg=!1;function w_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tg||Qo==null||Qo!==eh(r)||(r=Qo,"selectionStart"in r&&bv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zl&&Cc(Zl,r)||(Zl=r,r=ah(Eg,"onSelect"),0<r.length&&(e=new wv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qo)))}function td(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:td("Animation","AnimationEnd"),animationiteration:td("Animation","AnimationIteration"),animationstart:td("Animation","AnimationStart"),transitionend:td("Transition","TransitionEnd")},Yp={},eI={};gs&&(eI=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function wf(t){if(Yp[t])return Yp[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eI)return Yp[t]=e[n];return t}var tI=wf("animationend"),nI=wf("animationiteration"),rI=wf("animationstart"),sI=wf("transitionend"),iI=new Map,x_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(t,e){iI.set(t,e),Io(e,[t])}for(var Xp=0;Xp<x_.length;Xp++){var Jp=x_[Xp],VL=Jp.toLowerCase(),FL=Jp[0].toUpperCase()+Jp.slice(1);bi(VL,"on"+FL)}bi(tI,"onAnimationEnd");bi(nI,"onAnimationIteration");bi(rI,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(sI,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);Io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Io("onBeforeInput",["compositionend","keypress","textInput","paste"]);Io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function __(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VD(r,e,void 0,t),t.currentTarget=null}function oI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;__(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;__(s,a,c),i=l}}}if(nh)throw t=wg,nh=!1,wg=null,t}function ze(t,e){var n=e[Ag];n===void 0&&(n=e[Ag]=new Set);var r=t+"__bubble";n.has(r)||(aI(e,t,2,!1),n.add(r))}function Zp(t,e,n){var r=0;e&&(r|=4),aI(n,t,r,e)}var nd="_reactListening"+Math.random().toString(36).slice(2);function kc(t){if(!t[nd]){t[nd]=!0,pS.forEach(function(n){n!=="selectionchange"&&(UL.has(n)||Zp(n,!1,t),Zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nd]||(e[nd]=!0,Zp("selectionchange",!1,e))}}function aI(t,e,n,r){switch(WS(e)){case 1:var s=eL;break;case 4:s=tL;break;default:s=yv}n=s.bind(null,e,n,t),s=void 0,!vg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function em(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}RS(function(){var c=i,d=fv(n),h=[];e:{var p=iI.get(t);if(p!==void 0){var m=wv,x=t;switch(t){case"keypress":if(Pd(n)===0)break e;case"keydown":case"keyup":m=gL;break;case"focusin":x="focus",m=Gp;break;case"focusout":x="blur",m=Gp;break;case"beforeblur":case"afterblur":m=Gp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=c_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=sL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wL;break;case tI:case nI:case rI:m=aL;break;case sI:m=_L;break;case"scroll":m=nL;break;case"wheel":m=EL;break;case"copy":case"cut":case"paste":m=cL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=d_}var w=(e&4)!==0,T=!w&&t==="scroll",b=w?p!==null?p+"Capture":null:p;w=[];for(var _=c,E;_!==null;){E=_;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,b!==null&&(C=bc(_,b),C!=null&&w.push(Ac(_,C,E)))),T)break;_=_.return}0<w.length&&(p=new m(p,x,null,n,d),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==gg&&(x=n.relatedTarget||n.fromElement)&&(Qi(x)||x[ys]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=c,x=x?Qi(x):null,x!==null&&(T=Co(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(w=c_,C="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(w=d_,C="onPointerLeave",b="onPointerEnter",_="pointer"),T=m==null?p:Xo(m),E=x==null?p:Xo(x),p=new w(C,_+"leave",m,n,d),p.target=T,p.relatedTarget=E,C=null,Qi(d)===c&&(w=new w(b,_+"enter",x,n,d),w.target=E,w.relatedTarget=T,C=w),T=C,m&&x)t:{for(w=m,b=x,_=0,E=w;E;E=Fo(E))_++;for(E=0,C=b;C;C=Fo(C))E++;for(;0<_-E;)w=Fo(w),_--;for(;0<E-_;)b=Fo(b),E--;for(;_--;){if(w===b||b!==null&&w===b.alternate)break t;w=Fo(w),b=Fo(b)}w=null}else w=null;m!==null&&b_(h,p,m,w,!1),x!==null&&T!==null&&b_(h,T,x,w,!0)}}e:{if(p=c?Xo(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=RL;else if(p_(p))if(YS)P=LL;else{P=NL;var M=PL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=DL);if(P&&(P=P(t,c))){QS(h,P,n,d);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&dg(p,"number",p.value)}switch(M=c?Xo(c):window,t){case"focusin":(p_(M)||M.contentEditable==="true")&&(Qo=M,Eg=c,Zl=null);break;case"focusout":Zl=Eg=Qo=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,w_(h,n,d);break;case"selectionchange":if(OL)break;case"keydown":case"keyup":w_(h,n,d)}var I;if(_v)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ko?GS(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(qS&&n.locale!=="ko"&&(Ko||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ko&&(I=HS()):(Ys=d,vv="value"in Ys?Ys.value:Ys.textContent,Ko=!0)),M=ah(c,S),0<M.length&&(S=new u_(S,t,null,n,d),h.push({event:S,listeners:M}),I?S.data=I:(I=KS(n),I!==null&&(S.data=I)))),(I=SL?IL(t,n):CL(t,n))&&(c=ah(c,"onBeforeInput"),0<c.length&&(d=new u_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}oI(h,e)})}function Ac(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ah(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=bc(t,n),i!=null&&r.unshift(Ac(t,i,s)),i=bc(t,e),i!=null&&r.push(Ac(t,i,s))),t=t.return}return r}function Fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=bc(n,i),l!=null&&o.unshift(Ac(n,l,a))):s||(l=bc(n,i),l!=null&&o.push(Ac(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BL=/\r\n?/g,$L=/\u0000|\uFFFD/g;function E_(t){return(typeof t=="string"?t:""+t).replace(BL,`
`).replace($L,"")}function rd(t,e,n){if(e=E_(e),E_(t)!==e&&n)throw Error(q(425))}function lh(){}var Sg=null,Ig=null;function Cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,zL=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,WL=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(t){return T_.resolve(null).then(t).catch(HL)}:kg;function HL(t){setTimeout(function(){throw t})}function tm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Sc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Sc(e)}function ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function S_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),Mr="__reactFiber$"+qa,Rc="__reactProps$"+qa,ys="__reactContainer$"+qa,Ag="__reactEvents$"+qa,qL="__reactListeners$"+qa,GL="__reactHandles$"+qa;function Qi(t){var e=t[Mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ys]||n[Mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=S_(t);t!==null;){if(n=t[Mr])return n;t=S_(t)}return e}t=n,n=t.parentNode}return null}function uu(t){return t=t[Mr]||t[ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function xf(t){return t[Rc]||null}var Rg=[],Jo=-1;function Ei(t){return{current:t}}function We(t){0>Jo||(t.current=Rg[Jo],Rg[Jo]=null,Jo--)}function Ue(t,e){Jo++,Rg[Jo]=t.current,t.current=e}var hi={},nn=Ei(hi),En=Ei(!1),uo=hi;function Ia(t,e){var n=t.type.contextTypes;if(!n)return hi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tn(t){return t=t.childContextTypes,t!=null}function ch(){We(En),We(nn)}function I_(t,e,n){if(nn.current!==hi)throw Error(q(168));Ue(nn,e),Ue(En,n)}function lI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,PD(t)||"Unknown",s));return tt({},n,r)}function uh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hi,uo=nn.current,Ue(nn,t),Ue(En,En.current),!0}function C_(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=lI(t,e,uo),r.__reactInternalMemoizedMergedChildContext=t,We(En),We(nn),Ue(nn,t)):We(En),Ue(En,n)}var ss=null,_f=!1,nm=!1;function cI(t){ss===null?ss=[t]:ss.push(t)}function KL(t){_f=!0,cI(t)}function Ti(){if(!nm&&ss!==null){nm=!0;var t=0,e=De;try{var n=ss;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ss=null,_f=!1}catch(s){throw ss!==null&&(ss=ss.slice(t+1)),LS(pv,Ti),s}finally{De=e,nm=!1}}return null}var Zo=[],ea=0,dh=null,hh=0,Xn=[],Jn=0,ho=null,os=1,as="";function Wi(t,e){Zo[ea++]=hh,Zo[ea++]=dh,dh=t,hh=e}function uI(t,e,n){Xn[Jn++]=os,Xn[Jn++]=as,Xn[Jn++]=ho,ho=t;var r=os;t=as;var s=32-yr(r)-1;r&=~(1<<s),n+=1;var i=32-yr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,os=1<<32-yr(e)+s|n<<s|r,as=i+t}else os=1<<i|n<<s|r,as=t}function Ev(t){t.return!==null&&(Wi(t,1),uI(t,1,0))}function Tv(t){for(;t===dh;)dh=Zo[--ea],Zo[ea]=null,hh=Zo[--ea],Zo[ea]=null;for(;t===ho;)ho=Xn[--Jn],Xn[Jn]=null,as=Xn[--Jn],Xn[Jn]=null,os=Xn[--Jn],Xn[Jn]=null}var On=null,Ln=null,Ge=!1,mr=null;function dI(t,e){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function k_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,On=t,Ln=ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,On=t,Ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ho!==null?{id:os,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,On=t,Ln=null,!0):!1;default:return!1}}function Pg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ng(t){if(Ge){var e=Ln;if(e){var n=e;if(!k_(t,e)){if(Pg(t))throw Error(q(418));e=ni(n.nextSibling);var r=On;e&&k_(t,e)?dI(r,n):(t.flags=t.flags&-4097|2,Ge=!1,On=t)}}else{if(Pg(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ge=!1,On=t}}}function A_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;On=t}function sd(t){if(t!==On)return!1;if(!Ge)return A_(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cg(t.type,t.memoizedProps)),e&&(e=Ln)){if(Pg(t))throw hI(),Error(q(418));for(;e;)dI(t,e),e=ni(e.nextSibling)}if(A_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ln=ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ln=null}}else Ln=On?ni(t.stateNode.nextSibling):null;return!0}function hI(){for(var t=Ln;t;)t=ni(t.nextSibling)}function Ca(){Ln=On=null,Ge=!1}function Sv(t){mr===null?mr=[t]:mr.push(t)}var QL=Cs.ReactCurrentBatchConfig;function Cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function id(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R_(t){var e=t._init;return e(t._payload)}function fI(t){function e(b,_){if(t){var E=b.deletions;E===null?(b.deletions=[_],b.flags|=16):E.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=oi(b,_),b.index=0,b.sibling=null,b}function i(b,_,E){return b.index=E,t?(E=b.alternate,E!==null?(E=E.index,E<_?(b.flags|=2,_):E):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,_,E,C){return _===null||_.tag!==6?(_=cm(E,b.mode,C),_.return=b,_):(_=s(_,E),_.return=b,_)}function l(b,_,E,C){var P=E.type;return P===Go?d(b,_,E.props.children,C,E.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Us&&R_(P)===_.type)?(C=s(_,E.props),C.ref=Cl(b,_,E),C.return=b,C):(C=Vd(E.type,E.key,E.props,null,b.mode,C),C.ref=Cl(b,_,E),C.return=b,C)}function c(b,_,E,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=um(E,b.mode,C),_.return=b,_):(_=s(_,E.children||[]),_.return=b,_)}function d(b,_,E,C,P){return _===null||_.tag!==7?(_=ro(E,b.mode,C,P),_.return=b,_):(_=s(_,E),_.return=b,_)}function h(b,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=cm(""+_,b.mode,E),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ku:return E=Vd(_.type,_.key,_.props,null,b.mode,E),E.ref=Cl(b,null,_),E.return=b,E;case qo:return _=um(_,b.mode,E),_.return=b,_;case Us:var C=_._init;return h(b,C(_._payload),E)}if(Fl(_)||bl(_))return _=ro(_,b.mode,E,null),_.return=b,_;id(b,_)}return null}function p(b,_,E,C){var P=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return P!==null?null:a(b,_,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ku:return E.key===P?l(b,_,E,C):null;case qo:return E.key===P?c(b,_,E,C):null;case Us:return P=E._init,p(b,_,P(E._payload),C)}if(Fl(E)||bl(E))return P!==null?null:d(b,_,E,C,null);id(b,E)}return null}function m(b,_,E,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(E)||null,a(_,b,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ku:return b=b.get(C.key===null?E:C.key)||null,l(_,b,C,P);case qo:return b=b.get(C.key===null?E:C.key)||null,c(_,b,C,P);case Us:var M=C._init;return m(b,_,E,M(C._payload),P)}if(Fl(C)||bl(C))return b=b.get(E)||null,d(_,b,C,P,null);id(_,C)}return null}function x(b,_,E,C){for(var P=null,M=null,I=_,S=_=0,k=null;I!==null&&S<E.length;S++){I.index>S?(k=I,I=null):k=I.sibling;var R=p(b,I,E[S],C);if(R===null){I===null&&(I=k);break}t&&I&&R.alternate===null&&e(b,I),_=i(R,_,S),M===null?P=R:M.sibling=R,M=R,I=k}if(S===E.length)return n(b,I),Ge&&Wi(b,S),P;if(I===null){for(;S<E.length;S++)I=h(b,E[S],C),I!==null&&(_=i(I,_,S),M===null?P=I:M.sibling=I,M=I);return Ge&&Wi(b,S),P}for(I=r(b,I);S<E.length;S++)k=m(I,b,S,E[S],C),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?S:k.key),_=i(k,_,S),M===null?P=k:M.sibling=k,M=k);return t&&I.forEach(function(D){return e(b,D)}),Ge&&Wi(b,S),P}function w(b,_,E,C){var P=bl(E);if(typeof P!="function")throw Error(q(150));if(E=P.call(E),E==null)throw Error(q(151));for(var M=P=null,I=_,S=_=0,k=null,R=E.next();I!==null&&!R.done;S++,R=E.next()){I.index>S?(k=I,I=null):k=I.sibling;var D=p(b,I,R.value,C);if(D===null){I===null&&(I=k);break}t&&I&&D.alternate===null&&e(b,I),_=i(D,_,S),M===null?P=D:M.sibling=D,M=D,I=k}if(R.done)return n(b,I),Ge&&Wi(b,S),P;if(I===null){for(;!R.done;S++,R=E.next())R=h(b,R.value,C),R!==null&&(_=i(R,_,S),M===null?P=R:M.sibling=R,M=R);return Ge&&Wi(b,S),P}for(I=r(b,I);!R.done;S++,R=E.next())R=m(I,b,S,R.value,C),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?S:R.key),_=i(R,_,S),M===null?P=R:M.sibling=R,M=R);return t&&I.forEach(function(O){return e(b,O)}),Ge&&Wi(b,S),P}function T(b,_,E,C){if(typeof E=="object"&&E!==null&&E.type===Go&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ku:e:{for(var P=E.key,M=_;M!==null;){if(M.key===P){if(P=E.type,P===Go){if(M.tag===7){n(b,M.sibling),_=s(M,E.props.children),_.return=b,b=_;break e}}else if(M.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Us&&R_(P)===M.type){n(b,M.sibling),_=s(M,E.props),_.ref=Cl(b,M,E),_.return=b,b=_;break e}n(b,M);break}else e(b,M);M=M.sibling}E.type===Go?(_=ro(E.props.children,b.mode,C,E.key),_.return=b,b=_):(C=Vd(E.type,E.key,E.props,null,b.mode,C),C.ref=Cl(b,_,E),C.return=b,b=C)}return o(b);case qo:e:{for(M=E.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(b,_.sibling),_=s(_,E.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=um(E,b.mode,C),_.return=b,b=_}return o(b);case Us:return M=E._init,T(b,_,M(E._payload),C)}if(Fl(E))return x(b,_,E,C);if(bl(E))return w(b,_,E,C);id(b,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(b,_.sibling),_=s(_,E),_.return=b,b=_):(n(b,_),_=cm(E,b.mode,C),_.return=b,b=_),o(b)):n(b,_)}return T}var ka=fI(!0),pI=fI(!1),fh=Ei(null),ph=null,ta=null,Iv=null;function Cv(){Iv=ta=ph=null}function kv(t){var e=fh.current;We(fh),t._currentValue=e}function Dg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ya(t,e){ph=t,Iv=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function nr(t){var e=t._currentValue;if(Iv!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(ph===null)throw Error(q(308));ta=t,ph.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var Yi=null;function Av(t){Yi===null?Yi=[t]:Yi.push(t)}function mI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Av(e)):(n.next=s.next,s.next=n),e.interleaved=n,vs(t,r)}function vs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bs=!1;function Rv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vs(t,n)}return s=r.interleaved,s===null?(e.next=e,Av(r)):(e.next=s.next,s.next=e),r.interleaved=e,vs(t,n)}function Nd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mv(t,n)}}function P_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mh(t,e,n,r){var s=t.updateQueue;Bs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,w=a;switch(p=e,m=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(m,h,p);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,p=typeof x=="function"?x.call(m,h,p):x,p==null)break e;h=tt({},h,p);break e;case 2:Bs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);po|=o,t.lanes=o,t.memoizedState=h}}function N_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var du={},Ur=Ei(du),Pc=Ei(du),Nc=Ei(du);function Xi(t){if(t===du)throw Error(q(174));return t}function Pv(t,e){switch(Ue(Nc,e),Ue(Pc,t),Ue(Ur,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fg(e,t)}We(Ur),Ue(Ur,e)}function Aa(){We(Ur),We(Pc),We(Nc)}function yI(t){Xi(Nc.current);var e=Xi(Ur.current),n=fg(e,t.type);e!==n&&(Ue(Pc,t),Ue(Ur,n))}function Nv(t){Pc.current===t&&(We(Ur),We(Pc))}var Ye=Ei(0);function gh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rm=[];function Dv(){for(var t=0;t<rm.length;t++)rm[t]._workInProgressVersionPrimary=null;rm.length=0}var Dd=Cs.ReactCurrentDispatcher,sm=Cs.ReactCurrentBatchConfig,fo=0,Ze=null,_t=null,Pt=null,yh=!1,ec=!1,Dc=0,YL=0;function Wt(){throw Error(q(321))}function Lv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!br(t[n],e[n]))return!1;return!0}function jv(t,e,n,r,s,i){if(fo=i,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dd.current=t===null||t.memoizedState===null?ej:tj,t=n(r,s),ec){i=0;do{if(ec=!1,Dc=0,25<=i)throw Error(q(301));i+=1,Pt=_t=null,e.updateQueue=null,Dd.current=nj,t=n(r,s)}while(ec)}if(Dd.current=vh,e=_t!==null&&_t.next!==null,fo=0,Pt=_t=Ze=null,yh=!1,e)throw Error(q(300));return t}function Mv(){var t=Dc!==0;return Dc=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ze.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function rr(){if(_t===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Pt===null?Ze.memoizedState:Pt.next;if(e!==null)Pt=e,_t=t;else{if(t===null)throw Error(q(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Pt===null?Ze.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Lc(t,e){return typeof e=="function"?e(t):e}function im(t){var e=rr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=_t,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((fo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ze.lanes|=d,po|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,br(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ze.lanes|=i,po|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function om(t){var e=rr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);br(i,e.memoizedState)||(_n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function vI(){}function wI(t,e){var n=Ze,r=rr(),s=e(),i=!br(r.memoizedState,s);if(i&&(r.memoizedState=s,_n=!0),r=r.queue,Ov(bI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,jc(9,_I.bind(null,n,r,s,e),void 0,null),Lt===null)throw Error(q(349));fo&30||xI(n,e,s)}return s}function xI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _I(t,e,n,r){e.value=n,e.getSnapshot=r,EI(e)&&TI(t)}function bI(t,e,n){return n(function(){EI(e)&&TI(t)})}function EI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!br(t,n)}catch{return!0}}function TI(t){var e=vs(t,1);e!==null&&vr(e,t,1,-1)}function D_(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:t},e.queue=t,t=t.dispatch=ZL.bind(null,Ze,t),[e.memoizedState,t]}function jc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function SI(){return rr().memoizedState}function Ld(t,e,n,r){var s=Lr();Ze.flags|=t,s.memoizedState=jc(1|e,n,void 0,r===void 0?null:r)}function bf(t,e,n,r){var s=rr();r=r===void 0?null:r;var i=void 0;if(_t!==null){var o=_t.memoizedState;if(i=o.destroy,r!==null&&Lv(r,o.deps)){s.memoizedState=jc(e,n,i,r);return}}Ze.flags|=t,s.memoizedState=jc(1|e,n,i,r)}function L_(t,e){return Ld(8390656,8,t,e)}function Ov(t,e){return bf(2048,8,t,e)}function II(t,e){return bf(4,2,t,e)}function CI(t,e){return bf(4,4,t,e)}function kI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AI(t,e,n){return n=n!=null?n.concat([t]):null,bf(4,4,kI.bind(null,e,t),n)}function Vv(){}function RI(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PI(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function NI(t,e,n){return fo&21?(br(n,e)||(n=OS(),Ze.lanes|=n,po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function XL(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=sm.transition;sm.transition={};try{t(!1),e()}finally{De=n,sm.transition=r}}function DI(){return rr().memoizedState}function JL(t,e,n){var r=ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},LI(t))jI(e,n);else if(n=mI(t,e,n,r),n!==null){var s=dn();vr(n,t,r,s),MI(n,e,r)}}function ZL(t,e,n){var r=ii(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(LI(t))jI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,br(a,o)){var l=e.interleaved;l===null?(s.next=s,Av(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=mI(t,e,s,r),n!==null&&(s=dn(),vr(n,t,r,s),MI(n,e,r))}}function LI(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function jI(t,e){ec=yh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mv(t,n)}}var vh={readContext:nr,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},ej={readContext:nr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:nr,useEffect:L_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ld(4194308,4,kI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ld(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ld(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JL.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:D_,useDebugValue:Vv,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=D_(!1),e=t[0];return t=XL.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,s=Lr();if(Ge){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Lt===null)throw Error(q(349));fo&30||xI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,L_(bI.bind(null,r,i,t),[t]),r.flags|=2048,jc(9,_I.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lr(),e=Lt.identifierPrefix;if(Ge){var n=as,r=os;n=(r&~(1<<32-yr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tj={readContext:nr,useCallback:RI,useContext:nr,useEffect:Ov,useImperativeHandle:AI,useInsertionEffect:II,useLayoutEffect:CI,useMemo:PI,useReducer:im,useRef:SI,useState:function(){return im(Lc)},useDebugValue:Vv,useDeferredValue:function(t){var e=rr();return NI(e,_t.memoizedState,t)},useTransition:function(){var t=im(Lc)[0],e=rr().memoizedState;return[t,e]},useMutableSource:vI,useSyncExternalStore:wI,useId:DI,unstable_isNewReconciler:!1},nj={readContext:nr,useCallback:RI,useContext:nr,useEffect:Ov,useImperativeHandle:AI,useInsertionEffect:II,useLayoutEffect:CI,useMemo:PI,useReducer:om,useRef:SI,useState:function(){return om(Lc)},useDebugValue:Vv,useDeferredValue:function(t){var e=rr();return _t===null?e.memoizedState=t:NI(e,_t.memoizedState,t)},useTransition:function(){var t=om(Lc)[0],e=rr().memoizedState;return[t,e]},useMutableSource:vI,useSyncExternalStore:wI,useId:DI,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ef={isMounted:function(t){return(t=t._reactInternals)?Co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),s=ii(t),i=us(r,s);i.payload=e,n!=null&&(i.callback=n),e=ri(t,i,s),e!==null&&(vr(e,t,s,r),Nd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),s=ii(t),i=us(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ri(t,i,s),e!==null&&(vr(e,t,s,r),Nd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=ii(t),s=us(n,r);s.tag=2,e!=null&&(s.callback=e),e=ri(t,s,r),e!==null&&(vr(e,t,r,n),Nd(e,t,r))}};function j_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Cc(n,r)||!Cc(s,i):!0}function OI(t,e,n){var r=!1,s=hi,i=e.contextType;return typeof i=="object"&&i!==null?i=nr(i):(s=Tn(e)?uo:nn.current,r=e.contextTypes,i=(r=r!=null)?Ia(t,s):hi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ef,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function M_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ef.enqueueReplaceState(e,e.state,null)}function jg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Rv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nr(i):(i=Tn(e)?uo:nn.current,s.context=Ia(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ef.enqueueReplaceState(s,s.state,null),mh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var n="",r=e;do n+=RD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function am(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rj=typeof WeakMap=="function"?WeakMap:Map;function VI(t,e,n){n=us(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xh||(xh=!0,qg=r),Mg(t,e)},n}function FI(t,e,n){n=us(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mg(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function O_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=yj.bind(null,t,e,n),e.then(t,t))}function V_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function F_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=us(-1,1),e.tag=2,ri(n,e,1))),n.lanes|=1),t)}var sj=Cs.ReactCurrentOwner,_n=!1;function cn(t,e,n,r){e.child=t===null?pI(e,null,n,r):ka(e,t.child,n,r)}function U_(t,e,n,r,s){n=n.render;var i=e.ref;return ya(e,s),r=jv(t,e,n,r,i,s),n=Mv(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(Ge&&n&&Ev(e),e.flags|=1,cn(t,e,r,s),e.child)}function B_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!qv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,UI(t,e,i,r,s)):(t=Vd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Cc,n(o,r)&&t.ref===e.ref)return ws(t,e,s)}return e.flags|=1,t=oi(i,r),t.ref=e.ref,t.return=e,e.child=t}function UI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Cc(i,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,ws(t,e,s)}return Og(t,e,n,r,s)}function BI(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(ra,Pn),Pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(ra,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ue(ra,Pn),Pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ue(ra,Pn),Pn|=r;return cn(t,e,s,n),e.child}function $I(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Og(t,e,n,r,s){var i=Tn(n)?uo:nn.current;return i=Ia(e,i),ya(e,s),n=jv(t,e,n,r,i,s),r=Mv(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(Ge&&r&&Ev(e),e.flags|=1,cn(t,e,n,s),e.child)}function $_(t,e,n,r,s){if(Tn(n)){var i=!0;uh(e)}else i=!1;if(ya(e,s),e.stateNode===null)jd(t,e),OI(e,n,r),jg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=nr(c):(c=Tn(n)?uo:nn.current,c=Ia(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&M_(e,o,r,c),Bs=!1;var p=e.memoizedState;o.state=p,mh(e,r,o,s),l=e.memoizedState,a!==r||p!==l||En.current||Bs?(typeof d=="function"&&(Lg(e,n,d,r),l=e.memoizedState),(a=Bs||j_(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fr(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nr(l):(l=Tn(n)?uo:nn.current,l=Ia(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&M_(e,o,r,l),Bs=!1,p=e.memoizedState,o.state=p,mh(e,r,o,s);var x=e.memoizedState;a!==h||p!==x||En.current||Bs?(typeof m=="function"&&(Lg(e,n,m,r),x=e.memoizedState),(c=Bs||j_(e,n,c,r,p,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Vg(t,e,n,r,i,s)}function Vg(t,e,n,r,s,i){$I(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&C_(e,n,!1),ws(t,e,i);r=e.stateNode,sj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ka(e,t.child,null,i),e.child=ka(e,null,a,i)):cn(t,e,a,i),e.memoizedState=r.state,s&&C_(e,n,!0),e.child}function zI(t){var e=t.stateNode;e.pendingContext?I_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&I_(t,e.context,!1),Pv(t,e.containerInfo)}function z_(t,e,n,r,s){return Ca(),Sv(s),e.flags|=256,cn(t,e,n,r),e.child}var Fg={dehydrated:null,treeContext:null,retryLane:0};function Ug(t){return{baseLanes:t,cachePool:null,transitions:null}}function WI(t,e,n){var r=e.pendingProps,s=Ye.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ue(Ye,s&1),t===null)return Ng(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=If(o,r,0,null),t=ro(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ug(n),e.memoizedState=Fg,t):Fv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ij(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=oi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=oi(a,i):(i=ro(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ug(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Fg,r}return i=t.child,t=i.sibling,r=oi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fv(t,e){return e=If({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function od(t,e,n,r){return r!==null&&Sv(r),ka(e,t.child,null,n),t=Fv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ij(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=am(Error(q(422))),od(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=If({mode:"visible",children:r.children},s,0,null),i=ro(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ka(e,t.child,null,o),e.child.memoizedState=Ug(o),e.memoizedState=Fg,i);if(!(e.mode&1))return od(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(q(419)),r=am(i,r,void 0),od(t,e,o,r)}if(a=(o&t.childLanes)!==0,_n||a){if(r=Lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vs(t,s),vr(r,t,s,-1))}return Hv(),r=am(Error(q(421))),od(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=vj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ln=ni(s.nextSibling),On=e,Ge=!0,mr=null,t!==null&&(Xn[Jn++]=os,Xn[Jn++]=as,Xn[Jn++]=ho,os=t.id,as=t.overflow,ho=e),e=Fv(e,r.children),e.flags|=4096,e)}function W_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dg(t.return,e,n)}function lm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function HI(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cn(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&W_(t,n,e);else if(t.tag===19)W_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ue(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lm(e,!0,n,null,i);break;case"together":lm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ws(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oj(t,e,n){switch(e.tag){case 3:zI(e),Ca();break;case 5:yI(e);break;case 1:Tn(e.type)&&uh(e);break;case 4:Pv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ue(fh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?WI(t,e,n):(Ue(Ye,Ye.current&1),t=ws(t,e,n),t!==null?t.sibling:null);Ue(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ue(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,BI(t,e,n)}return ws(t,e,n)}var qI,Bg,GI,KI;qI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bg=function(){};GI=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xi(Ur.current);var i=null;switch(n){case"input":s=cg(t,s),r=cg(t,r),i=[];break;case"select":s=tt({},s,{value:void 0}),r=tt({},r,{value:void 0}),i=[];break;case"textarea":s=hg(t,s),r=hg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lh)}pg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ze("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};KI=function(t,e,n,r){n!==r&&(e.flags|=4)};function kl(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aj(t,e,n){var r=e.pendingProps;switch(Tv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return Tn(e.type)&&ch(),Ht(e),null;case 3:return r=e.stateNode,Aa(),We(En),We(nn),Dv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(Qg(mr),mr=null))),Bg(t,e),Ht(e),null;case 5:Nv(e);var s=Xi(Nc.current);if(n=e.type,t!==null&&e.stateNode!=null)GI(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Ht(e),null}if(t=Xi(Ur.current),sd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Mr]=e,r[Rc]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<Bl.length;s++)ze(Bl[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Zx(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":t_(r,i),ze("invalid",r)}pg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&rd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&rd(r.textContent,a,t),s=["children",""+a]):xc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Qu(r),e_(r,i,!0);break;case"textarea":Qu(r),n_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mr]=e,t[Rc]=r,qI(t,e,!1,!1),e.stateNode=t;e:{switch(o=mg(n,r),n){case"dialog":ze("cancel",t),ze("close",t),s=r;break;case"iframe":case"object":case"embed":ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bl.length;s++)ze(Bl[s],t);s=r;break;case"source":ze("error",t),s=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=r;break;case"details":ze("toggle",t),s=r;break;case"input":Zx(t,r),s=cg(t,r),ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=tt({},r,{value:void 0}),ze("invalid",t);break;case"textarea":t_(t,r),s=hg(t,r),ze("invalid",t);break;default:s=r}pg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?SS(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ES(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_c(t,l):typeof l=="number"&&_c(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ze("scroll",t):l!=null&&cv(t,i,l,o))}switch(n){case"input":Qu(t),e_(t,r,!1);break;case"textarea":Qu(t),n_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+di(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fa(t,!!r.multiple,i,!1):r.defaultValue!=null&&fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=lh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)KI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Xi(Nc.current),Xi(Ur.current),sd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mr]=e,(i=r.nodeValue!==n)&&(t=On,t!==null))switch(t.tag){case 3:rd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mr]=e,e.stateNode=r}return Ht(e),null;case 13:if(We(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&Ln!==null&&e.mode&1&&!(e.flags&128))hI(),Ca(),e.flags|=98560,i=!1;else if(i=sd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Mr]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),i=!1}else mr!==null&&(Qg(mr),mr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?Et===0&&(Et=3):Hv())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Aa(),Bg(t,e),t===null&&kc(e.stateNode.containerInfo),Ht(e),null;case 10:return kv(e.type._context),Ht(e),null;case 17:return Tn(e.type)&&ch(),Ht(e),null;case 19:if(We(Ye),i=e.memoizedState,i===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)kl(i,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gh(t),o!==null){for(e.flags|=128,kl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Ye,Ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&ht()>Pa&&(e.flags|=128,r=!0,kl(i,!1),e.lanes=4194304)}else{if(!r)if(t=gh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),kl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ge)return Ht(e),null}else 2*ht()-i.renderingStartTime>Pa&&n!==1073741824&&(e.flags|=128,r=!0,kl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ht(),e.sibling=null,n=Ye.current,Ue(Ye,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return Wv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function lj(t,e){switch(Tv(e),e.tag){case 1:return Tn(e.type)&&ch(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Aa(),We(En),We(nn),Dv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nv(e),null;case 13:if(We(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ye),null;case 4:return Aa(),null;case 10:return kv(e.type._context),null;case 22:case 23:return Wv(),null;case 24:return null;default:return null}}var ad=!1,Yt=!1,cj=typeof WeakSet=="function"?WeakSet:Set,Z=null;function na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(t,e,r)}else n.current=null}function $g(t,e,n){try{n()}catch(r){ot(t,e,r)}}var H_=!1;function uj(t,e){if(Sg=ih,t=ZS(),bv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ig={focusedElem:t,selectionRange:n},ih=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,T=x.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?w:fr(e.type,w),T);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(C){ot(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return x=H_,H_=!1,x}function tc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&$g(e,n,i)}s=s.next}while(s!==r)}}function Tf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QI(t){var e=t.alternate;e!==null&&(t.alternate=null,QI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mr],delete e[Rc],delete e[Ag],delete e[qL],delete e[GL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YI(t){return t.tag===5||t.tag===3||t.tag===4}function q_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lh));else if(r!==4&&(t=t.child,t!==null))for(Wg(t,e,n),t=t.sibling;t!==null;)Wg(t,e,n),t=t.sibling}function Hg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hg(t,e,n),t=t.sibling;t!==null;)Hg(t,e,n),t=t.sibling}var Ot=null,pr=!1;function js(t,e,n){for(n=n.child;n!==null;)XI(t,e,n),n=n.sibling}function XI(t,e,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(gf,n)}catch{}switch(n.tag){case 5:Yt||na(n,e);case 6:var r=Ot,s=pr;Ot=null,js(t,e,n),Ot=r,pr=s,Ot!==null&&(pr?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(pr?(t=Ot,n=n.stateNode,t.nodeType===8?tm(t.parentNode,n):t.nodeType===1&&tm(t,n),Sc(t)):tm(Ot,n.stateNode));break;case 4:r=Ot,s=pr,Ot=n.stateNode.containerInfo,pr=!0,js(t,e,n),Ot=r,pr=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&$g(n,e,o),s=s.next}while(s!==r)}js(t,e,n);break;case 1:if(!Yt&&(na(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ot(n,e,a)}js(t,e,n);break;case 21:js(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,js(t,e,n),Yt=r):js(t,e,n);break;default:js(t,e,n)}}function G_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cj),e.forEach(function(r){var s=wj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ot=a.stateNode,pr=!1;break e;case 3:Ot=a.stateNode.containerInfo,pr=!0;break e;case 4:Ot=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if(Ot===null)throw Error(q(160));XI(i,o,s),Ot=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ot(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JI(e,t),e=e.sibling}function JI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dr(e,t),Nr(t),r&4){try{tc(3,t,t.return),Tf(3,t)}catch(w){ot(t,t.return,w)}try{tc(5,t,t.return)}catch(w){ot(t,t.return,w)}}break;case 1:dr(e,t),Nr(t),r&512&&n!==null&&na(n,n.return);break;case 5:if(dr(e,t),Nr(t),r&512&&n!==null&&na(n,n.return),t.flags&32){var s=t.stateNode;try{_c(s,"")}catch(w){ot(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&xS(s,i),mg(a,o);var c=mg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?SS(s,h):d==="dangerouslySetInnerHTML"?ES(s,h):d==="children"?_c(s,h):cv(s,d,h,c)}switch(a){case"input":ug(s,i);break;case"textarea":_S(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?fa(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?fa(s,!!i.multiple,i.defaultValue,!0):fa(s,!!i.multiple,i.multiple?[]:"",!1))}s[Rc]=i}catch(w){ot(t,t.return,w)}}break;case 6:if(dr(e,t),Nr(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ot(t,t.return,w)}}break;case 3:if(dr(e,t),Nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sc(e.containerInfo)}catch(w){ot(t,t.return,w)}break;case 4:dr(e,t),Nr(t);break;case 13:dr(e,t),Nr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($v=ht())),r&4&&G_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(c=Yt)||d,dr(e,t),Yt=c):dr(e,t),Nr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Z=t,d=t.child;d!==null;){for(h=Z=d;Z!==null;){switch(p=Z,m=p.child,p.tag){case 0:case 11:case 14:case 15:tc(4,p,p.return);break;case 1:na(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){ot(r,n,w)}}break;case 5:na(p,p.return);break;case 22:if(p.memoizedState!==null){Q_(h);continue}}m!==null?(m.return=p,Z=m):Q_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TS("display",o))}catch(w){ot(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){ot(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dr(e,t),Nr(t),r&4&&G_(t);break;case 21:break;default:dr(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YI(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_c(s,""),r.flags&=-33);var i=q_(t);Hg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=q_(t);Wg(t,a,o);break;default:throw Error(q(161))}}catch(l){ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dj(t,e,n){Z=t,ZI(t)}function ZI(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ad;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Yt;a=ad;var c=Yt;if(ad=o,(Yt=l)&&!c)for(Z=s;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?Y_(s):l!==null?(l.return=o,Z=l):Y_(s);for(;i!==null;)Z=i,ZI(i),i=i.sibling;Z=s,ad=a,Yt=c}K_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):K_(t)}}function K_(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Tf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&N_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Sc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Yt||e.flags&512&&zg(e)}catch(p){ot(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Q_(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Y_(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tf(4,e)}catch(l){ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ot(e,s,l)}}var i=e.return;try{zg(e)}catch(l){ot(e,i,l)}break;case 5:var o=e.return;try{zg(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var hj=Math.ceil,wh=Cs.ReactCurrentDispatcher,Uv=Cs.ReactCurrentOwner,er=Cs.ReactCurrentBatchConfig,Ae=0,Lt=null,mt=null,Ut=0,Pn=0,ra=Ei(0),Et=0,Mc=null,po=0,Sf=0,Bv=0,nc=null,wn=null,$v=0,Pa=1/0,ns=null,xh=!1,qg=null,si=null,ld=!1,Xs=null,_h=0,rc=0,Gg=null,Md=-1,Od=0;function dn(){return Ae&6?ht():Md!==-1?Md:Md=ht()}function ii(t){return t.mode&1?Ae&2&&Ut!==0?Ut&-Ut:QL.transition!==null?(Od===0&&(Od=OS()),Od):(t=De,t!==0||(t=window.event,t=t===void 0?16:WS(t.type)),t):1}function vr(t,e,n,r){if(50<rc)throw rc=0,Gg=null,Error(q(185));lu(t,n,r),(!(Ae&2)||t!==Lt)&&(t===Lt&&(!(Ae&2)&&(Sf|=n),Et===4&&Ws(t,Ut)),Sn(t,r),n===1&&Ae===0&&!(e.mode&1)&&(Pa=ht()+500,_f&&Ti()))}function Sn(t,e){var n=t.callbackNode;QD(t,e);var r=sh(t,t===Lt?Ut:0);if(r===0)n!==null&&i_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&i_(n),e===1)t.tag===0?KL(X_.bind(null,t)):cI(X_.bind(null,t)),WL(function(){!(Ae&6)&&Ti()}),n=null;else{switch(VS(r)){case 1:n=pv;break;case 4:n=jS;break;case 16:n=rh;break;case 536870912:n=MS;break;default:n=rh}n=aC(n,eC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eC(t,e){if(Md=-1,Od=0,Ae&6)throw Error(q(327));var n=t.callbackNode;if(va()&&t.callbackNode!==n)return null;var r=sh(t,t===Lt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bh(t,r);else{e=r;var s=Ae;Ae|=2;var i=nC();(Lt!==t||Ut!==e)&&(ns=null,Pa=ht()+500,no(t,e));do try{mj();break}catch(a){tC(t,a)}while(!0);Cv(),wh.current=i,Ae=s,mt!==null?e=0:(Lt=null,Ut=0,e=Et)}if(e!==0){if(e===2&&(s=xg(t),s!==0&&(r=s,e=Kg(t,s))),e===1)throw n=Mc,no(t,0),Ws(t,r),Sn(t,ht()),n;if(e===6)Ws(t,r);else{if(s=t.current.alternate,!(r&30)&&!fj(s)&&(e=bh(t,r),e===2&&(i=xg(t),i!==0&&(r=i,e=Kg(t,i))),e===1))throw n=Mc,no(t,0),Ws(t,r),Sn(t,ht()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Hi(t,wn,ns);break;case 3:if(Ws(t,r),(r&130023424)===r&&(e=$v+500-ht(),10<e)){if(sh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kg(Hi.bind(null,t,wn,ns),e);break}Hi(t,wn,ns);break;case 4:if(Ws(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hj(r/1960))-r,10<r){t.timeoutHandle=kg(Hi.bind(null,t,wn,ns),r);break}Hi(t,wn,ns);break;case 5:Hi(t,wn,ns);break;default:throw Error(q(329))}}}return Sn(t,ht()),t.callbackNode===n?eC.bind(null,t):null}function Kg(t,e){var n=nc;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=bh(t,e),t!==2&&(e=wn,wn=n,e!==null&&Qg(e)),t}function Qg(t){wn===null?wn=t:wn.push.apply(wn,t)}function fj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!br(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ws(t,e){for(e&=~Bv,e&=~Sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yr(e),r=1<<n;t[n]=-1,e&=~r}}function X_(t){if(Ae&6)throw Error(q(327));va();var e=sh(t,0);if(!(e&1))return Sn(t,ht()),null;var n=bh(t,e);if(t.tag!==0&&n===2){var r=xg(t);r!==0&&(e=r,n=Kg(t,r))}if(n===1)throw n=Mc,no(t,0),Ws(t,e),Sn(t,ht()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hi(t,wn,ns),Sn(t,ht()),null}function zv(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(Pa=ht()+500,_f&&Ti())}}function mo(t){Xs!==null&&Xs.tag===0&&!(Ae&6)&&va();var e=Ae;Ae|=1;var n=er.transition,r=De;try{if(er.transition=null,De=1,t)return t()}finally{De=r,er.transition=n,Ae=e,!(Ae&6)&&Ti()}}function Wv(){Pn=ra.current,We(ra)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zL(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(Tv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ch();break;case 3:Aa(),We(En),We(nn),Dv();break;case 5:Nv(r);break;case 4:Aa();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:kv(r.type._context);break;case 22:case 23:Wv()}n=n.return}if(Lt=t,mt=t=oi(t.current,null),Ut=Pn=e,Et=0,Mc=null,Bv=Sf=po=0,wn=nc=null,Yi!==null){for(e=0;e<Yi.length;e++)if(n=Yi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Yi=null}return t}function tC(t,e){do{var n=mt;try{if(Cv(),Dd.current=vh,yh){for(var r=Ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yh=!1}if(fo=0,Pt=_t=Ze=null,ec=!1,Dc=0,Uv.current=null,n===null||n.return===null){Et=1,Mc=e,mt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=V_(o);if(m!==null){m.flags&=-257,F_(m,o,a,i,e),m.mode&1&&O_(i,c,e),e=m,l=c;var x=e.updateQueue;if(x===null){var w=new Set;w.add(l),e.updateQueue=w}else x.add(l);break e}else{if(!(e&1)){O_(i,c,e),Hv();break e}l=Error(q(426))}}else if(Ge&&a.mode&1){var T=V_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),F_(T,o,a,i,e),Sv(Ra(l,a));break e}}i=l=Ra(l,a),Et!==4&&(Et=2),nc===null?nc=[i]:nc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=VI(i,l,e);P_(i,b);break e;case 1:a=l;var _=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(si===null||!si.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=FI(i,a,e);P_(i,C);break e}}i=i.return}while(i!==null)}sC(n)}catch(P){e=P,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function nC(){var t=wh.current;return wh.current=vh,t===null?vh:t}function Hv(){(Et===0||Et===3||Et===2)&&(Et=4),Lt===null||!(po&268435455)&&!(Sf&268435455)||Ws(Lt,Ut)}function bh(t,e){var n=Ae;Ae|=2;var r=nC();(Lt!==t||Ut!==e)&&(ns=null,no(t,e));do try{pj();break}catch(s){tC(t,s)}while(!0);if(Cv(),Ae=n,wh.current=r,mt!==null)throw Error(q(261));return Lt=null,Ut=0,Et}function pj(){for(;mt!==null;)rC(mt)}function mj(){for(;mt!==null&&!UD();)rC(mt)}function rC(t){var e=oC(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?sC(t):mt=e,Uv.current=null}function sC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lj(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,mt=null;return}}else if(n=aj(n,e,Pn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);Et===0&&(Et=5)}function Hi(t,e,n){var r=De,s=er.transition;try{er.transition=null,De=1,gj(t,e,n,r)}finally{er.transition=s,De=r}return null}function gj(t,e,n,r){do va();while(Xs!==null);if(Ae&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(YD(t,i),t===Lt&&(mt=Lt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ld||(ld=!0,aC(rh,function(){return va(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=er.transition,er.transition=null;var o=De;De=1;var a=Ae;Ae|=4,Uv.current=null,uj(t,n),JI(n,t),ML(Ig),ih=!!Sg,Ig=Sg=null,t.current=n,dj(n),BD(),Ae=a,De=o,er.transition=i}else t.current=n;if(ld&&(ld=!1,Xs=t,_h=s),i=t.pendingLanes,i===0&&(si=null),WD(n.stateNode),Sn(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xh)throw xh=!1,t=qg,qg=null,t;return _h&1&&t.tag!==0&&va(),i=t.pendingLanes,i&1?t===Gg?rc++:(rc=0,Gg=t):rc=0,Ti(),null}function va(){if(Xs!==null){var t=VS(_h),e=er.transition,n=De;try{if(er.transition=null,De=16>t?16:t,Xs===null)var r=!1;else{if(t=Xs,Xs=null,_h=0,Ae&6)throw Error(q(331));var s=Ae;for(Ae|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Z=c;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:tc(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var p=d.sibling,m=d.return;if(QI(d),d===c){Z=null;break}if(p!==null){p.return=m,Z=p;break}Z=m}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:tc(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Z=b;break e}Z=i.return}}var _=t.current;for(Z=_;Z!==null;){o=Z;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Z=E;else e:for(o=_;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tf(9,a)}}catch(P){ot(a,a.return,P)}if(a===o){Z=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Z=C;break e}Z=a.return}}if(Ae=s,Ti(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(gf,t)}catch{}r=!0}return r}finally{De=n,er.transition=e}}return!1}function J_(t,e,n){e=Ra(n,e),e=VI(t,e,1),t=ri(t,e,1),e=dn(),t!==null&&(lu(t,1,e),Sn(t,e))}function ot(t,e,n){if(t.tag===3)J_(t,t,n);else for(;e!==null;){if(e.tag===3){J_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=Ra(n,t),t=FI(e,t,1),e=ri(e,t,1),t=dn(),e!==null&&(lu(e,1,t),Sn(e,t));break}}e=e.return}}function yj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Ut&n)===n&&(Et===4||Et===3&&(Ut&130023424)===Ut&&500>ht()-$v?no(t,0):Bv|=n),Sn(t,e)}function iC(t,e){e===0&&(t.mode&1?(e=Ju,Ju<<=1,!(Ju&130023424)&&(Ju=4194304)):e=1);var n=dn();t=vs(t,e),t!==null&&(lu(t,e,n),Sn(t,n))}function vj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iC(t,n)}function wj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),iC(t,n)}var oC;oC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,oj(t,e,n);_n=!!(t.flags&131072)}else _n=!1,Ge&&e.flags&1048576&&uI(e,hh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jd(t,e),t=e.pendingProps;var s=Ia(e,nn.current);ya(e,n),s=jv(null,e,r,t,s,n);var i=Mv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(r)?(i=!0,uh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rv(e),s.updater=Ef,e.stateNode=s,s._reactInternals=e,jg(e,r,t,n),e=Vg(null,e,r,!0,i,n)):(e.tag=0,Ge&&i&&Ev(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_j(r),t=fr(r,t),s){case 0:e=Og(null,e,r,t,n);break e;case 1:e=$_(null,e,r,t,n);break e;case 11:e=U_(null,e,r,t,n);break e;case 14:e=B_(null,e,r,fr(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),Og(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),$_(t,e,r,s,n);case 3:e:{if(zI(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,gI(t,e),mh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ra(Error(q(423)),e),e=z_(t,e,r,n,s);break e}else if(r!==s){s=Ra(Error(q(424)),e),e=z_(t,e,r,n,s);break e}else for(Ln=ni(e.stateNode.containerInfo.firstChild),On=e,Ge=!0,mr=null,n=pI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===s){e=ws(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return yI(e),t===null&&Ng(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Cg(r,s)?o=null:i!==null&&Cg(r,i)&&(e.flags|=32),$I(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&Ng(e),null;case 13:return WI(t,e,n);case 4:return Pv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ka(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),U_(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ue(fh,r._currentValue),r._currentValue=o,i!==null)if(br(i.value,o)){if(i.children===s.children&&!En.current){e=ws(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=us(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Dg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Dg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ya(e,n),s=nr(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=fr(r,e.pendingProps),s=fr(r.type,s),B_(t,e,r,s,n);case 15:return UI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),jd(t,e),e.tag=1,Tn(r)?(t=!0,uh(e)):t=!1,ya(e,n),OI(e,r,s),jg(e,r,s,n),Vg(null,e,r,!0,t,n);case 19:return HI(t,e,n);case 22:return BI(t,e,n)}throw Error(q(156,e.tag))};function aC(t,e){return LS(t,e)}function xj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,e,n,r){return new xj(t,e,n,r)}function qv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _j(t){if(typeof t=="function")return qv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dv)return 11;if(t===hv)return 14}return 2}function oi(t,e){var n=t.alternate;return n===null?(n=Zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")qv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Go:return ro(n.children,s,i,e);case uv:o=8,s|=8;break;case ig:return t=Zn(12,n,e,s|2),t.elementType=ig,t.lanes=i,t;case og:return t=Zn(13,n,e,s),t.elementType=og,t.lanes=i,t;case ag:return t=Zn(19,n,e,s),t.elementType=ag,t.lanes=i,t;case yS:return If(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mS:o=10;break e;case gS:o=9;break e;case dv:o=11;break e;case hv:o=14;break e;case Us:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Zn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ro(t,e,n,r){return t=Zn(7,t,r,e),t.lanes=n,t}function If(t,e,n,r){return t=Zn(22,t,r,e),t.elementType=yS,t.lanes=n,t.stateNode={isHidden:!1},t}function cm(t,e,n){return t=Zn(6,t,null,e),t.lanes=n,t}function um(t,e,n){return e=Zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wp(0),this.expirationTimes=Wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gv(t,e,n,r,s,i,o,a,l){return t=new bj(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rv(i),t}function Ej(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lC(t){if(!t)return hi;t=t._reactInternals;e:{if(Co(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Tn(n))return lI(t,n,e)}return e}function cC(t,e,n,r,s,i,o,a,l){return t=Gv(n,r,!0,t,s,i,o,a,l),t.context=lC(null),n=t.current,r=dn(),s=ii(n),i=us(r,s),i.callback=e??null,ri(n,i,s),t.current.lanes=s,lu(t,s,r),Sn(t,r),t}function Cf(t,e,n,r){var s=e.current,i=dn(),o=ii(s);return n=lC(n),e.context===null?e.context=n:e.pendingContext=n,e=us(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ri(s,e,o),t!==null&&(vr(t,s,o,i),Nd(t,s,o)),o}function Eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Z_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kv(t,e){Z_(t,e),(t=t.alternate)&&Z_(t,e)}function Tj(){return null}var uC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qv(t){this._internalRoot=t}kf.prototype.render=Qv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Cf(t,e,null,null)};kf.prototype.unmount=Qv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mo(function(){Cf(null,t,null,null)}),e[ys]=null}};function kf(t){this._internalRoot=t}kf.prototype.unstable_scheduleHydration=function(t){if(t){var e=BS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zs.length&&e!==0&&e<zs[n].priority;n++);zs.splice(n,0,t),n===0&&zS(t)}};function Yv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eb(){}function Sj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Eh(o);i.call(c)}}var o=cC(e,r,t,0,null,!1,!1,"",eb);return t._reactRootContainer=o,t[ys]=o.current,kc(t.nodeType===8?t.parentNode:t),mo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Eh(l);a.call(c)}}var l=Gv(t,0,!1,null,null,!1,!1,"",eb);return t._reactRootContainer=l,t[ys]=l.current,kc(t.nodeType===8?t.parentNode:t),mo(function(){Cf(e,l,n,r)}),l}function Rf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Eh(o);a.call(l)}}Cf(e,o,t,s)}else o=Sj(n,e,t,s,r);return Eh(o)}FS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ul(e.pendingLanes);n!==0&&(mv(e,n|1),Sn(e,ht()),!(Ae&6)&&(Pa=ht()+500,Ti()))}break;case 13:mo(function(){var r=vs(t,1);if(r!==null){var s=dn();vr(r,t,1,s)}}),Kv(t,1)}};gv=function(t){if(t.tag===13){var e=vs(t,134217728);if(e!==null){var n=dn();vr(e,t,134217728,n)}Kv(t,134217728)}};US=function(t){if(t.tag===13){var e=ii(t),n=vs(t,e);if(n!==null){var r=dn();vr(n,t,e,r)}Kv(t,e)}};BS=function(){return De};$S=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};yg=function(t,e,n){switch(e){case"input":if(ug(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xf(r);if(!s)throw Error(q(90));wS(r),ug(r,s)}}}break;case"textarea":_S(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};kS=zv;AS=mo;var Ij={usingClientEntryPoint:!1,Events:[uu,Xo,xf,IS,CS,zv]},Al={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cj={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NS(t),t===null?null:t.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance||Tj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{gf=cd.inject(Cj),Fr=cd}catch{}}zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ij;zn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yv(e))throw Error(q(200));return Ej(t,e,null,n)};zn.createRoot=function(t,e){if(!Yv(t))throw Error(q(299));var n=!1,r="",s=uC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gv(t,1,!1,null,null,n,!1,r,s),t[ys]=e.current,kc(t.nodeType===8?t.parentNode:t),new Qv(e)};zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=NS(e),t=t===null?null:t.stateNode,t};zn.flushSync=function(t){return mo(t)};zn.hydrate=function(t,e,n){if(!Af(e))throw Error(q(200));return Rf(null,t,e,!0,n)};zn.hydrateRoot=function(t,e,n){if(!Yv(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=uC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cC(e,null,t,1,n??null,s,!1,i,o),t[ys]=e.current,kc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new kf(e)};zn.render=function(t,e,n){if(!Af(e))throw Error(q(200));return Rf(null,t,e,!1,n)};zn.unmountComponentAtNode=function(t){if(!Af(t))throw Error(q(40));return t._reactRootContainer?(mo(function(){Rf(null,null,t,!1,function(){t._reactRootContainer=null,t[ys]=null})}),!0):!1};zn.unstable_batchedUpdates=zv;zn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Af(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Rf(t,e,n,!1,r)};zn.version="18.3.1-next-f1338f8080-20240426";function dC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dC)}catch(t){console.error(t)}}dC(),dS.exports=zn;var sa=dS.exports,tb=sa;rg.createRoot=tb.createRoot,rg.hydrateRoot=tb.hydrateRoot;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var nb="popstate";function kj(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Yg("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Oc(s)}return Rj(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Un(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Aj(){return Math.random().toString(36).substring(2,10)}function rb(t,e){return{usr:t.state,key:t.key,idx:e}}function Yg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ga(e):e,state:n,key:e&&e.key||r||Aj()}}function Oc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Rj(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let T=d(),b=T==null?null:T-c;c=T,l&&l({action:a,location:w.location,delta:b})}function p(T,b){a="PUSH";let _=Yg(w.location,T,b);c=d()+1;let E=rb(_,c),C=w.createHref(_);try{o.pushState(E,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(C)}i&&l&&l({action:a,location:w.location,delta:1})}function m(T,b){a="REPLACE";let _=Yg(w.location,T,b);c=d();let E=rb(_,c),C=w.createHref(_);o.replaceState(E,"",C),i&&l&&l({action:a,location:w.location,delta:0})}function x(T){return Pj(T)}let w={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(nb,h),l=T,()=>{s.removeEventListener(nb,h),l=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let b=x(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(T){return o.go(T)}};return w}function Pj(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Oc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function hC(t,e,n="/"){return Nj(t,e,n,!1)}function Nj(t,e,n,r){let s=typeof e=="string"?Ga(e):e,i=xs(s.pathname||"/",n);if(i==null)return null;let o=fC(t);Dj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Wj(i);a=$j(o[l],c,r)}return a}function fC(t,e=[],n=[],r="",s=!1){let i=(o,a,l=s,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;Ke(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=ds([r,d.relativePath]),p=n.concat(d);o.children&&o.children.length>0&&(Ke(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),fC(o.children,e,p,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:Uj(h,o.index),routesMeta:p})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of pC(o.path))i(o,a,!0,c)}),e}function pC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=pC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Dj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Bj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Lj=/^:[\w-]+$/,jj=3,Mj=2,Oj=1,Vj=10,Fj=-2,sb=t=>t==="*";function Uj(t,e){let n=t.split("/"),r=n.length;return n.some(sb)&&(r+=Fj),e&&(r+=Mj),n.filter(s=>!sb(s)).reduce((s,i)=>s+(Lj.test(i)?jj:i===""?Oj:Vj),r)}function Bj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function $j(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Th({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Th({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ds([i,h.pathname]),pathnameBase:Kj(ds([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=ds([i,h.pathnameBase]))}return o}function Th(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:h},p)=>{if(d==="*"){let x=a[p]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const m=a[p];return h&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function zj(t,e=!1,n=!0){Un(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Wj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Un(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function xs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var mC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hj=t=>mC.test(t);function qj(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ga(t):t,i;if(n)if(Hj(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Un(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=ib(n.substring(1),"/"):i=ib(n,e)}else i=e;return{pathname:i,search:Qj(r),hash:Yj(s)}}function ib(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xv(t){let e=Gj(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Jv(t,e,n,r=!1){let s;typeof t=="string"?s=Ga(t):(s={...t},Ke(!s.pathname||!s.pathname.includes("?"),dm("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),dm("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),dm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=qj(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var ds=t=>t.join("/").replace(/\/\/+/g,"/"),Kj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Qj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Yj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Xj=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Jj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Zj(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var gC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yC(t,e){let n=t;if(typeof n!="string"||!mC.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(gC)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),a=xs(o.pathname,e);o.origin===i.origin&&a!=null?n=a+o.search+o.hash:s=!0}catch{Un(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vC=["POST","PUT","PATCH","DELETE"];new Set(vC);var eM=["GET",...vC];new Set(eM);var Ka=y.createContext(null);Ka.displayName="DataRouter";var Pf=y.createContext(null);Pf.displayName="DataRouterState";var tM=y.createContext(!1),wC=y.createContext({isTransitioning:!1});wC.displayName="ViewTransition";var nM=y.createContext(new Map);nM.displayName="Fetchers";var rM=y.createContext(null);rM.displayName="Await";var Hn=y.createContext(null);Hn.displayName="Navigation";var hu=y.createContext(null);hu.displayName="Location";var or=y.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var Zv=y.createContext(null);Zv.displayName="RouteError";var xC="REACT_ROUTER_ERROR",sM="REDIRECT",iM="ROUTE_ERROR_RESPONSE";function oM(t){if(t.startsWith(`${xC}:${sM}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function aM(t){if(t.startsWith(`${xC}:${iM}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Xj(e.status,e.statusText,e.data)}catch{}}function lM(t,{relative:e}={}){Ke(Qa(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(Hn),{hash:s,pathname:i,search:o}=fu(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:ds([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Qa(){return y.useContext(hu)!=null}function Ir(){return Ke(Qa(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(hu).location}var _C="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bC(t){y.useContext(Hn).static||y.useLayoutEffect(t)}function It(){let{isDataRoute:t}=y.useContext(or);return t?EM():cM()}function cM(){Ke(Qa(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(Ka),{basename:e,navigator:n}=y.useContext(Hn),{matches:r}=y.useContext(or),{pathname:s}=Ir(),i=JSON.stringify(Xv(r)),o=y.useRef(!1);return bC(()=>{o.current=!0}),y.useCallback((l,c={})=>{if(Un(o.current,_C),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Jv(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ds([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}var uM=y.createContext(null);function dM(t){let e=y.useContext(or).outlet;return y.useMemo(()=>e&&y.createElement(uM.Provider,{value:t},e),[e,t])}function e0(){let{matches:t}=y.useContext(or),e=t[t.length-1];return e?e.params:{}}function fu(t,{relative:e}={}){let{matches:n}=y.useContext(or),{pathname:r}=Ir(),s=JSON.stringify(Xv(n));return y.useMemo(()=>Jv(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function hM(t,e){return EC(t,e)}function EC(t,e,n,r,s){var _;Ke(Qa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(Hn),{matches:o}=y.useContext(or),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let E=h&&h.path||"";SC(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=Ir(),m;if(e){let E=typeof e=="string"?Ga(e):e;Ke(d==="/"||((_=E.pathname)==null?void 0:_.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),m=E}else m=p;let x=m.pathname||"/",w=x;if(d!=="/"){let E=d.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let T=hC(t,{pathname:w});Un(h||T!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Un(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=yM(T&&T.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:ds([d,i.encodeLocation?i.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:ds([d,i.encodeLocation?i.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,n,r,s);return e&&b?y.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function fM(){let t=bM(),e=Jj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,o)}var pM=y.createElement(fM,null),TC=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=aM(t.digest);n&&(t=n)}let e=t!==void 0?y.createElement(or.Provider,{value:this.props.routeContext},y.createElement(Zv.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?y.createElement(mM,{error:t},e):e}};TC.contextType=tM;var hm=new WeakMap;function mM({children:t,error:e}){let{basename:n}=y.useContext(Hn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=oM(e.digest);if(r){let s=hm.get(e);if(s)throw s;let i=yC(r.location,n);if(gC&&!hm.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw hm.set(e,o),o}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function gM({routeContext:t,match:e,children:n}){let r=y.useContext(Ka);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(or.Provider,{value:t},n)}function yM(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);Ke(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,l=-1;if(n)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=d),h.route.id){let{loaderData:p,errors:m}=n,x=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let c=n&&r?(d,h)=>{var p,m;r(d,{location:n.location,params:((m=(p=n.matches)==null?void 0:p[0])==null?void 0:m.params)??{},unstable_pattern:Zj(n.matches),errorInfo:h})}:void 0;return i.reduceRight((d,h,p)=>{let m,x=!1,w=null,T=null;n&&(m=o&&h.route.id?o[h.route.id]:void 0,w=h.route.errorElement||pM,a&&(l<0&&p===0?(SC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,T=null):l===p&&(x=!0,T=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,p+1)),_=()=>{let E;return m?E=w:x?E=T:h.route.Component?E=y.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,y.createElement(gM,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?y.createElement(TC,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:c}):_()},null)}function t0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vM(t){let e=y.useContext(Ka);return Ke(e,t0(t)),e}function wM(t){let e=y.useContext(Pf);return Ke(e,t0(t)),e}function xM(t){let e=y.useContext(or);return Ke(e,t0(t)),e}function n0(t){let e=xM(t),n=e.matches[e.matches.length-1];return Ke(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function _M(){return n0("useRouteId")}function bM(){var r;let t=y.useContext(Zv),e=wM("useRouteError"),n=n0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function EM(){let{router:t}=vM("useNavigate"),e=n0("useNavigate"),n=y.useRef(!1);return bC(()=>{n.current=!0}),y.useCallback(async(s,i={})=>{Un(n.current,_C),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var ob={};function SC(t,e,n){!e&&!ob[t]&&(ob[t]=!0,Un(!1,n))}y.memo(TM);function TM({routes:t,future:e,state:n,onError:r}){return EC(t,void 0,n,r,e)}function Dr({to:t,replace:e,state:n,relative:r}){Ke(Qa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=y.useContext(Hn);Un(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=y.useContext(or),{pathname:o}=Ir(),a=It(),l=Jv(t,Xv(i),o,r==="path"),c=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function SM(t){return dM(t.context)}function Gt(t){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IM({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Ke(!Qa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=y.useMemo(()=>({basename:a,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[a,s,i,o]);typeof n=="string"&&(n=Ga(n));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=n,x=y.useMemo(()=>{let w=xs(c,a);return w==null?null:{location:{pathname:w,search:d,hash:h,state:p,key:m},navigationType:r}},[a,c,d,h,p,m,r]);return Un(x!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:y.createElement(Hn.Provider,{value:l},y.createElement(hu.Provider,{children:e,value:x}))}function CM({children:t,location:e}){return hM(Xg(t),e)}function Xg(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Xg(r.props.children,i));return}Ke(r.type===Gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xg(r.props.children,i)),n.push(o)}),n}var Fd="get",Ud="application/x-www-form-urlencoded";function Nf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function kM(t){return Nf(t)&&t.tagName.toLowerCase()==="button"}function AM(t){return Nf(t)&&t.tagName.toLowerCase()==="form"}function RM(t){return Nf(t)&&t.tagName.toLowerCase()==="input"}function PM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NM(t,e){return t.button===0&&(!e||e==="_self")&&!PM(t)}function Jg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function DM(t,e){let n=Jg(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}var ud=null;function LM(){if(ud===null)try{new FormData(document.createElement("form"),0),ud=!1}catch{ud=!0}return ud}var jM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fm(t){return t!=null&&!jM.has(t)?(Un(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ud}"`),null):t}function MM(t,e){let n,r,s,i,o;if(AM(t)){let a=t.getAttribute("action");r=a?xs(a,e):null,n=t.getAttribute("method")||Fd,s=fm(t.getAttribute("enctype"))||Ud,i=new FormData(t)}else if(kM(t)||RM(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?xs(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Fd,s=fm(t.getAttribute("formenctype"))||fm(a.getAttribute("enctype"))||Ud,i=new FormData(a,t),!LM()){let{name:c,type:d,value:h}=t;if(d==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,h)}}else{if(Nf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fd,r=null,s=Ud,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function r0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function OM(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&xs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function VM(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FM(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function UM(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await VM(i,n);return o.links?o.links():[]}return[]}));return WM(r.flat(1).filter(FM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ab(t,e,n,r,s,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function BM(t,e,{includeHydrateFallback:n}={}){return $M(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function $M(t){return[...new Set(t)]}function zM(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function WM(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(zM(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function IC(){let t=y.useContext(Ka);return r0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function HM(){let t=y.useContext(Pf);return r0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var s0=y.createContext(void 0);s0.displayName="FrameworkContext";function CC(){let t=y.useContext(s0);return r0(t,"You must render this element inside a <HydratedRouter> element"),t}function qM(t,e){let n=y.useContext(s0),[r,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,p=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=b=>{b.forEach(_=>{o(_.isIntersecting)})},T=new IntersectionObserver(w,{threshold:.5});return p.current&&T.observe(p.current),()=>{T.disconnect()}}},[t]),y.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let m=()=>{s(!0)},x=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:Rl(a,m),onBlur:Rl(l,x),onMouseEnter:Rl(c,m),onMouseLeave:Rl(d,x),onTouchStart:Rl(h,m)}]:[!1,p,{}]}function Rl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function GM({page:t,...e}){let{router:n}=IC(),r=y.useMemo(()=>hC(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(QM,{page:t,matches:r,...e}):null}function KM(t){let{manifest:e,routeModules:n}=CC(),[r,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return UM(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function QM({page:t,matches:e,...n}){let r=Ir(),{manifest:s,routeModules:i}=CC(),{basename:o}=IC(),{loaderData:a,matches:l}=HM(),c=y.useMemo(()=>ab(t,e,l,s,r,"data"),[t,e,l,s,r]),d=y.useMemo(()=>ab(t,e,l,s,r,"assets"),[t,e,l,s,r]),h=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(b=>{var E;let _=s.routes[b.route.id];!_||!_.hasLoader||(!c.some(C=>C.route.id===b.route.id)&&b.route.id in a&&((E=i[b.route.id])!=null&&E.shouldRevalidate)||_.hasClientLoader?w=!0:x.add(b.route.id))}),x.size===0)return[];let T=OM(t,o,"data");return w&&x.size>0&&T.searchParams.set("_routes",e.filter(b=>x.has(b.route.id)).map(b=>b.route.id).join(",")),[T.pathname+T.search]},[o,a,r,s,c,e,t,i]),p=y.useMemo(()=>BM(d,s),[d,s]),m=KM(d);return y.createElement(y.Fragment,null,h.map(x=>y.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),p.map(x=>y.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),m.map(({key:x,link:w})=>y.createElement("link",{key:x,nonce:n.nonce,...w})))}function YM(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var XM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XM&&(window.__reactRouterVersion="7.11.0")}catch{}function JM({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=y.useRef();s.current==null&&(s.current=kj({window:r,v5Compat:!0}));let i=s.current,[o,a]=y.useState({action:i.action,location:i.location}),l=y.useCallback(c=>{n===!1?a(c):y.startTransition(()=>a(c))},[n]);return y.useLayoutEffect(()=>i.listen(l),[i,l]),y.createElement(IM,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var kC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AC=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p,...m},x){let{basename:w,unstable_useTransitions:T}=y.useContext(Hn),b=typeof c=="string"&&kC.test(c),_=yC(c,w);c=_.to;let E=lM(c,{relative:s}),[C,P,M]=qM(r,m),I=nO(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:T});function S(R){e&&e(R),R.defaultPrevented||I(R)}let k=y.createElement("a",{...m,...M,href:_.absoluteURL||E,onClick:_.isExternal||i?e:S,ref:YM(x,P),target:l,"data-discover":!b&&n==="render"?"true":void 0});return C&&!b?y.createElement(y.Fragment,null,k,y.createElement(GM,{page:E})):k});AC.displayName="Link";var ZM=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},d){let h=fu(o,{relative:c.relative}),p=Ir(),m=y.useContext(Pf),{navigator:x,basename:w}=y.useContext(Hn),T=m!=null&&aO(h)&&a===!0,b=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,_=p.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(_=_.toLowerCase(),E=E?E.toLowerCase():null,b=b.toLowerCase()),E&&w&&(E=xs(E,w)||E);const C=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let P=_===b||!s&&_.startsWith(b)&&_.charAt(C)==="/",M=E!=null&&(E===b||!s&&E.startsWith(b)&&E.charAt(b.length)==="/"),I={isActive:P,isPending:M,isTransitioning:T},S=P?e:void 0,k;typeof r=="function"?k=r(I):k=[r,P?"active":null,M?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(I):i;return y.createElement(AC,{...c,"aria-current":S,className:k,ref:d,style:R,to:o,viewTransition:a},typeof l=="function"?l(I):l)});ZM.displayName="NavLink";var eO=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Fd,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p,...m},x)=>{let{unstable_useTransitions:w}=y.useContext(Hn),T=iO(),b=oO(a,{relative:c}),_=o.toLowerCase()==="get"?"get":"post",E=typeof a=="string"&&kC.test(a),C=P=>{if(l&&l(P),P.defaultPrevented)return;P.preventDefault();let M=P.nativeEvent.submitter,I=(M==null?void 0:M.getAttribute("formmethod"))||o,S=()=>T(M||P.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:s,state:i,relative:c,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p});w&&n!==!1?y.startTransition(()=>S()):S()};return y.createElement("form",{ref:x,method:_,action:b,onSubmit:r?l:C,...m,"data-discover":!E&&t==="render"?"true":void 0})});eO.displayName="Form";function tO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RC(t){let e=y.useContext(Ka);return Ke(e,tO(t)),e}function nO(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:l}={}){let c=It(),d=Ir(),h=fu(t,{relative:i});return y.useCallback(p=>{if(NM(p,e)){p.preventDefault();let m=n!==void 0?n:Oc(d)===Oc(h),x=()=>c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a});l?y.startTransition(()=>x()):x()}},[d,c,h,n,r,e,t,s,i,o,a,l])}function PC(t){Un(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(Jg(t)),n=y.useRef(!1),r=Ir(),s=y.useMemo(()=>DM(r.search,n.current?null:e.current),[r.search]),i=It(),o=y.useCallback((a,l)=>{const c=Jg(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var rO=0,sO=()=>`__${String(++rO)}__`;function iO(){let{router:t}=RC("useSubmit"),{basename:e}=y.useContext(Hn),n=_M(),r=t.fetch,s=t.navigate;return y.useCallback(async(i,o={})=>{let{action:a,method:l,encType:c,formData:d,body:h}=MM(i,e);if(o.navigate===!1){let p=o.fetcherKey||sO();await r(p,n,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||l,formEncType:o.encType||c,flushSync:o.flushSync})}else await s(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||l,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function oO(t,{relative:e}={}){let{basename:n}=y.useContext(Hn),r=y.useContext(or);Ke(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...fu(t||".",{relative:e})},o=Ir();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ds([n,i.pathname])),Oc(i)}function aO(t,{relative:e}={}){let n=y.useContext(wC);Ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=RC("useViewTransitionState"),s=fu(t,{relative:e});if(!n.isTransitioning)return!1;let i=xs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=xs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Th(s.pathname,o)!=null||Th(s.pathname,i)!=null}function lO(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];so(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const lb={};function Zg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];so(e[0])&&lb[e[0]]||(so(e[0])&&(lb[e[0]]=new Date),lO(...e))}const NC=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},cb=(t,e,n)=>{t.loadNamespaces(e,NC(t,n))},ub=(t,e,n,r)=>{so(n)&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,NC(t,r))},cO=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=e.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!s||o(i,t)))},uO=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Zg("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!i(s.isLanguageChangingTo,t))return!1}}):cO(t,e,n)},so=t=>typeof t=="string",dO=t=>typeof t=="object"&&t!==null,hO=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,fO={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},pO=t=>fO[t],mO=t=>t.replace(hO,pO);let ey={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:mO};const gO=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ey={...ey,...t}},yO=()=>ey;let DC;const vO=t=>{DC=t},wO=()=>DC,xO={type:"3rdParty",init(t){gO(t.options.react),vO(t)}},_O=y.createContext();class bO{constructor(){qx(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}const EO=(t,e)=>{const n=y.useRef();return y.useEffect(()=>{n.current=t},[t,e]),n.current},LC=(t,e,n,r)=>t.getFixedT(e,n,r),TO=(t,e,n,r)=>y.useCallback(LC(t,e,n,r),[t,e,n,r]),Si=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=y.useContext(_O)||{},i=n||r||wO();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new bO),!i){Zg("You will need to pass in an i18next instance by using initReactI18next");const C=(M,I)=>so(I)?I:dO(I)&&so(I.defaultValue)?I.defaultValue:Array.isArray(M)?M[M.length-1]:M,P=[C,{},!1];return P.t=C,P.i18n={},P.ready=!1,P}i.options.react&&i.options.react.wait!==void 0&&Zg("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...yO(),...i.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let c=s||i.options&&i.options.defaultNS;c=so(c)?[c]:c||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(c);const d=(i.isInitialized||i.initializedStoreOnce)&&c.every(C=>uO(C,i,o)),h=TO(i,e.lng||null,o.nsMode==="fallback"?c:c[0],l),p=()=>h,m=()=>LC(i,e.lng||null,o.nsMode==="fallback"?c:c[0],l),[x,w]=y.useState(p);let T=c.join();e.lng&&(T=`${e.lng}${T}`);const b=EO(T),_=y.useRef(!0);y.useEffect(()=>{const{bindI18n:C,bindI18nStore:P}=o;_.current=!0,!d&&!a&&(e.lng?ub(i,e.lng,c,()=>{_.current&&w(m)}):cb(i,c,()=>{_.current&&w(m)})),d&&b&&b!==T&&_.current&&w(m);const M=()=>{_.current&&w(m)};return C&&i&&i.on(C,M),P&&i&&i.store.on(P,M),()=>{_.current=!1,C&&i&&C.split(" ").forEach(I=>i.off(I,M)),P&&i&&P.split(" ").forEach(I=>i.store.off(I,M))}},[i,T]),y.useEffect(()=>{_.current&&d&&w(p)},[i,l,d]);const E=[x,i,d];if(E.t=x,E.i18n=i,E.ready=d,d||!d&&!a)return E;throw new Promise(C=>{e.lng?ub(i,e.lng,c,()=>C()):cb(i,c,()=>C())})},i0=y.createContext({});function o0(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Df=y.createContext(null),a0=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class SO extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function IO({children:t,isPresent:e}){const n=y.useId(),r=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=y.useContext(a0);return y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),f.jsx(SO,{isPresent:e,childRef:r,sizeRef:s,children:y.cloneElement(t,{ref:r})})}const CO=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=o0(kO),l=y.useId(),c=y.useCallback(h=>{a.set(h,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),d=y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),c]:[n,c]);return y.useMemo(()=>{a.forEach((h,p)=>a.set(p,!1))},[n]),y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=f.jsx(IO,{isPresent:n,children:t})),f.jsx(Df.Provider,{value:d,children:t})};function kO(){return new Map}function jC(t=!0){const e=y.useContext(Df);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=y.useId();y.useEffect(()=>{t&&s(i)},[t]);const o=y.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const dd=t=>t.key||"";function db(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const l0=typeof window<"u",MC=l0?y.useLayoutEffect:y.useEffect,_s=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=jC(o),c=y.useMemo(()=>db(t),[t]),d=o&&!a?[]:c.map(dd),h=y.useRef(!0),p=y.useRef(c),m=o0(()=>new Map),[x,w]=y.useState(c),[T,b]=y.useState(c);MC(()=>{h.current=!1,p.current=c;for(let C=0;C<T.length;C++){const P=dd(T[C]);d.includes(P)?m.delete(P):m.get(P)!==!0&&m.set(P,!1)}},[T,d.length,d.join("-")]);const _=[];if(c!==x){let C=[...c];for(let P=0;P<T.length;P++){const M=T[P],I=dd(M);d.includes(I)||(C.splice(P,0,M),_.push(M))}i==="wait"&&_.length&&(C=_),b(db(C)),w(c);return}const{forceRender:E}=y.useContext(i0);return f.jsx(f.Fragment,{children:T.map(C=>{const P=dd(C),M=o&&!a?!1:c===T||d.includes(P),I=()=>{if(m.has(P))m.set(P,!0);else return;let S=!0;m.forEach(k=>{k||(S=!1)}),S&&(E==null||E(),b(p.current),o&&(l==null||l()),r&&r())};return f.jsx(CO,{isPresent:M,initial:!h.current||n?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:M?void 0:I,children:C},P)})})},Vn=t=>t;let OC=Vn;function c0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Na=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},hs=t=>t*1e3,fs=t=>t/1e3,AO={useManualTiming:!1};function RO(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,d=!1,h=!1)=>{const m=h&&r?e:n;return d&&i.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const hd=["read","resolveKeyframes","update","preRender","render","postRender"],PO=40;function VC(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=hd.reduce((b,_)=>(b[_]=RO(i),b),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:h,postRender:p}=o,m=()=>{const b=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,PO),1),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),d.process(s),h.process(s),p.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(m))},x=()=>{n=!0,r=!0,s.isProcessing||t(m)};return{schedule:hd.reduce((b,_)=>{const E=o[_];return b[_]=(C,P=!1,M=!1)=>(n||x(),E.schedule(C,P,M)),b},{}),cancel:b=>{for(let _=0;_<hd.length;_++)o[hd[_]].cancel(b)},state:s,steps:o}}const{schedule:He,cancel:fi,state:Vt,steps:pm}=VC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vn,!0),FC=y.createContext({strict:!1}),hb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Da={};for(const t in hb)Da[t]={isEnabled:e=>hb[t].some(n=>!!e[n])};function NO(t){for(const e in t)Da[e]={...Da[e],...t[e]}}const DO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||DO.has(t)}let UC=t=>!Sh(t);function LO(t){t&&(UC=e=>e.startsWith("on")?!Sh(e):t(e))}try{LO(require("@emotion/is-prop-valid").default)}catch{}function jO(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(UC(s)||n===!0&&Sh(s)||!e&&!Sh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function MO(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Lf=y.createContext({});function Vc(t){return typeof t=="string"||Array.isArray(t)}function jf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const u0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d0=["initial",...u0];function Mf(t){return jf(t.animate)||d0.some(e=>Vc(t[e]))}function BC(t){return!!(Mf(t)||t.variants)}function OO(t,e){if(Mf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vc(n)?n:void 0,animate:Vc(r)?r:void 0}}return t.inherit!==!1?e:{}}function VO(t){const{initial:e,animate:n}=OO(t,y.useContext(Lf));return y.useMemo(()=>({initial:e,animate:n}),[fb(e),fb(n)])}function fb(t){return Array.isArray(t)?t.join(" "):t}const FO=Symbol.for("motionComponentSymbol");function ia(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function UO(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ia(n)&&(n.current=r))},[e])}const h0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BO="framerAppearId",$C="data-"+h0(BO),{schedule:f0}=VC(queueMicrotask,!1),zC=y.createContext({});function $O(t,e,n,r,s){var i,o;const{visualElement:a}=y.useContext(Lf),l=y.useContext(FC),c=y.useContext(Df),d=y.useContext(a0).reducedMotion,h=y.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=h.current,m=y.useContext(zC);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&zO(h.current,n,s,m);const x=y.useRef(!1);y.useInsertionEffect(()=>{p&&x.current&&p.update(n,c)});const w=n[$C],T=y.useRef(!!w&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,w))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,w)));return MC(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),f0.render(p.render),T.current&&p.animationState&&p.animationState.animateChanges())}),y.useEffect(()=>{p&&(!T.current&&p.animationState&&p.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,w)}),T.current=!1))}),p}function zO(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:WC(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ia(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function WC(t){if(t)return t.options.allowProjection!==!1?t.projection:WC(t.parent)}function WO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&NO(t);function a(c,d){let h;const p={...y.useContext(a0),...c,layoutId:HO(c)},{isStatic:m}=p,x=VO(c),w=r(c,m);if(!m&&l0){qO();const T=GO(p);h=T.MeasureLayout,x.visualElement=$O(s,w,p,e,T.ProjectionNode)}return f.jsxs(Lf.Provider,{value:x,children:[h&&x.visualElement?f.jsx(h,{visualElement:x.visualElement,...p}):null,n(s,c,UO(w,x.visualElement,d),w,m,x.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=y.forwardRef(a);return l[FO]=s,l}function HO({layoutId:t}){const e=y.useContext(i0).id;return e&&t!==void 0?e+"-"+t:t}function qO(t,e){y.useContext(FC).strict}function GO(t){const{drag:e,layout:n}=Da;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const KO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function p0(t){return typeof t!="string"||t.includes("-")?!1:!!(KO.indexOf(t)>-1||/[A-Z]/u.test(t))}function pb(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function m0(t,e,n,r){if(typeof e=="function"){const[s,i]=pb(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=pb(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const ty=t=>Array.isArray(t),QO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),YO=t=>ty(t)?t[t.length-1]||0:t,Zt=t=>!!(t&&t.getVelocity);function Bd(t){const e=Zt(t)?t.get():t;return QO(e)?e.toValue():e}function XO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:JO(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const HC=t=>(e,n)=>{const r=y.useContext(Lf),s=y.useContext(Df),i=()=>XO(t,e,r,s);return n?i():o0(i)};function JO(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=Bd(i[p]);let{initial:o,animate:a}=t;const l=Mf(t),c=BC(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!jf(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const x=m0(t,p[m]);if(x){const{transitionEnd:w,transition:T,...b}=x;for(const _ in b){let E=b[_];if(Array.isArray(E)){const C=d?E.length-1:0;E=E[C]}E!==null&&(s[_]=E)}for(const _ in w)s[_]=w[_]}}}return s}const Ya=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ko=new Set(Ya),qC=t=>e=>typeof e=="string"&&e.startsWith(t),GC=qC("--"),ZO=qC("var(--"),g0=t=>ZO(t)?eV.test(t.split("/*")[0].trim()):!1,eV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,KC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,bs=(t,e,n)=>n>e?e:n<t?t:n,Xa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Fc={...Xa,transform:t=>bs(0,1,t)},fd={...Xa,default:1},pu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fs=pu("deg"),Br=pu("%"),ae=pu("px"),tV=pu("vh"),nV=pu("vw"),mb={...Br,parse:t=>Br.parse(t)/100,transform:t=>Br.transform(t*100)},rV={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae},sV={rotate:Fs,rotateX:Fs,rotateY:Fs,rotateZ:Fs,scale:fd,scaleX:fd,scaleY:fd,scaleZ:fd,skew:Fs,skewX:Fs,skewY:Fs,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:Fc,originX:mb,originY:mb,originZ:ae},gb={...Xa,transform:Math.round},y0={...rV,...sV,zIndex:gb,size:ae,fillOpacity:Fc,strokeOpacity:Fc,numOctaves:gb},iV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oV=Ya.length;function aV(t,e,n){let r="",s=!0;for(let i=0;i<oV;i++){const o=Ya[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=KC(a,y0[o]);if(!l){s=!1;const d=iV[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function v0(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ko.has(l)){o=!0;continue}else if(GC(l)){s[l]=c;continue}else{const d=KC(c,y0[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=aV(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}const lV={offset:"stroke-dashoffset",array:"stroke-dasharray"},cV={offset:"strokeDashoffset",array:"strokeDasharray"};function uV(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?lV:cV;t[i.offset]=ae.transform(-r);const o=ae.transform(e),a=ae.transform(n);t[i.array]=`${o} ${a}`}function yb(t,e,n){return typeof t=="string"?t:ae.transform(e+n*t)}function dV(t,e,n){const r=yb(e,t.x,t.width),s=yb(n,t.y,t.height);return`${r} ${s}`}function w0(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h){if(v0(t,c,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:x}=t;p.transform&&(x&&(m.transform=p.transform),delete p.transform),x&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=dV(x,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&uV(p,o,a,l,!1)}const x0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),QC=()=>({...x0(),attrs:{}}),_0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function YC(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const XC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JC(t,e,n,r){YC(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(XC.has(s)?s:h0(s),e.attrs[s])}const Ih={};function hV(t){Object.assign(Ih,t)}function ZC(t,{layout:e,layoutId:n}){return ko.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ih[t]||t==="opacity")}function b0(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(Zt(s[o])||e.style&&Zt(e.style[o])||ZC(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function ek(t,e,n){const r=b0(t,e,n);for(const s in t)if(Zt(t[s])||Zt(e[s])){const i=Ya.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function fV(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const vb=["x","y","width","height","cx","cy","r"],pV={useVisualState:HC({scrapeMotionValuesFromProps:ek,createRenderState:QC,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(ko.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<vb.length;a++){const l=vb[a];t[l]!==e[l]&&(o=!0)}o&&He.read(()=>{fV(n,r),He.render(()=>{w0(r,s,_0(n.tagName),t.transformTemplate),JC(n,r)})})}})},mV={useVisualState:HC({scrapeMotionValuesFromProps:b0,createRenderState:x0})};function tk(t,e,n){for(const r in e)!Zt(e[r])&&!ZC(r,n)&&(t[r]=e[r])}function gV({transformTemplate:t},e){return y.useMemo(()=>{const n=x0();return v0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function yV(t,e){const n=t.style||{},r={};return tk(r,n,t),Object.assign(r,gV(t,e)),r}function vV(t,e){const n={},r=yV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function wV(t,e,n,r){const s=y.useMemo(()=>{const i=QC();return w0(i,e,_0(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};tk(i,t.style,t),s.style={...i,...s.style}}return s}function xV(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(p0(n)?wV:vV)(r,i,o,n),c=jO(r,typeof n=="string",t),d=n!==y.Fragment?{...c,...l,ref:s}:{},{children:h}=r,p=y.useMemo(()=>Zt(h)?h.get():h,[h]);return y.createElement(n,{...d,children:p})}}function _V(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...p0(r)?pV:mV,preloadedFeatures:t,useRender:xV(s),createVisualElement:e,Component:r};return WO(o)}}function nk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Of(t,e,n){const r=t.getProps();return m0(r,e,n!==void 0?n:r.custom,t)}const bV=c0(()=>window.ScrollTimeline!==void 0);class EV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(bV()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class TV extends EV{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function E0(t,e){return t?t[e]||t.default||t:void 0}const ny=2e4;function rk(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ny;)e+=n,r=t.next(e);return e>=ny?1/0:e}function T0(t){return typeof t=="function"}function wb(t,e){t.timeline=e,t.onfinish=null}const S0=t=>Array.isArray(t)&&typeof t[0]=="number",SV={linearEasing:void 0};function IV(t,e){const n=c0(t);return()=>{var r;return(r=SV[e])!==null&&r!==void 0?r:n()}}const Ch=IV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sk=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(Na(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function ik(t){return!!(typeof t=="function"&&Ch()||!t||typeof t=="string"&&(t in ry||Ch())||S0(t)||Array.isArray(t)&&t.every(ik))}const $l=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ry={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$l([0,.65,.55,1]),circOut:$l([.55,0,1,.45]),backIn:$l([.31,.01,.66,-.59]),backOut:$l([.33,1.53,.69,.99])};function ok(t,e){if(t)return typeof t=="function"&&Ch()?sk(t,e):S0(t)?$l(t):Array.isArray(t)?t.map(n=>ok(n,e)||ry.easeOut):ry[t]}const hr={x:!1,y:!1};function ak(){return hr.x||hr.y}function CV(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function lk(t,e){const n=CV(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function xb(t){return e=>{e.pointerType==="touch"||ak()||t(e)}}function kV(t,e,n={}){const[r,s,i]=lk(t,n),o=xb(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=xb(h=>{c(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const ck=(t,e)=>e?t===e?!0:ck(t,e.parentElement):!1,I0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,AV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RV(t){return AV.has(t.tagName)||t.tabIndex!==-1}const zl=new WeakSet;function _b(t){return e=>{e.key==="Enter"&&t(e)}}function mm(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const PV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=_b(()=>{if(zl.has(n))return;mm(n,"down");const s=_b(()=>{mm(n,"up")}),i=()=>mm(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function bb(t){return I0(t)&&!ak()}function NV(t,e,n={}){const[r,s,i]=lk(t,n),o=a=>{const l=a.currentTarget;if(!bb(a)||zl.has(l))return;zl.add(l);const c=e(a),d=(m,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!bb(m)||!zl.has(l))&&(zl.delete(l),typeof c=="function"&&c(m,{success:x}))},h=m=>{d(m,n.useGlobalTarget||ck(l,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{!RV(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>PV(c,s),s)}),i}function DV(t){return t==="x"||t==="y"?hr[t]?null:(hr[t]=!0,()=>{hr[t]=!1}):hr.x||hr.y?null:(hr.x=hr.y=!0,()=>{hr.x=hr.y=!1})}const uk=new Set(["width","height","top","left","right","bottom",...Ya]);let $d;function LV(){$d=void 0}const $r={now:()=>($d===void 0&&$r.set(Vt.isProcessing||AO.useManualTiming?Vt.timestamp:performance.now()),$d),set:t=>{$d=t,queueMicrotask(LV)}};function C0(t,e){t.indexOf(e)===-1&&t.push(e)}function k0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class A0{constructor(){this.subscriptions=[]}add(e){return C0(this.subscriptions,e),()=>k0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function dk(t,e){return e?t*(1e3/e):0}const Eb=30,jV=t=>!isNaN(parseFloat(t));class MV{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=$r.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=$r.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new A0);const r=this.events[e].add(n);return e==="change"?()=>{r(),He.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$r.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Eb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Eb);return dk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uc(t,e){return new MV(t,e)}function OV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Uc(n))}function VV(t,e){const n=Of(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=YO(i[o]);OV(t,o,a)}}function FV(t){return!!(Zt(t)&&t.add)}function sy(t,e){const n=t.getValue("willChange");if(FV(n))return n.add(e)}function hk(t){return t.props[$C]}const fk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,UV=1e-7,BV=12;function $V(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=fk(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>UV&&++a<BV);return o}function mu(t,e,n,r){if(t===e&&n===r)return Vn;const s=i=>$V(i,0,1,t,n);return i=>i===0||i===1?i:fk(s(i),e,r)}const pk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mk=t=>e=>1-t(1-e),gk=mu(.33,1.53,.69,.99),R0=mk(gk),yk=pk(R0),vk=t=>(t*=2)<1?.5*R0(t):.5*(2-Math.pow(2,-10*(t-1))),P0=t=>1-Math.sin(Math.acos(t)),wk=mk(P0),xk=pk(P0),_k=t=>/^0[^.\s]+$/u.test(t);function zV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||_k(t):!0}const sc=t=>Math.round(t*1e5)/1e5,N0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WV(t){return t==null}const HV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,D0=(t,e)=>n=>!!(typeof n=="string"&&HV.test(n)&&n.startsWith(t)||e&&!WV(n)&&Object.prototype.hasOwnProperty.call(n,e)),bk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(N0);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},qV=t=>bs(0,255,t),gm={...Xa,transform:t=>Math.round(qV(t))},Ji={test:D0("rgb","red"),parse:bk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gm.transform(t)+", "+gm.transform(e)+", "+gm.transform(n)+", "+sc(Fc.transform(r))+")"};function GV(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const iy={test:D0("#"),parse:GV,transform:Ji.transform},oa={test:D0("hsl","hue"),parse:bk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Br.transform(sc(e))+", "+Br.transform(sc(n))+", "+sc(Fc.transform(r))+")"},Kt={test:t=>Ji.test(t)||iy.test(t)||oa.test(t),parse:t=>Ji.test(t)?Ji.parse(t):oa.test(t)?oa.parse(t):iy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ji.transform(t):oa.transform(t)},KV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function QV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(N0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(KV))===null||n===void 0?void 0:n.length)||0)>0}const Ek="number",Tk="color",YV="var",XV="var(",Tb="${}",JV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(JV,l=>(Kt.test(l)?(r.color.push(i),s.push(Tk),n.push(Kt.parse(l))):l.startsWith(XV)?(r.var.push(i),s.push(YV),n.push(l)):(r.number.push(i),s.push(Ek),n.push(parseFloat(l))),++i,Tb)).split(Tb);return{values:n,split:a,indexes:r,types:s}}function Sk(t){return Bc(t).values}function Ik(t){const{split:e,types:n}=Bc(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===Ek?i+=sc(s[o]):a===Tk?i+=Kt.transform(s[o]):i+=s[o]}return i}}const ZV=t=>typeof t=="number"?0:t;function e4(t){const e=Sk(t);return Ik(t)(e.map(ZV))}const pi={test:QV,parse:Sk,createTransformer:Ik,getAnimatableNone:e4},t4=new Set(["brightness","contrast","saturate","opacity"]);function n4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(N0)||[];if(!r)return t;const s=n.replace(r,"");let i=t4.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const r4=/\b([a-z-]*)\(.*?\)/gu,oy={...pi,getAnimatableNone:t=>{const e=t.match(r4);return e?e.map(n4).join(" "):t}},s4={...y0,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:oy,WebkitFilter:oy},L0=t=>s4[t];function Ck(t,e){let n=L0(t);return n!==oy&&(n=pi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const i4=new Set(["auto","none","0"]);function o4(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!i4.has(i)&&Bc(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=Ck(n,s)}const Sb=t=>t===Xa||t===ae,Ib=(t,e)=>parseFloat(t.split(", ")[e]),Cb=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Ib(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?Ib(i[1],t):0}},a4=new Set(["x","y","z"]),l4=Ya.filter(t=>!a4.has(t));function c4(t){const e=[];return l4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const La={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Cb(4,13),y:Cb(5,14)};La.translateX=La.x;La.translateY=La.y;const io=new Set;let ay=!1,ly=!1;function kk(){if(ly){const t=Array.from(io).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=c4(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ly=!1,ay=!1,io.forEach(t=>t.complete()),io.clear()}function Ak(){io.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ly=!0)})}function u4(){Ak(),kk()}class j0{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(io.add(this),ay||(ay=!0,He.read(Ak),He.resolveKeyframes(kk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),io.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,io.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Rk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),d4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h4(t){const e=d4.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Pk(t,e,n=1){const[r,s]=h4(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return Rk(o)?parseFloat(o):o}return g0(s)?Pk(s,e,n+1):s}const Nk=t=>e=>e.test(t),f4={test:t=>t==="auto",parse:t=>t},Dk=[Xa,ae,Br,Fs,nV,tV,f4],kb=t=>Dk.find(Nk(t));class Lk extends j0{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),g0(c))){const d=Pk(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!uk.has(r)||e.length!==2)return;const[s,i]=e,o=kb(s),a=kb(i);if(o!==a)if(Sb(o)&&Sb(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)zV(e[s])&&r.push(s);r.length&&o4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=La[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=La[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Ab=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pi.test(t)||t==="0")&&!t.startsWith("url("));function p4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function m4(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Ab(s,e),a=Ab(i,e);return!o||!a?!1:p4(t)||(n==="spring"||T0(n))&&r}const g4=t=>t!==null;function Vf(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(g4),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const y4=40;class jk{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$r.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>y4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&u4(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=$r.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!m4(e,r,s,i))if(o)this.options.duration=0;else{l&&l(Vf(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Xe=(t,e,n)=>t+(e-t)*n;function ym(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function v4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=ym(l,a,t+1/3),i=ym(l,a,t),o=ym(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function kh(t,e){return n=>n>0?e:t}const vm=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},w4=[iy,Ji,oa],x4=t=>w4.find(e=>e.test(t));function Rb(t){const e=x4(t);if(!e)return!1;let n=e.parse(t);return e===oa&&(n=v4(n)),n}const Pb=(t,e)=>{const n=Rb(t),r=Rb(e);if(!n||!r)return kh(t,e);const s={...n};return i=>(s.red=vm(n.red,r.red,i),s.green=vm(n.green,r.green,i),s.blue=vm(n.blue,r.blue,i),s.alpha=Xe(n.alpha,r.alpha,i),Ji.transform(s))},_4=(t,e)=>n=>e(t(n)),gu=(...t)=>t.reduce(_4),cy=new Set(["none","hidden"]);function b4(t,e){return cy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function E4(t,e){return n=>Xe(t,e,n)}function M0(t){return typeof t=="number"?E4:typeof t=="string"?g0(t)?kh:Kt.test(t)?Pb:I4:Array.isArray(t)?Mk:typeof t=="object"?Kt.test(t)?Pb:T4:kh}function Mk(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>M0(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function T4(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=M0(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function S4(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const I4=(t,e)=>{const n=pi.createTransformer(e),r=Bc(t),s=Bc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?cy.has(t)&&!s.values.length||cy.has(e)&&!r.values.length?b4(t,e):gu(Mk(S4(r,s),s.values),n):kh(t,e)};function Ok(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xe(t,e,n):M0(t)(t,e)}const C4=5;function Vk(t,e,n){const r=Math.max(e-C4,0);return dk(n-t(r),e-r)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wm=.001;function k4({duration:t=it.duration,bounce:e=it.bounce,velocity:n=it.velocity,mass:r=it.mass}){let s,i,o=1-e;o=bs(it.minDamping,it.maxDamping,o),t=bs(it.minDuration,it.maxDuration,fs(t)),o<1?(s=c=>{const d=c*o,h=d*t,p=d-n,m=uy(c,o),x=Math.exp(-h);return wm-p/m*x},i=c=>{const h=c*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-h),w=uy(Math.pow(c,2),o);return(-s(c)+wm>0?-1:1)*((p-m)*x)/w}):(s=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-wm+d*h},i=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=R4(s,i,a);if(t=hs(t),isNaN(l))return{stiffness:it.stiffness,damping:it.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const A4=12;function R4(t,e,n){let r=n;for(let s=1;s<A4;s++)r=r-t(r)/e(r);return r}function uy(t,e){return t*Math.sqrt(1-e*e)}const P4=["duration","bounce"],N4=["stiffness","damping","mass"];function Nb(t,e){return e.some(n=>t[n]!==void 0)}function D4(t){let e={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...t};if(!Nb(t,N4)&&Nb(t,P4))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*bs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:it.mass,stiffness:s,damping:i}}else{const n=k4(t);e={...e,...n,mass:it.mass},e.isResolvedFromDuration=!0}return e}function Fk(t=it.visualDuration,e=it.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=D4({...n,velocity:-fs(n.velocity||0)}),x=p||0,w=c/(2*Math.sqrt(l*d)),T=o-i,b=fs(Math.sqrt(l/d)),_=Math.abs(T)<5;r||(r=_?it.restSpeed.granular:it.restSpeed.default),s||(s=_?it.restDelta.granular:it.restDelta.default);let E;if(w<1){const P=uy(b,w);E=M=>{const I=Math.exp(-w*b*M);return o-I*((x+w*b*T)/P*Math.sin(P*M)+T*Math.cos(P*M))}}else if(w===1)E=P=>o-Math.exp(-b*P)*(T+(x+b*T)*P);else{const P=b*Math.sqrt(w*w-1);E=M=>{const I=Math.exp(-w*b*M),S=Math.min(P*M,300);return o-I*((x+w*b*T)*Math.sinh(S)+P*T*Math.cosh(S))/P}}const C={calculatedDuration:m&&h||null,next:P=>{const M=E(P);if(m)a.done=P>=h;else{let I=0;w<1&&(I=P===0?hs(x):Vk(E,P,M));const S=Math.abs(I)<=r,k=Math.abs(o-M)<=s;a.done=S&&k}return a.value=a.done?o:M,a},toString:()=>{const P=Math.min(rk(C),ny),M=sk(I=>C.next(P*I).value,P,30);return P+"ms "+M}};return C}function Db({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},m=S=>a!==void 0&&S<a||l!==void 0&&S>l,x=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let w=n*e;const T=h+w,b=o===void 0?T:o(T);b!==T&&(w=b-h);const _=S=>-w*Math.exp(-S/r),E=S=>b+_(S),C=S=>{const k=_(S),R=E(S);p.done=Math.abs(k)<=c,p.value=p.done?b:R};let P,M;const I=S=>{m(p.value)&&(P=S,M=Fk({keyframes:[p.value,x(p.value)],velocity:Vk(E,S,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:S=>{let k=!1;return!M&&P===void 0&&(k=!0,C(S),I(S)),P!==void 0&&S>=P?M.next(S-P):(!k&&C(S),p)}}}const L4=mu(.42,0,1,1),j4=mu(0,0,.58,1),Uk=mu(.42,0,.58,1),M4=t=>Array.isArray(t)&&typeof t[0]!="number",O4={linear:Vn,easeIn:L4,easeInOut:Uk,easeOut:j4,circIn:P0,circInOut:xk,circOut:wk,backIn:R0,backInOut:yk,backOut:gk,anticipate:vk},Lb=t=>{if(S0(t)){OC(t.length===4);const[e,n,r,s]=t;return mu(e,n,r,s)}else if(typeof t=="string")return O4[t];return t};function V4(t,e,n){const r=[],s=n||Ok,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Vn:e;a=gu(l,a)}r.push(a)}return r}function F4(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(OC(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=V4(e,r,s),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Na(t[h],t[h+1],d);return a[h](p)};return n?d=>c(bs(t[0],t[i-1],d)):c}function U4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Na(0,e,r);t.push(Xe(n,1,s))}}function B4(t){const e=[0];return U4(e,t.length-1),e}function $4(t,e){return t.map(n=>n*e)}function z4(t,e){return t.map(()=>e||Uk).splice(0,t.length-1)}function Ah({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=M4(r)?r.map(Lb):Lb(r),i={done:!1,value:e[0]},o=$4(n&&n.length===e.length?n:B4(e),t),a=F4(o,e,{ease:Array.isArray(s)?s:z4(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const W4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>He.update(e,!0),stop:()=>fi(e),now:()=>Vt.isProcessing?Vt.timestamp:$r.now()}},H4={decay:Db,inertia:Db,tween:Ah,keyframes:Ah,spring:Fk},q4=t=>t/100;class O0 extends jk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||j0,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=T0(n)?n:H4[n]||Ah;let l,c;a!==Ah&&typeof e[0]!="number"&&(l=gu(q4,Ok(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=rk(d));const{calculatedDuration:h}=d,p=h+s,m=p*(r+1)-s;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return i.next(0);const{delay:p,repeat:m,repeatType:x,repeatDelay:w,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-p*(this.speed>=0?1:-1),_=this.speed>=0?b<0:b>d;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let E=this.currentTime,C=i;if(m){const S=Math.min(this.currentTime,d)/h;let k=Math.floor(S),R=S%1;!R&&S>=1&&(R=1),R===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(x==="reverse"?(R=1-R,w&&(R-=w/h)):x==="mirror"&&(C=o)),E=bs(0,1,R)*h}const P=_?{done:!1,value:l[0]}:C.next(E);a&&(P.value=a(P.value));let{done:M}=P;!_&&c!==null&&(M=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return I&&s!==void 0&&(P.value=Vf(l,this.options,s)),T&&T(P.value),I&&this.finish(),P}get duration(){const{resolved:e}=this;return e?fs(e.calculatedDuration):0}get time(){return fs(this.currentTime)}set time(e){e=hs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=fs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=W4,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const G4=new Set(["opacity","clipPath","filter","transform"]);function K4(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=ok(a,s);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const Q4=c0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Rh=10,Y4=2e4;function X4(t){return T0(t.type)||t.type==="spring"||!ik(t.ease)}function J4(t,e){const n=new O0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<Y4;)r=n.sample(i),s.push(r.value),i+=Rh;return{times:void 0,keyframes:s,duration:i-Rh,ease:"linear"}}const Bk={anticipate:vk,backInOut:yk,circInOut:xk};function Z4(t){return t in Bk}class jb extends jk{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new Lk(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&Ch()&&Z4(i)&&(i=Bk[i]),X4(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,element:x,...w}=this.options,T=J4(e,w);e=T.keyframes,e.length===1&&(e[1]=e[0]),r=T.duration,s=T.times,i=T.ease,o="keyframes"}const d=K4(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(wb(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(Vf(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return fs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return fs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=hs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Vn;const{animation:r}=n;wb(r,e)}return Vn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:h,element:p,...m}=this.options,x=new O0({...m,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),w=hs(this.time);c.setWithVelocity(x.sample(w-Rh).value,x.sample(w).value,Rh)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Q4()&&r&&G4.has(r)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const eF={type:"spring",stiffness:500,damping:25,restSpeed:10},tF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),nF={type:"keyframes",duration:.8},rF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sF=(t,{keyframes:e})=>e.length>2?nF:ko.has(t)?t.startsWith("scale")?tF(e[1]):eF:rF;function iF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const V0=(t,e,n,r={},s,i)=>o=>{const a=E0(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-hs(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};iF(a)||(d={...d,...sF(t,d)}),d.duration&&(d.duration=hs(d.duration)),d.repeatDelay&&(d.repeatDelay=hs(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&e.get()!==void 0){const p=Vf(d.keyframes,a);if(p!==void 0)return He.update(()=>{d.onUpdate(p),d.onComplete()}),new TV([])}return!i&&jb.supports(d)?new jb(d):new O0(d)};function oF({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function $k(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const p=t.getValue(h,(i=t.latestValues[h])!==null&&i!==void 0?i:null),m=l[h];if(m===void 0||d&&oF(d,h))continue;const x={delay:n,...E0(o||{},h)};let w=!1;if(window.MotionHandoffAnimation){const b=hk(t);if(b){const _=window.MotionHandoffAnimation(b,h,He);_!==null&&(x.startTime=_,w=!0)}}sy(t,h),p.start(V0(h,p,m,t.shouldReduceMotion&&uk.has(h)?{type:!1}:x,t,w));const T=p.animation;T&&c.push(T)}return a&&Promise.all(c).then(()=>{He.update(()=>{a&&VV(t,a)})}),c}function dy(t,e,n={}){var r;const s=Of(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all($k(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return aF(t,e,d+c,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function aF(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(lF).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(dy(c,e,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function lF(t,e){return t.sortNodePosition(e)}function cF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>dy(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=dy(t,e,n);else{const s=typeof e=="function"?Of(t,e,n.custom):e;r=Promise.all($k(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const uF=d0.length;function zk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<uF;n++){const r=d0[n],s=t.props[r];(Vc(s)||s===!1)&&(e[r]=s)}return e}const dF=[...u0].reverse(),hF=u0.length;function fF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>cF(t,n,r)))}function pF(t){let e=fF(t),n=Mb(),r=!0;const s=l=>(c,d)=>{var h;const p=Of(t,d,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:x,...w}=p;c={...c,...w,...x}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,d=zk(t.parent)||{},h=[],p=new Set;let m={},x=1/0;for(let T=0;T<hF;T++){const b=dF[T],_=n[b],E=c[b]!==void 0?c[b]:d[b],C=Vc(E),P=b===l?_.isActive:null;P===!1&&(x=T);let M=E===d[b]&&E!==c[b]&&C;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),_.protectedKeys={...m},!_.isActive&&P===null||!E&&!_.prevProp||jf(E)||typeof E=="boolean")continue;const I=mF(_.prevProp,E);let S=I||b===l&&_.isActive&&!M&&C||T>x&&C,k=!1;const R=Array.isArray(E)?E:[E];let D=R.reduce(s(b),{});P===!1&&(D={});const{prevResolvedValues:O={}}=_,N={...O,...D},X=H=>{S=!0,p.has(H)&&(k=!0,p.delete(H)),_.needsAnimating[H]=!0;const F=t.getValue(H);F&&(F.liveStyle=!1)};for(const H in N){const F=D[H],U=O[H];if(m.hasOwnProperty(H))continue;let j=!1;ty(F)&&ty(U)?j=!nk(F,U):j=F!==U,j?F!=null?X(H):p.add(H):F!==void 0&&p.has(H)?X(H):_.protectedKeys[H]=!0}_.prevProp=E,_.prevResolvedValues=D,_.isActive&&(m={...m,...D}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(M&&I)||k)&&h.push(...R.map(H=>({animation:H,options:{type:b}})))}if(p.size){const T={};p.forEach(b=>{const _=t.getBaseTarget(b),E=t.getValue(b);E&&(E.liveStyle=!0),T[b]=_??null}),h.push({animation:T})}let w=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(h):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Mb(),r=!0}}}function mF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nk(e,t):!1}function $i(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Mb(){return{animate:$i(!0),whileInView:$i(),whileHover:$i(),whileTap:$i(),whileDrag:$i(),whileFocus:$i(),exit:$i()}}class Ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}class gF extends Ii{constructor(e){super(e),e.animationState||(e.animationState=pF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let yF=0;class vF extends Ii{constructor(){super(...arguments),this.id=yF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const wF={animation:{Feature:gF},exit:{Feature:vF}};function $c(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function yu(t){return{point:{x:t.pageX,y:t.pageY}}}const xF=t=>e=>I0(e)&&t(e,yu(e));function ic(t,e,n,r){return $c(t,e,xF(n),r)}const Ob=(t,e)=>Math.abs(t-e);function _F(t,e){const n=Ob(t.x,e.x),r=Ob(t.y,e.y);return Math.sqrt(n**2+r**2)}class Wk{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=_m(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=_F(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:x}=h,{timestamp:w}=Vt;this.history.push({...x,timestamp:w});const{onStart:T,onMove:b}=this.handlers;p||(T&&T(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=xm(p,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=_m(h.type==="pointercancel"?this.lastMoveEventInfo:xm(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,T),x&&x(h,T)},!I0(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=yu(e),a=xm(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Vt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,_m(a,this.history)),this.removeListeners=gu(ic(this.contextWindow,"pointermove",this.handlePointerMove),ic(this.contextWindow,"pointerup",this.handlePointerUp),ic(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fi(this.updatePoint)}}function xm(t,e){return e?{point:e(t.point)}:t}function Vb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _m({point:t},e){return{point:t,delta:Vb(t,Hk(e)),offset:Vb(t,bF(e)),velocity:EF(e,.1)}}function bF(t){return t[0]}function Hk(t){return t[t.length-1]}function EF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Hk(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>hs(e)));)n--;if(!r)return{x:0,y:0};const i=fs(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const qk=1e-4,TF=1-qk,SF=1+qk,Gk=.01,IF=0-Gk,CF=0+Gk;function Bn(t){return t.max-t.min}function kF(t,e,n){return Math.abs(t-e)<=n}function Fb(t,e,n,r=.5){t.origin=r,t.originPoint=Xe(e.min,e.max,t.origin),t.scale=Bn(n)/Bn(e),t.translate=Xe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=TF&&t.scale<=SF||isNaN(t.scale))&&(t.scale=1),(t.translate>=IF&&t.translate<=CF||isNaN(t.translate))&&(t.translate=0)}function oc(t,e,n,r){Fb(t.x,e.x,n.x,r?r.originX:void 0),Fb(t.y,e.y,n.y,r?r.originY:void 0)}function Ub(t,e,n){t.min=n.min+e.min,t.max=t.min+Bn(e)}function AF(t,e,n){Ub(t.x,e.x,n.x),Ub(t.y,e.y,n.y)}function Bb(t,e,n){t.min=e.min-n.min,t.max=t.min+Bn(e)}function ac(t,e,n){Bb(t.x,e.x,n.x),Bb(t.y,e.y,n.y)}function RF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Xe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Xe(n,t,r.max):Math.min(t,n)),t}function $b(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function PF(t,{top:e,left:n,bottom:r,right:s}){return{x:$b(t.x,n,s),y:$b(t.y,e,r)}}function zb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function NF(t,e){return{x:zb(t.x,e.x),y:zb(t.y,e.y)}}function DF(t,e){let n=.5;const r=Bn(t),s=Bn(e);return s>r?n=Na(e.min,e.max-r,t.min):r>s&&(n=Na(t.min,t.max-s,e.min)),bs(0,1,n)}function LF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hy=.35;function jF(t=hy){return t===!1?t=0:t===!0&&(t=hy),{x:Wb(t,"left","right"),y:Wb(t,"top","bottom")}}function Wb(t,e,n){return{min:Hb(t,e),max:Hb(t,n)}}function Hb(t,e){return typeof t=="number"?t:t[e]||0}const qb=()=>({translate:0,scale:1,origin:0,originPoint:0}),aa=()=>({x:qb(),y:qb()}),Gb=()=>({min:0,max:0}),ut=()=>({x:Gb(),y:Gb()});function Qn(t){return[t("x"),t("y")]}function Kk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function MF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function OF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function bm(t){return t===void 0||t===1}function fy({scale:t,scaleX:e,scaleY:n}){return!bm(t)||!bm(e)||!bm(n)}function qi(t){return fy(t)||Qk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Qk(t){return Kb(t.x)||Kb(t.y)}function Kb(t){return t&&t!=="0%"}function Ph(t,e,n){const r=t-n,s=e*r;return n+s}function Qb(t,e,n,r,s){return s!==void 0&&(t=Ph(t,s,r)),Ph(t,n,r)+e}function py(t,e=0,n=1,r,s){t.min=Qb(t.min,e,n,r,s),t.max=Qb(t.max,e,n,r,s)}function Yk(t,{x:e,y:n}){py(t.x,e.translate,e.scale,e.originPoint),py(t.y,n.translate,n.scale,n.originPoint)}const Yb=.999999999999,Xb=1.0000000000001;function VF(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ca(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Yk(t,o)),r&&qi(i.latestValues)&&ca(t,i.latestValues))}e.x<Xb&&e.x>Yb&&(e.x=1),e.y<Xb&&e.y>Yb&&(e.y=1)}function la(t,e){t.min=t.min+e,t.max=t.max+e}function Jb(t,e,n,r,s=.5){const i=Xe(t.min,t.max,s);py(t,e,n,i,r)}function ca(t,e){Jb(t.x,e.x,e.scaleX,e.scale,e.originX),Jb(t.y,e.y,e.scaleY,e.scale,e.originY)}function Xk(t,e){return Kk(OF(t.getBoundingClientRect(),e))}function FF(t,e,n){const r=Xk(t,n),{scroll:s}=e;return s&&(la(r.x,s.offset.x),la(r.y,s.offset.y)),r}const Jk=({current:t})=>t?t.ownerDocument.defaultView:null,UF=new WeakMap;class BF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ut(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yu(d).point)},i=(d,h)=>{const{drag:p,dragPropagation:m,onDragStart:x}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DV(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(T=>{let b=this.getAxisMotionValue(T).get()||0;if(Br.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[T];E&&(b=Bn(E)*(parseFloat(b)/100))}}this.originPoint[T]=b}),x&&He.postRender(()=>x(d,h)),sy(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:x,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:T}=h;if(m&&this.currentDirection===null){this.currentDirection=$F(T),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,T),this.updateAxis("y",h.point,T),this.visualElement.render(),w&&w(d,h)},a=(d,h)=>this.stop(d,h),l=()=>Qn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Wk(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Jk(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&He.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!pd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=RF(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&ia(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=PF(s.layoutBox,n):this.constraints=!1,this.elastic=jF(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Qn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=LF(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ia(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=FF(r,s.root,this.visualElement.getTransformPagePoint());let o=NF(s.layout.layoutBox,i);if(n){const a=n(MF(o));this.hasMutatedConstraints=!!a,a&&(o=Kk(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Qn(d=>{if(!pd(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,x={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return sy(this.visualElement,e),r.start(V0(e,r,0,n,this.visualElement,!1))}stopAnimation(){Qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qn(n=>{const{drag:r}=this.getProps();if(!pd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Xe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ia(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=DF({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qn(o=>{if(!pd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Xe(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;UF.set(this.visualElement,this);const e=this.visualElement.current,n=ic(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ia(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),He.read(r);const o=$c(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Qn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=hy,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function pd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $F(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class zF extends Ii{constructor(e){super(e),this.removeGroupControls=Vn,this.removeListeners=Vn,this.controls=new BF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zb=t=>(e,n)=>{t&&He.postRender(()=>t(e,n))};class WF extends Ii{constructor(){super(...arguments),this.removePointerDownListener=Vn}onPointerDown(e){this.session=new Wk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Jk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Zb(e),onStart:Zb(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&He.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=ic(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function e1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=e1(t,e.target.x),r=e1(t,e.target.y);return`${n}% ${r}%`}},HF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=pi.parse(t);if(s.length>5)return r;const i=pi.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Xe(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class qF extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;hV(GF),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),zd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||He.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),f0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zk(t){const[e,n]=jC(),r=y.useContext(i0);return f.jsx(qF,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(zC),isPresent:e,safeToRemove:n})}const GF={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:HF};function KF(t,e,n){const r=Zt(t)?t:Uc(t);return r.start(V0("",r,e,n)),r.animation}function QF(t){return t instanceof SVGElement&&t.tagName!=="svg"}const YF=(t,e)=>t.depth-e.depth;class XF{constructor(){this.children=[],this.isDirty=!1}add(e){C0(this.children,e),this.isDirty=!0}remove(e){k0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(YF),this.isDirty=!1,this.children.forEach(e)}}function JF(t,e){const n=$r.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(fi(r),t(i-e))};return He.read(r,!0),()=>fi(r)}const eA=["TopLeft","TopRight","BottomLeft","BottomRight"],ZF=eA.length,t1=t=>typeof t=="string"?parseFloat(t):t,n1=t=>typeof t=="number"||ae.test(t);function e3(t,e,n,r,s,i){s?(t.opacity=Xe(0,n.opacity!==void 0?n.opacity:1,t3(r)),t.opacityExit=Xe(e.opacity!==void 0?e.opacity:1,0,n3(r))):i&&(t.opacity=Xe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<ZF;o++){const a=`border${eA[o]}Radius`;let l=r1(e,a),c=r1(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||n1(l)===n1(c)?(t[a]=Math.max(Xe(t1(l),t1(c),r),0),(Br.test(c)||Br.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Xe(e.rotate||0,n.rotate||0,r))}function r1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const t3=tA(0,.5,wk),n3=tA(.5,.95,Vn);function tA(t,e,n){return r=>r<t?0:r>e?1:n(Na(t,e,r))}function s1(t,e){t.min=e.min,t.max=e.max}function Kn(t,e){s1(t.x,e.x),s1(t.y,e.y)}function i1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function o1(t,e,n,r,s){return t-=e,t=Ph(t,1/n,r),s!==void 0&&(t=Ph(t,1/s,r)),t}function r3(t,e=0,n=1,r=.5,s,i=t,o=t){if(Br.test(e)&&(e=parseFloat(e),e=Xe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Xe(i.min,i.max,r);t===i&&(a-=e),t.min=o1(t.min,e,n,a,s),t.max=o1(t.max,e,n,a,s)}function a1(t,e,[n,r,s],i,o){r3(t,e[n],e[r],e[s],e.scale,i,o)}const s3=["x","scaleX","originX"],i3=["y","scaleY","originY"];function l1(t,e,n,r){a1(t.x,e,s3,n?n.x:void 0,r?r.x:void 0),a1(t.y,e,i3,n?n.y:void 0,r?r.y:void 0)}function c1(t){return t.translate===0&&t.scale===1}function nA(t){return c1(t.x)&&c1(t.y)}function u1(t,e){return t.min===e.min&&t.max===e.max}function o3(t,e){return u1(t.x,e.x)&&u1(t.y,e.y)}function d1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rA(t,e){return d1(t.x,e.x)&&d1(t.y,e.y)}function h1(t){return Bn(t.x)/Bn(t.y)}function f1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class a3{constructor(){this.members=[]}add(e){C0(this.members,e),e.scheduleRender()}remove(e){if(k0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function l3(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:p,skewX:m,skewY:x}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),x&&(r+=`skewY(${x}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Gi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Wl=typeof window<"u"&&window.MotionDebug!==void 0,Em=["","X","Y","Z"],c3={visibility:"hidden"},p1=1e3;let u3=0;function Tm(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function sA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",He,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&sA(r)}function iA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=u3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Wl&&(Gi.totalNodes=Gi.resolvedTargetDeltas=Gi.recalculatedProjection=0),this.nodes.forEach(f3),this.nodes.forEach(v3),this.nodes.forEach(w3),this.nodes.forEach(p3),Wl&&window.MotionDebug.record(Gi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new XF)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new A0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=QF(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=JF(p,250),zd.hasAnimatedSinceResize&&(zd.hasAnimatedSinceResize=!1,this.nodes.forEach(g1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||T3,{onLayoutAnimationStart:T,onLayoutAnimationComplete:b}=d.getProps(),_=!this.targetLayout||!rA(this.targetLayout,x)||m,E=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,E);const C={...E0(w,"layout"),onPlay:T,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else p||g1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(x3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(m1);return}this.isUpdating||this.nodes.forEach(g3),this.isUpdating=!1,this.nodes.forEach(y3),this.nodes.forEach(d3),this.nodes.forEach(h3),this.clearAllSnapshots();const a=$r.now();Vt.delta=bs(0,1e3/60,a-Vt.timestamp),Vt.timestamp=a,Vt.isProcessing=!0,pm.update.process(Vt),pm.preRender.process(Vt),pm.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,f0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(m3),this.sharedNodes.forEach(_3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!nA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||qi(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),S3(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ut();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(I3))){const{scroll:d}=this.root;d&&(la(l.x,d.offset.x),la(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=ut();if(Kn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Kn(l,o),la(l.x,h.offset.x),la(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=ut();Kn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ca(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qi(d.latestValues)&&ca(l,d.latestValues)}return qi(this.latestValues)&&ca(l,this.latestValues),l}removeTransform(o){const a=ut();Kn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!qi(c.latestValues))continue;fy(c.latestValues)&&c.updateSnapshot();const d=ut(),h=c.measurePageBox();Kn(d,h),l1(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return qi(this.latestValues)&&l1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),ac(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ut(),this.targetWithTransforms=ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kn(this.target,this.layout.layoutBox),Yk(this.target,this.targetDelta)):Kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),ac(this.relativeTargetOrigin,this.target,m.target),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Wl&&Gi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fy(this.parent.latestValues)||Qk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Kn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;VF(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ut());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(i1(this.prevProjectionDelta.x,this.projectionDelta.x),i1(this.prevProjectionDelta.y,this.projectionDelta.y)),oc(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!f1(this.projectionDelta.x,this.prevProjectionDelta.x)||!f1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Wl&&Gi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=aa(),this.projectionDelta=aa(),this.projectionDeltaWithTransform=aa()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=aa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=ut(),m=l?l.source:void 0,x=this.layout?this.layout.source:void 0,w=m!==x,T=this.getStack(),b=!T||T.members.length<=1,_=!!(w&&!b&&this.options.crossfade===!0&&!this.path.some(E3));this.animationProgress=0;let E;this.mixTargetDelta=C=>{const P=C/1e3;y1(h.x,o.x,P),y1(h.y,o.y,P),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ac(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),b3(this.relativeTarget,this.relativeTargetOrigin,p,P),E&&o3(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ut()),Kn(E,this.relativeTarget)),w&&(this.animationValues=d,e3(d,c,this.latestValues,P,_,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{zd.hasAnimatedSinceResize=!0,this.currentAnimation=KF(0,p1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&oA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ut();const h=Bn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=Bn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Kn(a,l),ca(a,d),oc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new a3),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Tm("z",o,c,this.animationValues);for(let d=0;d<Em.length;d++)Tm(`rotate${Em[d]}`,o,c,this.animationValues),Tm(`skew${Em[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return c3;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Bd(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Bd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!qi(this.latestValues)&&(w.transform=d?d({},""):"none",this.hasProjected=!1),w}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=l3(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:x}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in Ih){if(p[w]===void 0)continue;const{correct:T,applyTo:b}=Ih[w],_=c.transform==="none"?p[w]:T(p[w],h);if(b){const E=b.length;for(let C=0;C<E;C++)c[b[C]]=_}else c[w]=_}return this.options.layoutId&&(c.pointerEvents=h===this?Bd(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(m1),this.root.sharedNodes.clear()}}}function d3(t){t.updateLayout()}function h3(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Qn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Bn(p);p.min=r[h].min,p.max=p.min+m}):oA(i,n.layoutBox,r)&&Qn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Bn(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=aa();oc(a,r,n.layoutBox);const l=aa();o?oc(l,t.applyTransform(s,!0),n.measuredBox):oc(l,r,n.layoutBox);const c=!nA(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const x=ut();ac(x,n.layoutBox,p.layoutBox);const w=ut();ac(w,r,m.layoutBox),rA(x,w)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function f3(t){Wl&&Gi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function p3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function m3(t){t.clearSnapshot()}function m1(t){t.clearMeasurements()}function g3(t){t.isLayoutDirty=!1}function y3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function g1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function v3(t){t.resolveTargetDelta()}function w3(t){t.calcProjection()}function x3(t){t.resetSkewAndRotation()}function _3(t){t.removeLeadSnapshot()}function y1(t,e,n){t.translate=Xe(e.translate,0,n),t.scale=Xe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function v1(t,e,n,r){t.min=Xe(e.min,n.min,r),t.max=Xe(e.max,n.max,r)}function b3(t,e,n,r){v1(t.x,e.x,n.x,r),v1(t.y,e.y,n.y,r)}function E3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const T3={duration:.45,ease:[.4,0,.1,1]},w1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),x1=w1("applewebkit/")&&!w1("chrome/")?Math.round:Vn;function _1(t){t.min=x1(t.min),t.max=x1(t.max)}function S3(t){_1(t.x),_1(t.y)}function oA(t,e,n){return t==="position"||t==="preserve-aspect"&&!kF(h1(e),h1(n),.2)}function I3(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const C3=iA({attachResizeListener:(t,e)=>$c(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sm={current:void 0},aA=iA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Sm.current){const t=new C3({});t.mount(window),t.setOptions({layoutScroll:!0}),Sm.current=t}return Sm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),k3={pan:{Feature:WF},drag:{Feature:zF,ProjectionNode:aA,MeasureLayout:Zk}};function b1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&He.postRender(()=>i(e,yu(e)))}class A3 extends Ii{mount(){const{current:e}=this.node;e&&(this.unmount=kV(e,n=>(b1(this.node,n,"Start"),r=>b1(this.node,r,"End"))))}unmount(){}}class R3 extends Ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gu($c(this.node.current,"focus",()=>this.onFocus()),$c(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function E1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&He.postRender(()=>i(e,yu(e)))}class P3 extends Ii{mount(){const{current:e}=this.node;e&&(this.unmount=NV(e,n=>(E1(this.node,n,"Start"),(r,{success:s})=>E1(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const my=new WeakMap,Im=new WeakMap,N3=t=>{const e=my.get(t.target);e&&e(t)},D3=t=>{t.forEach(N3)};function L3({root:t,...e}){const n=t||document;Im.has(n)||Im.set(n,{});const r=Im.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(D3,{root:t,...e})),r[s]}function j3(t,e,n){const r=L3(e);return my.set(t,n),r.observe(t),()=>{my.delete(t),r.unobserve(t)}}const M3={some:0,all:1};class O3 extends Ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:M3[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(l)};return j3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(V3(e,n))&&this.startObserver()}unmount(){}}function V3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const F3={inView:{Feature:O3},tap:{Feature:P3},focus:{Feature:R3},hover:{Feature:A3}},U3={layout:{ProjectionNode:aA,MeasureLayout:Zk}},gy={current:null},lA={current:!1};function B3(){if(lA.current=!0,!!l0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gy.current=t.matches;t.addListener(e),e()}else gy.current=!1}const $3=[...Dk,Kt,pi],z3=t=>$3.find(Nk(t)),T1=new WeakMap;function W3(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Zt(s))t.addValue(r,s);else if(Zt(i))t.addValue(r,Uc(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Uc(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const S1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class H3{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=j0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=$r.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,He.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Mf(n),this.isVariantNode=BC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const x=p[m];l[m]!==void 0&&Zt(x)&&x.set(l[m],!1)}}mount(e){this.current=e,T1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),lA.current||B3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){T1.delete(this.current),this.projection&&this.projection.unmount(),fi(this.notifyUpdate),fi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ko.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&He.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Da){const n=Da[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<S1.length;r++){const s=S1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=W3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Uc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Rk(s)||_k(s))?s=parseFloat(s):!z3(s)&&pi.test(n)&&(s=Ck(e,n)),this.setBaseTarget(e,Zt(s)?s.get():s)),Zt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=m0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new A0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class cA extends H3{constructor(){super(...arguments),this.KeyframeResolver=Lk}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function q3(t){return window.getComputedStyle(t)}class G3 extends cA{constructor(){super(...arguments),this.type="html",this.renderInstance=YC}readValueFromInstance(e,n){if(ko.has(n)){const r=L0(n);return r&&r.default||0}else{const r=q3(e),s=(GC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Xk(e,n)}build(e,n,r){v0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return b0(e,n,r)}}class K3 extends cA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ut}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ko.has(n)){const r=L0(n);return r&&r.default||0}return n=XC.has(n)?n:h0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return ek(e,n,r)}build(e,n,r){w0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){JC(e,n,r,s)}mount(e){this.isSVGTag=_0(e.tagName),super.mount(e)}}const Q3=(t,e)=>p0(t)?new K3(e):new G3(e,{allowProjection:t!==y.Fragment}),Y3=_V({...wF,...F3,...k3,...U3},Q3),qe=MO(Y3);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(t,e)=>{const n=y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>y.createElement("svg",{ref:d,...X3,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${J3(t)}`,a].join(" "),...c},[...e.map(([h,p])=>y.createElement(h,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=pe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=pe("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=pe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=pe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=pe("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=pe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=pe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=pe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=pe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),g5=()=>{};var R1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},y5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new v5;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const x=c<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class v5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w5=function(t){const e=wA(t);return xA.encodeByteArray(e,!0)},Oh=function(t){return w5(t).replace(/\./g,"")},_A=function(t){try{return xA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=()=>x5().__FIREBASE_DEFAULTS__,b5=()=>{if(typeof process>"u"||typeof R1>"u")return;const t=R1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_A(t[1]);return e&&JSON.parse(e)},Uf=()=>{try{return g5()||_5()||b5()||E5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bA=t=>{var e,n;return(n=(e=Uf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$0=t=>{const e=bA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EA=()=>{var t;return(t=Uf())==null?void 0:t.config},TA=t=>{var e;return(e=Uf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Oh(JSON.stringify(n)),Oh(JSON.stringify(o)),""].join(".")}const lc={};function S5(){const t={prod:[],emulator:[]};for(const e of Object.keys(lc))lc[e]?t.emulator.push(e):t.prod.push(e);return t}function I5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let P1=!1;function $f(t,e){if(typeof window>"u"||typeof document>"u"||!Yr(window.location.host)||lc[t]===e||lc[t]||P1)return;lc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=S5().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{P1=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=I5(r),m=n("text"),x=document.getElementById(m)||document.createElement("span"),w=n("learnmore"),T=document.getElementById(w)||document.createElement("a"),b=n("preprendIcon"),_=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;a(E),d(T,w);const C=c();l(_,b),E.append(_,x,T,C),document.body.appendChild(E)}i?(x.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function k5(){var e;const t=(e=Uf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function P5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N5(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D5(){return!k5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IA(){try{return typeof indexedDB=="object"}catch{return!1}}function CA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function L5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=j5,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?M5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ar(s,a,r)}}function M5(t,e){return t.replace(O5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const O5=/\{\$([^}]+)}/g;function V5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(N1(i)&&N1(o)){if(!mi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function N1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function F5(t,e){const n=new U5(t,e);return n.subscribe.bind(n)}class U5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");B5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cm),s.error===void 0&&(s.error=Cm),s.complete===void 0&&(s.complete=Cm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class $n{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new T5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W5(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z5(t){return t===Ki?void 0:t}function W5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const q5={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},G5=be.INFO,K5={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},Q5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=K5[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let z0=class{constructor(e){this.name=e,this._logLevel=G5,this._logHandler=Q5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}};const Y5=(t,e)=>e.some(n=>t instanceof n);let D1,L1;function X5(){return D1||(D1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J5(){return L1||(L1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kA=new WeakMap,vy=new WeakMap,AA=new WeakMap,km=new WeakMap,W0=new WeakMap;function Z5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ps(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kA.set(n,t)}).catch(()=>{}),W0.set(e,t),e}function eU(t){if(vy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});vy.set(t,e)}let wy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tU(t){wy=t(wy)}function nU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Am(this),e,...n);return AA.set(r,e.sort?e.sort():[e]),ps(r)}:J5().includes(t)?function(...e){return t.apply(Am(this),e),ps(kA.get(this))}:function(...e){return ps(t.apply(Am(this),e))}}function rU(t){return typeof t=="function"?nU(t):(t instanceof IDBTransaction&&eU(t),Y5(t,X5())?new Proxy(t,wy):t)}function ps(t){if(t instanceof IDBRequest)return Z5(t);if(km.has(t))return km.get(t);const e=rU(t);return e!==t&&(km.set(t,e),W0.set(e,t)),e}const Am=t=>W0.get(t);function zf(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ps(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ps(o.result),l.oldVersion,l.newVersion,ps(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function Rm(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ps(n).then(()=>{})}const sU=["get","getKey","getAll","getAllKeys","count"],iU=["put","add","delete","clear"],Pm=new Map;function j1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sU.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Pm.set(e,i),i}tU(t=>({...t,get:(e,n,r)=>j1(e,n)||t.get(e,n,r),has:(e,n)=>!!j1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xy="@firebase/app",M1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new z0("@firebase/app"),lU="@firebase/app-compat",cU="@firebase/analytics-compat",uU="@firebase/analytics",dU="@firebase/app-check-compat",hU="@firebase/app-check",fU="@firebase/auth",pU="@firebase/auth-compat",mU="@firebase/database",gU="@firebase/data-connect",yU="@firebase/database-compat",vU="@firebase/functions",wU="@firebase/functions-compat",xU="@firebase/installations",_U="@firebase/installations-compat",bU="@firebase/messaging",EU="@firebase/messaging-compat",TU="@firebase/performance",SU="@firebase/performance-compat",IU="@firebase/remote-config",CU="@firebase/remote-config-compat",kU="@firebase/storage",AU="@firebase/storage-compat",RU="@firebase/firestore",PU="@firebase/ai",NU="@firebase/firestore-compat",DU="firebase",LU="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="[DEFAULT]",jU={[xy]:"fire-core",[lU]:"fire-core-compat",[uU]:"fire-analytics",[cU]:"fire-analytics-compat",[hU]:"fire-app-check",[dU]:"fire-app-check-compat",[fU]:"fire-auth",[pU]:"fire-auth-compat",[mU]:"fire-rtdb",[gU]:"fire-data-connect",[yU]:"fire-rtdb-compat",[vU]:"fire-fn",[wU]:"fire-fn-compat",[xU]:"fire-iid",[_U]:"fire-iid-compat",[bU]:"fire-fcm",[EU]:"fire-fcm-compat",[TU]:"fire-perf",[SU]:"fire-perf-compat",[IU]:"fire-rc",[CU]:"fire-rc-compat",[kU]:"fire-gcs",[AU]:"fire-gcs-compat",[RU]:"fire-fst",[NU]:"fire-fst-compat",[PU]:"fire-vertex","fire-js":"fire-js",[DU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,MU=new Map,by=new Map;function O1(t,e){try{t.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sr(t){const e=t.name;if(by.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;by.set(e,t);for(const n of Vh.values())O1(n,t);for(const n of MU.values())O1(n,t);return!0}function Ci(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new Ao("app","Firebase",OU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=LU;function RA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:_y,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ai.create("bad-app-name",{appName:String(s)});if(n||(n=EA()),!n)throw ai.create("no-options");const i=Vh.get(s);if(i){if(mi(n,i.options)&&mi(r,i.config))return i;throw ai.create("duplicate-app",{appName:s})}const o=new H5(s);for(const l of by.values())o.addComponent(l);const a=new VU(n,r,o);return Vh.set(s,a),a}function wu(t=_y){const e=Vh.get(t);if(!e&&t===_y&&EA())return RA();if(!e)throw ai.create("no-app",{appName:t});return e}function en(t,e,n){let r=jU[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(o.join(" "));return}sr(new $n(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="firebase-heartbeat-database",UU=1,Hc="firebase-heartbeat-store";let Nm=null;function PA(){return Nm||(Nm=zf(FU,UU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ai.create("idb-open",{originalErrorMessage:t.message})})),Nm}async function BU(t){try{const n=(await PA()).transaction(Hc),r=await n.objectStore(Hc).get(NA(t));return await n.done,r}catch(e){if(e instanceof ar)Es.warn(e.message);else{const n=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(n.message)}}}async function V1(t,e){try{const r=(await PA()).transaction(Hc,"readwrite");await r.objectStore(Hc).put(e,NA(t)),await r.done}catch(n){if(n instanceof ar)Es.warn(n.message);else{const r=ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Es.warn(r.message)}}}function NA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=1024,zU=30;class WU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=F1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>zU){const o=GU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F1(),{heartbeatsToSend:r,unsentEntries:s}=HU(this._heartbeatsCache.heartbeats),i=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Es.warn(n),""}}}function F1(){return new Date().toISOString().substring(0,10)}function HU(t,e=$U){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),U1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),U1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IA()?CA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function U1(t){return Oh(JSON.stringify({version:2,heartbeats:t})).length}function GU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t){sr(new $n("platform-logger",e=>new oU(e),"PRIVATE")),sr(new $n("heartbeat",e=>new WU(e),"PRIVATE")),en(xy,M1,t),en(xy,M1,"esm2020"),en("fire-js","")}KU("");function DA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QU=DA,LA=new Ao("auth","Firebase",DA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new z0("@firebase/auth");function YU(t,...e){Fh.logLevel<=be.WARN&&Fh.warn(`Auth (${Ro}): ${t}`,...e)}function Wd(t,...e){Fh.logLevel<=be.ERROR&&Fh.error(`Auth (${Ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,...e){throw q0(t,...e)}function wr(t,...e){return q0(t,...e)}function H0(t,e,n){const r={...QU(),[e]:n};return new Ao("auth","Firebase",r).create(e,{appName:t.name})}function ao(t){return H0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gr(t,"argument-error"),H0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function q0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LA.create(t,...e)}function de(t,e,...n){if(!t)throw q0(e,...n)}function ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wd(e),new Error(e)}function Ts(t,e){t||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function JU(){return B1()==="http:"||B1()==="https:"}function B1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JU()||R5()||"connection"in navigator)?navigator.onLine:!0}function e6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ts(n>e,"Short delay should be less than long delay!"),this.isMobile=C5()||P5()}get(){return ZU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t,e){Ts(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r6=new xu(3e4,6e4);function K0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ja(t,e,n,r,s={}){return MA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=vu({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return A5()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Yr(t.emulatorConfig.host)&&(c.credentials="include"),jA.fetch()(await OA(t,t.config.apiHost,n,a),c)})}async function MA(t,e,n){t._canInitEmulator=!1;const r={...t6,...e};try{const s=new i6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw md(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw md(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw md(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw md(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw H0(t,d,c);Gr(t,d)}}catch(s){if(s instanceof ar)throw s;Gr(t,"network-request-failed",{message:String(s)})}}async function s6(t,e,n,r,s={}){const i=await Ja(t,e,n,r,s);return"mfaPendingCredential"in i&&Gr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function OA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?G0(t.config,s):`${t.config.apiScheme}://${s}`;return n6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class i6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wr(this.auth,"network-request-failed")),r6.get())})}}function md(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(t,e){return Ja(t,"POST","/v1/accounts:delete",e)}async function Uh(t,e){return Ja(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a6(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),s=Q0(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:cc(Dm(s.auth_time)),issuedAtTime:cc(Dm(s.iat)),expirationTime:cc(Dm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Dm(t){return Number(t)*1e3}function Q0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wd("JWT malformed, contained fewer than 3 sections"),null;try{const s=_A(n);return s?JSON.parse(s):(Wd("Failed to decode base64 JWT payload"),null)}catch(s){return Wd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $1(t){const e=Q0(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&l6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function l6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t){var h;const e=t.auth,n=await t.getIdToken(),r=await qc(t,Uh(e,{idToken:n}));de(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?VA(s.providerUserInfo):[],o=d6(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ty(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function u6(t){const e=Ne(t);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function VA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(t,e){const n=await MA(t,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await OA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Yr(t.emulatorConfig.host)&&(l.credentials="include"),jA.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f6(t,e){return Ja(t,"POST","/v2/accounts:revokeToken",K0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=$1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await h6(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new wa;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new c6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ty(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await qc(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return a6(this,e)}reload(){return u6(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await qc(this,o6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:m,providerData:x,stsTokenManager:w}=n;de(h&&w,e,"internal-error");const T=wa.fromJSON(this.name,w);de(typeof h=="string",e,"internal-error"),Ms(r,e.name),Ms(s,e.name),de(typeof p=="boolean",e,"internal-error"),de(typeof m=="boolean",e,"internal-error"),Ms(i,e.name),Ms(o,e.name),Ms(a,e.name),Ms(l,e.name),Ms(c,e.name),Ms(d,e.name);const b=new gr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:T,createdAt:c,lastLoginAt:d});return x&&Array.isArray(x)&&(b.providerData=x.map(_=>({..._}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new wa;s.updateFromServerResponse(n);const i=new gr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];de(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?VA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new wa;a.updateFromIdToken(r);const l=new gr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ty(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;function cs(t){Ts(t instanceof Function,"Expected a class definition");let e=z1.get(t);return e?(Ts(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FA.type="NONE";const W1=FA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e,n){return`firebase:${t}:${e}:${n}`}class xa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Hd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Hd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uh(this.auth,{idToken:e}).catch(()=>{});return n?gr._fromGetAccountInfoResponse(this.auth,n,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xa(cs(W1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||cs(W1);const o=Hd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Uh(e,{idToken:d}).catch(()=>{});if(!p)break;h=await gr._fromGetAccountInfoResponse(e,p,d)}else h=gr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new xa(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new xa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HA(e))return"Blackberry";if(qA(e))return"Webos";if(BA(e))return"Safari";if((e.includes("chrome/")||$A(e))&&!e.includes("edge/"))return"Chrome";if(WA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function UA(t=rn()){return/firefox\//i.test(t)}function BA(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $A(t=rn()){return/crios\//i.test(t)}function zA(t=rn()){return/iemobile/i.test(t)}function WA(t=rn()){return/android/i.test(t)}function HA(t=rn()){return/blackberry/i.test(t)}function qA(t=rn()){return/webos/i.test(t)}function Y0(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p6(t=rn()){var e;return Y0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function m6(){return N5()&&document.documentMode===10}function GA(t=rn()){return Y0(t)||WA(t)||qA(t)||HA(t)||/windows phone/i.test(t)||zA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e=[]){let n;switch(t){case"Browser":n=H1(rn());break;case"Worker":n=`${H1(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(t,e={}){return Ja(t,"GET","/v2/passwordPolicy",K0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=6;class w6{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??v6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q1(this),this.idTokenSubscription=new q1(this),this.beforeStateQueue=new g6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uh(this,{idToken:e}),r=await gr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(ao(this));const n=e?Ne(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y6(this),n=new w6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await f6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cs(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[cs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&YU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wf(t){return Ne(t)}class q1{constructor(e){this.auth=e,this.observer=null,this.addObserver=F5(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _6(t){X0=t}function b6(t){return X0.loadJS(t)}function E6(){return X0.gapiScript}function T6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t,e){const n=Ci(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(mi(i,e??{}))return s;Gr(s,"already-initialized")}return n.initialize({options:e})}function I6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function C6(t,e,n){const r=Wf(t);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=QA(e),{host:o,port:a}=k6(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(mi(c,r.config.emulator)&&mi(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Yr(o)?(Bf(`${i}//${o}${l}`),$f("Auth",!0)):A6()}function QA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function k6(t){const e=QA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:G1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:G1(o)}}}function G1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function A6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,n){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t,e){return s6(t,"POST","/v1/accounts:signInWithIdp",K0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="http://localhost";class yo extends YA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new yo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _a(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_a(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_a(e,n)}buildRequest(){const e={requestUri:R6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends J0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends _u{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yo._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return is.credential(n,r)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends _u{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends _u{constructor(){super("twitter.com")}static credential(e,n){return yo._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await gr._fromIdTokenResponse(e,r,s),o=K1(r);return new ja({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=K1(r);return new ja({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function K1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends ar{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new $h(e,n,r,s)}}function XA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(t,i,e,r):i})}async function P6(t,e,n=!1){const r=await qc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ja._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(t,e,n=!1){const{auth:r}=t;if(Nn(r.app))return Promise.reject(ao(r));const s="reauthenticate";try{const i=await qc(t,XA(r,s,e,t),n);de(i.idToken,r,"internal-error");const o=Q0(i.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),ja._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D6(t,e,n=!1){if(Nn(t.app))return Promise.reject(ao(t));const r="signIn",s=await XA(t,r,e),i=await ja._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function L6(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function j6(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function M6(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function O6(t){return Ne(t).signOut()}const zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=1e3,F6=10;class ZA extends JA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);m6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,F6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},V6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZA.type="LOCAL";const U6=ZA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR extends JA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eR.type="SESSION";const tR=eR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Hf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await B6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Z0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function z6(t){zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function W6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function q6(){return nR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="firebaseLocalStorageDb",G6=1,Wh="firebaseLocalStorage",sR="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qf(t,e){return t.transaction([Wh],e?"readwrite":"readonly").objectStore(Wh)}function K6(){const t=indexedDB.deleteDatabase(rR);return new bu(t).toPromise()}function Sy(){const t=indexedDB.open(rR,G6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wh,{keyPath:sR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wh)?e(r):(r.close(),await K6(),e(await Sy()))})})}async function Q1(t,e,n){const r=qf(t,!0).put({[sR]:e,value:n});return new bu(r).toPromise()}async function Q6(t,e){const n=qf(t,!1).get(e),r=await new bu(n).toPromise();return r===void 0?null:r.value}function Y1(t,e){const n=qf(t,!0).delete(e);return new bu(n).toPromise()}const Y6=800,X6=3;class iR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>X6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(q6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await W6(),!this.activeServiceWorker)return;this.sender=new $6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sy();return await Q1(e,zh,"1"),await Y1(e,zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Q6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Y1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qf(s,!1).getAll();return new bu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iR.type="LOCAL";const J6=iR;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t,e){return e?cs(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew extends YA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z6(t){return D6(t.auth,new ew(t),t.bypassAuthState)}function e9(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),N6(n,new ew(t),t.bypassAuthState)}async function t9(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),P6(n,new ew(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z6;case"linkViaPopup":case"linkViaRedirect":return t9;case"reauthViaPopup":case"reauthViaRedirect":return e9;default:Gr(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new xu(2e3,1e4);async function r9(t,e,n){if(Nn(t.app))return Promise.reject(wr(t,"operation-not-supported-in-this-environment"));const r=Wf(t);XU(t,e,J0);const s=oR(r,n);return new Zi(r,"signInViaPopup",e,s).executeNotNull()}class Zi extends aR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zi.currentPopupAction&&Zi.currentPopupAction.cancel(),Zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=Z0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n9.get())};e()}}Zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="pendingRedirect",qd=new Map;class i9 extends aR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const r=await o9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o9(t,e){const n=c9(e),r=l9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function a9(t,e){qd.set(t._key(),e)}function l9(t){return cs(t._redirectPersistence)}function c9(t){return Hd(s9,t.config.apiKey,t.name)}async function u9(t,e,n=!1){if(Nn(t.app))return Promise.reject(ao(t));const r=Wf(t),s=oR(r,e),o=await new i9(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=10*60*1e3;class h9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lR(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(wr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d9&&this.cachedEventUids.clear(),this.cachedEventUids.has(X1(e))}saveEventToCache(e){this.cachedEventUids.add(X1(e)),this.lastProcessedEventTime=Date.now()}}function X1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e={}){return Ja(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g9=/^https?/;async function y9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await p9(t);for(const n of e)try{if(v9(n))return}catch{}Gr(t,"unauthorized-domain")}function v9(t){const e=Ey(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!g9.test(n))return!1;if(m9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=new xu(3e4,6e4);function J1(){const t=zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function x9(t){return new Promise((e,n)=>{var s,i,o;function r(){J1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J1(),n(wr(t,"network-request-failed"))},timeout:w9.get()})}if((i=(s=zr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=zr().gapi)!=null&&o.load)r();else{const a=T6("iframefcb");return zr()[a]=()=>{gapi.load?r():n(wr(t,"network-request-failed"))},b6(`${E6()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function _9(t){return Gd=Gd||x9(t),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=new xu(5e3,15e3),E9="__/auth/iframe",T9="emulator/auth/iframe",S9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},I9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C9(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?G0(e,T9):`https://${t.config.authDomain}/${E9}`,r={apiKey:e.apiKey,appName:t.name,v:Ro},s=I9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${vu(r).slice(1)}`}async function k9(t){const e=await _9(t),n=zr().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:C9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=wr(t,"network-request-failed"),a=zr().setTimeout(()=>{i(o)},b9.get());function l(){zr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R9=500,P9=600,N9="_blank",D9="http://localhost";class Z1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L9(t,e,n,r=R9,s=P9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...A9,width:r.toString(),height:s.toString(),top:i,left:o},c=rn().toLowerCase();n&&(a=$A(c)?N9:n),UA(c)&&(e=e||D9,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,x])=>`${p}${m}=${x},`,"");if(p6(c)&&a!=="_self")return j9(e||"",a),new Z1(null);const h=window.open(e||"",a,d);de(h,t,"popup-blocked");try{h.focus()}catch{}return new Z1(h)}function j9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="__/auth/handler",O9="emulator/auth/handler",V9=encodeURIComponent("fac");async function eE(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ro,eventId:s};if(e instanceof J0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",V5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof _u){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${V9}=${encodeURIComponent(l)}`:"";return`${F9(t)}?${vu(a).slice(1)}${c}`}function F9({config:t}){return t.emulator?G0(t,O9):`https://${t.authDomain}/${M9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="webStorageSupport";class U9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tR,this._completeRedirectFn=u9,this._overrideRedirectResult=a9}async _openPopup(e,n,r,s){var o;Ts((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await eE(e,n,r,Ey(),s);return L9(e,i,Z0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await eE(e,n,r,Ey(),s);return z6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ts(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await k9(e),r=new h9(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lm,{type:Lm},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Lm];i!==void 0&&n(!!i),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=y9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GA()||BA()||Y0()}}const B9=U9;var tE="@firebase/auth",nE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W9(t){sr(new $n("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KA(t)},c=new x6(r,s,i,l);return I6(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sr(new $n("auth-internal",e=>{const n=Wf(e.getProvider("auth").getImmediate());return(r=>new $9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(tE,nE,z9(t)),en(tE,nE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=5*60,q9=TA("authIdTokenMaxAge")||H9;let rE=null;const G9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>q9)return;const s=n==null?void 0:n.token;rE!==s&&(rE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K9(t=wu()){const e=Ci(t,"auth");if(e.isInitialized())return e.getImmediate();const n=S6(t,{popupRedirectResolver:B9,persistence:[J6,U6,tR]}),r=TA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=G9(i.toString());j6(n,o,()=>o(n.currentUser)),L6(n,a=>o(a))}}const s=bA("auth");return s&&C6(n,`http://${s}`),n}function Q9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=wr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Q9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W9("Browser");var Y9="firebase",X9="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(Y9,X9,"app");var sE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var li,cR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function k(){}k.prototype=S.prototype,I.F=S.prototype,I.prototype=new k,I.prototype.constructor=I,I.D=function(R,D,O){for(var N=Array(arguments.length-2),X=2;X<arguments.length;X++)N[X-2]=arguments[X];return S.prototype[D].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,k){k||(k=0);const R=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)R[D]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(D=0;D<16;++D)R[D]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=I.g[0],k=I.g[1],D=I.g[2];let O=I.g[3],N;N=S+(O^k&(D^O))+R[0]+3614090360&4294967295,S=k+(N<<7&4294967295|N>>>25),N=O+(D^S&(k^D))+R[1]+3905402710&4294967295,O=S+(N<<12&4294967295|N>>>20),N=D+(k^O&(S^k))+R[2]+606105819&4294967295,D=O+(N<<17&4294967295|N>>>15),N=k+(S^D&(O^S))+R[3]+3250441966&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(O^k&(D^O))+R[4]+4118548399&4294967295,S=k+(N<<7&4294967295|N>>>25),N=O+(D^S&(k^D))+R[5]+1200080426&4294967295,O=S+(N<<12&4294967295|N>>>20),N=D+(k^O&(S^k))+R[6]+2821735955&4294967295,D=O+(N<<17&4294967295|N>>>15),N=k+(S^D&(O^S))+R[7]+4249261313&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(O^k&(D^O))+R[8]+1770035416&4294967295,S=k+(N<<7&4294967295|N>>>25),N=O+(D^S&(k^D))+R[9]+2336552879&4294967295,O=S+(N<<12&4294967295|N>>>20),N=D+(k^O&(S^k))+R[10]+4294925233&4294967295,D=O+(N<<17&4294967295|N>>>15),N=k+(S^D&(O^S))+R[11]+2304563134&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(O^k&(D^O))+R[12]+1804603682&4294967295,S=k+(N<<7&4294967295|N>>>25),N=O+(D^S&(k^D))+R[13]+4254626195&4294967295,O=S+(N<<12&4294967295|N>>>20),N=D+(k^O&(S^k))+R[14]+2792965006&4294967295,D=O+(N<<17&4294967295|N>>>15),N=k+(S^D&(O^S))+R[15]+1236535329&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(D^O&(k^D))+R[1]+4129170786&4294967295,S=k+(N<<5&4294967295|N>>>27),N=O+(k^D&(S^k))+R[6]+3225465664&4294967295,O=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(O^S))+R[11]+643717713&4294967295,D=O+(N<<14&4294967295|N>>>18),N=k+(O^S&(D^O))+R[0]+3921069994&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(D^O&(k^D))+R[5]+3593408605&4294967295,S=k+(N<<5&4294967295|N>>>27),N=O+(k^D&(S^k))+R[10]+38016083&4294967295,O=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(O^S))+R[15]+3634488961&4294967295,D=O+(N<<14&4294967295|N>>>18),N=k+(O^S&(D^O))+R[4]+3889429448&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(D^O&(k^D))+R[9]+568446438&4294967295,S=k+(N<<5&4294967295|N>>>27),N=O+(k^D&(S^k))+R[14]+3275163606&4294967295,O=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(O^S))+R[3]+4107603335&4294967295,D=O+(N<<14&4294967295|N>>>18),N=k+(O^S&(D^O))+R[8]+1163531501&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(D^O&(k^D))+R[13]+2850285829&4294967295,S=k+(N<<5&4294967295|N>>>27),N=O+(k^D&(S^k))+R[2]+4243563512&4294967295,O=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(O^S))+R[7]+1735328473&4294967295,D=O+(N<<14&4294967295|N>>>18),N=k+(O^S&(D^O))+R[12]+2368359562&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(k^D^O)+R[5]+4294588738&4294967295,S=k+(N<<4&4294967295|N>>>28),N=O+(S^k^D)+R[8]+2272392833&4294967295,O=S+(N<<11&4294967295|N>>>21),N=D+(O^S^k)+R[11]+1839030562&4294967295,D=O+(N<<16&4294967295|N>>>16),N=k+(D^O^S)+R[14]+4259657740&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(k^D^O)+R[1]+2763975236&4294967295,S=k+(N<<4&4294967295|N>>>28),N=O+(S^k^D)+R[4]+1272893353&4294967295,O=S+(N<<11&4294967295|N>>>21),N=D+(O^S^k)+R[7]+4139469664&4294967295,D=O+(N<<16&4294967295|N>>>16),N=k+(D^O^S)+R[10]+3200236656&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(k^D^O)+R[13]+681279174&4294967295,S=k+(N<<4&4294967295|N>>>28),N=O+(S^k^D)+R[0]+3936430074&4294967295,O=S+(N<<11&4294967295|N>>>21),N=D+(O^S^k)+R[3]+3572445317&4294967295,D=O+(N<<16&4294967295|N>>>16),N=k+(D^O^S)+R[6]+76029189&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(k^D^O)+R[9]+3654602809&4294967295,S=k+(N<<4&4294967295|N>>>28),N=O+(S^k^D)+R[12]+3873151461&4294967295,O=S+(N<<11&4294967295|N>>>21),N=D+(O^S^k)+R[15]+530742520&4294967295,D=O+(N<<16&4294967295|N>>>16),N=k+(D^O^S)+R[2]+3299628645&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(D^(k|~O))+R[0]+4096336452&4294967295,S=k+(N<<6&4294967295|N>>>26),N=O+(k^(S|~D))+R[7]+1126891415&4294967295,O=S+(N<<10&4294967295|N>>>22),N=D+(S^(O|~k))+R[14]+2878612391&4294967295,D=O+(N<<15&4294967295|N>>>17),N=k+(O^(D|~S))+R[5]+4237533241&4294967295,k=D+(N<<21&4294967295|N>>>11),N=S+(D^(k|~O))+R[12]+1700485571&4294967295,S=k+(N<<6&4294967295|N>>>26),N=O+(k^(S|~D))+R[3]+2399980690&4294967295,O=S+(N<<10&4294967295|N>>>22),N=D+(S^(O|~k))+R[10]+4293915773&4294967295,D=O+(N<<15&4294967295|N>>>17),N=k+(O^(D|~S))+R[1]+2240044497&4294967295,k=D+(N<<21&4294967295|N>>>11),N=S+(D^(k|~O))+R[8]+1873313359&4294967295,S=k+(N<<6&4294967295|N>>>26),N=O+(k^(S|~D))+R[15]+4264355552&4294967295,O=S+(N<<10&4294967295|N>>>22),N=D+(S^(O|~k))+R[6]+2734768916&4294967295,D=O+(N<<15&4294967295|N>>>17),N=k+(O^(D|~S))+R[13]+1309151649&4294967295,k=D+(N<<21&4294967295|N>>>11),N=S+(D^(k|~O))+R[4]+4149444226&4294967295,S=k+(N<<6&4294967295|N>>>26),N=O+(k^(S|~D))+R[11]+3174756917&4294967295,O=S+(N<<10&4294967295|N>>>22),N=D+(S^(O|~k))+R[2]+718787259&4294967295,D=O+(N<<15&4294967295|N>>>17),N=k+(O^(D|~S))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+O&4294967295}r.prototype.v=function(I,S){S===void 0&&(S=I.length);const k=S-this.blockSize,R=this.C;let D=this.h,O=0;for(;O<S;){if(D==0)for(;O<=k;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<S;)if(R[D++]=I.charCodeAt(O++),D==this.blockSize){s(this,R),D=0;break}}else for(;O<S;)if(R[D++]=I[O++],D==this.blockSize){s(this,R),D=0;break}}this.h=D,this.o+=S},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var k=I.length-8;k<I.length;++k)I[k]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,k=0;k<4;++k)for(let R=0;R<32;R+=8)I[S++]=this.g[k]>>>R&255;return I};function i(I,S){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=S(I)}function o(I,S){this.h=S;const k=[];let R=!0;for(let D=I.length-1;D>=0;D--){const O=I[D]|0;R&&O==S||(k[D]=O,R=!1)}this.g=k}var a={};function l(I){return-128<=I&&I<128?i(I,function(S){return new o([S|0],S<0?-1:0)}):new o([I|0],I<0?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(I<0)return T(c(-I));const S=[];let k=1;for(let R=0;I>=k;R++)S[R]=I/k|0,k*=4294967296;return new o(S,0)}function d(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return T(d(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=c(Math.pow(S,8));let R=h;for(let O=0;O<I.length;O+=8){var D=Math.min(8,I.length-O);const N=parseInt(I.substring(O,O+D),S);D<8?(D=c(Math.pow(S,D)),R=R.j(D).add(c(N))):(R=R.j(k),R=R.add(c(N)))}return R}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-T(this).m();let I=0,S=1;for(let k=0;k<this.g.length;k++){const R=this.i(k);I+=(R>=0?R:4294967296+R)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(w(this))return"-"+T(this).toString(I);const S=c(Math.pow(I,6));var k=this;let R="";for(;;){const D=C(k,S).g;k=b(k,D.j(S));let O=((k.g.length>0?k.g[0]:k.h)>>>0).toString(I);if(k=D,x(k))return O+R;for(;O.length<6;)O="0"+O;R=O+R}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=b(this,I),w(I)?-1:x(I)?0:1};function T(I){const S=I.g.length,k=[];for(let R=0;R<S;R++)k[R]=~I.g[R];return new o(k,~I.h).add(p)}t.abs=function(){return w(this)?T(this):this},t.add=function(I){const S=Math.max(this.g.length,I.g.length),k=[];let R=0;for(let D=0;D<=S;D++){let O=R+(this.i(D)&65535)+(I.i(D)&65535),N=(O>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);R=N>>>16,O&=65535,N&=65535,k[D]=N<<16|O}return new o(k,k[k.length-1]&-2147483648?-1:0)};function b(I,S){return I.add(T(S))}t.j=function(I){if(x(this)||x(I))return h;if(w(this))return w(I)?T(this).j(T(I)):T(T(this).j(I));if(w(I))return T(this.j(T(I)));if(this.l(m)<0&&I.l(m)<0)return c(this.m()*I.m());const S=this.g.length+I.g.length,k=[];for(var R=0;R<2*S;R++)k[R]=0;for(R=0;R<this.g.length;R++)for(let D=0;D<I.g.length;D++){const O=this.i(R)>>>16,N=this.i(R)&65535,X=I.i(D)>>>16,W=I.i(D)&65535;k[2*R+2*D]+=N*W,_(k,2*R+2*D),k[2*R+2*D+1]+=O*W,_(k,2*R+2*D+1),k[2*R+2*D+1]+=N*X,_(k,2*R+2*D+1),k[2*R+2*D+2]+=O*X,_(k,2*R+2*D+2)}for(I=0;I<S;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=S;I<2*S;I++)k[I]=0;return new o(k,0)};function _(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function E(I,S){this.g=I,this.h=S}function C(I,S){if(x(S))throw Error("division by zero");if(x(I))return new E(h,h);if(w(I))return S=C(T(I),S),new E(T(S.g),T(S.h));if(w(S))return S=C(I,T(S)),new E(T(S.g),S.h);if(I.g.length>30){if(w(I)||w(S))throw Error("slowDivide_ only works with positive integers.");for(var k=p,R=S;R.l(I)<=0;)k=P(k),R=P(R);var D=M(k,1),O=M(R,1);for(R=M(R,2),k=M(k,2);!x(R);){var N=O.add(R);N.l(I)<=0&&(D=D.add(k),O=N),R=M(R,1),k=M(k,1)}return S=b(I,D.j(S)),new E(D,S)}for(D=h;I.l(S)>=0;){for(k=Math.max(1,Math.floor(I.m()/S.m())),R=Math.ceil(Math.log(k)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),O=c(k),N=O.j(S);w(N)||N.l(I)>0;)k-=R,O=c(k),N=O.j(S);x(O)&&(O=p),D=D.add(O),I=b(I,N)}return new E(D,I)}t.B=function(I){return C(this,I).h},t.and=function(I){const S=Math.max(this.g.length,I.g.length),k=[];for(let R=0;R<S;R++)k[R]=this.i(R)&I.i(R);return new o(k,this.h&I.h)},t.or=function(I){const S=Math.max(this.g.length,I.g.length),k=[];for(let R=0;R<S;R++)k[R]=this.i(R)|I.i(R);return new o(k,this.h|I.h)},t.xor=function(I){const S=Math.max(this.g.length,I.g.length),k=[];for(let R=0;R<S;R++)k[R]=this.i(R)^I.i(R);return new o(k,this.h^I.h)};function P(I){const S=I.g.length+1,k=[];for(let R=0;R<S;R++)k[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(k,I.h)}function M(I,S){const k=S>>5;S%=32;const R=I.g.length-k,D=[];for(let O=0;O<R;O++)D[O]=S>0?I.i(O+k)>>>S|I.i(O+k+1)<<32-S:I.i(O+k);return new o(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,li=o}).apply(typeof sE<"u"?sE:typeof self<"u"?self:typeof window<"u"?window:{});var gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uR,Hl,dR,Kd,Iy,hR,fR,pR;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gd=="object"&&gd];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var v=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var V=u[A];if(!(V in v))break e;v=v[V]}u=u[u.length-1],A=v[u],g=g(A),g!=A&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var v=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.push([A,g[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,v){return u.call.apply(u.bind,arguments)}function c(u,g,v){return c=l,c.apply(null,arguments)}function d(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function h(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,V,B){for(var K=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)K[ve-2]=arguments[ve];return g.prototype[V].apply(A,K)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const v=Array(g);for(let A=0;A<g;A++)v[A]=u[A];return v}return[]}function x(u,g){for(let A=1;A<arguments.length;A++){const V=arguments[A];var v=typeof V;if(v=v!="object"?v:V?Array.isArray(V)?"array":v:"null",v=="array"||v=="object"&&typeof V.length=="number"){v=u.length||0;const B=V.length||0;u.length=v+B;for(let K=0;K<B;K++)u[v+K]=V[K]}else u.push(V)}}class w{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(u){o.setTimeout(()=>{throw u},0)}function b(){var u=I;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class _{constructor(){this.h=this.g=null}add(g,v){const A=E.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var E=new w(()=>new C,u=>u.reset());class C{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let P,M=!1,I=new _,S=()=>{const u=Promise.resolve(void 0);P=()=>{u.then(k)}};function k(){for(var u;u=b();){try{u.h.call(u.g)}catch(v){T(v)}var g=E;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}M=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};o.addEventListener("test",v,g),o.removeEventListener("test",v,g)}catch{}return u}();function N(u){return/^[\s\xa0]*$/.test(u)}function X(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(X,D),X.prototype.init=function(u,g){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var W="closure_listenable_"+(Math.random()*1e6|0),Y=0;function H(u,g,v,A,V){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=V,this.key=++Y,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,g,v){for(const A in u)g.call(v,u[A],A,u)}function j(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function L(u){const g={};for(const v in u)g[v]=u[v];return g}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(u,g){let v,A;for(let V=1;V<arguments.length;V++){A=arguments[V];for(v in A)u[v]=A[v];for(let B=0;B<G.length;B++)v=G[B],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function re(u){this.src=u,this.g={},this.h=0}re.prototype.add=function(u,g,v,A,V){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const K=te(u,g,A,V);return K>-1?(g=u[K],v||(g.fa=!1)):(g=new H(g,this.src,B,!!A,V),g.fa=v,u.push(g)),g};function oe(u,g){const v=g.type;if(v in u.g){var A=u.g[v],V=Array.prototype.indexOf.call(A,g,void 0),B;(B=V>=0)&&Array.prototype.splice.call(A,V,1),B&&(F(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function te(u,g,v,A){for(let V=0;V<u.length;++V){const B=u[V];if(!B.da&&B.listener==g&&B.capture==!!v&&B.ha==A)return V}return-1}var ne="closure_lm_"+(Math.random()*1e6|0),ce={};function we(u,g,v,A,V){if(Array.isArray(g)){for(let B=0;B<g.length;B++)we(u,g[B],v,A,V);return null}return v=sn(v),u&&u[W]?u.J(g,v,a(A)?!!A.capture:!1,V):ie(u,g,v,!1,A,V)}function ie(u,g,v,A,V,B){if(!g)throw Error("Invalid event type");const K=a(V)?!!V.capture:!!V;let ve=rt(u);if(ve||(u[ne]=ve=new re(u)),v=ve.add(g,v,A,K,B),v.proxy)return v;if(A=ke(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)O||(V=K),V===void 0&&(V=!1),u.addEventListener(g.toString(),A,V);else if(u.attachEvent)u.attachEvent(he(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ke(){function u(v){return g.call(u.src,u.listener,v)}const g=Qe;return u}function _e(u,g,v,A,V){if(Array.isArray(g))for(var B=0;B<g.length;B++)_e(u,g[B],v,A,V);else A=a(A)?!!A.capture:!!A,v=sn(v),u&&u[W]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],v=te(g,v,A,V),v>-1&&(F(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=rt(u))&&(g=u.g[g.toString()],u=-1,g&&(u=te(g,v,A,V)),(v=u>-1?g[u]:null)&&Le(v))}function Le(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[W])oe(g.i,u);else{var v=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(v,A,u.capture):g.detachEvent?g.detachEvent(he(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=rt(g))?(oe(v,u),v.h==0&&(v.src=null,g[ne]=null)):F(u)}}}function he(u){return u in ce?ce[u]:ce[u]="on"+u}function Qe(u,g){if(u.da)u=!0;else{g=new X(g,this);const v=u.listener,A=u.ha||u.src;u.fa&&Le(u),u=v.call(A,g)}return u}function rt(u){return u=u[ne],u instanceof re?u:null}var kt="__closure_events_fn_"+(Math.random()*1e9>>>0);function sn(u){return typeof u=="function"?u:(u[kt]||(u[kt]=function(g){return u.handleEvent(g)}),u[kt])}function je(){R.call(this),this.i=new re(this),this.M=this,this.G=null}h(je,R),je.prototype[W]=!0,je.prototype.removeEventListener=function(u,g,v,A){_e(this,u,g,v,A)};function Se(u,g){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var V=g;g=new D(A,u),ee(g,V)}V=!0;let B,K;if(v)for(K=v.length-1;K>=0;K--)B=g.g=v[K],V=lr(B,A,!0,g)&&V;if(B=g.g=u,V=lr(B,A,!0,g)&&V,V=lr(B,A,!1,g)&&V,v)for(K=0;K<v.length;K++)B=g.g=v[K],V=lr(B,A,!1,g)&&V}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let A=0;A<v.length;A++)F(v[A]);delete u.g[g],u.h--}}this.G=null},je.prototype.J=function(u,g,v,A){return this.i.add(String(u),g,!1,v,A)},je.prototype.K=function(u,g,v,A){return this.i.add(String(u),g,!0,v,A)};function lr(u,g,v,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let B=0;B<g.length;++B){const K=g[B];if(K&&!K.da&&K.capture==v){const ve=K.listener,xt=K.ha||K.src;K.fa&&oe(u.i,K),V=ve.call(xt,A)!==!1&&V}}return V&&!A.defaultPrevented}function ks(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Ri(u){u.g=ks(()=>{u.g=null,u.i&&(u.i=!1,Ri(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Pi extends R{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ri(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(u){R.call(this),this.h=u,this.g={}}h(Jr,R);var Ni=[];function cr(u){U(u.g,function(g,v){this.g.hasOwnProperty(v)&&Le(g)},u),u.g={}}Jr.prototype.N=function(){Jr.Z.N.call(this),cr(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=o.JSON.stringify,Cr=o.JSON.parse,Di=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function on(){}function Li(){}var Zr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dl(){D.call(this,"d")}h(dl,D);function ji(){D.call(this,"c")}h(ji,D);var kr={},ju=null;function Mi(){return ju=ju||new je}kr.Ia="serverreachability";function Mu(u){D.call(this,kr.Ia,u)}h(Mu,D);function Oi(u){const g=Mi();Se(g,new Mu(g))}kr.STAT_EVENT="statevent";function Ou(u,g){D.call(this,kr.STAT_EVENT,u),this.stat=g}h(Ou,D);function Re(u){const g=Mi();Se(g,new Ou(g,u))}kr.Ja="timingevent";function zt(u,g){D.call(this,kr.Ja,u),this.size=g}h(zt,D);function vt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function mn(){this.g=!0}mn.prototype.ua=function(){this.g=!1};function gn(u,g,v,A,V,B){u.info(function(){if(u.g)if(B){var K="",ve=B.split("&");for(let Oe=0;Oe<ve.length;Oe++){var xt=ve[Oe].split("=");if(xt.length>1){const At=xt[0];xt=xt[1];const Pr=At.split("_");K=Pr.length>=2&&Pr[1]=="type"?K+(At+"="+xt+"&"):K+(At+"=redacted&")}}}else K=null;else K=B;return"XMLHTTP REQ ("+A+") [attempt "+V+"]: "+g+`
`+v+`
`+K})}function an(u,g,v,A,V,B,K){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+V+"]: "+g+`
`+v+`
`+B+" "+K})}function Mt(u,g,v,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+wt(u,v)+(A?" "+A:"")})}function As(u,g){u.info(function(){return"TIMEOUT: "+g})}mn.prototype.info=function(){};function wt(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var V=A[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return qn(B)}catch{return g}}var kn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},An={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gn;function es(){}h(es,on),es.prototype.g=function(){return new XMLHttpRequest},Gn=new es;function ur(u){return encodeURIComponent(String(u))}function Ar(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function yn(u,g,v,A){this.j=u,this.i=g,this.l=v,this.S=A||1,this.V=new Jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mo}function Mo(){this.i=null,this.g="",this.h=!1}var ux={},Ip={};function Cp(u,g,v){u.M=1,u.A=Fu(Rr(g)),u.u=v,u.R=!0,dx(u,null)}function dx(u,g){u.F=Date.now(),Vu(u),u.B=Rr(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Tx(v.i,"t",A),u.C=0,v=u.j.L,u.h=new Mo,u.g=$x(u.j,v?g:null,!u.u),u.P>0&&(u.O=new Pi(c(u.Y,u,u.g),u.P)),g=u.V,v=u.g,A=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(Ni[0]=V.toString()),V=Ni);for(let B=0;B<V.length;B++){const K=we(v,V[B],A||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Oi(),gn(u.i,u.v,u.B,u.l,u.S,u.u)}yn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Ns(u)==3?g.j():this.Y(u)},yn.prototype.Y=function(u){try{if(u==this.g)e:{const ve=Ns(this.g),xt=this.g.ya(),Oe=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||Px(this.g)))){this.K||ve!=4||xt==7||(xt==8||Oe<=0?Oi(3):Oi(2)),kp(this);var g=this.g.ca();this.X=g;var v=O2(this);if(this.o=g==200,an(this.i,this.v,this.B,this.l,this.S,ve,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,V=this.g;if((A=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var B=A;break t}}B=null}if(u=B)Mt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ap(this,u);else{this.o=!1,this.m=3,Re(12),Vi(this),hl(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<v.length;)if(At=V2(this,v),At==Ip){ve==4&&(this.m=4,Re(14),u=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}else if(At==ux){this.m=4,Re(15),Mt(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Mt(this.i,this.l,At,null),Ap(this,At);if(hx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||v.length!=0||this.h.h||(this.m=1,Re(16),u=!1),this.o=this.o&&u,!u)Mt(this.i,this.l,v,"[Invalid Chunked Response]"),Vi(this),hl(this);else if(v.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Op(K),K.P=!0,Re(11))}}else Mt(this.i,this.l,v,null),Ap(this,v);ve==4&&Vi(this),this.o&&!this.K&&(ve==4?Vx(this.j,this):(this.o=!1,Vu(this)))}else J2(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Re(12)):(this.m=0,Re(13)),Vi(this),hl(this)}}}catch{}finally{}};function O2(u){if(!hx(u))return u.g.la();const g=Px(u.g);if(g==="")return"";let v="";const A=g.length,V=Ns(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Vi(u),hl(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<A;B++)u.h.h=!0,v+=u.h.i.decode(g[B],{stream:!(V&&B==A-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function hx(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function V2(u,g){var v=u.C,A=g.indexOf(`
`,v);return A==-1?Ip:(v=Number(g.substring(v,A)),isNaN(v)?ux:(A+=1,A+v>g.length?Ip:(g=g.slice(A,A+v),u.C=A+v,g)))}yn.prototype.cancel=function(){this.K=!0,Vi(this)};function Vu(u){u.T=Date.now()+u.H,fx(u,u.H)}function fx(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=vt(c(u.aa,u),g)}function kp(u){u.D&&(o.clearTimeout(u.D),u.D=null)}yn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(As(this.i,this.B),this.M!=2&&(Oi(),Re(17)),Vi(this),this.m=2,hl(this)):fx(this,this.T-u)};function hl(u){u.j.I==0||u.K||Vx(u.j,u)}function Vi(u){kp(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,cr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ap(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||Rp(v.h,u))){if(!u.L&&Rp(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var V=A;if(V[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Wu(v),$u(v);else break e;Mp(v),Re(18)}}else v.xa=V[1],0<v.xa-v.K&&V[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=vt(c(v.Va,v),6e3));gx(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ui(v,11)}else if((u.L||v.g==u)&&Wu(v),!N(g))for(V=v.Ba.g.parse(g),g=0;g<V.length;g++){let Oe=V[g];const At=Oe[0];if(!(At<=v.K))if(v.K=At,Oe=Oe[1],v.I==2)if(Oe[0]=="c"){v.M=Oe[1],v.ba=Oe[2];const Pr=Oe[3];Pr!=null&&(v.ka=Pr,v.j.info("VER="+v.ka));const Bi=Oe[4];Bi!=null&&(v.za=Bi,v.j.info("SVER="+v.za));const Ds=Oe[5];Ds!=null&&typeof Ds=="number"&&Ds>0&&(A=1.5*Ds,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Ls=u.g;if(Ls){const qu=Ls.g?Ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qu){var B=A.h;B.g||qu.indexOf("spdy")==-1&&qu.indexOf("quic")==-1&&qu.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Pp(B,B.h),B.h=null))}if(A.G){const Vp=Ls.g?Ls.g.getResponseHeader("X-HTTP-Session-Id"):null;Vp&&(A.wa=Vp,Be(A.J,A.G,Vp))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var K=u;if(A.na=Bx(A,A.L?A.ba:null,A.W),K.L){yx(A.h,K);var ve=K,xt=A.O;xt&&(ve.H=xt),ve.D&&(kp(ve),Vu(ve)),A.g=K}else Mx(A);v.i.length>0&&zu(v)}else Oe[0]!="stop"&&Oe[0]!="close"||Ui(v,7);else v.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Ui(v,7):jp(v):Oe[0]!="noop"&&v.l&&v.l.qa(Oe),v.A=0)}}Oi(4)}catch{}}var F2=class{constructor(u,g){this.g=u,this.map=g}};function px(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gx(u){return u.h?1:u.g?u.g.size:0}function Rp(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Pp(u,g){u.g?u.g.add(g):u.h=g}function yx(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}px.prototype.cancel=function(){if(this.i=vx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vx(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return m(u.i)}var wx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function U2(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let V,B=null;A>=0?(V=u[v].substring(0,A),B=u[v].substring(A+1)):V=u[v],g(V,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Rs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Rs?(this.l=u.l,fl(this,u.j),this.o=u.o,this.g=u.g,pl(this,u.u),this.h=u.h,Np(this,Sx(u.i)),this.m=u.m):u&&(g=String(u).match(wx))?(this.l=!1,fl(this,g[1]||"",!0),this.o=ml(g[2]||""),this.g=ml(g[3]||"",!0),pl(this,g[4]),this.h=ml(g[5]||"",!0),Np(this,g[6]||"",!0),this.m=ml(g[7]||"")):(this.l=!1,this.i=new yl(null,this.l))}Rs.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(gl(g,xx,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(gl(g,xx,!0),"@"),u.push(ur(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(gl(v,v.charAt(0)=="/"?z2:$2,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",gl(v,H2)),u.join("")},Rs.prototype.resolve=function(u){const g=Rr(this);let v=!!u.j;v?fl(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var A=u.h;if(v)pl(g,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var V=g.h.lastIndexOf("/");V!=-1&&(A=g.h.slice(0,V+1)+A)}if(V=A,V==".."||V==".")A="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){A=V.lastIndexOf("/",0)==0,V=V.split("/");const B=[];for(let K=0;K<V.length;){const ve=V[K++];ve=="."?A&&K==V.length&&B.push(""):ve==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&K==V.length&&B.push("")):(B.push(ve),A=!0)}A=B.join("/")}else A=V}return v?g.h=A:v=u.i.toString()!=="",v?Np(g,Sx(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Rr(u){return new Rs(u)}function fl(u,g,v){u.j=v?ml(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function pl(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Np(u,g,v){g instanceof yl?(u.i=g,q2(u.i,u.l)):(v||(g=gl(g,W2)),u.i=new yl(g,u.l))}function Be(u,g,v){u.i.set(g,v)}function Fu(u){return Be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ml(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function gl(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,B2),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function B2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xx=/[#\/\?@]/g,$2=/[#\?:]/g,z2=/[#\?]/g,W2=/[#\?@]/g,H2=/#/g;function yl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Fi(u){u.g||(u.g=new Map,u.h=0,u.i&&U2(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=yl.prototype,t.add=function(u,g){Fi(this),this.i=null,u=Oo(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function _x(u,g){Fi(u),g=Oo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function bx(u,g){return Fi(u),g=Oo(u,g),u.g.has(g)}t.forEach=function(u,g){Fi(this),this.g.forEach(function(v,A){v.forEach(function(V){u.call(g,V,A,this)},this)},this)};function Ex(u,g){Fi(u);let v=[];if(typeof g=="string")bx(u,g)&&(v=v.concat(u.g.get(Oo(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}t.set=function(u,g){return Fi(this),this.i=null,u=Oo(this,u),bx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=Ex(this,u),u.length>0?String(u[0]):g):g};function Tx(u,g,v){_x(u,g),v.length>0&&(u.i=null,u.g.set(Oo(u,g),m(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var v=g[A];const V=ur(v);v=Ex(this,v);for(let B=0;B<v.length;B++){let K=V;v[B]!==""&&(K+="="+ur(v[B])),u.push(K)}}return this.i=u.join("&")};function Sx(u){const g=new yl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Oo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function q2(u,g){g&&!u.j&&(Fi(u),u.i=null,u.g.forEach(function(v,A){const V=A.toLowerCase();A!=V&&(_x(this,A),Tx(this,V,v))},u)),u.j=g}function G2(u,g){const v=new mn;if(o.Image){const A=new Image;A.onload=d(Ps,v,"TestLoadImage: loaded",!0,g,A),A.onerror=d(Ps,v,"TestLoadImage: error",!1,g,A),A.onabort=d(Ps,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=d(Ps,v,"TestLoadImage: timeout",!1,g,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function K2(u,g){const v=new mn,A=new AbortController,V=setTimeout(()=>{A.abort(),Ps(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(B=>{clearTimeout(V),B.ok?Ps(v,"TestPingServer: ok",!0,g):Ps(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Ps(v,"TestPingServer: error",!1,g)})}function Ps(u,g,v,A,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),A(v)}catch{}}function Q2(){this.g=new Di}function Dp(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Dp,on),Dp.prototype.g=function(){return new Uu(this.i,this.h)};function Uu(u,g){je.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Uu,je),t=Uu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,wl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vl(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wl(this)),this.g&&(this.readyState=3,wl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ix(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ix(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?vl(this):wl(this),this.readyState==3&&Ix(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,vl(this))},t.Na=function(u){this.g&&(this.response=u,vl(this))},t.ga=function(){this.g&&vl(this)};function vl(u){u.readyState=4,u.l=null,u.j=null,u.B=null,wl(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function wl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Uu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cx(u){let g="";return U(u,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function Lp(u,g,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Cx(v),typeof u=="string"?v!=null&&ur(v):Be(u,g,v))}function st(u){je.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(st,je);var Y2=/^https?$/i,X2=["POST","PUT"];t=st.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gn.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){kx(this,B);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var V in A)v.set(V,A[V]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())v.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),V=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(X2,g,void 0)>=0)||A||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of v)this.g.setRequestHeader(B,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){kx(this,B)}};function kx(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Ax(u),Bu(u)}function Ax(u){u.A||(u.A=!0,Se(u,"complete"),Se(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Se(this,"complete"),Se(this,"abort"),Bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bu(this,!0)),st.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Rx(this):this.Xa())},t.Xa=function(){Rx(this)};function Rx(u){if(u.h&&typeof i<"u"){if(u.v&&Ns(u)==4)setTimeout(u.Ca.bind(u),0);else if(Se(u,"readystatechange"),Ns(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var A;if(A=B===0){let K=String(u.D).match(wx)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!Y2.test(K?K.toLowerCase():"")}v=A}if(v)Se(u,"complete"),Se(u,"success");else{u.o=6;try{var V=Ns(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",Ax(u)}}finally{Bu(u)}}}}function Bu(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Se(u,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ns(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ns(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Cr(g)}};function Px(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function J2(u){const g={};u=(u.g&&Ns(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(N(u[A]))continue;var v=Ar(u[A]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=g[V]||[];g[V]=B,B.push(v)}j(g,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Nx(u){this.za=0,this.i=[],this.j=new mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xl("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xl("baseRetryDelayMs",5e3,u),this.Za=xl("retryDelaySeedMs",1e4,u),this.Ta=xl("forwardChannelMaxRetries",2,u),this.va=xl("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new px(u&&u.concurrentRequestLimit),this.Ba=new Q2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Nx.prototype,t.ka=8,t.I=1,t.connect=function(u,g,v,A){Re(0),this.W=u,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Bx(this,null,this.W),zu(this)};function jp(u){if(Dx(u),u.I==3){var g=u.V++,v=Rr(u.J);if(Be(v,"SID",u.M),Be(v,"RID",g),Be(v,"TYPE","terminate"),_l(u,v),g=new yn(u,u.j,g),g.M=2,g.A=Fu(Rr(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=g.A,v=!0),v||(g.g=$x(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Vu(g)}Ux(u)}function $u(u){u.g&&(Op(u),u.g.cancel(),u.g=null)}function Dx(u){$u(u),u.v&&(o.clearTimeout(u.v),u.v=null),Wu(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function zu(u){if(!mx(u.h)&&!u.m){u.m=!0;var g=u.Ea;P||S(),M||(P(),M=!0),I.add(g,u),u.D=0}}function Z2(u,g){return gx(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=vt(c(u.Ea,u,g),Fx(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new yn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=L(B),ee(B,this.U)):B=this.U),this.u!==null||this.R||(V.J=B,B=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=jx(this,V,g),v=Rr(this.J),Be(v,"RID",u),Be(v,"CVER",22),this.G&&Be(v,"X-HTTP-Session-Id",this.G),_l(this,v),B&&(this.R?g="headers="+ur(Cx(B))+"&"+g:this.u&&Lp(v,this.u,B)),Pp(this.h,V),this.Ra&&Be(v,"TYPE","init"),this.S?(Be(v,"$req",g),Be(v,"SID","null"),V.U=!0,Cp(V,v,null)):Cp(V,v,g),this.I=2}}else this.I==3&&(u?Lx(this,u):this.i.length==0||mx(this.h)||Lx(this))};function Lx(u,g){var v;g?v=g.l:v=u.V++;const A=Rr(u.J);Be(A,"SID",u.M),Be(A,"RID",v),Be(A,"AID",u.K),_l(u,A),u.u&&u.o&&Lp(A,u.u,u.o),v=new yn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=jx(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Pp(u.h,v),Cp(v,A,g)}function _l(u,g){u.H&&U(u.H,function(v,A){Be(g,A,v)}),u.l&&U({},function(v,A){Be(g,A,v)})}function jx(u,g,v){v=Math.min(u.i.length,v);const A=u.l?c(u.l.Ka,u.l,u):null;e:{var V=u.i;let ve=-1;for(;;){const xt=["count="+v];ve==-1?v>0?(ve=V[0].g,xt.push("ofs="+ve)):ve=0:xt.push("ofs="+ve);let Oe=!0;for(let At=0;At<v;At++){var B=V[At].g;const Pr=V[At].map;if(B-=ve,B<0)ve=Math.max(0,V[At].g-100),Oe=!1;else try{B="req"+B+"_"||"";try{var K=Pr instanceof Map?Pr:Object.entries(Pr);for(const[Bi,Ds]of K){let Ls=Ds;a(Ds)&&(Ls=qn(Ds)),xt.push(B+Bi+"="+encodeURIComponent(Ls))}}catch(Bi){throw xt.push(B+"type="+encodeURIComponent("_badmap")),Bi}}catch{A&&A(Pr)}}if(Oe){K=xt.join("&");break e}}K=void 0}return u=u.i.splice(0,v),g.G=u,K}function Mx(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;P||S(),M||(P(),M=!0),I.add(g,u),u.A=0}}function Mp(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=vt(c(u.Da,u),Fx(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Ox(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=vt(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Re(10),$u(this),Ox(this))};function Op(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Ox(u){u.g=new yn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Rr(u.na);Be(g,"RID","rpc"),Be(g,"SID",u.M),Be(g,"AID",u.K),Be(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Be(g,"TO",u.ia),Be(g,"TYPE","xmlhttp"),_l(u,g),u.u&&u.o&&Lp(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Fu(Rr(g)),v.u=null,v.R=!0,dx(v,u)}t.Va=function(){this.C!=null&&(this.C=null,$u(this),Mp(this),Re(19))};function Wu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Vx(u,g){var v=null;if(u.g==g){Wu(u),Op(u),u.g=null;var A=2}else if(Rp(u.h,g))v=g.G,yx(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var V=u.D;A=Mi(),Se(A,new zt(A,v)),zu(u)}else Mx(u);else if(V=g.m,V==3||V==0&&g.X>0||!(A==1&&Z2(u,g)||A==2&&Mp(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),V){case 1:Ui(u,5);break;case 4:Ui(u,10);break;case 3:Ui(u,6);break;default:Ui(u,2)}}}function Fx(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Ui(u,g){if(u.j.info("Error code "+g),g==2){var v=c(u.bb,u),A=u.Ua;const V=!A;A=new Rs(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||fl(A,"https"),Fu(A),V?G2(A.toString(),v):K2(A.toString(),v)}else Re(2);u.I=0,u.l&&u.l.pa(g),Ux(u),Dx(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function Ux(u){if(u.I=0,u.ja=[],u.l){const g=vx(u.h);(g.length!=0||u.i.length!=0)&&(x(u.ja,g),x(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Bx(u,g,v){var A=v instanceof Rs?Rr(v):new Rs(v);if(A.g!="")g&&(A.g=g+"."+A.g),pl(A,A.u);else{var V=o.location;A=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const B=new Rs(null);A&&fl(B,A),g&&(B.g=g),V&&pl(B,V),v&&(B.h=v),A=B}return v=u.G,g=u.wa,v&&g&&Be(A,v,g),Be(A,"VER",u.ka),_l(u,A),A}function $x(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new st(new Dp({ab:v})):new st(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zx(){}t=zx.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Hu(){}Hu.prototype.g=function(u,g){return new Rn(u,g)};function Rn(u,g){je.call(this),this.g=new Nx(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!N(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Vo(this)}h(Rn,je),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){jp(this.g)},Rn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=qn(u),u=v);g.i.push(new F2(g.Ya++,u)),g.I==3&&zu(g)},Rn.prototype.N=function(){this.g.l=null,delete this.j,jp(this.g),delete this.g,Rn.Z.N.call(this)};function Wx(u){dl.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(Wx,dl);function Hx(){ji.call(this),this.status=1}h(Hx,ji);function Vo(u){this.g=u}h(Vo,zx),Vo.prototype.ra=function(){Se(this.g,"a")},Vo.prototype.qa=function(u){Se(this.g,new Wx(u))},Vo.prototype.pa=function(u){Se(this.g,new Hx)},Vo.prototype.oa=function(){Se(this.g,"b")},Hu.prototype.createWebChannel=Hu.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,pR=function(){return new Hu},fR=function(){return Mi()},hR=kr,Iy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,Kd=kn,An.COMPLETE="complete",dR=An,Li.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",je.prototype.listen=je.prototype.J,Hl=Li,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,uR=st}).apply(typeof gd<"u"?gd:typeof self<"u"?self:typeof window<"u"?window:{});const iE="@firebase/firestore",oE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new z0("@firebase/firestore");function zo(){return vo.logLevel}function J(t,...e){if(vo.logLevel<=be.DEBUG){const n=e.map(tw);vo.debug(`Firestore (${Za}): ${t}`,...n)}}function Ss(t,...e){if(vo.logLevel<=be.ERROR){const n=e.map(tw);vo.error(`Firestore (${Za}): ${t}`,...n)}}function wo(t,...e){if(vo.logLevel<=be.WARN){const n=e.map(tw);vo.warn(`Firestore (${Za}): ${t}`,...n)}}function tw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,mR(t,r,n)}function mR(t,e,n){let r=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ss(r),new Error(r)}function Pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||mR(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class J9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z9{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new gR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class eB{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tB{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eB(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new aE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new aE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rB(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Cy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return jm(s)===jm(i)?Ee(s,i):jm(s)?1:-1}return Ee(t.length,e.length)}const sB=55296,iB=57343;function jm(t){const e=t.charCodeAt(0);return e>=sB&&e<=iB}function Ma(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="__name__";class jr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=jr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ee(e.length,n.length)}static compareSegments(e,n){const r=jr.isNumericId(e),s=jr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?jr.extractNumericId(e).compare(jr.extractNumericId(n)):Cy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return li.fromString(e.substring(4,e.length-2))}}class Fe extends jr{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const oB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends jr{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return oB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ky}static keyField(){return new Dt([ky])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Fe.fromString(e))}static fromName(e){return new se(Fe.fromString(e).popFirst(5))}static empty(){return new se(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e,n){if(!n)throw new Q($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wR(t,e,n,r){if(e===!0&&r===!0)throw new Q($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lE(t){if(!se.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cE(t){if(se.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kf(t);throw new Q($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aB(t,e){if(e<=0)throw new Q($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Eu(t,e){if(!xR(t))throw new Q($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=-62135596800,dE=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*dE);return new Me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uE)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dE}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:yt("string",Me._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Me(0,0))}static max(){return new ge(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function lB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new Me(n+1,0):new Me(n,r));return new gi(s,se.empty(),e)}function cB(t){return new gi(t.readTime,t.key,Gc)}class gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gi(ge.min(),se.empty(),Gc)}static max(){return new gi(ge.max(),se.empty(),Gc)}}function uB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==dB)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function fB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=-1;function Yf(t){return t==null}function Hh(t){return t===0&&1/t==-1/0}function pB(t){return typeof t=="number"&&Number.isInteger(t)&&!Hh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="";function mB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hE(e)),e=gB(t.get(n),e);return hE(e)}function gB(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case _R:n+="";break;default:n+=i}}return n}function hE(t){return t+_R+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yB(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function bR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=i??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new jn([])}unionWith(e){let n=new St(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ER("Invalid base64 string: "+i):i}}(e);return new jt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const vB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=vB.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vi(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="server_timestamp",SR="__type__",IR="__previous_value__",CR="__local_write_time__";function rw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[SR])==null?void 0:r.stringValue)===TR}function Xf(t){const e=t.mapValue.fields[IR];return rw(e)?Xf(e):e}function Kc(t){const e=yi(t.mapValue.fields[CR].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const qh="(default)";class Oa{constructor(e,n){this.projectId=e,this.database=n||qh}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database===qh}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="__type__",xB="__max__",vd={mapValue:{}},AR="__vector__",Gh="value";function wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rw(t)?4:bB(t)?9007199254740991:_B(t)?10:11:ue(28295,{value:t})}function Kr(t,e){if(t===e)return!0;const n=wi(t);if(n!==wi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kc(t).isEqual(Kc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=yi(s.timestampValue),a=yi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vi(s.bytesValue).isEqual(vi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=dt(s.doubleValue),a=dt(i.doubleValue);return o===a?Hh(o)===Hh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ma(t.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(fE(o)!==fE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Kr(o[l],a[l])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function Qc(t,e){return(t.values||[]).find(n=>Kr(n,e))!==void 0}function Va(t,e){if(t===e)return 0;const n=wi(t),r=wi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=dt(i.integerValue||i.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return mE(t.timestampValue,e.timestampValue);case 4:return mE(Kc(t),Kc(e));case 5:return Cy(t.stringValue,e.stringValue);case 6:return function(i,o){const a=vi(i),l=vi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(dt(i.latitude),dt(o.latitude));return a!==0?a:Ee(dt(i.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gE(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,m,x,w;const a=i.fields||{},l=o.fields||{},c=(p=a[Gh])==null?void 0:p.arrayValue,d=(m=l[Gh])==null?void 0:m.arrayValue,h=Ee(((x=c==null?void 0:c.values)==null?void 0:x.length)||0,((w=d==null?void 0:d.values)==null?void 0:w.length)||0);return h!==0?h:gE(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===vd.mapValue&&o===vd.mapValue)return 0;if(i===vd.mapValue)return 1;if(o===vd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Cy(l[h],d[h]);if(p!==0)return p;const m=Va(a[l[h]],c[d[h]]);if(m!==0)return m}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function mE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=yi(t),r=yi(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function gE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Va(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function Fa(t){return Ay(t)}function Ay(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ay(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ay(n.fields[o])}`;return s+"}"}(t.mapValue):ue(61005,{value:t})}function Qd(t){switch(wi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xf(t);return e?16+Qd(e):16;case 5:return 2*t.stringValue.length;case 6:return vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Qd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ki(r.fields,(i,o)=>{s+=i.length+Qd(o)}),s}(t.mapValue);default:throw ue(13486,{value:t})}}function yE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ry(t){return!!t&&"integerValue"in t}function sw(t){return!!t&&"arrayValue"in t}function vE(t){return!!t&&"nullValue"in t}function wE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yd(t){return!!t&&"mapValue"in t}function _B(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kR])==null?void 0:r.stringValue)===AR}function uc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uc(t.arrayValue.values[n]);return e}return{...t}}function bB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(n)}setAll(e){let n=Dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=uc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ki(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xn(uc(this.value))}}function RR(t){const e=[];return ki(t.fields,(n,r)=>{const s=new Dt([n]);if(Yd(r)){const i=RR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xt(e,0,ge.min(),ge.min(),ge.min(),xn.empty(),0)}static newFoundDocument(e,n,r,s){return new Xt(e,1,n,ge.min(),r,s,0)}static newNoDocument(e,n){return new Xt(e,2,n,ge.min(),ge.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,ge.min(),ge.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.position=e,this.inclusive=n}}function xE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Va(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _E(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n="asc"){this.field=e,this.dir=n}}function EB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{}class gt extends PR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new SB(e,n,r):n==="array-contains"?new kB(e,r):n==="in"?new AB(e,r):n==="not-in"?new RB(e,r):n==="array-contains-any"?new PB(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IB(e,r):new CB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Va(n,this.value)):n!==null&&wi(this.value)===wi(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends PR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tr(e,n)}matches(e){return NR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function NR(t){return t.op==="and"}function DR(t){return TB(t)&&NR(t)}function TB(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function Py(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Fa(t.value);if(DR(t))return t.filters.map(e=>Py(e)).join(",");{const e=t.filters.map(n=>Py(n)).join(",");return`${t.op}(${e})`}}function LR(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Kr(r.value,s.value)}(t,e):t instanceof Tr?function(r,s){return s instanceof Tr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&LR(o,s.filters[a]),!0):!1}(t,e):void ue(19439)}function jR(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Fa(n.value)}`}(t):t instanceof Tr?function(n){return n.op.toString()+" {"+n.getFilters().map(jR).join(" ,")+"}"}(t):"Filter"}class SB extends gt{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class IB extends gt{constructor(e,n){super(e,"in",n),this.keys=MR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CB extends gt{constructor(e,n){super(e,"not-in",n),this.keys=MR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class kB extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sw(n)&&Qc(n.arrayValue,this.value)}}class AB extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qc(this.value.arrayValue,n)}}class RB extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qc(this.value.arrayValue,n)}}class PB extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function bE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new NB(t,e,n,r,s,i,o)}function iw(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Py(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fa(r)).join(",")),e.Te=n}return e.Te}function ow(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_E(t.startAt,e.startAt)&&_E(t.endAt,e.endAt)}function Ny(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DB(t,e,n,r,s,i,o,a){return new nl(t,e,n,r,s,i,o,a)}function Jf(t){return new nl(t)}function EE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OR(t){return t.collectionGroup!==null}function dc(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new St(Dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Yc(i,r))}),n.has(Dt.keyField().canonicalString())||e.Ie.push(new Yc(Dt.keyField(),r))}return e.Ie}function Hr(t){const e=fe(t);return e.Ee||(e.Ee=VR(e,dc(t))),e.Ee}function LB(t){const e=fe(t);return e.de||(e.de=VR(e,t.explicitOrderBy)),e.de}function VR(t,e){if(t.limitType==="F")return bE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yc(s.field,i)});const n=t.endAt?new Kh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kh(t.startAt.position,t.startAt.inclusive):null;return bE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dy(t,e){const n=t.filters.concat([e]);return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qh(t,e,n){return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zf(t,e){return ow(Hr(t),Hr(e))&&t.limitType===e.limitType}function FR(t){return`${iw(Hr(t))}|lt:${t.limitType}`}function Wo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jR(s)).join(", ")}]`),Yf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fa(s)).join(",")),`Target(${r})`}(Hr(t))}; limitType=${t.limitType})`}function ep(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of dc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=xE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,dc(r),s)||r.endAt&&!function(o,a,l){const c=xE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,dc(r),s))}(t,e)}function jB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UR(t){return(e,n)=>{let r=!1;for(const s of dc(t)){const i=MB(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function MB(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Va(l,c):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return bR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=new nt(se.comparator);function Is(){return OB}const BR=new nt(se.comparator);function ql(...t){let e=BR;for(const n of t)e=e.insert(n.key,n);return e}function $R(t){let e=BR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function eo(){return hc()}function zR(){return hc()}function hc(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const VB=new nt(se.comparator),FB=new St(se.comparator);function Te(...t){let e=FB;for(const n of t)e=e.add(n);return e}const UB=new St(Ee);function BB(){return UB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function WR(t){return{integerValue:""+t}}function $B(t,e){return pB(e)?WR(e):aw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this._=void 0}}function zB(t,e,n){return t instanceof Xc?function(s,i){const o={fields:{[SR]:{stringValue:TR},[CR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rw(i)&&(i=Xf(i)),i&&(o.fields[IR]=i),{mapValue:o}}(n,e):t instanceof Ua?qR(t,e):t instanceof Jc?GR(t,e):function(s,i){const o=HR(s,i),a=TE(o)+TE(s.Ae);return Ry(o)&&Ry(s.Ae)?WR(a):aw(s.serializer,a)}(t,e)}function WB(t,e,n){return t instanceof Ua?qR(t,e):t instanceof Jc?GR(t,e):n}function HR(t,e){return t instanceof Yh?function(r){return Ry(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xc extends tp{}class Ua extends tp{constructor(e){super(),this.elements=e}}function qR(t,e){const n=KR(e);for(const r of t.elements)n.some(s=>Kr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Jc extends tp{constructor(e){super(),this.elements=e}}function GR(t,e){let n=KR(e);for(const r of t.elements)n=n.filter(s=>!Kr(s,r));return{arrayValue:{values:n}}}class Yh extends tp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function TE(t){return dt(t.integerValue||t.doubleValue)}function KR(t){return sw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n){this.field=e,this.transform=n}}function HB(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof Jc&&s instanceof Jc?Ma(r.elements,s.elements,Kr):r instanceof Yh&&s instanceof Yh?Kr(r.Ae,s.Ae):r instanceof Xc&&s instanceof Xc}(t.transform,e.transform)}class qB{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class np{}function YR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rp(t.key,hn.none()):new Tu(t.key,t.data,hn.none());{const n=t.data,r=xn.empty();let s=new St(Dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ai(t.key,r,new jn(s.toArray()),hn.none())}}function GB(t,e,n){t instanceof Tu?function(s,i,o){const a=s.value.clone(),l=IE(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ai?function(s,i,o){if(!Xd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=IE(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(XR(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fc(t,e,n,r){return t instanceof Tu?function(i,o,a,l){if(!Xd(i.precondition,o))return a;const c=i.value.clone(),d=CE(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ai?function(i,o,a,l){if(!Xd(i.precondition,o))return a;const c=CE(i.fieldTransforms,l,o),d=o.data;return d.setAll(XR(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Xd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function KB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=HR(r.transform,s||null);i!=null&&(n===null&&(n=xn.empty()),n.set(r.field,i))}return n||null}function SE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ma(r,s,(i,o)=>HB(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tu extends np{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ai extends np{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function XR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function IE(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,WB(o,a,n[s]))}return r}function CE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,zB(i,o,e))}return r}class rp extends np{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QB extends np{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&GB(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=YR(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(n,r)=>SE(n,r))&&Ma(this.baseMutations,e.baseMutations,(n,r)=>SE(n,r))}}class lw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return VB}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new lw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ce;function e$(t){switch(t){case $.OK:return ue(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function JR(t){if(t===void 0)return Ss("GRPC error has no .code"),$.UNKNOWN;switch(t){case pt.OK:return $.OK;case pt.CANCELLED:return $.CANCELLED;case pt.UNKNOWN:return $.UNKNOWN;case pt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case pt.INTERNAL:return $.INTERNAL;case pt.UNAVAILABLE:return $.UNAVAILABLE;case pt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case pt.NOT_FOUND:return $.NOT_FOUND;case pt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case pt.ABORTED:return $.ABORTED;case pt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case pt.DATA_LOSS:return $.DATA_LOSS;default:return ue(39323,{code:t})}}(Ce=pt||(pt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=new li([4294967295,4294967295],0);function kE(t){const e=t$().encode(t),n=new cR;return n.update(e),new Uint8Array(n.digest())}function AE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new li([n,r],0),new li([s,i],0)]}class cw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(r<0)throw new Gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=li.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(li.fromNumber(r)));return s.compare(n$)===1&&(s=new li([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kE(e),[r,s]=AE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new cw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=kE(e),[r,s]=AE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sp(ge.min(),s,new nt(Ee),Is(),Te())}}class Su{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Su(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class ZR{constructor(e,n){this.targetId=e,this.Ce=n}}class eP{constructor(e,n,r=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class RE{constructor(){this.ve=0,this.Fe=PE(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}}),new Su(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=PE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class r${constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.Je=wd(),this.He=wd(),this.Ye=new nt(Ee)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ny(i))if(r===0){const o=new se(i.path);this.et(n,o,Xt.newNoDocument(o,ge.min()))}else Pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=vi(r).toUint8Array()}catch(l){if(l instanceof ER)return wo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cw(o,s,i)}catch(l){return wo(l instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ny(a.target)){const l=new se(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Xt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Te();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new sp(e,n,this.Ye,this.je,r);return this.je=Is(),this.Je=wd(),this.He=wd(),this.Ye=new nt(Ee),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new RE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(Ee),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(Ee),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new RE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wd(){return new nt(se.comparator)}function PE(){return new nt(se.comparator)}const s$={asc:"ASCENDING",desc:"DESCENDING"},i$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o$={and:"AND",or:"OR"};class a${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ly(t,e){return t.useProto3Json||Yf(e)?e:{value:e}}function Xh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l$(t,e){return Xh(t,e.toTimestamp())}function qr(t){return Pe(!!t,49232),ge.fromTimestamp(function(n){const r=yi(n);return new Me(r.seconds,r.nanos)}(t))}function uw(t,e){return jy(t,e).canonicalString()}function jy(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nP(t){const e=Fe.fromString(t);return Pe(lP(e),10190,{key:e.toString()}),e}function My(t,e){return uw(t.databaseId,e.path)}function Mm(t,e){const n=nP(e);if(n.get(1)!==t.databaseId.projectId)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(sP(n))}function rP(t,e){return uw(t.databaseId,e)}function c$(t){const e=nP(t);return e.length===4?Fe.emptyPath():sP(e)}function Oy(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sP(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function NE(t,e,n){return{name:My(t,e),fields:n.value.mapValue.fields}}function u$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string",58123),jt.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),jt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?$.UNKNOWN:JR(c.code);return new Q(d,c.message||"")}(o);n=new eP(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mm(t,r.document.name),i=qr(r.document.updateTime),o=r.document.createTime?qr(r.document.createTime):ge.min(),a=new xn({mapValue:{fields:r.document.fields}}),l=Xt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Jd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Mm(t,r.document),i=r.readTime?qr(r.readTime):ge.min(),o=Xt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Jd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Mm(t,r.document),i=r.removedTargetIds||[];n=new Jd([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ZB(s,i),a=r.targetId;n=new ZR(a,o)}}return n}function d$(t,e){let n;if(e instanceof Tu)n={update:NE(t,e.key,e.value)};else if(e instanceof rp)n={delete:My(t,e.key)};else if(e instanceof Ai)n={update:NE(t,e.key,e.data),updateMask:x$(e.fieldMask)};else{if(!(e instanceof QB))return ue(16599,{Vt:e.type});n={verify:My(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Xc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:l$(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)}(t,e.precondition)),n}function h$(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?qr(s.updateTime):qr(i);return o.isEqual(ge.min())&&(o=qr(i)),new qB(o,s.transformResults||[])}(n,e))):[]}function f$(t,e){return{documents:[rP(t,e.path)]}}function iP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rP(t,s);const i=function(c){if(c.length!==0)return aP(Tr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Ks(p.field),direction:y$(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ly(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function p$(t,e,n,r){const{ft:s,parent:i}=iP(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d="aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Ks(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Ks(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function m$(t){let e=c$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=oP(h);return p instanceof Tr&&DR(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(x){return new Yc(Ho(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Yf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Kh(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new Kh(m,p)}(n.endAt)),DB(e,s,o,i,a,"F",l,c)}function g$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ho(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ho(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ho(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ho(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Ho(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tr.create(n.compositeFilter.filters.map(r=>oP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function y$(t){return s$[t]}function v$(t){return i$[t]}function w$(t){return o$[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Ho(t){return Dt.fromServerFormat(t.fieldPath)}function aP(t){return t instanceof gt?function(n){if(n.op==="=="){if(wE(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(vE(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wE(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(vE(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:v$(n.op),value:n.value}}}(t):t instanceof Tr?function(n){const r=n.getFilters().map(s=>aP(s));return r.length===1?r[0]:{compositeFilter:{op:w$(n.op),filters:r}}}(t):ue(54877,{filter:t})}function x$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r,s,i=ge.min(),o=ge.min(),a=jt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e){this.yt=e}}function b$(t){const e=m$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this.Cn=new T$}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(gi.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class T${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cP=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(cP,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ba(0)}static cr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="LruGarbageCollector",S$=1048576;function jE([t,e],[n,r]){const s=Ee(t,n);return s===0?Ee(e,r):s}class I${constructor(e){this.Ir=e,this.buffer=new St(jE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(LE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?J(LE,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Vr(3e5)})}}class k${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Qf.ce);const r=new I$(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(DE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),zo()<=be.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function A$(t,e){return new k$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fc(r.mutation,s,jn.empty(),Me.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=eo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ql();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=eo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Is();const o=hc(),a=function(){return hc()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ai)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),fc(d.mutation,c,d.mutation.getFieldMask(),Me.now())):o.set(c.key,jn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new P$(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=hc();let s=new nt((o,a)=>o-a),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||jn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Te()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=zR();d.forEach(p=>{if(!i.has(p)){const m=YR(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(eo());let a=Gc,l=i;return o.next(c=>z.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Te())).next(d=>({batchId:a,changes:$R(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=ql();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ql();return this.indexManager.getCollectionParents(e,i).next(a=>z.forEach(a,l=>{const c=function(h,p){return new nl(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Xt.newInvalidDocument(d)))});let a=ql();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&fc(d.mutation,c,jn.empty(),Me.now()),ep(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:qr(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:b$(s.bundledQuery),readTime:qr(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this.overlays=new nt(se.comparator),this.qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=eo();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=eo(),i=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new nt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=eo(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=eo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return z.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XB(n,r));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.Qr=new St(Rt.$r),this.Ur=new St(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new se(new Fe([])),r=new Rt(n,e),s=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new se(new Fe([])),r=new Rt(n,e),s=new Rt(n,e+1);let i=Te();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return se.comparator(e.key,n.key)||Ee(e.Yr,n.Yr)}static Kr(e,n){return Ee(e.Yr,n.Yr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(Rt.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YB(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?nw:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),s=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ee);return n.forEach(s=>{const i=new Rt(s,0),o=new Rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new se(i),0);let a=new St(Ee);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),z.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(n.mutations,s=>{const i=new Rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Rt(n,0),s=this.Zr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.ri=e,this.docs=function(){return new nt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=Is();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Xt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Is();const o=n.path,a=new se(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||uB(cB(d),r)<=0||(s.has(d.key)||ep(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new V$(this)}getSize(e){return z.resolve(this.size)}}class V$ extends R${constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e){this.persistence=e,this.si=new Po(n=>iw(n),ow),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new dw,this.targetCount=0,this.ai=Ba.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ba(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Pr(n),z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qf(0),this.li=!1,this.li=!0,this.hi=new j$,this.referenceDelegate=e(this),this.Pi=new F$(this),this.indexManager=new E$,this.remoteDocumentCache=function(s){return new O$(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new _$(n),this.Ii=new D$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new M$(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new U$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class U$ extends hB{constructor(e){super(),this.currentSequenceNumber=e}}class hw{constructor(e){this.persistence=e,this.Ri=new dw,this.Vi=null}static mi(e){return new hw(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,r=>{const s=se.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return z.or([()=>z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jh{constructor(e,n){this.persistence=e,this.pi=new Po(r=>mB(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=A$(this,n)}static mi(e,n){return new Jh(e,n)}Ei(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return z.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qd(e.data.value)),n}br(e,n,r){return z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new fw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return D5()?8:fB(rn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new B$;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(zo()<=be.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Wo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(zo()<=be.DEBUG&&J("QueryEngine","Query:",Wo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(zo()<=be.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Wo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(n))):z.resolve())}ys(e,n){if(EE(n))return z.resolve(null);let r=Hr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qh(n,null,"F"),r=Hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Te(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Qh(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return EE(n)||s.isEqual(ge.min())?z.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?z.resolve(null):(zo()<=be.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wo(n)),this.vs(e,o,n,lB(s,Gc)).next(a=>a))})}Ds(e,n){let r=new St(UR(e));return n.forEach((s,i)=>{ep(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return zo()<=be.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Wo(n)),this.ps.getDocumentsMatchingQuery(e,n,gi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="LocalStore",z$=3e8;class W${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new nt(Ee),this.xs=new Po(i=>iw(i),ow),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function H$(t,e,n,r){return new W$(t,e,n,r)}async function dP(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Te();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function q$(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=z.resolve();return p.forEach(x=>{m=m.next(()=>d.getEntry(l,x)).next(w=>{const T=c.docVersions.get(x);Pe(T!==null,48541),w.version.compareTo(T)<0&&(h.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),d.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hP(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function G$(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(jt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(w,T,b){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=z$?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=Is(),c=Te();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(K$(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ge.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function K$(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Is();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J(pw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function Q$(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Y$(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Js(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Vy(t,e,n){const r=fe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!tl(o))throw o;J(pw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ME(t,e,n){const r=fe(t);let s=ge.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=fe(l),p=h.xs.get(d);return p!==void 0?z.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,Hr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ge.min(),n?i:Te())).next(a=>(X$(r,jB(e),a),{documents:a,Qs:i})))}function X$(t,e,n){let r=t.Os.get(e)||ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class OE{constructor(){this.activeTargetIds=BB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J${constructor(){this.Mo=new OE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new OE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="ConnectivityMonitor";class FE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(VE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(VE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=null;function Fy(){return xd===null?xd=function(){return 268435456+Math.round(2147483648*Math.random())}():xd++,"0x"+xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",ez={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===qh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Fy(),a=this.zo(e,n.toUriEncodedString());J(Om,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Yr(c);return this.Jo(e,a,l,r,d).then(h=>(J(Om,`Received RPC '${e}' ${o}: `,h),h),h=>{throw wo(Om,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=ez[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class rz extends tz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Fy();return new Promise((a,l)=>{const c=new uR;c.setWithCredentials(!0),c.listenOnce(dR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kd.NO_ERROR:const h=c.getResponseJson();J(qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Kd.TIMEOUT:J(qt,`RPC '${e}' ${o} timed out`),l(new Q($.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const p=c.getStatus();if(J(qt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const w=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(_)>=0?_:$.UNKNOWN}(x.status);l(new Q(w,x.message))}else l(new Q($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Q($.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{J(qt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);J(qt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Fy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pR(),a=fR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");J(qt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,m=!1;const x=new nz({Yo:T=>{m?J(qt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(p||(J(qt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),J(qt,`RPC '${e}' stream ${s} sending:`,T),h.send(T))},Zo:()=>h.close()}),w=(T,b,_)=>{T.listen(b,E=>{try{_(E)}catch(C){setTimeout(()=>{throw C},0)}})};return w(h,Hl.EventType.OPEN,()=>{m||(J(qt,`RPC '${e}' stream ${s} transport opened.`),x.o_())}),w(h,Hl.EventType.CLOSE,()=>{m||(m=!0,J(qt,`RPC '${e}' stream ${s} transport closed`),x.a_(),this.E_(h))}),w(h,Hl.EventType.ERROR,T=>{m||(m=!0,wo(qt,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),x.a_(new Q($.UNAVAILABLE,"The operation could not be completed")))}),w(h,Hl.EventType.MESSAGE,T=>{var b;if(!m){const _=T.data[0];Pe(!!_,16349);const E=_,C=(E==null?void 0:E.error)||((b=E[0])==null?void 0:b.error);if(C){J(qt,`RPC '${e}' stream ${s} received error:`,C);const P=C.status;let M=function(k){const R=pt[k];if(R!==void 0)return JR(R)}(P),I=C.message;M===void 0&&(M=$.INTERNAL,I="Unknown error status: "+P+" with message "+C.message),m=!0,x.a_(new Q(M,I)),h.close()}else J(qt,`RPC '${e}' stream ${s} received:`,_),x.u_(_)}}),w(a,hR.STAT_EVENT,T=>{T.stat===Iy.PROXY?J(qt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Iy.NOPROXY&&J(qt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return new a$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="PersistentStream";class pP{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fP(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(UE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(UE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sz extends pP{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=u$(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?qr(o.readTime):ge.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Oy(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ny(l)?{documents:f$(i,l)}:{query:iP(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tP(i,o.resumeToken);const c=Ly(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Xh(i,o.snapshotVersion.toTimestamp());const c=Ly(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=g$(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Oy(this.serializer),n.removeTarget=e,this.q_(n)}}class iz extends pP{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=h$(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Oy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>d$(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{}class az extends oz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,jy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q($.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,jy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q($.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="RemoteStore";class cz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{No(this)&&(J(xo,"Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.Ea.add(4),await Iu(c),c.Ra.set("Unknown"),c.Ea.delete(4),await op(c)}(this))})}),this.Ra=new lz(r,s)}}async function op(t){if(No(t))for(const e of t.da)await e(!0)}async function Iu(t){for(const e of t.da)await e(!1)}function mP(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vw(n)?yw(n):rl(n).O_()&&gw(n,e))}function mw(t,e){const n=fe(t),r=rl(n);n.Ia.delete(e),r.O_()&&gP(n,e),n.Ia.size===0&&(r.O_()?r.L_():No(n)&&n.Ra.set("Unknown"))}function gw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rl(t).Y_(e)}function gP(t,e){t.Va.Ue(e),rl(t).Z_(e)}function yw(t){t.Va=new r$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),rl(t).start(),t.Ra.ua()}function vw(t){return No(t)&&!rl(t).x_()&&t.Ia.size>0}function No(t){return fe(t).Ea.size===0}function yP(t){t.Va=void 0}async function uz(t){t.Ra.set("Online")}async function dz(t){t.Ia.forEach((e,n)=>{gw(t,e)})}async function hz(t,e){yP(t),vw(t)?(t.Ra.ha(e),yw(t)):t.Ra.set("Unknown")}async function fz(t,e,n){if(t.Ra.set("Online"),e instanceof eP&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){J(xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zh(t,r)}else if(e instanceof Jd?t.Va.Ze(e):e instanceof ZR?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const r=await hP(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(jt.EMPTY_BYTE_STRING,d.snapshotVersion)),gP(i,l);const h=new Js(d.target,l,c,d.sequenceNumber);gw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J(xo,"Failed to raise snapshot:",r),await Zh(t,r)}}async function Zh(t,e,n){if(!tl(e))throw e;t.Ea.add(1),await Iu(t),t.Ra.set("Offline"),n||(n=()=>hP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(xo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await op(t)})}function vP(t,e){return e().catch(n=>Zh(t,n,e))}async function ap(t){const e=fe(t),n=xi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:nw;for(;pz(e);)try{const s=await Q$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,mz(e,s)}catch(s){await Zh(e,s)}wP(e)&&xP(e)}function pz(t){return No(t)&&t.Ta.length<10}function mz(t,e){t.Ta.push(e);const n=xi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function wP(t){return No(t)&&!xi(t).x_()&&t.Ta.length>0}function xP(t){xi(t).start()}async function gz(t){xi(t).ra()}async function yz(t){const e=xi(t);for(const n of t.Ta)e.ea(n.mutations)}async function vz(t,e,n){const r=t.Ta.shift(),s=lw.from(r,e,n);await vP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ap(t)}async function wz(t,e){e&&xi(t).X_&&await async function(r,s){if(function(o){return e$(o)&&o!==$.ABORTED}(s.code)){const i=r.Ta.shift();xi(r).B_(),await vP(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ap(r)}}(t,e),wP(t)&&xP(t)}async function BE(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),J(xo,"RemoteStore received new credentials");const r=No(n);n.Ea.add(3),await Iu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await op(n)}async function xz(t,e){const n=fe(t);e?(n.Ea.delete(2),await op(n)):e||(n.Ea.add(2),await Iu(n),n.Ra.set("Unknown"))}function rl(t){return t.ma||(t.ma=function(n,r,s){const i=fe(n);return i.sa(),new sz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:uz.bind(null,t),t_:dz.bind(null,t),r_:hz.bind(null,t),H_:fz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),vw(t)?yw(t):t.Ra.set("Unknown")):(await t.ma.stop(),yP(t))})),t.ma}function xi(t){return t.fa||(t.fa=function(n,r,s){const i=fe(n);return i.sa(),new iz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:gz.bind(null,t),r_:wz.bind(null,t),ta:yz.bind(null,t),na:vz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ap(t)):(await t.fa.stop(),t.Ta.length>0&&(J(xo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ww(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xw(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),tl(t))return new Q($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{static emptySet(e){return new ba(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=ql(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.ga=new nt(se.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $a{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $a(e,n,ba.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class bz{constructor(){this.queries=zE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=zE(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Q($.ABORTED,"Firestore shutting down"))}}function zE(){return new Po(t=>FR(t),Zf)}async function _w(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new _z,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=xw(o,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ew(n)}async function bw(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ez(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Ew(n)}function Tz(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Ew(t){t.Ca.forEach(e=>{e.next()})}var Uy,WE;(WE=Uy||(Uy={})).Ma="default",WE.Cache="cache";class Tw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.key=e}}class bP{constructor(e){this.key=e}}class Sz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=UR(e),this.tu=new ba(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new $E,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=ep(this.query,h)?h:null,x=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;p&&m?p.data.isEqual(m.data)?x!==w&&(r.track({type:3,doc:m}),T=!0):this.su(p,m)||(r.track({type:2,doc:m}),T=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),T=!0):p&&!m&&(r.track({type:1,doc:p}),T=!0,(l||c)&&(a=!0)),T&&(m?(o=o.add(m),i=w?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,x){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:T})}};return w(m)-w(x)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new $a(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $E,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new bP(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new _P(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $a.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sw="SyncEngine";class Iz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Cz{constructor(e){this.key=e,this.hu=!1}}class kz{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Po(a=>FR(a),Zf),this.Iu=new Map,this.Eu=new Set,this.du=new nt(se.comparator),this.Au=new Map,this.Ru=new dw,this.Vu={},this.mu=new Map,this.fu=Ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Az(t,e,n=!0){const r=kP(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await EP(r,e,n,!0),s}async function Rz(t,e){const n=kP(t);await EP(n,e,!0,!1)}async function EP(t,e,n,r){const s=await Y$(t.localStore,Hr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Pz(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&mP(t.remoteStore,s),a}async function Pz(t,e,n,r,s){t.pu=(h,p,m)=>async function(w,T,b,_){let E=T.view.ru(b);E.Cs&&(E=await ME(w.localStore,T.query,!1).then(({documents:I})=>T.view.ru(I,E)));const C=_&&_.targetChanges.get(T.targetId),P=_&&_.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(E,w.isPrimaryClient,C,P);return qE(w,T.targetId,M.au),M.snapshot}(t,h,p,m);const i=await ME(t.localStore,e,!0),o=new Sz(e,i.Qs),a=o.ru(i.documents),l=Su.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);qE(t,n,c.au);const d=new Iz(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function Nz(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Zf(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&mw(r.remoteStore,s.targetId),By(r,s.targetId)}).catch(el)):(By(r,s.targetId),await Vy(r.localStore,s.targetId,!0))}async function Dz(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mw(n.remoteStore,r.targetId))}async function Lz(t,e,n){const r=Bz(t);try{const s=await function(o,a){const l=fe(o),c=Me.now(),d=a.reduce((m,x)=>m.add(x.key),Te());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=Is(),w=Te();return l.Ns.getEntries(m,d).next(T=>{x=T,x.forEach((b,_)=>{_.isValidDocument()||(w=w.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,x)).next(T=>{h=T;const b=[];for(const _ of a){const E=KB(_,h.get(_.key).overlayedDocument);E!=null&&b.push(new Ai(_.key,E,RR(E.value.mapValue),hn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,b,a)}).next(T=>{p=T;const b=T.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(m,T.batchId,b)})}).then(()=>({batchId:p.batchId,changes:$R(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new nt(Ee)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Cu(r,s.changes),await ap(r.remoteStore)}catch(s){const i=xw(s,"Failed to persist write");n.reject(i)}}async function TP(t,e){const n=fe(t);try{const r=await G$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Pe(o.hu,14607):s.removedDocuments.size>0&&(Pe(o.hu,42227),o.hu=!1))}),await Cu(n,r,e)}catch(r){await el(r)}}function HE(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&Ew(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jz(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new nt(se.comparator);o=o.insert(i,Xt.newNoDocument(i,ge.min()));const a=Te().add(i),l=new sp(ge.min(),new Map,new nt(Ee),o,a);await TP(r,l),r.du=r.du.remove(i),r.Au.delete(e),Iw(r)}else await Vy(r.localStore,e,!1).then(()=>By(r,e,n)).catch(el)}async function Mz(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await q$(n.localStore,e);IP(n,r,null),SP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(n,s)}catch(s){await el(s)}}async function Oz(t,e,n){const r=fe(t);try{const s=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);IP(r,e,n),SP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cu(r,s)}catch(s){await el(s)}}function SP(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function IP(t,e,n){const r=fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function By(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||CP(t,r)})}function CP(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Iw(t))}function qE(t,e,n){for(const r of n)r instanceof _P?(t.Ru.addReference(r.key,e),Vz(t,r)):r instanceof bP?(J(Sw,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||CP(t,r.key)):ue(19791,{wu:r})}function Vz(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(Sw,"New document in limbo: "+n),t.Eu.add(r),Iw(t))}function Iw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new se(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new Cz(n)),t.du=t.du.insert(n,r),mP(t.remoteStore,new Js(Hr(Jf(n.path)),r,"TargetPurposeLimboResolution",Qf.ce))}}async function Cu(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=fw.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=fe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(c,p=>z.forEach(p.Es,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>z.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!tl(h))throw h;J(pw,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Ms.get(p),x=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(p,w)}}}(r.localStore,i))}async function Fz(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){J(Sw,"User change. New user:",e.toKey());const r=await dP(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Q($.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cu(n,r.Ls)}}function Uz(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function kP(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jz.bind(null,e),e.Pu.H_=Ez.bind(null,e.eventManager),e.Pu.yu=Tz.bind(null,e.eventManager),e}function Bz(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Oz.bind(null,e),e}class ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return H$(this.persistence,new $$,e.initialUser,this.serializer)}Cu(e){return new uP(hw.mi,this.serializer)}Du(e){return new J$}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ef.provider={build:()=>new ef};class $z extends ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pe(this.persistence.referenceDelegate instanceof Jh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new C$(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new uP(r=>Jh.mi(r,n),this.serializer)}}class $y{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fz.bind(null,this.syncEngine),await xz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bz}()}createDatastore(e){const n=ip(e.databaseInfo.databaseId),r=function(i){return new rz(i)}(e.databaseInfo);return function(i,o,a,l){return new az(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new cz(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>HE(this.syncEngine,n,0),function(){return FE.v()?new FE:new Z$}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new kz(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);J(xo,"RemoteStore shutting down."),i.Ea.add(5),await Iu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}$y.provider={build:()=>new $y};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="FirestoreClient";class zz{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Qt.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J(_i,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(_i,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fm(t,e){t.asyncQueue.verifyOperationInProgress(),J(_i,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await dP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function GE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Wz(t);J(_i,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>BE(e.remoteStore,s)),t._onlineComponents=e}async function Wz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(_i,"Using user provided OfflineComponentProvider");try{await Fm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wo("Error using user provided cache. Falling back to memory cache: "+n),await Fm(t,new ef)}}else J(_i,"Using default OfflineComponentProvider"),await Fm(t,new $z(void 0));return t._offlineComponents}async function kw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(_i,"Using user provided OnlineComponentProvider"),await GE(t,t._uninitializedComponentsProvider._online)):(J(_i,"Using default OnlineComponentProvider"),await GE(t,new $y))),t._onlineComponents}function Hz(t){return kw(t).then(e=>e.syncEngine)}function qz(t){return kw(t).then(e=>e.datastore)}async function tf(t){const e=await kw(t),n=e.eventManager;return n.onListen=Az.bind(null,e.syncEngine),n.onUnlisten=Nz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Rz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Dz.bind(null,e.syncEngine),n}function Gz(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Cw({next:p=>{d.Nu(),o.enqueueAndForget(()=>bw(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Q($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Q($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Tw(Jf(a.path),d,{includeMetadataChanges:!0,qa:!0});return _w(i,h)}(await tf(t),t.asyncQueue,e,n,r)),r.promise}function Kz(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Cw({next:p=>{d.Nu(),o.enqueueAndForget(()=>bw(i,h)),p.fromCache&&l.source==="server"?c.reject(new Q($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Tw(a,d,{includeMetadataChanges:!0,qa:!0});return _w(i,h)}(await tf(t),t.asyncQueue,e,n,r)),r.promise}function Qz(t,e,n){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await qz(t);r.resolve(async function(o,a,l){var w;const c=fe(o),{request:d,gt:h,parent:p}=p$(c.serializer,LB(a),l);c.connection.$o||delete d.parent;const m=(await c.Ho("RunAggregationQuery",c.serializer.databaseId,p,d,1)).filter(T=>!!T.result);Pe(m.length===1,64727);const x=(w=m[0].result)==null?void 0:w.aggregateFields;return Object.keys(x).reduce((T,b)=>(T[h[b]]=x[b],T),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="firestore.googleapis.com",QE=!0;class YE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RP,this.ssl=QE}else this.host=e.host,this.ssl=e.ssl??QE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S$)throw new Q($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AP(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yR;switch(r.type){case"firstParty":return new tB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=KE.get(n);r&&(J("ComponentProvider","Removing Datastore"),KE.delete(n),r.terminate())}(this),Promise.resolve()}}function PP(t,e,n,r={}){var c;t=Bt(t,lp);const s=Yr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Bf(`https://${a}`),$f("Firestore",!0)),i.host!==RP&&i.host!==a&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!mi(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Qt.MOCK_USER;else{d=SA(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Q($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Qt(p)}t._authCredentials=new J9(new gR(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xr(this.firestore,e,this._query)}}class Je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}toJSON(){return{type:Je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Eu(n,Je._jsonSchema))return new Je(e,r||null,new se(Fe.fromString(n.referencePath)))}}Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:yt("string",Je._jsonSchemaVersion),referencePath:yt("string")};class ms extends Xr{constructor(e,n,r){super(e,n,Jf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new se(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function Ve(t,e,...n){if(t=Ne(t),vR("collection","path",e),t instanceof lp){const r=Fe.fromString(e,...n);return cE(r),new ms(t,null,r)}{if(!(t instanceof Je||t instanceof ms))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return cE(r),new ms(t.firestore,null,r)}}function et(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=Gf.newId()),vR("doc","path",e),t instanceof lp){const r=Fe.fromString(e,...n);return lE(r),new Je(t,null,new se(r))}{if(!(t instanceof Je||t instanceof ms))throw new Q($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return lE(r),new Je(t.firestore,t instanceof ms?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="AsyncQueue";class JE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fP(this,"async_queue_retry"),this._c=()=>{const r=Vm();r&&J(XE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Wr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;J(XE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",ZE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ww.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:ZE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ZE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ir extends lp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new JE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JE(e),this._firestoreClient=void 0,await e}}}function NP(t,e){const n=typeof t=="object"?t:wu(),r=typeof t=="string"?t:qh,s=Ci(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=$0("firestore");i&&PP(s,...i)}return s}function Do(t){if(t._terminated)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Yz(t),t._firestoreClient}function Yz(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new wB(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,AP(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class LP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(jt.fromBase64String(e))}catch(n){throw new Q($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:yt("string",Dn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function jP(){return new Lo(ky)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:yt("string",xr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _r(e.vectorValues);throw new Q($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:yt("string",_r._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=/^__.*__$/;class Jz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class MP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class cp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(OP(this.Ac)&&Xz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Zz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ip(e)}Cc(e,n,r,s=!1){return new cp({Ac:e,methodName:n,Dc:r,path:Dt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ku(t){const e=t._freezeSettings(),n=ip(t._databaseId);return new Zz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Aw(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Nw("Data must be an object, but it was:",o,r);const a=UP(r,o);let l,c;if(i.merge)l=new jn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=zy(e,h,n);if(!o.contains(p))throw new Q($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);$P(d,p)||d.push(p)}l=new jn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new Jz(new xn(a),l,c)}class up extends sl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}function e8(t,e,n){return new cp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Rw extends sl{_toFieldTransform(e){return new QR(e.path,new Xc)}isEqual(e){return e instanceof Rw}}class Pw extends sl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=e8(this,e,!0),r=this.vc.map(i=>il(i,n)),s=new Ua(r);return new QR(e.path,s)}isEqual(e){return e instanceof Pw&&mi(this.vc,e.vc)}}function VP(t,e,n,r){const s=t.Cc(1,e,n);Nw("Data must be an object, but it was:",s,r);const i=[],o=xn.empty();ki(r,(l,c)=>{const d=Dw(e,l,n);c=Ne(c);const h=s.yc(d);if(c instanceof up)i.push(d);else{const p=il(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new jn(i);return new MP(o,a,s.fieldTransforms)}function FP(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[zy(e,r,n)],l=[s];if(i.length%2!=0)throw new Q($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(zy(e,i[p])),l.push(i[p+1]);const c=[],d=xn.empty();for(let p=a.length-1;p>=0;--p)if(!$P(c,a[p])){const m=a[p];let x=l[p];x=Ne(x);const w=o.yc(m);if(x instanceof up)c.push(m);else{const T=il(x,w);T!=null&&(c.push(m),d.set(m,T))}}const h=new jn(c);return new MP(d,h,o.fieldTransforms)}function t8(t,e,n,r=!1){return il(n,t.Cc(r?4:3,e))}function il(t,e){if(BP(t=Ne(t)))return Nw("Unsupported field value:",e,t),UP(t,e);if(t instanceof sl)return function(r,s){if(!OP(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=il(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $B(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Me.fromDate(r);return{timestampValue:Xh(s.serializer,i)}}if(r instanceof Me){const i=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xh(s.serializer,i)}}if(r instanceof xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:tP(s.serializer,r._byteString)};if(r instanceof Je){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _r)return function(o,a){return{mapValue:{fields:{[kR]:{stringValue:AR},[Gh]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return aw(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Kf(r)}`)}(t,e)}function UP(t,e){const n={};return bR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(t,(r,s)=>{const i=il(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function BP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof xr||t instanceof Dn||t instanceof Je||t instanceof sl||t instanceof _r)}function Nw(t,e,n){if(!BP(n)||!xR(n)){const r=Kf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function zy(t,e,n){if((e=Ne(e))instanceof Lo)return e._internalPath;if(typeof e=="string")return Dw(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const n8=new RegExp("[~\\*/\\[\\]]");function Dw(t,e,n){if(e.search(n8)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lo(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q($.INVALID_ARGUMENT,a+t+l)}function $P(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r8 extends zP{data(){return super.data()}}function dp(t,e){return typeof e=="string"?Dw(t,e):e instanceof Lo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lw{}class hp extends Lw{}function ft(t,e,...n){let r=[];e instanceof Lw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof fp).length,a=i.filter(l=>l instanceof Au).length;if(o>1||o>0&&a>0)throw new Q($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Au extends hp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Au(e,n,r)}_apply(e){const n=this._parse(e);return HP(e._query,n),new Xr(e.firestore,e.converter,Dy(e._query,n))}_parse(e){const n=ku(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nT(h,d);const x=[];for(const w of h)x.push(tT(l,i,w));p={arrayValue:{values:x}}}else p=tT(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nT(h,d),p=t8(a,o,h,d==="in"||d==="not-in");return gt.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Tt(t,e,n){const r=e,s=dp("where",t);return Au._create(s,r,n)}class fp extends Lw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)HP(o,l),o=Dy(o,l)}(e._query,n),new Xr(e.firestore,e.converter,Dy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pp extends hp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yc(i,o)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new nl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ua(t,e="asc"){const n=e,r=dp("orderBy",t);return pp._create(r,n)}class mp extends hp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new mp(e,n,r)}_apply(e){return new Xr(e.firestore,e.converter,Qh(e._query,this._limit,this._limitType))}}function da(t){return aB("limit",t),mp._create("limit",t,"F")}function tT(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new Q($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OR(e)&&n.indexOf("/")!==-1)throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!se.isDocumentKey(r))throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yE(t,new se(r))}if(n instanceof Je)return yE(t,n._key);throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(n)}.`)}function nT(t,e){if(!Array.isArray(t)||t.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HP(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qP{convertValue(e,n="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ki(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Gh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>dt(o.doubleValue));return new _r(n)}convertGeoPoint(e){return new xr(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kc(e));default:return null}}convertTimestamp(e){const n=yi(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Pe(lP(r),9688,{name:e});const s=new Oa(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||Ss(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function GP(){return new DP("count")}class ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ci extends zP{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ci._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:yt("string",ci._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class pc extends ci{data(e={}){return super.data(e)}}class ui{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ha(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pc(this._firestore,this._userDataWriter,r.key,r,new ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new pc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ha(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new pc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ha(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:s8(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ui._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function s8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){t=Bt(t,Je);const e=Bt(t.firestore,ir);return Gz(Do(e),t._key).then(n=>QP(e,t,n))}ui._jsonSchemaVersion="firestore/querySnapshot/1.0",ui._jsonSchema={type:yt("string",ui._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class gp extends qP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function Jt(t){t=Bt(t,Xr);const e=Bt(t.firestore,ir),n=Do(e),r=new gp(e);return WP(t._query),Kz(n,t._query).then(s=>new ui(e,r,t,s))}function KP(t,e,n){t=Bt(t,Je);const r=Bt(t.firestore,ir),s=jw(t.converter,e,n);return ol(r,[Aw(ku(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hn.none())])}function tr(t,e,n,...r){t=Bt(t,Je);const s=Bt(t.firestore,ir),i=ku(s);let o;return o=typeof(e=Ne(e))=="string"||e instanceof Lo?FP(i,"updateDoc",t._key,e,n,r):VP(i,"updateDoc",t._key,e),ol(s,[o.toMutation(t._key,hn.exists(!0))])}function yp(t){return ol(Bt(t.firestore,ir),[new rp(t._key,hn.none())])}function _o(t,e){const n=Bt(t.firestore,ir),r=et(t),s=jw(t.converter,e);return ol(n,[Aw(ku(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function jo(t,...e){var l,c,d;t=Ne(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||eT(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(eT(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof Je)o=Bt(t.firestore,ir),a=Jf(t._key.path),i={next:h=>{e[r]&&e[r](QP(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Bt(t,Xr);o=Bt(h.firestore,ir),a=h._query;const p=new gp(o);i={next:m=>{e[r]&&e[r](new ui(o,p,h,m))},error:e[r+1],complete:e[r+2]},WP(t._query)}return function(p,m,x,w){const T=new Cw(w),b=new Tw(m,T,x);return p.asyncQueue.enqueueAndForget(async()=>_w(await tf(p),b)),()=>{T.Nu(),p.asyncQueue.enqueueAndForget(async()=>bw(await tf(p),b))}}(Do(o),a,s,i)}function ol(t,e){return function(r,s){const i=new Wr;return r.asyncQueue.enqueueAndForget(async()=>Lz(await Hz(r),s,i)),i.promise}(Do(t),e)}function QP(t,e,n){const r=n.docs.get(e._key),s=new gp(t);return new ci(t,s,e._key,r,new ha(n.hasPendingWrites,n.fromCache),e.converter)}function Kl(t){return YP(t,{count:GP()})}function YP(t,e){const n=Bt(t.firestore,ir),r=Do(n),s=yB(e,(i,o)=>new JB(o,i.aggregateType,i._internalFieldPath));return Qz(r,t._query,s).then(i=>function(a,l,c){const d=new gp(a);return new LP(l,d,c)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ku(e)}set(e,n,r){this._verifyNotCommitted();const s=Um(e,this._firestore),i=jw(s.converter,n,r),o=Aw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,hn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Um(e,this._firestore);let o;return o=typeof(n=Ne(n))=="string"||n instanceof Lo?FP(this._dataReader,"WriteBatch.update",i._key,n,r,s):VP(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Um(e,this._firestore);return this._mutations=this._mutations.concat(new rp(n._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Um(t,e){if((t=Ne(t)).firestore!==e)throw new Q($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function bo(){return new Rw("serverTimestamp")}function JP(...t){return new Pw("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){return Do(t=Bt(t,ir)),new XP(t,e=>ol(t,e))}(function(e,n=!0){(function(s){Za=s})(Ro),sr(new $n("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ir(new Z9(r.getProvider("auth-internal")),new nB(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),en(iE,oE,e),en(iE,oE,"esm2020")})();const eN=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:qP,AggregateField:DP,AggregateQuerySnapshot:LP,Bytes:Dn,CollectionReference:ms,DocumentReference:Je,DocumentSnapshot:ci,FieldPath:Lo,FieldValue:sl,Firestore:ir,FirestoreError:Q,GeoPoint:xr,Query:Xr,QueryCompositeFilterConstraint:fp,QueryConstraint:hp,QueryDocumentSnapshot:pc,QueryFieldFilterConstraint:Au,QueryLimitConstraint:mp,QueryOrderByConstraint:pp,QuerySnapshot:ui,SnapshotMetadata:ha,Timestamp:Me,VectorValue:_r,WriteBatch:XP,_AutoId:Gf,_ByteString:jt,_DatabaseId:Oa,_DocumentKey:se,_EmptyAuthCredentialsProvider:yR,_FieldPath:Dt,_cast:Bt,_logWarn:wo,_validateIsNotUsedTogether:wR,addDoc:_o,arrayUnion:JP,collection:Ve,connectFirestoreEmulator:PP,count:GP,deleteDoc:yp,doc:et,documentId:jP,ensureFirestoreConfigured:Do,executeWrite:ol,getAggregateFromServer:YP,getCountFromServer:Kl,getDoc:Ru,getDocs:Jt,getFirestore:NP,limit:da,onSnapshot:jo,orderBy:ua,query:ft,serverTimestamp:bo,setDoc:KP,updateDoc:tr,where:Tt,writeBatch:ZP},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="firebasestorage.googleapis.com",nN="storageBucket",i8=2*60*1e3,o8=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends ar{constructor(e,n,r=0){super(Bm(e),`Firebase Storage: ${n} (${Bm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function Bm(t){return"storage/"+t}function Mw(){const t="An unknown error occurred, please check the error payload for server response.";return new ct(lt.UNKNOWN,t)}function a8(t){return new ct(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function l8(t){return new ct(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function c8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(lt.UNAUTHENTICATED,t)}function u8(){return new ct(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d8(t){return new ct(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function h8(){return new ct(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function f8(){return new ct(lt.CANCELED,"User canceled the upload/download.")}function p8(t){return new ct(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function m8(t){return new ct(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function g8(){return new ct(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nN+"' property when initializing the app?")}function y8(){return new ct(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v8(){return new ct(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function w8(t){return new ct(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wy(t){return new ct(lt.INVALID_ARGUMENT,t)}function rN(){return new ct(lt.APP_DELETED,"The Firebase app was deleted.")}function x8(t){return new ct(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mc(t,e){return new ct(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Nl(t){throw new ct(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Mn.makeFromUrl(e,n)}catch{return new Mn(e,"")}if(r.path==="")return r;throw m8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),x={bucket:1,path:3},w=n===tN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",b=new RegExp(`^https?://${w}/${s}/${T}`,"i"),E=[{regex:a,indices:l,postModify:i},{regex:m,indices:x,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<E.length;C++){const P=E[C],M=P.regex.exec(e);if(M){const I=M[P.indices.bucket];let S=M[P.indices.path];S||(S=""),r=new Mn(I,S),P.postModify(r);break}}if(r==null)throw p8(e);return r}}class _8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...T){c||(c=!0,e.apply(null,T))}function h(T){s=setTimeout(()=>{s=null,t(m,l())},T)}function p(){i&&clearTimeout(i)}function m(T,...b){if(c){p();return}if(T){p(),d.call(null,T,...b);return}if(l()||o){p(),d.call(null,T,...b);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let x=!1;function w(T){x||(x=!0,p(),!c&&(s!==null?(T||(a=2),clearTimeout(s),h(0)):T||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function E8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){return t!==void 0}function S8(t){return typeof t=="object"&&!Array.isArray(t)}function Ow(t){return typeof t=="string"||t instanceof String}function rT(t){return Vw()&&t instanceof Blob}function Vw(){return typeof Blob<"u"}function sT(t,e,n,r){if(r<e)throw Wy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Wy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var lo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(lo||(lo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,w)=>{this.resolve_=x,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new _d(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===lo.NO_ERROR,l=i.getStatus();if(!a||I8(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===lo.ABORT;r(!1,new _d(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new _d(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());T8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Mw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?rN():f8();o(l)}else{const l=h8();o(l)}};this.canceled_?n(!1,new _d(!1,null,!0)):this.backoffId_=b8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _d{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function k8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function A8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function P8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function N8(t,e,n,r,s,i,o=!0,a=!1){const l=sN(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return R8(d,e),k8(d,n),A8(d,i),P8(d,r),new C8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function L8(...t){const e=D8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Vw())return new Blob(t);throw new ct(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function j8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t){if(typeof atob>"u")throw w8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $m{constructor(e,n){this.data=e,this.contentType=n||null}}function O8(t,e){switch(t){case Or.RAW:return new $m(iN(e));case Or.BASE64:case Or.BASE64URL:return new $m(oN(t,e));case Or.DATA_URL:return new $m(F8(e),U8(e))}throw Mw()}function iN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function V8(t){let e;try{e=decodeURIComponent(t)}catch{throw mc(Or.DATA_URL,"Malformed data URL.")}return iN(e)}function oN(t,e){switch(t){case Or.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw mc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Or.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw mc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=M8(e)}catch(s){throw s.message.includes("polyfill")?s:mc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class aN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw mc(Or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=B8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function F8(t){const e=new aN(t);return e.base64?oN(Or.BASE64,e.rest):V8(e.rest)}function U8(t){return new aN(t).contentType}function B8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){let r=0,s="";rT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(rT(this.data_)){const r=this.data_,s=j8(r,e,n);return s===null?null:new Qs(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qs(r,!0)}}static getBlob(...e){if(Vw()){const n=e.map(r=>r instanceof Qs?r.data_:r);return new Qs(L8.apply(null,n))}else{const n=e.map(o=>Ow(o)?O8(Or.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Qs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){let e;try{e=JSON.parse(t)}catch{return null}return S8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function z8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function cN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t,e){return e}class ln{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||W8}}let bd=null;function H8(t){return!Ow(t)||t.length<2?t:cN(t)}function uN(){if(bd)return bd;const t=[];t.push(new ln("bucket")),t.push(new ln("generation")),t.push(new ln("metageneration")),t.push(new ln("name","fullPath",!0));function e(i,o){return H8(o)}const n=new ln("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ln("size");return s.xform=r,t.push(s),t.push(new ln("timeCreated")),t.push(new ln("updated")),t.push(new ln("md5Hash",null,!0)),t.push(new ln("cacheControl",null,!0)),t.push(new ln("contentDisposition",null,!0)),t.push(new ln("contentEncoding",null,!0)),t.push(new ln("contentLanguage",null,!0)),t.push(new ln("contentType",null,!0)),t.push(new ln("metadata","customMetadata",!0)),bd=t,bd}function q8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Mn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function G8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return q8(r,t),r}function dN(t,e,n){const r=lN(e);return r===null?null:G8(t,r,n)}function K8(t,e,n,r){const s=lN(e);if(s===null||!Ow(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=Fw(p,n,r),x=sN({alt:"media",token:c});return m+x})[0]}function Q8(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class hN{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){if(!t)throw Mw()}function Y8(t,e){function n(r,s){const i=dN(t,s,e);return fN(i!==null),i}return n}function X8(t,e){function n(r,s){const i=dN(t,s,e);return fN(i!==null),K8(i,s,t.host,t._protocol)}return n}function pN(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=u8():s=c8():n.getStatus()===402?s=l8(t.bucket):n.getStatus()===403?s=d8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function J8(t){const e=pN(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=a8(t.path)),i.serverResponse=s.serverResponse,i}return n}function Z8(t,e,n){const r=e.fullServerUrl(),s=Fw(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hN(s,i,X8(t,n),o);return a.errorHandler=J8(e),a}function e7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function t7(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=e7(null,e)),r}function n7(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let C=0;C<2;C++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=t7(e,r,s),d=Q8(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Qs.getBlob(h,r,p);if(m===null)throw y8();const x={name:c.fullPath},w=Fw(i,t.host,t._protocol),T="POST",b=t.maxUploadRetryTime,_=new hN(w,T,Y8(t,n),b);return _.urlParams=x,_.headers=o,_.body=m.uploadData(),_.errorHandler=pN(e),_}class r7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=lo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=lo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Nl("cannot .send() more than once");if(Yr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class s7 extends r7{initXhr(){this.xhr_.responseType="text"}}function mN(){return new s7}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this._service=e,n instanceof Mn?this._location=n:this._location=Mn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Eo(e,n)}get root(){const e=new Mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cN(this._location.path)}get storage(){return this._service}get parent(){const e=$8(this._location.path);if(e===null)return null;const n=new Mn(this._location.bucket,e);return new Eo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw x8(e)}}function i7(t,e,n){t._throwIfRoot("uploadBytes");const r=n7(t.storage,t._location,uN(),new Qs(e,!0),n);return t.storage.makeRequestWithTokens(r,mN).then(s=>({metadata:s,ref:t}))}function o7(t){t._throwIfRoot("getDownloadURL");const e=Z8(t.storage,t._location,uN());return t.storage.makeRequestWithTokens(e,mN).then(n=>{if(n===null)throw v8();return n})}function a7(t,e){const n=z8(t._location.path,e),r=new Mn(t._location.bucket,n);return new Eo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){return/^[A-Za-z]+:\/\//.test(t)}function c7(t,e){return new Eo(t,e)}function gN(t,e){if(t instanceof Uw){const n=t;if(n._bucket==null)throw g8();const r=new Eo(n,n._bucket);return e!=null?gN(r,e):r}else return e!==void 0?a7(t,e):t}function u7(t,e){if(e&&l7(e)){if(t instanceof Uw)return c7(t,e);throw Wy("To use ref(service, url), the first argument must be a Storage instance.")}else return gN(t,e)}function iT(t,e){const n=e==null?void 0:e[nN];return n==null?null:Mn.makeFromBucketSpec(n,t)}function d7(t,e,n,r={}){t.host=`${e}:${n}`;const s=Yr(e);s&&(Bf(`https://${t.host}/b`),$f("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:SA(i,t.app.options.projectId))}class Uw{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=tN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i8,this._maxUploadRetryTime=o8,this._requests=new Set,s!=null?this._bucket=Mn.makeFromBucketSpec(s,this._host):this._bucket=iT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mn.makeFromBucketSpec(this._url,e):this._bucket=iT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new _8(rN());{const o=N8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const oT="@firebase/storage",aT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="storage";function h7(t,e,n){return t=Ne(t),i7(t,e,n)}function f7(t){return t=Ne(t),o7(t)}function p7(t,e){return t=Ne(t),u7(t,e)}function m7(t=wu(),e){t=Ne(t);const r=Ci(t,yN).getImmediate({identifier:e}),s=$0("storage");return s&&g7(r,...s),r}function g7(t,e,n,r={}){d7(t,e,n,r)}function y7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Uw(n,r,s,e,Ro)}function v7(){sr(new $n(yN,y7,"PUBLIC").setMultipleInstances(!0)),en(oT,aT,""),en(oT,aT,"esm2020")}v7();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7="type.googleapis.com/google.protobuf.Int64Value",x7="type.googleapis.com/google.protobuf.UInt64Value";function vN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function rf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>rf(e));if(typeof t=="function"||typeof t=="object")return vN(t,e=>rf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function za(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case w7:case x7:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>za(e)):typeof t=="function"||typeof t=="object"?vN(t,e=>za(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bn extends ar{constructor(e,n,r){super(`${Bw}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,bn.prototype)}}function _7(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function sf(t,e){let n=_7(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!lT[o])return new bn("internal","internal");n=lT[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=za(s))}}catch{}return n==="ok"?null:new bn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Nn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="us-central1",E7=/^data: (.*?)(?:\n|$)/;function T7(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new bn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class S7{constructor(e,n,r,s,i=Hy,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new b7(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Hy}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function I7(t,e,n){const r=Yr(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Bf(t.emulatorOrigin+"/backends"),$f("Functions",!0))}function C7(t,e,n){const r=s=>A7(t,e,s,n||{});return r.stream=(s,i)=>P7(t,e,s,i),r}function wN(t){return t.emulatorOrigin&&Yr(t.emulatorOrigin)?"include":void 0}async function k7(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:wN(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function xN(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function A7(t,e,n,r){const s=t._url(e);return R7(t,s,n,r)}async function R7(t,e,n,r){n=rf(n);const s={data:n},i=await xN(t,r),o=r.timeout||7e4,a=T7(o),l=await Promise.race([k7(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new bn("cancelled","Firebase Functions instance was deleted.");const c=sf(l.status,l.json);if(c)throw c;if(!l.json)throw new bn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new bn("internal","Response is missing data field.");return{data:za(d)}}function P7(t,e,n,r){const s=t._url(e);return N7(t,s,n,r||{})}async function N7(t,e,n,r){var p;n=rf(n);const s={data:n},i=await xN(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:wN(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const w=new bn("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const x=sf(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let a,l;const c=new Promise((m,x)=>{a=m,l=x});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const m=new bn("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=D7(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:x,done:w}=await m.read();return{value:x,done:w}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function D7(t,e,n,r){const s=(o,a)=>{const l=o.match(E7);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(za(d.result));return}if("message"in d){a.enqueue(za(d.message));return}if("error"in d){const h=sf(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof bn){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new bn("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new bn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),o);return l()}catch(c){const d=c instanceof bn?c:sf(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const cT="@firebase/functions",uT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7="auth-internal",j7="app-check-internal",M7="messaging-internal";function O7(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(L7),o=n.getProvider(M7),a=n.getProvider(j7);return new S7(s,i,o,a,r)};sr(new $n(Bw,e,"PUBLIC").setMultipleInstances(!0)),en(cT,uT,t),en(cT,uT,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t=wu(),e=Hy){const r=Ci(Ne(t),Bw).getImmediate({identifier:e}),s=$0("functions");return s&&F7(r,...s),r}function F7(t,e,n){I7(Ne(t),e,n)}function U7(t,e,n){return C7(Ne(t),e,n)}O7();const _N="@firebase/installations",$w="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=1e4,EN=`w:${$w}`,TN="FIS_v2",B7="https://firebaseinstallations.googleapis.com/v1",$7=60*60*1e3,z7="installations",W7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},To=new Ao(z7,W7,H7);function SN(t){return t instanceof ar&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN({projectId:t}){return`${B7}/projects/${t}/installations`}function CN(t){return{token:t.token,requestStatus:2,expiresIn:G7(t.expiresIn),creationTime:Date.now()}}async function kN(t,e){const r=(await e.json()).error;return To.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function AN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function q7(t,{refreshToken:e}){const n=AN(t);return n.append("Authorization",K7(e)),n}async function RN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function G7(t){return Number(t.replace("s","000"))}function K7(t){return`${TN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=IN(t),s=AN(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:TN,appId:t.appId,sdkVersion:EN},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await RN(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:CN(c.authToken)}}else throw await kN("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=/^[cdef][\w-]{21}$/,qy="";function J7(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Z7(t);return X7.test(n)?n:qy}catch{return qy}}function Z7(t){return Y7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Map;function DN(t,e){const n=vp(t);LN(n,e),eW(n,e)}function LN(t,e){const n=NN.get(t);if(n)for(const r of n)r(e)}function eW(t,e){const n=tW();n&&n.postMessage({key:t,fid:e}),nW()}let to=null;function tW(){return!to&&"BroadcastChannel"in self&&(to=new BroadcastChannel("[Firebase] FID Change"),to.onmessage=t=>{LN(t.data.key,t.data.fid)}),to}function nW(){NN.size===0&&to&&(to.close(),to=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW="firebase-installations-database",sW=1,So="firebase-installations-store";let zm=null;function zw(){return zm||(zm=zf(rW,sW,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(So)}}})),zm}async function of(t,e){const n=vp(t),s=(await zw()).transaction(So,"readwrite"),i=s.objectStore(So),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&DN(t,e.fid),e}async function jN(t){const e=vp(t),r=(await zw()).transaction(So,"readwrite");await r.objectStore(So).delete(e),await r.done}async function wp(t,e){const n=vp(t),s=(await zw()).transaction(So,"readwrite"),i=s.objectStore(So),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&DN(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(t){let e;const n=await wp(t.appConfig,r=>{const s=iW(r),i=oW(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===qy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function iW(t){const e=t||{fid:J7(),registrationStatus:0};return MN(e)}function oW(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(To.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=aW(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:lW(t)}:{installationEntry:e}}async function aW(t,e){try{const n=await Q7(t,e);return of(t.appConfig,n)}catch(n){throw SN(n)&&n.customData.serverCode===409?await jN(t.appConfig):await of(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function lW(t){let e=await dT(t.appConfig);for(;e.registrationStatus===1;)await PN(100),e=await dT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ww(t);return r||n}return e}function dT(t){return wp(t,e=>{if(!e)throw To.create("installation-not-found");return MN(e)})}function MN(t){return cW(t)?{fid:t.fid,registrationStatus:0}:t}function cW(t){return t.registrationStatus===1&&t.registrationTime+bN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uW({appConfig:t,heartbeatServiceProvider:e},n){const r=dW(t,n),s=q7(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:EN,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await RN(()=>fetch(r,a));if(l.ok){const c=await l.json();return CN(c)}else throw await kN("Generate Auth Token",l)}function dW(t,{fid:e}){return`${IN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(t,e=!1){let n;const r=await wp(t.appConfig,i=>{if(!ON(i))throw To.create("not-registered");const o=i.authToken;if(!e&&pW(o))return i;if(o.requestStatus===1)return n=hW(t,e),i;{if(!navigator.onLine)throw To.create("app-offline");const a=gW(i);return n=fW(t,a),a}});return n?await n:r.authToken}async function hW(t,e){let n=await hT(t.appConfig);for(;n.authToken.requestStatus===1;)await PN(100),n=await hT(t.appConfig);const r=n.authToken;return r.requestStatus===0?Hw(t,e):r}function hT(t){return wp(t,e=>{if(!ON(e))throw To.create("not-registered");const n=e.authToken;return yW(n)?{...e,authToken:{requestStatus:0}}:e})}async function fW(t,e){try{const n=await uW(t,e),r={...e,authToken:n};return await of(t.appConfig,r),n}catch(n){if(SN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await jN(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await of(t.appConfig,r)}throw n}}function ON(t){return t!==void 0&&t.registrationStatus===2}function pW(t){return t.requestStatus===2&&!mW(t)}function mW(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$7}function gW(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function yW(t){return t.requestStatus===1&&t.requestTime+bN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ww(e);return r?r.catch(console.error):Hw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wW(t,e=!1){const n=t;return await xW(n),(await Hw(n,e)).token}async function xW(t){const{registrationPromise:e}=await Ww(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(t){if(!t||!t.options)throw Wm("App Configuration");if(!t.name)throw Wm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Wm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Wm(t){return To.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="installations",bW="installations-internal",EW=t=>{const e=t.getProvider("app").getImmediate(),n=_W(e),r=Ci(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TW=t=>{const e=t.getProvider("app").getImmediate(),n=Ci(e,VN).getImmediate();return{getId:()=>vW(n),getToken:s=>wW(n,s)}};function SW(){sr(new $n(VN,EW,"PUBLIC")),sr(new $n(bW,TW,"PRIVATE"))}SW();en(_N,$w);en(_N,$w,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW="/firebase-messaging-sw.js",CW="/firebase-cloud-messaging-push-scope",FN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",kW="https://fcmregistrations.googleapis.com/v1",UN="google.c.a.c_id",AW="google.c.a.c_l",RW="google.c.a.ts",PW="google.c.a.e",fT=1e4;var pT;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(pT||(pT={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Zc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Zc||(Zc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function NW(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="fcm_token_details_db",DW=5,mT="fcm_token_object_Store";async function LW(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Hm))return null;let e=null;return(await zf(Hm,DW,{upgrade:async(r,s,i,o)=>{if(s<2||!r.objectStoreNames.contains(mT))return;const a=o.objectStore(mT),l=await a.index("fcmSenderId").get(t);if(await a.clear(),!!l){if(s===2){const c=l;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:c.createTime??Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:rs(c.vapidKey)}}}else if(s===3){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:rs(c.auth),p256dh:rs(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:rs(c.vapidKey)}}}else if(s===4){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:rs(c.auth),p256dh:rs(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:rs(c.vapidKey)}}}}}})).close(),await Rm(Hm),await Rm("fcm_vapid_details_db"),await Rm("undefined"),jW(e)?e:null}function jW(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW="firebase-messaging-database",OW=1,eu="firebase-messaging-store";let qm=null;function BN(){return qm||(qm=zf(MW,OW,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(eu)}}})),qm}async function VW(t){const e=$N(t),r=await(await BN()).transaction(eu).objectStore(eu).get(e);if(r)return r;{const s=await LW(t.appConfig.senderId);if(s)return await qw(t,s),s}}async function qw(t,e){const n=$N(t),s=(await BN()).transaction(eu,"readwrite");return await s.objectStore(eu).put(e,n),await s.done,e}function $N({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},tn=new Ao("messaging","Messaging",FW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UW(t,e){const n=await Kw(t),r=zN(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(Gw(t.appConfig),s)).json()}catch(o){throw tn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw tn.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw tn.create("token-subscribe-no-token");return i.token}async function BW(t,e){const n=await Kw(t),r=zN(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${Gw(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw tn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw tn.create("token-update-failed",{errorInfo:o})}if(!i.token)throw tn.create("token-update-no-token");return i.token}async function $W(t,e){const r={method:"DELETE",headers:await Kw(t)};try{const i=await(await fetch(`${Gw(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw tn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw tn.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function Gw({projectId:t}){return`${kW}/projects/${t}/registrations`}async function Kw({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function zN({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==FN&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW=7*24*60*60*1e3;async function WW(t){const e=await qW(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:rs(e.getKey("auth")),p256dh:rs(e.getKey("p256dh"))},r=await VW(t.firebaseDependencies);if(r){if(GW(r.subscriptionOptions,n))return Date.now()>=r.createTime+zW?HW(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await $W(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return gT(t.firebaseDependencies,n)}else return gT(t.firebaseDependencies,n)}async function HW(t,e){try{const n=await BW(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await qw(t.firebaseDependencies,r),n}catch(n){throw n}}async function gT(t,e){const r={token:await UW(t,e),createTime:Date.now(),subscriptionOptions:e};return await qw(t,r),r.token}async function qW(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:NW(e)})}function GW(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return KW(e,t),QW(e,t),YW(e,t),e}function KW(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function QW(t,e){e.data&&(t.data=e.data)}function YW(t,e){var s,i,o,a;if(!e.fcmOptions&&!((s=e.notification)!=null&&s.click_action))return;t.fcmOptions={};const n=((i=e.fcmOptions)==null?void 0:i.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(t){return typeof t=="object"&&!!t&&UN in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JW(t){if(!t||!t.options)throw Gm("App Configuration Object");if(!t.name)throw Gm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Gm(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Gm(t){return tn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=JW(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eH(t){try{t.swRegistration=await navigator.serviceWorker.register(IW,{scope:CW}),t.swRegistration.update().catch(()=>{}),await tH(t.swRegistration)}catch(e){throw tn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function tH(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${fT} ms`)),fT),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=i=>{var o;((o=i.target)==null?void 0:o.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nH(t,e){if(!e&&!t.swRegistration&&await eH(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw tn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=FN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){if(!navigator)throw tn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw tn.create("permission-blocked");return await rH(t,e==null?void 0:e.vapidKey),await nH(t,e==null?void 0:e.serviceWorkerRegistration),WW(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sH(t,e,n){const r=iH(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[UN],message_name:n[AW],message_time:n[RW],message_device_time:Math.floor(Date.now()/1e3)})}function iH(t){switch(t){case Zc.NOTIFICATION_CLICKED:return"notification_open";case Zc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oH(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Zc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(yT(n)):t.onMessageHandler.next(yT(n)));const r=n.data;XW(r)&&r[PW]==="1"&&await sH(t,n.messageType,r)}const vT="@firebase/messaging",wT="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=t=>{const e=new ZW(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>oH(e,n)),e},lH=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>WN(e,r)}};function cH(){sr(new $n("messaging",aH,"PUBLIC")),sr(new $n("messaging-internal",lH,"PRIVATE")),en(vT,wT),en(vT,wT,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uH(){try{await CA()}catch{return!1}return typeof window<"u"&&IA()&&L5()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(t,e){if(!navigator)throw tn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t=wu()){return uH().then(e=>{if(!e)throw tn.create("unsupported-browser")},e=>{throw tn.create("indexed-db-unsupported")}),Ci(Ne(t),"messaging").getImmediate()}async function fH(t,e){return t=Ne(t),WN(t,e)}function pH(t,e){return t=Ne(t),dH(t,e)}cH();const mH={apiKey:"AIzaSyB5IxD6TIYVHcQ1UHtGz9PRATJTK_QpOWs",authDomain:"wishu-c16d5.firebaseapp.com",projectId:"wishu-c16d5",storageBucket:"wishu-c16d5.firebasestorage.app",messagingSenderId:"159437089644",appId:"1:159437089644:web:3df478217e65a7d12fa149"},Pu=RA(mH),Km=K9(Pu),le=NP(Pu),gH=m7(Pu),yH=V7(Pu,"europe-west1"),xT=hH(Pu),vH=new is,HN=y.createContext({user:null,loading:!0,signInWithGoogle:async()=>{},logout:async()=>{},userProfile:null}),wH=({children:t})=>{const[e,n]=y.useState(null),[r,s]=y.useState(!0),[i,o]=y.useState(null),a=async()=>{try{await r9(Km,vH)}catch(c){throw console.error("Google verify failed",c),c}},l=async()=>{await O6(Km),n(null),o(null)};return y.useEffect(()=>{let c=null;const d=M6(Km,async h=>{console.log("AuthContext: State changed",h==null?void 0:h.uid),n(h),c&&(c(),c=null),h?c=jo(et(le,"users",h.uid),p=>{if(p.exists())o(p.data());else{const m={displayName:h.displayName,email:h.email,photoURL:h.photoURL,createdAt:new Date().toISOString()};KP(et(le,"users",h.uid),m,{merge:!0}),o(m)}},p=>{console.error("AuthContext: Profile sync error",p)}):o(null),s(!1)});return()=>{d(),c&&c()}},[]),f.jsx(HN.Provider,{value:{user:e,loading:r,signInWithGoogle:a,logout:l,userProfile:i},children:t})},Ct=()=>y.useContext(HN),xH=()=>{const{i18n:t}=Si(),e=()=>{const n=t.language==="en"?"he":"en";t.changeLanguage(n)};return y.useEffect(()=>{document.dir=t.dir(),document.documentElement.lang=t.language},[t.language]),f.jsx(qe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"fixed top-4 right-4 z-50 px-4 py-2 bg-white/80 backdrop-blur-sm border border-romantic-pink rounded-full shadow-sm text-deep-rose font-medium transition-all hover:bg-romantic-pink/10",children:t.language==="en"?"HE":"EN"})},_H=()=>{const{t}=Si(),{signInWithGoogle:e,user:n}=Ct(),r=It(),s=async()=>{try{if(n){r("/dashboard");return}await e()}catch(i){console.error("Login failed",i)}};return f.jsxs("div",{className:"min-h-screen bg-darkbg flex flex-col items-center justify-center p-6 text-center font-sans relative overflow-hidden",children:[f.jsx(xH,{}),f.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-primary/20 rounded-full blur-[120px]"}),f.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-secondary/10 rounded-full blur-[120px]"}),f.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"relative z-10 max-w-lg",children:[f.jsxs(qe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"w-24 h-24 bg-white/5 rounded-3xl flex items-center justify-center mx-auto mb-8 relative",children:[f.jsx(Lh,{className:"w-16 h-16 text-primary",strokeWidth:2}),f.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-secondary font-bold text-2xl pt-2",children:"U"})]}),f.jsxs("h1",{className:"text-5xl font-bold text-white mb-6 leading-tight",children:["Wish",f.jsx("span",{className:"text-primary",children:"U"})]}),f.jsx("p",{className:"text-xl text-slate-300 mb-12 font-light leading-relaxed",children:t("welcome","Make your partner's wishes come true.")}),f.jsxs(qe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"group relative px-8 py-4 bg-white text-darkbg rounded-full font-bold text-lg shadow-xl hover:shadow-2xl hover:shadow-primary/20 transition-all flex items-center gap-3 mx-auto",children:[f.jsx(Wc,{className:"w-5 h-5 text-primary"}),f.jsx("span",{children:t("get_started","Get Started")})]})]}),!1]})};function qN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=qN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function bH(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=qN(t))&&(r&&(r+=" "),r+=e);return r}const Qw="-",EH=t=>{const e=SH(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Qw);return a[0]===""&&a.length!==1&&a.shift(),GN(a,e)||TH(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},GN=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?GN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Qw);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},_T=/^\[(.+)\]$/,TH=t=>{if(_T.test(t)){const e=_T.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},SH=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return CH(Object.entries(t.classGroups),n).forEach(([i,o])=>{Gy(o,r,i,e)}),r},Gy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:bT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(IH(s)){Gy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Gy(o,bT(e,i),n,r)})})},bT=(t,e)=>{let n=t;return e.split(Qw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},IH=t=>t.isThemeGetter,CH=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,kH=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},KN="!",AH=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let T=0;T<a.length;T++){let b=a[T];if(c===0){if(b===s&&(r||a.slice(T,T+i)===e)){l.push(a.slice(d,T)),d=T+i;continue}if(b==="/"){h=T;continue}}b==="["?c++:b==="]"&&c--}const p=l.length===0?a:a.substring(d),m=p.startsWith(KN),x=m?p.substring(1):p,w=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:w}};return n?a=>n({className:a,parseClassName:o}):o},RH=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},PH=t=>({cache:kH(t.cacheSize),parseClassName:AH(t),...EH(t)}),NH=/\s+/,DH=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(NH);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let x=!!m,w=r(x?p.substring(0,m):p);if(!w){if(!x){a=c+(a.length>0?" "+a:a);continue}if(w=r(p),!w){a=c+(a.length>0?" "+a:a);continue}x=!1}const T=RH(d).join(":"),b=h?T+KN:T,_=b+w;if(i.includes(_))continue;i.push(_);const E=s(w,x);for(let C=0;C<E.length;++C){const P=E[C];i.push(b+P)}a=c+(a.length>0?" "+a:a)}return a};function LH(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=QN(e))&&(r&&(r+=" "),r+=n);return r}const QN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=QN(t[r]))&&(n&&(n+=" "),n+=e);return n};function jH(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=PH(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=DH(l,n);return s(l,d),d}return function(){return i(LH.apply(null,arguments))}}const $e=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},YN=/^\[(?:([a-z-]+):)?(.+)\]$/i,MH=/^\d+\/\d+$/,OH=new Set(["px","full","screen"]),VH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$H=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ts=t=>Ea(t)||OH.has(t)||MH.test(t),Os=t=>al(t,"length",YH),Ea=t=>!!t&&!Number.isNaN(Number(t)),Qm=t=>al(t,"number",Ea),Dl=t=>!!t&&Number.isInteger(Number(t)),zH=t=>t.endsWith("%")&&Ea(t.slice(0,-1)),ye=t=>YN.test(t),Vs=t=>VH.test(t),WH=new Set(["length","size","percentage"]),HH=t=>al(t,WH,XN),qH=t=>al(t,"position",XN),GH=new Set(["image","url"]),KH=t=>al(t,GH,JH),QH=t=>al(t,"",XH),Ll=()=>!0,al=(t,e,n)=>{const r=YN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},YH=t=>FH.test(t)&&!UH.test(t),XN=()=>!1,XH=t=>BH.test(t),JH=t=>$H.test(t),ZH=()=>{const t=$e("colors"),e=$e("spacing"),n=$e("blur"),r=$e("brightness"),s=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),l=$e("contrast"),c=$e("grayscale"),d=$e("hueRotate"),h=$e("invert"),p=$e("gap"),m=$e("gradientColorStops"),x=$e("gradientColorStopPositions"),w=$e("inset"),T=$e("margin"),b=$e("opacity"),_=$e("padding"),E=$e("saturate"),C=$e("scale"),P=$e("sepia"),M=$e("skew"),I=$e("space"),S=$e("translate"),k=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",ye,e],O=()=>[ye,e],N=()=>["",ts,Os],X=()=>["auto",Ea,ye],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",ye],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Ea,ye];return{cacheSize:500,separator:":",theme:{colors:[Ll],spacing:[ts,Os],blur:["none","",Vs,ye],brightness:L(),borderColor:[t],borderRadius:["none","","full",Vs,ye],borderSpacing:O(),borderWidth:N(),contrast:L(),grayscale:U(),hueRotate:L(),invert:U(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[zH,Os],inset:D(),margin:D(),opacity:L(),padding:O(),saturate:L(),scale:L(),sepia:U(),skew:L(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[Vs]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),ye]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dl,ye]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Dl,ye]}],"grid-cols":[{"grid-cols":[Ll]}],"col-start-end":[{col:["auto",{span:["full",Dl,ye]},ye]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[Ll]}],"row-start-end":[{row:["auto",{span:[Dl,ye]},ye]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,e]}],"min-w":[{"min-w":[ye,e,"min","max","fit"]}],"max-w":[{"max-w":[ye,e,"none","full","min","max","fit","prose",{screen:[Vs]},Vs]}],h:[{h:[ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vs,Os]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qm]}],"font-family":[{font:[Ll]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",Ea,Qm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ts,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ts,Os]}],"underline-offset":[{"underline-offset":["auto",ts,ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),qH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",HH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},KH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[ts,ye]}],"outline-w":[{outline:[ts,Os]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ts,Os]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Vs,QH]}],"shadow-color":[{shadow:[Ll]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Vs,ye]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Dl,ye]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ts,Os,Qm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},eq=jH(ZH);function tq(...t){return eq(bH(t))}function Ky(t){if(!t)return"";try{const e=new URL(t);return e.protocol.startsWith("http")?(e.searchParams.set("tag","wishu-21"),e.toString()):t}catch{return t}}function Qy(t){if(!t)return null;const e=t.split("-").map(Number);if(e.length!==3)return null;const[n,r,s]=e,i=new Date;i.setHours(0,0,0,0);let o=new Date(i.getFullYear(),r-1,s);o<i&&o.setFullYear(i.getFullYear()+1);const a=o.getTime()-i.getTime(),l=Math.ceil(a/(1e3*60*60*24));return{date:o,daysLeft:l}}var Yw={};(function t(e,n,r,s){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;try{var j=new OffscreenCanvas(1,1),L=j.getContext("2d");L.fillRect(0,0,1,1);var G=j.transferToImageBitmap();L.createPattern(G,"no-repeat")}catch{return!1}return!0}();function l(){}function c(j){var L=n.exports.Promise,G=L!==void 0?L:e.Promise;return typeof G=="function"?new G(j):(j(l,l),null)}var d=function(j,L){return{transform:function(G){if(j)return G;if(L.has(G))return L.get(G);var ee=new OffscreenCanvas(G.width,G.height),re=ee.getContext("2d");return re.drawImage(G,0,0),L.set(G,ee),ee},clear:function(){L.clear()}}}(a,new Map),h=function(){var j=Math.floor(16.666666666666668),L,G,ee={},re=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(L=function(oe){var te=Math.random();return ee[te]=requestAnimationFrame(function ne(ce){re===ce||re+j-1<ce?(re=ce,delete ee[te],oe()):ee[te]=requestAnimationFrame(ne)}),te},G=function(oe){ee[oe]&&cancelAnimationFrame(ee[oe])}):(L=function(oe){return setTimeout(oe,j)},G=function(oe){return clearTimeout(oe)}),{frame:L,cancel:G}}(),p=function(){var j,L,G={};function ee(re){function oe(te,ne){re.postMessage({options:te||{},callback:ne})}re.init=function(ne){var ce=ne.transferControlToOffscreen();re.postMessage({canvas:ce},[ce])},re.fire=function(ne,ce,we){if(L)return oe(ne,null),L;var ie=Math.random().toString(36).slice(2);return L=c(function(ke){function _e(Le){Le.data.callback===ie&&(delete G[ie],re.removeEventListener("message",_e),L=null,d.clear(),we(),ke())}re.addEventListener("message",_e),oe(ne,ie),G[ie]=_e.bind(null,{data:{callback:ie}})}),L},re.reset=function(){re.postMessage({reset:!0});for(var ne in G)G[ne](),delete G[ne]}}return function(){if(j)return j;if(!r&&i){var re=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{j=new Worker(URL.createObjectURL(new Blob([re])))}catch(oe){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",oe),null}ee(j)}return j}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(j,L){return L?L(j):j}function w(j){return j!=null}function T(j,L,G){return x(j&&w(j[L])?j[L]:m[L],G)}function b(j){return j<0?0:Math.floor(j)}function _(j,L){return Math.floor(Math.random()*(L-j))+j}function E(j){return parseInt(j,16)}function C(j){return j.map(P)}function P(j){var L=String(j).replace(/[^0-9a-f]/gi,"");return L.length<6&&(L=L[0]+L[0]+L[1]+L[1]+L[2]+L[2]),{r:E(L.substring(0,2)),g:E(L.substring(2,4)),b:E(L.substring(4,6))}}function M(j){var L=T(j,"origin",Object);return L.x=T(L,"x",Number),L.y=T(L,"y",Number),L}function I(j){j.width=document.documentElement.clientWidth,j.height=document.documentElement.clientHeight}function S(j){var L=j.getBoundingClientRect();j.width=L.width,j.height=L.height}function k(j){var L=document.createElement("canvas");return L.style.position="fixed",L.style.top="0px",L.style.left="0px",L.style.pointerEvents="none",L.style.zIndex=j,L}function R(j,L,G,ee,re,oe,te,ne,ce){j.save(),j.translate(L,G),j.rotate(oe),j.scale(ee,re),j.arc(0,0,1,te,ne,ce),j.restore()}function D(j){var L=j.angle*(Math.PI/180),G=j.spread*(Math.PI/180);return{x:j.x,y:j.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:j.startVelocity*.5+Math.random()*j.startVelocity,angle2D:-L+(.5*G-Math.random()*G),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:j.color,shape:j.shape,tick:0,totalTicks:j.ticks,decay:j.decay,drift:j.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:j.gravity*3,ovalScalar:.6,scalar:j.scalar,flat:j.flat}}function O(j,L){L.x+=Math.cos(L.angle2D)*L.velocity+L.drift,L.y+=Math.sin(L.angle2D)*L.velocity+L.gravity,L.velocity*=L.decay,L.flat?(L.wobble=0,L.wobbleX=L.x+10*L.scalar,L.wobbleY=L.y+10*L.scalar,L.tiltSin=0,L.tiltCos=0,L.random=1):(L.wobble+=L.wobbleSpeed,L.wobbleX=L.x+10*L.scalar*Math.cos(L.wobble),L.wobbleY=L.y+10*L.scalar*Math.sin(L.wobble),L.tiltAngle+=.1,L.tiltSin=Math.sin(L.tiltAngle),L.tiltCos=Math.cos(L.tiltAngle),L.random=Math.random()+2);var G=L.tick++/L.totalTicks,ee=L.x+L.random*L.tiltCos,re=L.y+L.random*L.tiltSin,oe=L.wobbleX+L.random*L.tiltCos,te=L.wobbleY+L.random*L.tiltSin;if(j.fillStyle="rgba("+L.color.r+", "+L.color.g+", "+L.color.b+", "+(1-G)+")",j.beginPath(),o&&L.shape.type==="path"&&typeof L.shape.path=="string"&&Array.isArray(L.shape.matrix))j.fill(H(L.shape.path,L.shape.matrix,L.x,L.y,Math.abs(oe-ee)*.1,Math.abs(te-re)*.1,Math.PI/10*L.wobble));else if(L.shape.type==="bitmap"){var ne=Math.PI/10*L.wobble,ce=Math.abs(oe-ee)*.1,we=Math.abs(te-re)*.1,ie=L.shape.bitmap.width*L.scalar,ke=L.shape.bitmap.height*L.scalar,_e=new DOMMatrix([Math.cos(ne)*ce,Math.sin(ne)*ce,-Math.sin(ne)*we,Math.cos(ne)*we,L.x,L.y]);_e.multiplySelf(new DOMMatrix(L.shape.matrix));var Le=j.createPattern(d.transform(L.shape.bitmap),"no-repeat");Le.setTransform(_e),j.globalAlpha=1-G,j.fillStyle=Le,j.fillRect(L.x-ie/2,L.y-ke/2,ie,ke),j.globalAlpha=1}else if(L.shape==="circle")j.ellipse?j.ellipse(L.x,L.y,Math.abs(oe-ee)*L.ovalScalar,Math.abs(te-re)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI):R(j,L.x,L.y,Math.abs(oe-ee)*L.ovalScalar,Math.abs(te-re)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI);else if(L.shape==="star")for(var he=Math.PI/2*3,Qe=4*L.scalar,rt=8*L.scalar,kt=L.x,sn=L.y,je=5,Se=Math.PI/je;je--;)kt=L.x+Math.cos(he)*rt,sn=L.y+Math.sin(he)*rt,j.lineTo(kt,sn),he+=Se,kt=L.x+Math.cos(he)*Qe,sn=L.y+Math.sin(he)*Qe,j.lineTo(kt,sn),he+=Se;else j.moveTo(Math.floor(L.x),Math.floor(L.y)),j.lineTo(Math.floor(L.wobbleX),Math.floor(re)),j.lineTo(Math.floor(oe),Math.floor(te)),j.lineTo(Math.floor(ee),Math.floor(L.wobbleY));return j.closePath(),j.fill(),L.tick<L.totalTicks}function N(j,L,G,ee,re){var oe=L.slice(),te=j.getContext("2d"),ne,ce,we=c(function(ie){function ke(){ne=ce=null,te.clearRect(0,0,ee.width,ee.height),d.clear(),re(),ie()}function _e(){r&&!(ee.width===s.width&&ee.height===s.height)&&(ee.width=j.width=s.width,ee.height=j.height=s.height),!ee.width&&!ee.height&&(G(j),ee.width=j.width,ee.height=j.height),te.clearRect(0,0,ee.width,ee.height),oe=oe.filter(function(Le){return O(te,Le)}),oe.length?ne=h.frame(_e):ke()}ne=h.frame(_e),ce=ke});return{addFettis:function(ie){return oe=oe.concat(ie),we},canvas:j,promise:we,reset:function(){ne&&h.cancel(ne),ce&&ce()}}}function X(j,L){var G=!j,ee=!!T(L||{},"resize"),re=!1,oe=T(L,"disableForReducedMotion",Boolean),te=i&&!!T(L||{},"useWorker"),ne=te?p():null,ce=G?I:S,we=j&&ne?!!j.__confetti_initialized:!1,ie=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ke;function _e(he,Qe,rt){for(var kt=T(he,"particleCount",b),sn=T(he,"angle",Number),je=T(he,"spread",Number),Se=T(he,"startVelocity",Number),lr=T(he,"decay",Number),ks=T(he,"gravity",Number),Ri=T(he,"drift",Number),Pi=T(he,"colors",C),Jr=T(he,"ticks",Number),Ni=T(he,"shapes"),cr=T(he,"scalar"),qn=!!T(he,"flat"),Cr=M(he),Di=kt,on=[],Li=j.width*Cr.x,Zr=j.height*Cr.y;Di--;)on.push(D({x:Li,y:Zr,angle:sn,spread:je,startVelocity:Se,color:Pi[Di%Pi.length],shape:Ni[_(0,Ni.length)],ticks:Jr,decay:lr,gravity:ks,drift:Ri,scalar:cr,flat:qn}));return ke?ke.addFettis(on):(ke=N(j,on,ce,Qe,rt),ke.promise)}function Le(he){var Qe=oe||T(he,"disableForReducedMotion",Boolean),rt=T(he,"zIndex",Number);if(Qe&&ie)return c(function(Se){Se()});G&&ke?j=ke.canvas:G&&!j&&(j=k(rt),document.body.appendChild(j)),ee&&!we&&ce(j);var kt={width:j.width,height:j.height};ne&&!we&&ne.init(j),we=!0,ne&&(j.__confetti_initialized=!0);function sn(){if(ne){var Se={getBoundingClientRect:function(){if(!G)return j.getBoundingClientRect()}};ce(Se),ne.postMessage({resize:{width:Se.width,height:Se.height}});return}kt.width=kt.height=null}function je(){ke=null,ee&&(re=!1,e.removeEventListener("resize",sn)),G&&j&&(document.body.contains(j)&&document.body.removeChild(j),j=null,we=!1)}return ee&&!re&&(re=!0,e.addEventListener("resize",sn,!1)),ne?ne.fire(he,kt,je):_e(he,kt,je)}return Le.reset=function(){ne&&ne.reset(),ke&&ke.reset()},Le}var W;function Y(){return W||(W=X(null,{useWorker:!0,resize:!0})),W}function H(j,L,G,ee,re,oe,te){var ne=new Path2D(j),ce=new Path2D;ce.addPath(ne,new DOMMatrix(L));var we=new Path2D;return we.addPath(ce,new DOMMatrix([Math.cos(te)*re,Math.sin(te)*re,-Math.sin(te)*oe,Math.cos(te)*oe,G,ee])),we}function F(j){if(!o)throw new Error("path confetti are not supported in this browser");var L,G;typeof j=="string"?L=j:(L=j.path,G=j.matrix);var ee=new Path2D(L),re=document.createElement("canvas"),oe=re.getContext("2d");if(!G){for(var te=1e3,ne=te,ce=te,we=0,ie=0,ke,_e,Le=0;Le<te;Le+=2)for(var he=0;he<te;he+=2)oe.isPointInPath(ee,Le,he,"nonzero")&&(ne=Math.min(ne,Le),ce=Math.min(ce,he),we=Math.max(we,Le),ie=Math.max(ie,he));ke=we-ne,_e=ie-ce;var Qe=10,rt=Math.min(Qe/ke,Qe/_e);G=[rt,0,0,rt,-Math.round(ke/2+ne)*rt,-Math.round(_e/2+ce)*rt]}return{type:"path",path:L,matrix:G}}function U(j){var L,G=1,ee="#000000",re='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof j=="string"?L=j:(L=j.text,G="scalar"in j?j.scalar:G,re="fontFamily"in j?j.fontFamily:re,ee="color"in j?j.color:ee);var oe=10*G,te=""+oe+"px "+re,ne=new OffscreenCanvas(oe,oe),ce=ne.getContext("2d");ce.font=te;var we=ce.measureText(L),ie=Math.ceil(we.actualBoundingBoxRight+we.actualBoundingBoxLeft),ke=Math.ceil(we.actualBoundingBoxAscent+we.actualBoundingBoxDescent),_e=2,Le=we.actualBoundingBoxLeft+_e,he=we.actualBoundingBoxAscent+_e;ie+=_e+_e,ke+=_e+_e,ne=new OffscreenCanvas(ie,ke),ce=ne.getContext("2d"),ce.font=te,ce.fillStyle=ee,ce.fillText(L,Le,he);var Qe=1/G;return{type:"bitmap",bitmap:ne.transferToImageBitmap(),matrix:[Qe,0,0,Qe,-ie*Qe/2,-ke*Qe/2]}}n.exports=function(){return Y().apply(this,arguments)},n.exports.reset=function(){Y().reset()},n.exports.create=X,n.exports.shapeFromPath=F,n.exports.shapeFromText=U})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Yw,!1);const nq=Yw.exports;Yw.exports.create;const Yy=({gift:t,isOwner:e,onEdit:n})=>{const{t:r}=Si(),{user:s}=Ct(),i=It(),o=async()=>{if(e||!s)return;const m=t.status==="purchased";if(m&&t.purchasedBy&&t.purchasedBy!==s.uid){alert("This gift was marked as purchased by someone else.");return}const x=m?"available":"purchased";x==="purchased"&&nq({particleCount:100,spread:70,origin:{y:.6},colors:["#0F766E","#F97316","#FFFFFF"]});try{await tr(et(le,"gifts",t.id),{status:x,purchasedBy:x==="purchased"?s.uid:null})}catch(w){console.error("Failed to update status",w)}},a=async m=>{if(m.preventDefault(),m.stopPropagation(),!!e)try{await tr(et(le,"gifts",t.id),{isFavorite:!t.isFavorite})}catch(x){console.error("Failed to toggle favorite",x)}},l=async m=>{if(m.preventDefault(),m.stopPropagation(),confirm(r("delete_confirm")||"Delete this gift?"))try{await yp(et(le,"gifts",t.id))}catch(x){console.error("Failed to delete gift",x)}},c=t.status==="purchased",d=!e&&c,h=c&&!!t.purchasedBy&&t.purchasedBy!==(s==null?void 0:s.uid),p=()=>{e&&n?n(t):i(`/gift/${t.id}`)};return f.jsxs(qe.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:p,className:`
                flex flex-col items-center transition-all duration-300 group relative cursor-pointer
            `,children:[f.jsxs("div",{className:"relative w-full aspect-[4/5] mb-4",children:[f.jsx("div",{className:`w-full h-full rounded-2xl overflow-hidden ${d?"grayscale-[0.5]":""}`,children:t.imageUrl?f.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-50 text-slate-300",children:f.jsx(go,{size:40,strokeWidth:1.5})})}),f.jsxs("div",{className:"absolute inset-0 flex items-start justify-between p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(e||t.isFavorite)&&f.jsx("button",{onClick:a,className:`w-8 h-8 bg-white rounded-full flex items-center justify-center transition-all shadow-sm ${t.isFavorite?"text-secondary":"text-slate-300 hover:text-secondary"}`,disabled:!e,children:f.jsx(U0,{size:16,fill:t.isFavorite?"currentColor":"none"})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("a",{href:Ky(t.link),target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-slate-400 hover:text-primary transition-all shadow-sm",children:f.jsx(dA,{size:14})}),e&&f.jsx("button",{onClick:l,className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-danger hover:bg-red-50 transition-all shadow-sm",children:f.jsx(yA,{size:14})})]})]}),!e&&f.jsx("button",{onClick:o,disabled:h,className:`absolute bottom-3 right-3 w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all z-20 ${h?"bg-slate-100 text-slate-400 cursor-not-allowed":d?"bg-success text-white":"bg-primary text-white hover:scale-105"}`,children:h?f.jsx(a5,{size:16}):d?f.jsx(oo,{size:18}):f.jsx(gA,{size:18})})]}),f.jsxs("div",{className:"flex flex-col items-center gap-1 w-full px-2",children:[f.jsxs("div",{className:"text-[10px] text-slate-400 font-sans uppercase tracking-tight",children:["CODE: ",t.id.slice(0,5)]}),f.jsx("h3",{className:`font-bold text-primary text-sm text-center line-clamp-2 min-h-[2.5rem] ${d?"line-through text-slate-300":""}`,children:t.title}),f.jsx("div",{className:"bg-[#0C0C4F] text-white px-5 py-1 rounded-full text-xs font-bold mt-1 shadow-sm",children:t.price||"Gift"})]})]})};function Ym({className:t,...e}){return f.jsx("div",{className:tq("animate-pulse rounded-md bg-slate-200/50",t),...e})}const JN=y.createContext(void 0),rq=({children:t})=>{const[e,n]=y.useState(null);return f.jsx(JN.Provider,{value:{editingGift:e,setEditingGift:n},children:t})},Xw=()=>{const t=y.useContext(JN);if(t===void 0)throw new Error("useModal must be used within a ModalProvider");return t},sq=({showFavorites:t,top5Ids:e,searchQuery:n=""})=>{const{user:r}=Ct(),[s,i]=y.useState([]),[o,a]=y.useState(!0),{setEditingGift:l}=Xw();y.useEffect(()=>{if(!r)return;const p=ft(Ve(le,"gifts"),Tt("ownerId","==",r.uid)),m=jo(p,x=>{const w=x.docs.map(T=>({id:T.id,...T.data()}));w.sort((T,b)=>{var C,P;const _=((C=T.createdAt)==null?void 0:C.seconds)||0;return(((P=b.createdAt)==null?void 0:P.seconds)||0)-_}),i(w),a(!1)},x=>{console.error("Owner query error",x),a(!1)});return()=>m()},[r]);const c=s.filter(p=>{var w;const m=t?p.isFavorite:!0,x=n?p.title.toLowerCase().includes(n.toLowerCase())||((w=p.note)==null?void 0:w.toLowerCase().includes(n.toLowerCase())):!0;return m&&x}),d=e?e.map(p=>s.find(m=>m.id===p)).filter(Boolean):[],h=e?c.filter(p=>!e.includes(p.id)):c;return o?f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(6)].map((p,m)=>f.jsxs("div",{className:"flex flex-col space-y-3",children:[f.jsx(Ym,{className:"h-32 w-full rounded-2xl"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ym,{className:"h-4 w-3/4"}),f.jsx(Ym,{className:"h-3 w-1/2"})]})]},m))}):s.length===0?f.jsxs("div",{className:"text-center py-12 px-6",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx(Wc,{size:32})}),f.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No wishes yet"}),f.jsx("p",{className:"text-slate-400 text-sm",children:"Use the + button to add your first wish!"})]}):f.jsxs("div",{className:"pb-28",children:[d.length>0&&!t&&f.jsx("section",{className:"mb-10",children:f.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 via-amber-50 to-yellow-50 p-6 rounded-3xl border border-yellow-200/50 shadow-sm relative overflow-hidden group",children:[f.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-yellow-400/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-yellow-400/20 transition-all duration-700"}),f.jsxs("div",{className:"flex items-center gap-3 mb-6 relative z-10",children:[f.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600 shadow-inner",children:f.jsx(Wc,{size:20,fill:"currentColor"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold text-yellow-900 leading-tight",children:"Top 5 Favorites"}),f.jsx("p",{className:"text-xs text-yellow-700/80 font-medium tracking-wide uppercase",children:"Most Wanted"})]})]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 relative z-10",children:d.map((p,m)=>f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute -top-3 -left-3 w-8 h-8 rounded-full bg-gradient-to-br from-yellow-300 to-yellow-500 shadow-lg flex items-center justify-center text-white font-bold text-sm z-20 border-2 border-white",children:m+1}),f.jsx(Yy,{gift:p,isOwner:(r==null?void 0:r.uid)===p.ownerId,onEdit:l})]},p.id))})]})}),t&&h.length===0?f.jsxs("div",{className:"text-center py-12 px-6",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})}),f.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No favorites yet"}),f.jsx("p",{className:"text-slate-400 text-sm",children:"Heart items to see them here."})]}):f.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12",children:h.map(p=>f.jsx(Yy,{gift:p,isOwner:(r==null?void 0:r.uid)===p.ownerId,onEdit:l},p.id))})]})},zi=[{id:1,title:"Fresh Flowers",subtitle:"Order now for 20% off",bg:"bg-gradient-to-r from-secondary to-pink-400"},{id:2,title:"Tech Gadgets",subtitle:"Latest deals on electronics",bg:"bg-gradient-to-r from-primary to-primary-light"},{id:3,title:"Experience Days",subtitle:"Gift memories, not things",bg:"bg-gradient-to-r from-accent to-yellow-400",textColor:"text-primary"}],iq=({fullWidth:t=!1})=>{const[e,n]=y.useState(0);return y.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%zi.length)},5e3);return()=>clearInterval(r)},[]),f.jsxs("div",{className:`w-full h-32 md:h-40 relative overflow-hidden shadow-lg group ${t?"rounded-none mb-0":"rounded-2xl mb-6"}`,children:[f.jsx(_s,{mode:"wait",children:f.jsxs(qe.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5},className:`absolute inset-0 ${zi[e].bg} flex items-center justify-center ${zi[e].textColor||"text-white"} p-6`,children:[f.jsx("div",{className:"absolute inset-0 bg-black/5"}),f.jsxs("div",{className:"relative z-10 text-center",children:[f.jsx("p",{className:"font-bold text-xl mb-1",children:zi[e].title}),f.jsx("p",{className:"text-sm opacity-90",children:zi[e].subtitle}),f.jsx("button",{className:"mt-3 bg-primary text-white text-xs font-bold px-5 py-2.5 rounded-full shadow-md hover:scale-105 transition-transform",children:"Shop Now"})]})]},zi[e].id)}),f.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-1.5 z-20",children:zi.map((r,s)=>f.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${s===e?"bg-primary w-4":"bg-primary/30"}`},s))})]})},ZN=y.createContext(void 0),oq=({children:t})=>{const[e,n]=y.useState("");return f.jsx(ZN.Provider,{value:{searchQuery:e,setSearchQuery:n},children:t})},xp=()=>{const t=y.useContext(ZN);if(t===void 0)throw new Error("useSearch must be used within a SearchProvider");return t},aq=()=>{const{searchQuery:t}=xp();return f.jsxs("div",{className:"bg-white font-sans",children:[f.jsx("div",{className:"w-full mb-6 relative z-0",children:f.jsx(iq,{fullWidth:!0})}),f.jsx("main",{className:"px-6 relative z-0",children:f.jsx(sq,{showFavorites:!1,searchQuery:t})})]})},lq=()=>{const t=It(),{user:e}=Ct(),{searchQuery:n}=xp(),[r,s]=y.useState([]),[i,o]=y.useState([]),[a,l]=y.useState(!0);y.useEffect(()=>{if(!e)return;const m=ft(Ve(le,"friendships"),Tt("users","array-contains",e.uid)),x=jo(m,async w=>{const T=w.docs.map(E=>({id:E.id,...E.data()})),b=await Promise.all(T.filter(E=>E.status==="pending"&&E.senderId!==e.uid).map(async E=>{const C=E.senderId,P=await Jt(ft(Ve(le,"users"),Tt("__name__","==",C))),M=P.empty?{displayName:"Unknown"}:P.docs[0].data();return{...E,friend:{uid:C,...M}}}));o(b);const _=await Promise.all(T.filter(E=>E.status==="accepted").map(async E=>{const C=E.users.find(I=>I!==e.uid);if(!C)return null;const P=await Jt(ft(Ve(le,"users"),Tt("__name__","==",C))),M=P.empty?{displayName:"User"}:P.docs[0].data();return{...E,friendId:C,friend:{uid:C,...M}}}));s(_.filter(Boolean)),l(!1)});return()=>x()},[e]);const c=r.filter(m=>m.friend.displayName.toLowerCase().includes(n.toLowerCase())),d=async m=>{try{await tr(et(le,"friendships",m),{status:"accepted"})}catch(x){console.error(x)}},h=async m=>{try{await yp(et(le,"friendships",m))}catch(x){console.error(x)}},p=async()=>{if(!e)return;const m={title:"Join me on WishU",text:"Let's share wishlists on WishU! Join me here:",url:`${window.location.origin}/invite?from=${e.uid}`};try{navigator.share?await navigator.share(m):(navigator.clipboard.writeText(m.url),alert("Link copied!"))}catch(x){console.log(x)}};return f.jsx("div",{className:"bg-white font-sans",children:f.jsxs("main",{className:"px-6 space-y-8 pt-6 pb-28",children:[i.length>0&&f.jsxs("section",{children:[f.jsxs("h2",{className:"font-bold text-darkbg mb-3 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse"}),"Friend Requests"]}),f.jsx("div",{className:"space-y-3",children:i.map(m=>f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-orange-100 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:m.friend.photoURL||"https://i.pravatar.cc/150",className:"w-10 h-10 rounded-full bg-slate-200"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-darkbg text-sm",children:m.friend.displayName||"Unknown"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Wants to connect"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>h(m.id),className:"p-2 bg-slate-50 text-slate-400 rounded-full hover:bg-red-50 hover:text-red-500",children:f.jsx(Er,{size:18})}),f.jsx("button",{onClick:()=>d(m.id),className:"p-2 bg-primary/10 text-primary rounded-full hover:bg-primary hover:text-white",children:f.jsx(oo,{size:18})})]})]},m.id))})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h2",{className:"font-bold text-darkbg",children:["Your Friends (",c.length,")"]}),f.jsxs("button",{onClick:p,className:"text-primary text-sm font-medium flex items-center gap-1",children:[f.jsx(Dh,{size:16})," Invite"]})]}),a?f.jsx("div",{className:"flex justify-center p-8",children:f.jsx(In,{className:"animate-spin text-primary"})}):c.length===0?f.jsxs("div",{className:"text-center py-10 px-6 bg-white rounded-3xl border border-dashed border-slate-200",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx(Mh,{size:32})}),f.jsx("h3",{className:"font-bold text-slate-700 mb-1",children:"No friends yet"}),f.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Search for people above or invite them to join WishU!"}),f.jsx("button",{onClick:p,className:"bg-darkbg text-white px-6 py-3 rounded-xl text-sm font-bold shadow-lg",children:"Invite Friends"})]}):f.jsx("div",{className:"space-y-3",children:c.map(m=>{var x;return f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-50 hover:border-primary/20 flex flex-col gap-3",children:[f.jsxs("div",{onClick:()=>t(`/friend/${m.friendId}`),className:"flex items-center gap-4 cursor-pointer",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:m.friend.photoURL||`https://ui-avatars.com/api/?name=${m.friend.displayName}`,alt:m.friend.displayName,className:"w-12 h-12 rounded-full object-cover bg-slate-200"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 border-2 border-white rounded-full"})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold text-slate-800",children:m.friend.displayName}),f.jsx("p",{className:"text-xs text-slate-400",children:"Tap to see wishlist"})]}),f.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-slate-400",children:f.jsx(Wc,{size:16})})]}),f.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-slate-50",children:[f.jsx("span",{className:"text-xs text-slate-400",children:"Group:"}),f.jsxs("select",{value:((x=m.groups)==null?void 0:x[m.friendId])||"Friends",onChange:async w=>{const T=w.target.value;await tr(et(le,"friendships",m.id),{[`groups.${m.friendId}`]:T})},className:"bg-slate-50 text-xs font-medium text-slate-600 rounded-lg px-2 py-1 border border-slate-200 focus:outline-none focus:border-primary",children:[f.jsx("option",{value:"Friends",children:"Friends"}),f.jsx("option",{value:"Family",children:"Family"}),f.jsx("option",{value:"Partner",children:"Partner"}),f.jsx("option",{value:"Work",children:"Work"}),f.jsx("option",{value:"Other",children:"Other"})]})]})]},m.id)})})]})]})})},e2=y.createContext(void 0),cq=({children:t})=>{const[e,n]=y.useState({showSearch:!0,showBackButton:!1}),r=()=>{n({showSearch:!0,showBackButton:!1,title:void 0,subtitle:void 0,customBottomBar:void 0})};return f.jsx(e2.Provider,{value:{headerState:e,setHeaderState:n,resetHeader:r},children:t})},t2=()=>{const t=y.useContext(e2);if(!t)throw new Error("useHeader must be used within a HeaderProvider");return t},n2=y.createContext(void 0),Jw=()=>{const t=y.useContext(n2);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},uq=({children:t})=>{const[e,n]=y.useState(null),r=(s,i="success")=>{n({message:s,type:i}),setTimeout(()=>n(null),3e3)};return f.jsxs(n2.Provider,{value:{showToast:r},children:[t,f.jsx(_s,{children:e&&f.jsxs(qe.div,{initial:{opacity:0,y:50,x:"-50%"},animate:{opacity:1,y:0,x:"-50%"},exit:{opacity:0,y:20,x:"-50%"},className:`fixed bottom-24 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full shadow-xl flex items-center gap-3 font-medium text-sm whitespace-nowrap
                            ${e.type==="success"?"bg-darkbg text-white":"bg-red-500 text-white"}
                        `,children:[f.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${e.type==="success"?"bg-green-500":"bg-white/20"}`,children:e.type==="success"?f.jsx(oo,{size:14}):f.jsx(Er,{size:14})}),e.message]})})]})},dq=({onRecordingComplete:t,onCancel:e})=>{const n=y.useRef(null),r=y.useRef(null),[s,i]=y.useState(!1),[o,a]=y.useState(null),[l,c]=y.useState(0),[d,h]=y.useState(""),[p,m]=y.useState(null);y.useEffect(()=>(x(),()=>w()),[]);const x=async()=>{try{const P=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});m(P),n.current&&(n.current.srcObject=P)}catch(P){h("Camera access denied. Please check permissions."),console.error(P)}},w=()=>{p&&(p.getTracks().forEach(P=>P.stop()),m(null))},T=()=>{if(!p)return;c(3);let P=3;const M=setInterval(()=>{P--,c(P),P===0&&(clearInterval(M),b())},1e3)},b=()=>{if(!p)return;const P=new MediaRecorder(p);r.current=P;const M=[];P.ondataavailable=I=>{I.data.size>0&&M.push(I.data)},P.onstop=()=>{const I=new Blob(M,{type:"video/webm"});a(I),n.current&&(n.current.srcObject=null,n.current.src=URL.createObjectURL(I),n.current.controls=!0,n.current.play())},P.start(),i(!0)},_=()=>{r.current&&s&&(r.current.stop(),i(!1))},E=()=>{a(null),n.current&&(n.current.src="",n.current.controls=!1),x()},C=()=>{o&&(w(),t(o))};return d?f.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl p-8 text-center",children:[f.jsx("p",{children:d}),f.jsx("button",{onClick:e,className:"mt-4 text-sm underline",children:"Close"})]}):f.jsxs("div",{className:"bg-black rounded-3xl overflow-hidden shadow-2xl relative w-full aspect-[9/16] max-h-[60vh] flex flex-col",children:[f.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!o,className:"w-full h-full object-cover flex-1"}),f.jsx("div",{className:"absolute inset-x-0 bottom-0 p-6 bg-gradient-to-t from-black/80 to-transparent",children:f.jsx("div",{className:"flex justify-center items-center gap-8",children:o?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:E,className:"p-3 bg-white/10 rounded-full text-white hover:bg-white/20",children:f.jsx(d5,{size:24})}),f.jsx("button",{onClick:C,className:"w-14 h-14 bg-green-500 rounded-full flex items-center justify-center text-white shadow-lg transform hover:scale-105 active:scale-95 transition-all",children:f.jsx(oo,{size:28})})]}):s?f.jsx("button",{onClick:_,className:"w-16 h-16 rounded-full border-4 border-white flex items-center justify-center hover:bg-white/20 transition-all",children:f.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-sm"})}):f.jsx(f.Fragment,{children:l>0?f.jsx("div",{className:"text-6xl font-bold text-white animate-ping",children:l}):f.jsx("button",{onClick:T,className:"w-16 h-16 rounded-full border-4 border-white flex items-center justify-center hover:bg-white/20 transition-all",children:f.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full"})})})})}),!s&&!o&&f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/40 rounded-full text-white backdrop-blur-sm",children:f.jsx(hq,{})})]})},hq=()=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),r2=({isOpen:t,onClose:e,recipient:n,eventType:r})=>{const{user:s}=Ct(),{showToast:i}=Jw(),[o,a]=y.useState("party"),[l,c]=y.useState(""),[d,h]=y.useState(!1),[p,m]=y.useState(!1),[x,w]=y.useState(null),[T,b]=y.useState(!1),_=async()=>{h(!0);try{await new Promise(M=>setTimeout(M,1500));const C=n.name||"Friend";let P="";o==="party"&&(P=`Happy ${r==="birthday"?"Birthday":"Day"} ${C}!  Ready to party?!`),o==="minimal"&&(P=`Best wishes, ${C}.`),o==="heart"&&(P=`Sending you lots of love on your special day, ${C}! `),o==="funny"&&(P=`Happy Birthday ${C}! Don't worry, I won't tell anyone how old you really are. `),c(P),i("AI Message Generated!","success")}catch{i("Failed to generate","error")}finally{h(!1)}},E=async()=>{if(s){b(!0);try{let C="";if(x){const R=p7(gH,`greetings/${s.uid}_${Date.now()}.webm`);await h7(R,x),C=await f7(R)}const P={fromId:s.uid,toId:n.uid,friendName:n.name,senderName:s.displayName||"Friend",type:r,theme:o,message:l,videoUrl:C,createdAt:bo(),read:!1},M=await _o(Ve(le,"greetings"),P);await _o(Ve(le,"notifications"),{userId:n.uid,type:"greeting",title:`Greeting received from ${s.displayName||"a friend"}`,message:l.substring(0,100)+(l.length>100?"...":""),data:{greetingId:M.id,senderName:s.displayName||"a friend"},read:!1,createdAt:bo()});const I=`${window.location.origin}/greeting/${M.id}`,S=l||`Happy ${r==="birthday"?"Birthday":"Day"} ${n.name}!`,k={title:`Greeting for ${n.name}`,text:`${S}

I made a special card for you:`,url:I};if(navigator.share)try{await navigator.share(k)}catch(R){console.log("Share was cancelled or failed",R),R.name!=="AbortError"&&(navigator.clipboard.writeText(`${k.text} ${k.url}`),i("Greeting link copied to clipboard!","success"))}else navigator.clipboard.writeText(`${k.text} ${k.url}`),i("Greeting link copied to clipboard!","success");e(),c(""),w(null),m(!1)}catch(C){console.error(C),i("Failed to send greeting","error")}finally{b(!1)}}};return f.jsxs(_s,{children:[t&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-darkbg/80 z-[60] flex items-center justify-center p-4 backdrop-blur-sm",onClick:e,children:f.jsxs(qe.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},className:"bg-white rounded-3xl p-6 w-full max-w-sm shadow-2xl relative overflow-hidden flex flex-col max-h-[90vh]",onClick:C=>C.stopPropagation(),children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 z-10",children:f.jsx(Er,{size:18})}),f.jsx("h2",{className:"text-xl font-bold text-darkbg mb-1",children:"Send Greeting"}),f.jsxs("p",{className:"text-slate-400 text-xs mb-4",children:["To ",n.name]}),f.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2 scrollbar-hide",children:["party","minimal","heart","funny"].map(C=>f.jsx("button",{onClick:()=>a(C),className:`px-3 py-1.5 rounded-full text-xs font-bold border ${o===C?"bg-primary text-white border-primary":"bg-white text-slate-500 border-slate-200"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))}),f.jsxs("div",{className:`aspect-video rounded-xl mb-4 flex items-center justify-center p-6 text-center text-white shadow-inner relative overflow-hidden transition-all duration-300
                            ${o==="party"?"bg-gradient-to-br from-indigo-400 to-cyan-400":o==="heart"?"bg-gradient-to-br from-rose-400 to-red-400":o==="funny"?"bg-gradient-to-br from-yellow-400 to-orange-400":"bg-slate-100 text-slate-800"}
                        `,children:[o==="party"&&f.jsx(B0,{className:"absolute top-2 right-2 opacity-50"}),o==="heart"&&f.jsx(go,{className:"absolute top-2 right-2 opacity-50"}),f.jsx("p",{className:`font-medium ${o==="minimal"?"font-sans":"font-handwriting text-lg shadow-sm"}`,children:l||(o==="funny"?"Getting old?":"Best Wishes!")})]}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("textarea",{value:l,onChange:C=>c(C.target.value),placeholder:"Write your personal wish...",className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 h-24 resize-none"}),f.jsxs("button",{onClick:_,disabled:d,className:"absolute bottom-2 right-2 text-xs bg-white border border-slate-200 px-2 py-1 rounded-lg text-primary flex items-center gap-1 shadow-sm hover:bg-slate-50",children:[d?f.jsx(In,{size:12,className:"animate-spin"}):f.jsx(Wc,{size:12}),"AI Magic"]})]}),f.jsx("div",{className:"mb-4",children:x?f.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-video",children:[f.jsx("video",{src:URL.createObjectURL(x),className:"w-full h-full object-cover",controls:!0}),f.jsx("button",{onClick:()=>w(null),className:"absolute top-2 right-2 bg-black/50 text-white p-1 rounded-full hover:bg-red-500",children:f.jsx(Er,{size:14})})]}):f.jsxs("button",{onClick:()=>m(!0),className:"w-full py-3 border border-dashed border-slate-300 rounded-xl text-slate-500 hover:bg-slate-50 hover:border-primary/50 hover:text-primary transition-all flex items-center justify-center gap-2",children:[f.jsx(m5,{size:18}),"Record Video Message"]})}),f.jsxs("button",{onClick:E,disabled:T,className:"w-full bg-darkbg text-white font-bold py-3 rounded-xl shadow-lg shadow-darkbg/20 active:scale-95 transition-transform flex items-center justify-center gap-2 disabled:opacity-50",children:[T?f.jsx(In,{className:"animate-spin"}):f.jsx(Dh,{size:18}),T?"Uploading...":"Send Greeting"]})]})}),f.jsx(_s,{children:p&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black z-[70] flex items-center justify-center",children:f.jsx(dq,{onRecordingComplete:C=>{w(C),m(!1)},onCancel:()=>m(!1)})})})]})},fq=()=>{const{id:t}=e0(),e=It(),{user:n}=Ct(),{setHeaderState:r,resetHeader:s}=t2(),[i,o]=y.useState([]),[a,l]=y.useState("Friend"),[c,d]=y.useState("all"),[h,p]=y.useState(!0),[m,x]=y.useState(null),[w,T]=y.useState(null),{setEditingGift:b}=Xw(),_=(n==null?void 0:n.uid)===t;y.useEffect(()=>{if(!m)return;const S=()=>{const R=new Date,D=m.date.getTime()-R.getTime();if(D<=0){T({days:0,hours:0,minutes:0});return}const O=Math.floor(D/(1e3*60*60*24)),N=Math.floor(D%(1e3*60*60*24)/(1e3*60*60)),X=Math.floor(D%(1e3*60*60)/(1e3*60));T({days:O,hours:N,minutes:X})};S();const k=setInterval(S,6e4);return()=>clearInterval(k)},[m]),y.useEffect(()=>()=>s(),[]),y.useEffect(()=>{r({title:_?"My Wishlist":`${a}'s Wishlist`,showBackButton:!0,showSearch:!1,customBottomBar:f.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1",children:[f.jsx("button",{onClick:()=>e("/calendar"),className:"px-3 py-1.5 bg-accent text-white rounded-full text-xs font-bold whitespace-nowrap shadow-sm shadow-accent/20 flex items-center gap-1 flex-shrink-0",children:"Offer Wish "}),f.jsx("div",{className:"w-[1px] h-6 bg-slate-100 mx-1 flex-shrink-0"}),[{id:"all",label:"All"},{id:"low",label:"<249"},{id:"mid",label:"250-399"},{id:"high",label:"400-699"},{id:"premium",label:"700+"}].map(S=>f.jsx("button",{onClick:()=>d(S.id),className:`px-4 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors flex-shrink-0 border ${c===S.id?"bg-darkbg text-white border-darkbg":"bg-slate-50 text-slate-500 border-slate-100 hover:bg-slate-100"}`,children:S.label},S.id))]})})},[a,_,c]),y.useEffect(()=>{if(!t||!n)return;let S="Friends";const k=async()=>{const N=ft(Ve(le,"friendships"),Tt("users","array-contains",n.uid)),W=(await Jt(N)).docs.find(Y=>Y.data().users.includes(t));if(W){const Y=W.data().groups||{};Y[n.uid]&&(S=Y[n.uid])}},R=async()=>{try{const N=await Ru(et(le,"users",t));if(N.exists()){const X=N.data();l(X.displayName||"Friend");let W=null;const Y=new Date;Y.setHours(0,0,0,0);const H=(F,U)=>{const j=Qy(F);if(j){const L=j.date.getTime()-Y.getTime();L>=0&&(!W||L<W.diff)&&(W={title:U,date:j.date,diff:L})}};X.birthDate&&H(X.birthDate,"Birthday"),X.importantDates&&Array.isArray(X.importantDates)&&X.importantDates.forEach(F=>H(F.date,F.title||"Special Day")),W&&x({title:W.title,date:W.date})}}catch(N){console.error(N)}},D=async()=>{await k();const N=ft(Ve(le,"gifts"),Tt("ownerId","==",t));return jo(N,W=>{const H=W.docs.map(F=>({id:F.id,...F.data()})).filter(F=>!F.visibility||F.visibility.length===0?!0:F.visibility.includes(S));H.sort((F,U)=>{var j,L;return(((j=U.createdAt)==null?void 0:j.seconds)||0)-(((L=F.createdAt)==null?void 0:L.seconds)||0)}),o(H),p(!1)})};R();const O=D();return()=>{O.then(N=>N&&N())}},[t,n]);const E=S=>S&&parseInt(S.replace(/[^0-9]/g,""))||0,C=i.filter(S=>{const k=E(S.price);switch(c){case"low":return k<249;case"mid":return k>=250&&k<=399;case"high":return k>=400&&k<=699;case"premium":return k>=700;default:return!0}}),[P,M]=y.useState(!1),I=m&&new Date().toDateString()===m.date.toDateString();return f.jsxs("div",{className:"min-h-screen bg-lightbg font-sans pb-10",children:[f.jsxs("main",{className:"px-6 py-6 space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"relative z-10",children:m&&w?I?f.jsxs("div",{className:"text-center animate-pulse",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2 text-teal-100 uppercase tracking-widest text-xs font-bold",children:[f.jsx(A1,{size:14}),"Happening Now!"]}),f.jsxs("h2",{className:"text-3xl font-black mb-2",children:["Today is ",a,"'s ",m.title,"! "]}),f.jsx("div",{className:"text-lg opacity-90 mb-4",children:"Don't forget to send your wishes!"}),f.jsxs("button",{onClick:()=>M(!0),className:"inline-flex items-center gap-2 bg-white text-teal-600 px-6 py-3 rounded-full font-bold text-base shadow-lg hover:bg-teal-50 transition-all hover:scale-105",children:[f.jsx(C1,{size:18}),"Send Greeting"]})]}):f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2 text-teal-100 uppercase tracking-widest text-xs font-bold",children:[f.jsx(A1,{size:14}),"Upcoming Event"]}),f.jsx("h2",{className:"text-2xl font-bold mb-1",children:m.title}),f.jsxs("div",{className:"text-4xl font-black mb-4 tracking-tight tabular-nums",children:[w.days,"d ",w.hours,"h ",w.minutes,"m"]}),f.jsxs("button",{onClick:()=>M(!0),className:"inline-flex items-center gap-2 bg-white text-teal-600 px-5 py-2.5 rounded-full font-bold text-sm shadow-sm hover:bg-teal-50 transition-colors",children:[f.jsx(C1,{size:16}),"Send Greeting"]})]}):f.jsxs("div",{className:"text-center py-4",children:[f.jsx("p",{className:"font-medium text-lg opacity-90",children:"No upcoming events on the horizon"}),f.jsx("p",{className:"text-sm text-teal-100",children:"Make every day special anyway!"})]})})]}),h?f.jsx("div",{className:"flex justify-center p-10 text-slate-400",children:"Loading..."}):C.length===0?f.jsxs("div",{className:"text-center mt-10 p-6 bg-white rounded-2xl border border-dashed border-slate-200",children:[f.jsx("p",{className:"text-slate-500 font-medium",children:"No gifts found"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Try a different filter or check back later."})]}):f.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-12",children:C.map(S=>f.jsx(Yy,{gift:S,isOwner:_,onEdit:b},S.id))})]}),f.jsx(r2,{isOpen:P,onClose:()=>M(!1),recipient:{uid:t||"",name:a},eventType:m!=null&&m.title.toLowerCase().includes("birthday")?"birthday":"other"})]})},pq=()=>{const t=It(),{user:e}=Ct(),{searchQuery:n}=xp(),[r,s]=y.useState([]),[i,o]=y.useState(!0),[a,l]=y.useState(null);y.useEffect(()=>{(async()=>{if(e)try{const h=ft(Ve(le,"friendships"),Tt("users","array-contains",e.uid)),p=await Jt(h),m=[];if(p.docs.forEach(_=>{const E=_.data();if(E.status==="accepted"){const C=E.users.find(P=>P!==e.uid);C&&m.push(C)}}),m.length===0){s([]),o(!1);return}const x=await Promise.all(m.map(_=>Jt(ft(Ve(le,"users"),Tt("__name__","==",_))))),w=[];new Date().setHours(0,0,0,0),x.forEach(_=>{if(!_.empty){const E=_.docs[0].data(),C=_.docs[0].id;if(console.log(`Processing friend ${E.displayName}:`,E),E.birthDate){const P=Qy(E.birthDate);P&&w.push({id:`${C}_bday`,friendId:C,friendName:E.displayName||"Friend",friendPhoto:E.photoURL,type:"birthday",date:P.date,dateStr:P.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),daysLeft:P.daysLeft,originalDate:E.birthDate,title:"Birthday"})}E.importantDates&&Array.isArray(E.importantDates)&&(console.log("Found important dates:",E.importantDates),E.importantDates.forEach((P,M)=>{console.log("Processing date:",P);const I=Qy(P.date);I?w.push({id:`${C}_date_${M}`,friendId:C,friendName:E.displayName||"Friend",friendPhoto:E.photoURL,type:"other",date:I.date,dateStr:I.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),daysLeft:I.daysLeft,originalDate:P.date,title:P.title||"Special Day"}):console.warn("Invalid date format:",P.date)}))}});const b=w.filter(_=>_.type==="birthday"&&_.daysLeft<=3);for(const _ of b){const E=new Date().getFullYear(),C=`bday_${_.friendId}_${E}`,P=ft(Ve(le,"notifications"),Tt("userId","==",e.uid),Tt("data.notifKey","==",C));(await Jt(P)).empty&&await _o(Ve(le,"notifications"),{userId:e.uid,type:"birthday",title:`${_.friendName}'s birthday is approaching!`,message:`It's in ${_.daysLeft} ${_.daysLeft===1?"day":"days"}. Check their wishlist for ideas.`,data:{friendId:_.friendId,friendName:_.friendName,notifKey:C},read:!1,createdAt:bo()})}w.sort((_,E)=>_.daysLeft-E.daysLeft),console.log("Final Loaded Events:",w),s(w)}catch(h){console.error("Error fetching calendar:",h)}finally{o(!1)}})()},[e]);const c=r.filter(d=>{var h;return d.friendName.toLowerCase().includes(n.toLowerCase())||((h=d.title)==null?void 0:h.toLowerCase().includes(n.toLowerCase()))});return f.jsxs("div",{className:"bg-white font-sans",children:[f.jsx("main",{className:"px-6 space-y-4 pt-6 pb-28",children:i?f.jsx("div",{className:"flex justify-center py-10",children:f.jsx(In,{className:"animate-spin text-primary"})}):c.length===0?f.jsxs("div",{className:"text-center mt-10 p-6 bg-white rounded-3xl border border-dashed border-slate-200",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx(uA,{size:32})}),f.jsx("p",{className:"text-slate-500 font-medium mb-1",children:"No upcoming events found."}),f.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Add friends or ask them to set their birthday!"}),f.jsx("button",{onClick:()=>t("/friends"),className:"bg-darkbg text-white px-4 py-2 rounded-xl text-sm font-bold",children:"Find Friends"})]}):c.map(d=>f.jsxs("div",{onClick:()=>t(`/friend/${d.friendId}`),className:"flex items-center gap-4 py-4 border-b border-slate-50 active:opacity-70 transition-opacity cursor-pointer",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:d.friendPhoto||`https://ui-avatars.com/api/?name=${d.friendName}`,alt:d.friendName,className:"w-12 h-12 rounded-full object-cover bg-slate-200"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-accent rounded-full flex items-center justify-center text-white text-[10px]",children:""})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold text-slate-800",children:d.friendName}),f.jsxs("p",{className:"text-sm text-slate-500",children:[d.dateStr,"  ",d.title]})]}),f.jsxs("div",{className:"text-center min-w-[50px]",children:[f.jsx("span",{className:"block text-xl font-bold text-primary",children:d.daysLeft}),f.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-medium",children:"Days"})]}),f.jsx("button",{onClick:h=>{h.stopPropagation(),l(d)},className:"bg-secondary p-2 rounded-xl text-slate-600 hover:bg-slate-200",children:f.jsx(pA,{size:18})})]},d.id))}),f.jsx(r2,{isOpen:!!a,onClose:()=>l(null),recipient:{uid:(a==null?void 0:a.friendId)||"",name:(a==null?void 0:a.friendName)||"",photoURL:a==null?void 0:a.friendPhoto},eventType:(a==null?void 0:a.type)||"birthday"})]})},me=t=>typeof t=="string",jl=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},ET=t=>t==null?"":""+t,mq=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},gq=/###/g,TT=t=>t&&t.indexOf("###")>-1?t.replace(gq,"."):t,ST=t=>!t||me(t),gc=(t,e,n)=>{const r=me(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(ST(t))return{};const i=TT(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return ST(t)?{}:{obj:t,k:TT(r[s])}},IT=(t,e,n)=>{const{obj:r,k:s}=gc(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=gc(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=gc(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},yq=(t,e,n,r)=>{const{obj:s,k:i}=gc(t,e,Object);s[i]=s[i]||[],s[i].push(n)},af=(t,e)=>{const{obj:n,k:r}=gc(t,e);if(n)return n[r]},vq=(t,e,n)=>{const r=af(t,n);return r!==void 0?r:af(e,n)},s2=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?me(t[r])||t[r]instanceof String||me(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):s2(t[r],e[r],n):t[r]=e[r]);return t},Uo=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var wq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const xq=t=>me(t)?t.replace(/[&<>"'\/]/g,e=>wq[e]):t;class _q{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const bq=[" ",",","?","!",";"],Eq=new _q(20),Tq=(t,e,n)=>{e=e||"",n=n||"";const r=bq.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=Eq.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},Xy=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=i;l<r.length;++l)if(l!==i&&(a+=n),a+=r[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},lf=t=>t&&t.replace("_","-"),Sq={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class cf{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Sq,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(me(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new cf(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new cf(this.logger,e)}}var Vr=new cf;class _p{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}}class CT extends _p{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):me(r)&&i?a.push(...r.split(i)):a.push(r)));const l=af(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!me(r)?l:Xy(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),IT(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(me(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let l=af(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?s2(l,r,i):l={...l,...r},IT(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var i2={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,s))}),e}};const kT={};class uf extends _p{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),mq(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Vr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Tq(e,r,s);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:me(i)?[i]:i};const c=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(s)}return{key:e,namespaces:me(i)?[i]:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(d){const C=n.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${C}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${C}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const h=this.resolve(e,n);let p=h&&h.res;const m=h&&h.usedKey||o,x=h&&h.exactUsedKey||o,w=Object.prototype.toString.apply(p),T=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,E=!me(p)&&typeof p!="boolean"&&typeof p!="number";if(_&&p&&E&&T.indexOf(w)<0&&!(me(b)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,p,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(h.res=C,h.usedParams=this.getUsedParamsDetails(n),h):C}if(i){const C=Array.isArray(p),P=C?[]:{},M=C?x:m;for(const I in p)if(Object.prototype.hasOwnProperty.call(p,I)){const S=`${M}${i}${I}`;P[I]=this.translate(S,{...n,joinArrays:!1,ns:a}),P[I]===S&&(P[I]=p[I])}p=P}}else if(_&&me(b)&&Array.isArray(p))p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let C=!1,P=!1;const M=n.count!==void 0&&!me(n.count),I=uf.hasDefaultValue(n),S=M?this.pluralResolver.getSuffix(c,n.count,n):"",k=n.ordinal&&M?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",R=M&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),D=R&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${S}`]||n[`defaultValue${k}`]||n.defaultValue;!this.isValidLookup(p)&&I&&(C=!0,p=D),this.isValidLookup(p)||(P=!0,p=o);const N=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:p,X=I&&D!==p&&this.options.updateMissing;if(P||C||X){if(this.logger.log(X?"updateKey":"missingKey",c,l,o,X?D:p),i){const F=this.resolve(o,{...n,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let W=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let F=0;F<Y.length;F++)W.push(Y[F]);else this.options.saveMissingTo==="all"?W=this.languageUtils.toResolveHierarchy(n.lng||this.language):W.push(n.lng||this.language);const H=(F,U,j)=>{const L=I&&j!==p?j:N;this.options.missingKeyHandler?this.options.missingKeyHandler(F,l,U,L,X,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(F,l,U,L,X,n),this.emit("missingKey",F,l,U,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?W.forEach(F=>{const U=this.pluralResolver.getSuffixes(F,n);R&&n[`defaultValue${this.options.pluralSeparator}zero`]&&U.indexOf(`${this.options.pluralSeparator}zero`)<0&&U.push(`${this.options.pluralSeparator}zero`),U.forEach(j=>{H([F],o+j,n[`defaultValue${j}`]||D)})}):H(W,o,D))}p=this.extendTranslation(p,e,n,h,r),P&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(P||C)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,C?p:void 0):p=this.options.parseMissingKeyHandler(p))}return s?(h.res=p,h.usedParams=this.getUsedParamsDetails(n),h):p}extendTranslation(e,n,r,s,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=me(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let h=r.replace&&!me(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||s.usedLng,r),c){const p=e.match(this.interpolator.nestingRegexp),m=p&&p.length;d<m&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,m=new Array(p),x=0;x<p;x++)m[x]=arguments[x];return i&&i[0]===m[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${n[0]}`),null):o.translate(...m,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=me(a)?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=i2.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,i,o,a;return me(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),d=c.key;s=d;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=n.count!==void 0&&!me(n.count),m=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),x=n.context!==void 0&&(me(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(T=>{this.isValidLookup(r)||(a=T,!kT[`${w[0]}-${T}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(kT[`${w[0]}-${T}`]=!0,this.logger.warn(`key "${s}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(b=>{if(this.isValidLookup(r))return;o=b;const _=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(_,d,b,T,n);else{let C;p&&(C=this.pluralResolver.getSuffix(b,n.count,n));const P=`${this.options.pluralSeparator}zero`,M=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(_.push(d+C),n.ordinal&&C.indexOf(M)===0&&_.push(d+C.replace(M,this.options.pluralSeparator)),m&&_.push(d+P)),x){const I=`${d}${this.options.contextSeparator}${n.context}`;_.push(I),p&&(_.push(I+C),n.ordinal&&C.indexOf(M)===0&&_.push(I+C.replace(M,this.options.pluralSeparator)),m&&_.push(I+P))}}let E;for(;E=_.pop();)this.isValidLookup(r)||(i=E,r=this.getResource(b,T,E,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!me(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Xm=t=>t.charAt(0).toUpperCase()+t.slice(1);class AT{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Vr.create("languageUtils")}getScriptPartFromCode(e){if(e=lf(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=lf(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(me(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Xm(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Xm(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Xm(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),me(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return me(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):me(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}let Iq=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Cq={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const kq=["v1","v2","v3"],Aq=["v4"],RT={zero:0,one:1,two:2,few:3,many:4,other:5},Rq=()=>{const t={};return Iq.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:Cq[e.fc]}})}),t};class Pq{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Vr.create("pluralResolver"),(!this.options.compatibilityJSON||Aq.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Rq(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=lf(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,i)=>RT[s]-RT[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!kq.includes(this.options.compatibilityJSON)}}const PT=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=vq(t,e,n);return!i&&s&&me(n)&&(i=Xy(t,n,r),i===void 0&&(i=Xy(e,n,r))),i},Jm=t=>t.replace(/\$/g,"$$$$");class Nq{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Vr.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:m,nestingSuffix:x,nestingSuffixEscaped:w,nestingOptionsSeparator:T,maxReplaces:b,alwaysFormat:_}=e.interpolation;this.escape=n!==void 0?n:xq,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Uo(i):o||"{{",this.suffix=a?Uo(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Uo(p):m||Uo("$t("),this.nestingSuffix=x?Uo(x):w||Uo(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=b||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=m=>{if(m.indexOf(this.formatSeparator)<0){const b=PT(n,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...s,...n,interpolationkey:m}):b}const x=m.split(this.formatSeparator),w=x.shift().trim(),T=x.join(this.formatSeparator).trim();return this.format(PT(n,l,w,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...s,...n,interpolationkey:w})};this.resetRegExp();const d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,h=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Jm(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Jm(this.escape(m)):Jm(m)}].forEach(m=>{for(a=0;i=m.regex.exec(e);){const x=i[1].trim();if(o=c(x),o===void 0)if(typeof d=="function"){const T=d(e,i,s);o=me(T)?T:""}else if(s&&Object.prototype.hasOwnProperty.call(s,x))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!me(o)&&!this.useRawValueToEscape&&(o=ET(o));const w=m.safeValue(o);if(e=e.replace(i[0],w),h?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const a=(l,c)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const h=l.split(new RegExp(`${d}[ ]*{`));let p=`{${h[1]}`;l=h[0],p=this.interpolate(p,o);const m=p.match(/'/g),x=p.match(/"/g);(m&&m.length%2===0&&!x||x.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),c&&(o={...c,...o})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${d}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!me(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const d=s[1].split(this.formatSeparator).map(h=>h.trim());s[1]=d.shift(),l=d,c=!0}if(i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!me(i))return i;me(i)||(i=ET(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),c&&(i=l.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const Dq=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=c),c==="false"&&(n[d]=!1),c==="true"&&(n[d]=!0),isNaN(c)||(n[d]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},Bo=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(lf(r),s),e[o]=a),a(n)}};class Lq{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Vr.create("formatter"),this.options=e,this.formats={number:Bo((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return i=>s.format(i)}),currency:Bo((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>s.format(i)}),datetime:Bo((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return i=>s.format(i)}),relativetime:Bo((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return i=>s.format(i,r.range||"day")}),list:Bo((n,r)=>{const s=new Intl.ListFormat(n,{...r});return i=>s.format(i)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Bo(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{const{formatName:c,formatOptions:d}=Dq(l);if(this.formats[c]){let h=a;try{const p=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},m=p.locale||p.lng||s.locale||s.lng||r;h=this.formats[c](a,m,{...d,...s,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const jq=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Mq extends _p{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Vr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},l={};return e.forEach(c=>{let d=!0;n.forEach(h=>{const p=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,d=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[h]===void 0&&(l[h]=!0)))}),d||(a[c]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{yq(l.loaded,[i],o),jq(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const d=l.loaded[c];d.length&&d.forEach(h=>{a[c][h]===void 0&&(a[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(c,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(d=>a(null,d)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();me(e)&&(e=this.languageUtils.toResolveHierarchy(e)),me(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let d;c.length===5?d=c(e,n,r,s,l):d=c(e,n,r,s),d&&typeof d.then=="function"?d.then(h=>a(null,h)).catch(a):a(null,d)}catch(d){a(d)}else c(e,n,r,s,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const NT=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),me(t[1])&&(e.defaultValue=t[1]),me(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),DT=t=>(me(t.ns)&&(t.ns=[t.ns]),me(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),me(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Ed=()=>{},Oq=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class tu extends _p{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=DT(e),this.services={},this.logger=Vr,this.modules={external:[]},Oq(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(me(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=NT();this.options={...s,...this.options,...DT(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Vr.init(i(this.modules.logger),this.options):Vr.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=Lq);const h=new AT(this.options);this.store=new CT(this.options.resources,this.options);const p=this.services;p.logger=Vr,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new Pq(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=i(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new Nq(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new Mq(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(m){for(var x=arguments.length,w=new Array(x>1?x-1:0),T=1;T<x;T++)w[T-1]=arguments[T];e.emit(m,...w)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new uf(this.services,this.options),this.translator.on("*",function(m){for(var x=arguments.length,w=new Array(x>1?x-1:0),T=1;T<x;T++)w[T-1]=arguments[T];e.emit(m,...w)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ed),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const l=jl(),c=()=>{const d=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),r(h,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ed;const s=me(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const s=jl();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Ed),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&i2.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=jl();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=me(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,d=>{o(d,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,n,r){var s=this;const i=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),h=2;h<c;h++)d[h-2]=arguments[h];l=s.options.overloadTranslationOptionHandler([o,a].concat(d))}else l={...a};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const p=s.options.keySeparator||".";let m;return l.keyPrefix&&Array.isArray(o)?m=o.map(x=>`${l.keyPrefix}${p}${x}`):m=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,s.t(m,l)};return me(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=jl();return this.options.ns?(me(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=jl();me(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new AT(NT());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new tu(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ed;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new tu(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new CT(this.store.data,s),i.services.resourceStore=i.store),i.translator=new uf(i.services,s),i.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];i.emit(a,...c)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const at=tu.createInstance();at.createInstance=tu.createInstance;at.createInstance;at.dir;at.init;at.loadResources;at.reloadResources;at.use;at.changeLanguage;at.getFixedT;at.t;at.exists;at.setDefaultNamespace;at.hasLoadedNamespace;at.loadNamespaces;at.loadLanguages;function Vq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nu(t){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(t)}function Fq(t,e){if(nu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Uq(t){var e=Fq(t,"string");return nu(e)=="symbol"?e:e+""}function Bq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uq(r.key),r)}}function $q(t,e,n){return e&&Bq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var o2=[],zq=o2.forEach,Wq=o2.slice;function Hq(t){return zq.call(Wq.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var LT=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,qq=function(e,n,r){var s=r||{};s.path=s.path||"/";var i=encodeURIComponent(n),o="".concat(e,"=").concat(i);if(s.maxAge>0){var a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(s.domain){if(!LT.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(s.domain)}if(s.path){if(!LT.test(s.path))throw new TypeError("option path is invalid");o+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite){var l=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},jT={create:function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),s&&(i.domain=s),document.cookie=qq(e,encodeURIComponent(n),i)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),s=0;s<r.length;s++){for(var i=r[s];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(n)===0)return i.substring(n.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},Gq={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=jT.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&jT.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},Kq={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=r.substring(1),i=s.split("&"),o=0;o<i.length;o++){var a=i[o].indexOf("=");if(a>0){var l=i[o].substring(0,a);l===e.lookupQuerystring&&(n=i[o].substring(a+1))}}}return n}},Ml=null,MT=function(){if(Ml!==null)return Ml;try{Ml=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ml=!1}return Ml},Qq={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&MT()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&MT()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},Ol=null,OT=function(){if(Ol!==null)return Ol;try{Ol=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Ol=!1}return Ol},Yq={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&OT()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&OT()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},Xq={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},Jq={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Zq={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},eG={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}},a2=!1;try{document.cookie,a2=!0}catch{}var l2=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];a2||l2.splice(1,1);function tG(){return{order:l2,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var c2=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vq(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return $q(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=Hq(r,this.options||{},tG()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(Gq),this.addDetector(Kq),this.addDetector(Qq),this.addDetector(Yq),this.addDetector(Xq),this.addDetector(Jq),this.addDetector(Zq),this.addDetector(eG)}},{key:"addDetector",value:function(n){return this.detectors[n.name]=n,this}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var s=[];return n.forEach(function(i){if(r.detectors[i]){var o=r.detectors[i].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(s=s.concat(o))}}),s=s.map(function(i){return r.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var s=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(i){s.detectors[i]&&s.detectors[i].cacheUserLanguage(n,s.options)}))}}])}();c2.type="languageDetector";at.use(c2).use(xO).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:{en:{translation:{welcome:"Make your partner's wishes come true",get_started:"Get Started",subtitle:"Create, share, and fulfill wishes in a space designed for connection and love.",greeting:"Good Morning,",search_placeholder:"Search your wishes...",cat_all:"All",cat_beauty:"Beauty",cat_fashion:"Fashion",cat_home:"Home",cat_tech:"Tech",cat_books:"Books",onboarding_step1_title:"About You",onboarding_step1_desc:"Let's start with your details.",name_label:"Your Name",name_placeholder:"e.g. Sarah",dob_label:"Date of Birth",onboarding_step2_title:"Important Dates",onboarding_step2_desc:"Anniversaries, birthdays, or special moments.",date_title_placeholder:"Link Title (e.g. Anniversary)",add_date:"Add another date",onboarding_step3_title:"Your Partner",onboarding_step3_desc:"Who are we inviting to join you?",partner_name_label:"Partner's Name",partner_name_placeholder:"e.g. David",message_label:"Personal Message",message_placeholder:"Write something sweet to invite them...",onboarding_step4_title:"Invitation Ready!",onboarding_step4_desc:"Share this link with your partner to connect.",copy_link:"Copy Link",skip_dashboard:"Go to Dashboard",create_invite:"Create Invitation",next:"Next",my_birthday:"My Birthday",auto_birthday_hint:"We automatically added your birthday!",msg_sugg_1:"I can't wait to share my dreams with you!",msg_sugg_2:"Let's build our wishlist together.",msg_sugg_3:"You're the only one I want to share this with.",copied:"Copied!",my_wishlist:"My Wishlist",our_wishlist:"Our Wishlist",add_gift:"Add Gift",paste_link:"Paste a product link...",fetching_data:"Fetching details...",gift_title:"Gift Name",price:"Price",mark_purchased:"Mark as Purchased",purchased:"Purchased",available:"Available",gift_added:"Gift added successfully!",error_scraping:"Couldn't fetch details. Please fill manually.",delete_confirm:"Delete this gift?",profile_title:"My Profile",full_name:"Full Name",birth_date:"Birth Date",notifications_title:"Notifications",push_notifications:"Push Notifications",push_notifications_desc:"Get notified when partner adds a wish or completes one.",share_title:"Share My Wishes",share_button:"Share My List",share_desc:"Anyone with the link can view your list.",partner_manage:"Partner Connection",connected_with:"Connected with",disconnect:"Disconnect Partner",disconnect_confirm:"Are you sure you want to disconnect? You won't see their wishlist anymore.",invite_partner:"Invite Partner",invite_desc:"Send this link to connect accounts:",create_invite_link:"Create Invite Link",save_changes:"Save Changes",profile_updated:"Profile updated successfully!",language_settings:"Language Settings",select_language:"Select Language",days_left:"Days Left",hours_left:"Hours",event_today:"It's Today! ",no_upcoming_events:"No upcoming events",purchased_msg:"Great choice! We won't tell them. ",welcome_back:"Welcome back,",top5_title:"Top 5 Favorites",top5_desc:"Rank your most wanted gifts",top5_section_title:"Your Top 5",add_from_wishlist:"Add from Wishlist",drag_instruction:"Drag to reorder",most_wanted:"Most Wanted",install_title:"Install WishU",install_desc_android:"Add to home screen for quick access",install_desc_ios:"Add WishU to your home screen for quick sharing and notifications.",install_ios_instruction:"Tap Share and select 'Add to Home Screen'",install_button:"Install Now",install_android_manual:"Tap the menu icon () and select 'Add to Home screen'",close:"Close"}},he:{translation:{welcome:"    /  ",get_started:" ",subtitle:",       .",greeting:" ,",search_placeholder:" ...",cat_all:"",cat_beauty:"",cat_fashion:"",cat_home:"",cat_tech:"",cat_books:"",onboarding_step1_title:" ",onboarding_step1_desc:"   .",name_label:" ",name_placeholder:": ",dob_label:" ",onboarding_step2_title:" ",onboarding_step2_desc:" ,     .",date_title_placeholder:" (:  )",add_date:"  ",onboarding_step3_title:" ",onboarding_step3_desc:"   ?",partner_name_label:" ",partner_name_placeholder:": ",message_label:" ",message_placeholder:"   ...",onboarding_step4_title:" !",onboarding_step4_desc:"      .",copy_link:" ",skip_dashboard:"  ",create_invite:" ",next:"",my_birthday:"  ",auto_birthday_hint:"     !",msg_sugg_1:"     !",msg_sugg_2:"      .",msg_sugg_3:"       .",copied:"!",my_wishlist:" ",our_wishlist:" ",add_gift:" ",paste_link:"  ...",fetching_data:" ...",gift_title:" ",price:"",mark_purchased:" ",purchased:"",available:"",gift_added:"  !",error_scraping:"   .   .",delete_confirm:"  ?",profile_title:" ",full_name:" ",birth_date:" ",notifications_title:"",push_notifications:" ",push_notifications_desc:"      .",share_title:"  ",share_button:"   ",share_desc:"        .",partner_manage:" ",connected_with:" ",disconnect:" ",disconnect_confirm:"  ?  /     .",invite_partner:" ",invite_desc:"/    :",create_invite_link:"  ",save_changes:" ",profile_updated:"  !",language_settings:"",select_language:" ",days_left:" ",hours_left:"",event_today:"  ! ",no_upcoming_events:"  ",top5_title:"Top 5 Favorites",top5_desc:"Rank your most wanted gifts",top5_section_title:"Your Top 5",add_from_wishlist:"Add from Wishlist",drag_instruction:"Drag to reorder",most_wanted:"Most Wanted",purchased_msg:" !   . ",welcome_back:" ,",install_title:" WishU",install_desc_android:"    ",install_desc_ios:"  WishU       .",install_ios_instruction:"    '  '",install_button:" ",install_android_manual:"    ()  '  '",close:""}}}});at.on("languageChanged",t=>{document.documentElement.dir=at.dir(t),document.documentElement.lang=t});const u2=y.createContext(void 0),d2=({children:t})=>{const{user:e}=Ct(),[n,r]=y.useState([]),[s,i]=y.useState(0),[o,a]=y.useState(!0);y.useEffect(()=>{if(!e){r([]),i(0),a(!1);return}const p=ft(Ve(le,"notifications"),Tt("userId","==",e.uid),ua("createdAt","desc"),da(50)),m=jo(p,x=>{const w=x.docs.map(T=>({id:T.id,...T.data()}));r(w),i(w.filter(T=>!T.read).length),a(!1)});return()=>m()},[e]);const l=async()=>{if(e)try{if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}const p=await Notification.requestPermission();p==="granted"?(console.log("Notification permission granted."),await c(e.uid)):console.log("Notification permission not granted. Status:",p)}catch(p){console.error("Error requesting notification permission:",p)}},c=async p=>{let m;try{m=await navigator.serviceWorker.ready,console.log("Unified Service Worker ready:",m)}catch(w){console.error("Service Worker retrieval failed:",w);return}const x="BOg0fY_axcqBSiHLkhEyD2ul6PBDBsgPrqkt1Tvz0hPa-72shQ7aLJY28WCCHEuPGFZy080LDtzuI4E1jwxmYXc";try{const w=await fH(xT,{vapidKey:x,serviceWorkerRegistration:m});if(console.log("FCM Token retrieved:",w),w)try{await tr(et(le,"users",p),{fcmTokens:JP(w)}),console.log("FCM Token saved to Firestore for user:",p)}catch(T){console.error("Error saving token to Firestore:",T)}}catch(w){console.error("Error getting FCM token:",w)}};y.useEffect(()=>{e&&Notification.permission==="granted"&&c(e.uid);const p=pH(xT,m=>{var x,w;console.log("Foreground message received:",m),Notification.permission==="granted"&&new Notification(((x=m.notification)==null?void 0:x.title)||"New Message",{body:(w=m.notification)==null?void 0:w.body,icon:"/pwa-192x192.png"})});return()=>{p()}},[e]);const d=async p=>{try{await tr(et(le,"notifications",p),{read:!0})}catch(m){console.error("Error marking notification as read:",m)}},h=async()=>{if(!e||s===0)return;const p=n.filter(x=>!x.read),m=ZP(le);p.forEach(x=>{m.update(et(le,"notifications",x.id),{read:!0})});try{await m.commit()}catch(x){console.error("Error marking all as read:",x)}};return f.jsx(u2.Provider,{value:{notifications:n,unreadCount:s,markAsRead:d,markAllAsRead:h,requestPermission:l,loading:o},children:t})},Zw=()=>{const t=y.useContext(u2);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t},nG=()=>{const{t}=Si(),{user:e,userProfile:n,logout:r}=Ct(),{requestPermission:s}=Zw(),i=It(),[o,a]=y.useState(""),[l,c]=y.useState(""),[d,h]=y.useState(""),[p,m]=y.useState(!1),[x,w]=y.useState({Friends:{enabled:!0,first:"1week",second:"1day"},Family:{enabled:!0,first:"1week",second:"1day"},Partner:{enabled:!0,first:"1week",second:"1day"},Work:{enabled:!0,first:"1week",second:"1day"},Other:{enabled:!0,first:"1week",second:"1day"}}),[T,b]=y.useState(!1),[_,E]=y.useState(!1),[C,P]=y.useState(""),[M,I]=y.useState(""),[S,k]=y.useState("birthday"),[R,D]=y.useState([]);y.useEffect(()=>{n!=null&&n.importantDates&&D(n.importantDates)},[n]),y.useEffect(()=>{n&&(a(n.displayName||""),c(n.birthDate||n.dob||""),h(n.photoURL||(e==null?void 0:e.photoURL)||""),m(n.notificationsEnabled||!1),n.notificationPreferences&&w(n.notificationPreferences))},[n,e]);const O=async()=>{if(e){b(!0);try{await tr(et(le,"users",e.uid),{displayName:o,birthDate:l,photoURL:d,notificationsEnabled:p,notificationPreferences:x}),alert(t("profile_updated"))}catch(U){console.error(U),alert("Error updating profile")}finally{b(!1)}}},N=async()=>{if(!e)return;const U={title:"My Wishlist on WishU",text:"Hey! Check out my wishlist on WishU:",url:`${window.location.origin}/invite?from=${e.uid}`};if(navigator.share)try{await navigator.share(U)}catch(j){console.log("Error sharing",j)}else navigator.clipboard.writeText(U.url),E(!0),setTimeout(()=>E(!1),2e3)},X=async()=>{const U=!p;m(U),U&&await s()},W=(U,j,L)=>{w(G=>({...G,[U]:{...G[U],[j]:L}}))},Y=async()=>{await r(),i("/")},H=[{label:"1 month before",value:"1month"},{label:"2 weeks before",value:"2weeks"},{label:"1 week before",value:"1week"},{label:"3 days before",value:"3days"}],F=[{label:"1 day before",value:"1day"},{label:"On the day of",value:"on-day"},{label:"None",value:"none"}];return f.jsxs("div",{className:"bg-white font-sans",children:[f.jsxs("main",{className:"px-6 space-y-8 pb-32",children:[f.jsx("div",{className:"flex justify-center",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 overflow-hidden border-4 border-white shadow-lg",children:d?f.jsx("img",{src:d,alt:"Profile",className:"w-full h-full object-cover"}):f.jsx(yy,{className:"w-full h-full p-6 text-slate-400"})}),f.jsx("button",{className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full shadow-lg hover:scale-110 transition-transform",children:f.jsx(r5,{size:16})})]})}),f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-500",children:f.jsx("span",{className:"text-lg font-bold",children:"Aa"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"font-bold text-darkbg",children:t("language_settings")}),f.jsx("p",{className:"text-xs text-slate-400",children:t("select_language")})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>at.changeLanguage("en"),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${at.language==="en"?"bg-darkbg text-white shadow-md":"bg-slate-50 text-slate-500 hover:bg-slate-100"}`,children:"English"}),f.jsx("button",{onClick:()=>at.changeLanguage("he"),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${at.language==="he"?"bg-darkbg text-white shadow-md":"bg-slate-50 text-slate-500 hover:bg-slate-100"}`,children:""})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-4 flex items-center gap-2",children:[f.jsx(yy,{size:20,className:"text-primary"}),t("onboarding_step1_title")]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:t("full_name")}),f.jsx("input",{type:"text",value:o,onChange:U=>a(U.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-darkbg focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:t("birth_date")}),f.jsx("input",{type:"date",value:l,onChange:U=>c(U.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-darkbg focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),f.jsxs("div",{className:"pt-6 border-t border-slate-100 mt-6",children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Other Important Dates"}),f.jsx("div",{className:"space-y-3 mb-4",children:R.map((U,j)=>f.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-xl border border-slate-100",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-darkbg text-sm",children:U.title}),f.jsxs("p",{className:"text-xs text-slate-500 capitalize",children:[U.type,"  ",U.date]})]}),f.jsx("button",{onClick:async()=>{if(!e)return;const L=[...R];L.splice(j,1),D(L),await tr(et(le,"users",e.uid),{importantDates:L})},className:"p-2 text-red-400 hover:bg-red-50 rounded-lg",children:f.jsx(Er,{size:16})})]},j))}),f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsx("input",{placeholder:"Title (e.g. Anniversary)",value:C,onChange:U=>P(U.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"date",value:M,onChange:U=>I(U.target.value),className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm"}),f.jsxs("select",{value:S,onChange:U=>k(U.target.value),className:"bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm",children:[f.jsx("option",{value:"birthday",children:"Birthday"}),f.jsx("option",{value:"anniversary",children:"Anniversary"}),f.jsx("option",{value:"other",children:"Other"})]})]})]}),f.jsx("button",{onClick:async()=>{if(!e||!C||!M)return;const U={title:C,date:M,type:S},j=[...R,U];D(j),P(""),I(""),await tr(et(le,"users",e.uid),{importantDates:j}),alert(t("date_added")||"Date added! It will appear on your calendar.")},className:"bg-darkbg text-white p-3 rounded-xl shadow-lg hover:bg-black transition-colors",children:f.jsx(Ff,{size:20})})]}),(C||M)&&f.jsx("p",{className:"text-red-500 text-xs mt-2 font-bold animate-pulse",children:"Don't forget to click (+) to add this date!"})]})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-4 flex items-center gap-2",children:[f.jsx(zc,{size:20,className:"text-primary"}),t("notifications_title")]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-darkbg",children:t("push_notifications")}),f.jsx("p",{className:"text-xs text-slate-400 mt-1 max-w-[200px]",children:t("push_notifications_desc")})]}),f.jsx("button",{onClick:X,className:`w-12 h-6 rounded-full transition-colors relative ${p?"bg-primary":"bg-slate-200"}`,children:f.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${p?"translate-x-6":""}`})})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-6 flex items-center gap-2",children:[f.jsx(zc,{size:20,className:"text-primary"}),"Notification Preferences"]}),f.jsx("div",{className:"space-y-8",children:["Friends","Family","Partner","Work","Other"].map(U=>{const j=x[U]||{enabled:!0,first:"1week",second:"1day"};return f.jsxs("div",{className:"space-y-4 border-b border-slate-50 pb-6 last:border-0 last:pb-0",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"font-bold text-darkbg flex items-center gap-2",children:U}),f.jsx("button",{onClick:()=>W(U,"enabled",!j.enabled),className:`w-10 h-5 rounded-full transition-colors relative ${j.enabled?"bg-primary":"bg-slate-200"}`,children:f.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${j.enabled?"translate-x-5":""}`})})]}),j.enabled&&f.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"First Reminder"}),f.jsx("select",{value:j.first,onChange:L=>W(U,"first",L.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-xl px-4 py-3 text-sm text-darkbg outline-none focus:ring-2 focus:ring-primary/20 appearance-none",children:H.map(L=>f.jsx("option",{value:L.value,children:L.label},L.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Follow-up Reminder"}),f.jsx("select",{value:j.second,onChange:L=>W(U,"second",L.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-xl px-4 py-3 text-sm text-darkbg outline-none focus:ring-2 focus:ring-primary/20 appearance-none",children:F.map(L=>f.jsx("option",{value:L.value,children:L.label},L.value))})]})]})]},U)})})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-secondary/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-4 flex items-center gap-2",children:[f.jsx(Dh,{size:20,className:"text-primary"}),t("share_title")]}),f.jsx("p",{className:"text-sm text-slate-500 mb-6",children:t("share_desc")}),f.jsxs("button",{onClick:N,className:"w-full py-3 bg-darkbg text-white rounded-xl font-bold shadow-lg shadow-darkbg/20 flex items-center justify-center gap-2 active:scale-95 transition-all",children:[_?f.jsx(oo,{size:18}):f.jsx(Dh,{size:18}),t(_?"copied":"share_button")]}),e&&f.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg flex items-center justify-between gap-2 overflow-hidden border border-slate-200",children:[f.jsxs("span",{className:"text-xs text-slate-500 truncate font-mono",children:[window.location.origin,"/invite?from=",e.uid]}),f.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/invite?from=${e.uid}`),E(!0),setTimeout(()=>E(!1),2e3)},className:"p-2 bg-white rounded-md shadow-sm border border-slate-100 hover:text-primary",children:_?f.jsx(oo,{size:14}):f.jsx(s5,{size:14})})]})]}),(n==null?void 0:n.isAdmin)&&f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 flex items-center justify-between relative overflow-hidden group cursor-pointer",onClick:()=>i("/admin"),children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-deepNavy/5 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-deepNavy flex items-center justify-center text-white shadow-lg shadow-deepNavy/20 group-hover:scale-110 transition-transform duration-300",children:f.jsx(p5,{size:24})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold text-deepNavy group-hover:text-primaryPink transition-colors",children:"Admin Dashboard"}),f.jsx("p",{className:"text-sm text-slate-500",children:"View stats & activity"})]})]}),f.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 group-hover:bg-primaryPink group-hover:text-white transition-all",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("path",{d:"m9 18 6-6-6-6"})})})]}),f.jsxs("button",{onClick:Y,className:"w-full py-4 text-red-400 font-medium hover:text-red-500 flex items-center justify-center gap-2",children:[f.jsx(l5,{size:18}),"Log Out"]}),f.jsx("div",{className:"h-8"})," "]}),f.jsx("div",{className:"px-6 mb-12",children:f.jsxs("button",{onClick:O,disabled:T,className:"w-full bg-primary text-white py-4 rounded-xl font-bold shadow-lg shadow-primary/20 flex items-center justify-center gap-2 active:scale-95 transition-all",children:[T?f.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):f.jsx(oo,{size:18}),t("save_changes")]})})]})},rG=()=>{const{id:t}=e0(),e=It(),{user:n}=Ct(),[r,s]=y.useState(null),[i,o]=y.useState(!0);return y.useEffect(()=>{(async()=>{if(t)try{const l=await Ru(et(le,"gifts",t));l.exists()&&s({id:l.id,...l.data()})}catch(l){console.error("Error fetching gift details",l)}finally{o(!1)}})()},[t]),i?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsx(In,{className:"animate-spin text-primary",size:32})}):r?f.jsxs("div",{className:"bg-white min-h-screen font-sans pb-40 overflow-x-hidden relative",children:[f.jsx("div",{className:"absolute bg-[#E79BE3] rounded-full z-0 opacity-95 shadow-inner",style:{top:"-10%",right:"-20%",width:"90vw",height:"90vw",maxWidth:"500px",maxHeight:"500px"}}),f.jsx("div",{className:"px-6 pt-4 relative z-20",children:f.jsx("button",{onClick:()=>e(-1),className:"w-10 h-10 bg-white/70 backdrop-blur-xl rounded-full flex items-center justify-center text-slate-600 hover:text-primary transition-all shadow-md border border-white/30",children:f.jsx(F0,{size:20})})}),f.jsxs("main",{className:"px-6 flex flex-col items-center relative z-10",children:[f.jsx("div",{className:"relative w-full flex justify-center items-center py-6 mt-12",children:f.jsxs("div",{className:"relative w-72 h-72 flex items-center justify-center translate-x-4",children:[r.imageUrl?f.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-contain relative z-10"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#E79BE3]/40",children:f.jsx(U0,{size:140,strokeWidth:.5})}),f.jsx("a",{href:Ky(r.link),target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-4 right-4 w-12 h-12 bg-[#DFE137] rounded-full flex items-center justify-center text-black shadow-xl hover:scale-110 active:scale-90 transition-transform z-20",children:f.jsx(gA,{size:20,strokeWidth:2.5})})]})}),f.jsxs("div",{className:"w-full mt-2 space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-3xl font-black text-[#0C0C4F] mb-1 leading-tight",children:r.title}),f.jsx("p",{className:"text-2xl font-black text-[#0C0C4F]",children:r.price||"Priceless"})]}),f.jsx("div",{className:"pt-2",children:f.jsx("p",{className:"text-slate-500 leading-relaxed font-light text-base text-center max-w-sm mx-auto",children:r.note||"This beautiful item is waiting to be yours. A perfect addition to any collection, crafted with care and designed to bring joy and elegance to your daily life."})}),f.jsx("div",{className:"pt-8 mb-10 flex flex-col items-center gap-2 opacity-10",children:f.jsxs("div",{className:"text-[10px] text-slate-400 font-mono tracking-tighter uppercase font-bold",children:["CODE: ",r.id.slice(0,8)]})})]})]}),f.jsx("div",{className:"fixed bottom-[105px] left-6 right-6 flex justify-center z-50 pointer-events-none",children:f.jsxs("a",{href:Ky(r.link),target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto bg-[#0C0C4F] text-white px-10 py-5 rounded-full font-bold uppercase tracking-[0.2em] text-xs shadow-2xl hover:scale-105 active:scale-95 transition-all flex items-center gap-3",children:["View in Store",f.jsx(dA,{size:16})]})})]}):f.jsxs("div",{className:"text-center py-20 px-6",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Gift Not Found"}),f.jsx("button",{onClick:()=>e(-1),className:"text-primary font-bold",children:"Go Back"})]})},sG="modulepreload",iG=function(t){return"/"+t},VT={},h2=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=iG(l),l in VT)return;VT[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":sG,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function oG(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const bp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ll(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function ex(t){return"nodeType"in t}function Cn(t){var e,n;return t?ll(t)?t:ex(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function tx(t){const{Document:e}=Cn(t);return t instanceof e}function Nu(t){return ll(t)?!1:t instanceof Cn(t).HTMLElement}function f2(t){return t instanceof Cn(t).SVGElement}function cl(t){return t?ll(t)?t.document:ex(t)?tx(t)?t:Nu(t)||f2(t)?t.ownerDocument:document:document:document}const Qr=bp?y.useLayoutEffect:y.useEffect;function nx(t){const e=y.useRef(t);return Qr(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function aG(){const t=y.useRef(null),e=y.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ru(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return Qr(()=>{n.current!==t&&(n.current=t)},e),n}function Du(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function df(t){const e=nx(t),n=y.useRef(null),r=y.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Jy(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let Zm={};function Lu(t,e){return y.useMemo(()=>{if(e)return e;const n=Zm[t]==null?0:Zm[t]+1;return Zm[t]=n,t+"-"+n},[t,e])}function p2(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[l,c]of a){const d=i[l];d!=null&&(i[l]=d+t*c)}return i},{...e})}}const Ta=p2(1),su=p2(-1);function lG(t){return"clientX"in t&&"clientY"in t}function rx(t){if(!t)return!1;const{KeyboardEvent:e}=Cn(t.target);return e&&t instanceof e}function cG(t){if(!t)return!1;const{TouchEvent:e}=Cn(t.target);return e&&t instanceof e}function Zy(t){if(cG(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return lG(t)?{x:t.clientX,y:t.clientY}:null}const iu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[iu.Translate.toString(t),iu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),FT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uG(t){return t.matches(FT)?t:t.querySelector(FT)}const dG={display:"none"};function hG(t){let{id:e,value:n}=t;return un.createElement("div",{id:e,style:dG},n)}function fG(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return un.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function pG(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const m2=y.createContext(null);function mG(t){const e=y.useContext(m2);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function gG(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const yG={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},vG={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function wG(t){let{announcements:e=vG,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=yG}=t;const{announce:i,announcement:o}=pG(),a=Lu("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),mG(y.useMemo(()=>({onDragStart(h){let{active:p}=h;i(e.onDragStart({active:p}))},onDragMove(h){let{active:p,over:m}=h;e.onDragMove&&i(e.onDragMove({active:p,over:m}))},onDragOver(h){let{active:p,over:m}=h;i(e.onDragOver({active:p,over:m}))},onDragEnd(h){let{active:p,over:m}=h;i(e.onDragEnd({active:p,over:m}))},onDragCancel(h){let{active:p,over:m}=h;i(e.onDragCancel({active:p,over:m}))}}),[i,e])),!l)return null;const d=un.createElement(un.Fragment,null,un.createElement(hG,{id:r,value:s.draggable}),un.createElement(fG,{id:a,announcement:o}));return n?sa.createPortal(d,n):d}var bt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(bt||(bt={}));function hf(){}function UT(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function xG(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Sr=Object.freeze({x:0,y:0});function g2(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function y2(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function _G(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function BT(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function v2(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function $T(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const bG=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=$T(e,e.left,e.top),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=g2($T(l),s);i.push({id:a,data:{droppableContainer:o,value:c}})}}return i.sort(y2)},EG=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=BT(e),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=BT(l),d=s.reduce((p,m,x)=>p+g2(c[x],m),0),h=Number((d/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:h}})}}return i.sort(y2)};function TG(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const l=e.width*e.height,c=t.width*t.height,d=o*a,h=d/(l+c-d);return Number(h.toFixed(4))}return 0}const SG=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const l=TG(a,e);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(_G)};function IG(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function w2(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Sr}function CG(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const kG=CG(1);function AG(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function RG(t,e,n){const r=AG(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,l=t.left-o-(1-s)*parseFloat(n),c=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?t.width/s:t.width,h=i?t.height/i:t.height;return{width:d,height:h,top:c,right:l+d,bottom:c+h,left:l}}const PG={ignoreTransform:!1};function ul(t,e){e===void 0&&(e=PG);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=Cn(t).getComputedStyle(t);c&&(n=RG(n,c,d))}const{top:r,left:s,width:i,height:o,bottom:a,right:l}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:l}}function zT(t){return ul(t,{ignoreTransform:!0})}function NG(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function DG(t,e){return e===void 0&&(e=Cn(t).getComputedStyle(t)),e.position==="fixed"}function LG(t,e){e===void 0&&(e=Cn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function Ep(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(tx(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Nu(s)||f2(s)||n.includes(s))return n;const i=Cn(t).getComputedStyle(s);return s!==t&&LG(s,i)&&n.push(s),DG(s,i)?n:r(s.parentNode)}return t?r(t):n}function x2(t){const[e]=Ep(t,1);return e??null}function eg(t){return!bp||!t?null:ll(t)?t:ex(t)?tx(t)||t===cl(t).scrollingElement?window:Nu(t)?t:null:null}function _2(t){return ll(t)?t.scrollX:t.scrollLeft}function b2(t){return ll(t)?t.scrollY:t.scrollTop}function ev(t){return{x:_2(t),y:b2(t)}}var Nt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Nt||(Nt={}));function E2(t){return!bp||!t?!1:t===document.scrollingElement}function T2(t){const e={x:0,y:0},n=E2(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const jG={x:.2,y:.2};function MG(t,e,n,r,s){let{top:i,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=jG);const{isTop:c,isBottom:d,isLeft:h,isRight:p}=T2(t),m={x:0,y:0},x={x:0,y:0},w={height:e.height*s.y,width:e.width*s.x};return!c&&i<=e.top+w.height?(m.y=Nt.Backward,x.y=r*Math.abs((e.top+w.height-i)/w.height)):!d&&l>=e.bottom-w.height&&(m.y=Nt.Forward,x.y=r*Math.abs((e.bottom-w.height-l)/w.height)),!p&&a>=e.right-w.width?(m.x=Nt.Forward,x.x=r*Math.abs((e.right-w.width-a)/w.width)):!h&&o<=e.left+w.width&&(m.x=Nt.Backward,x.x=r*Math.abs((e.left+w.width-o)/w.width)),{direction:m,speed:x}}function OG(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function S2(t){return t.reduce((e,n)=>Ta(e,ev(n)),Sr)}function VG(t){return t.reduce((e,n)=>e+_2(n),0)}function FG(t){return t.reduce((e,n)=>e+b2(n),0)}function UG(t,e){if(e===void 0&&(e=ul),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);x2(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const BG=[["x",["left","right"],VG],["y",["top","bottom"],FG]];class sx{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ep(n),s=S2(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of BG)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),d=s[i]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class yc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function $G(t){const{EventTarget:e}=Cn(t);return t instanceof e?t:cl(t)}function tg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Yn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Yn||(Yn={}));function WT(t){t.preventDefault()}function zG(t){t.stopPropagation()}var Ie;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ie||(Ie={}));const I2={start:[Ie.Space,Ie.Enter],cancel:[Ie.Esc],end:[Ie.Space,Ie.Enter,Ie.Tab]},WG=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ie.Right:return{...n,x:n.x+25};case Ie.Left:return{...n,x:n.x-25};case Ie.Down:return{...n,y:n.y+25};case Ie.Up:return{...n,y:n.y-25}}};class ix{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new yc(cl(n)),this.windowListeners=new yc(Cn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Yn.Resize,this.handleCancel),this.windowListeners.add(Yn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Yn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&UG(r),n(Sr)}handleKeyDown(e){if(rx(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=I2,coordinateGetter:o=WG,scrollBehavior:a="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:Sr;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(e,{active:n,context:r.current,currentCoordinates:d});if(h){const p=su(h,d),m={x:0,y:0},{scrollableAncestors:x}=r.current;for(const w of x){const T=e.code,{isTop:b,isRight:_,isLeft:E,isBottom:C,maxScroll:P,minScroll:M}=T2(w),I=OG(w),S={x:Math.min(T===Ie.Right?I.right-I.width/2:I.right,Math.max(T===Ie.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(T===Ie.Down?I.bottom-I.height/2:I.bottom,Math.max(T===Ie.Down?I.top:I.top+I.height/2,h.y))},k=T===Ie.Right&&!_||T===Ie.Left&&!E,R=T===Ie.Down&&!C||T===Ie.Up&&!b;if(k&&S.x!==h.x){const D=w.scrollLeft+p.x,O=T===Ie.Right&&D<=P.x||T===Ie.Left&&D>=M.x;if(O&&!p.y){w.scrollTo({left:D,behavior:a});return}O?m.x=w.scrollLeft-D:m.x=T===Ie.Right?w.scrollLeft-P.x:w.scrollLeft-M.x,m.x&&w.scrollBy({left:-m.x,behavior:a});break}else if(R&&S.y!==h.y){const D=w.scrollTop+p.y,O=T===Ie.Down&&D<=P.y||T===Ie.Up&&D>=M.y;if(O&&!p.x){w.scrollTo({top:D,behavior:a});return}O?m.y=w.scrollTop-D:m.y=T===Ie.Down?w.scrollTop-P.y:w.scrollTop-M.y,m.y&&w.scrollBy({top:-m.y,behavior:a});break}}this.handleMove(e,Ta(su(h,this.referenceCoordinates),m))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ix.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=I2,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function HT(t){return!!(t&&"distance"in t)}function qT(t){return!!(t&&"delay"in t)}class ox{constructor(e,n,r){var s;r===void 0&&(r=$G(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=cl(o),this.documentListeners=new yc(this.document),this.listeners=new yc(r),this.windowListeners=new yc(Cn(o)),this.initialCoordinates=(s=Zy(i))!=null?s:Sr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Yn.Resize,this.handleCancel),this.windowListeners.add(Yn.DragStart,WT),this.windowListeners.add(Yn.VisibilityChange,this.handleCancel),this.windowListeners.add(Yn.ContextMenu,WT),this.documentListeners.add(Yn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(HT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Yn.Click,zG,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Yn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(n=Zy(e))!=null?n:Sr,c=su(s,l);if(!r&&a){if(HT(a)){if(a.tolerance!=null&&tg(c,a.tolerance))return this.handleCancel();if(tg(c,a.distance))return this.handleStart()}if(qT(a)&&tg(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ie.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const HG={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ax extends ox{constructor(e){const{event:n}=e,r=cl(n.target);super(e,HG,r)}}ax.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const qG={move:{name:"mousemove"},end:{name:"mouseup"}};var tv;(function(t){t[t.RightClick=2]="RightClick"})(tv||(tv={}));class GG extends ox{constructor(e){super(e,qG,cl(e.event.target))}}GG.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===tv.RightClick?!1:(r==null||r({event:n}),!0)}}];const ng={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class KG extends ox{constructor(e){super(e,ng)}static setup(){return window.addEventListener(ng.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ng.move.name,e)};function e(){}}}KG.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var vc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(vc||(vc={}));var ff;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(ff||(ff={}));function QG(t){let{acceleration:e,activator:n=vc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=ff.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:h,threshold:p}=t;const m=XG({delta:h,disabled:!i}),[x,w]=aG(),T=y.useRef({x:0,y:0}),b=y.useRef({x:0,y:0}),_=y.useMemo(()=>{switch(n){case vc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case vc.DraggableRect:return s}},[n,s,l]),E=y.useRef(null),C=y.useCallback(()=>{const M=E.current;if(!M)return;const I=T.current.x*b.current.x,S=T.current.y*b.current.y;M.scrollBy(I,S)},[]),P=y.useMemo(()=>a===ff.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!i||!c.length||!_){w();return}for(const M of P){if((r==null?void 0:r(M))===!1)continue;const I=c.indexOf(M),S=d[I];if(!S)continue;const{direction:k,speed:R}=MG(M,S,_,e,p);for(const D of["x","y"])m[D][k[D]]||(R[D]=0,k[D]=0);if(R.x>0||R.y>0){w(),E.current=M,x(C,o),T.current=R,b.current=k;return}}T.current={x:0,y:0},b.current={x:0,y:0},w()},[e,C,r,w,i,o,JSON.stringify(_),JSON.stringify(m),x,c,P,d,JSON.stringify(p)])}const YG={x:{[Nt.Backward]:!1,[Nt.Forward]:!1},y:{[Nt.Backward]:!1,[Nt.Forward]:!1}};function XG(t){let{delta:e,disabled:n}=t;const r=Jy(e);return Du(s=>{if(n||!r||!s)return YG;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Nt.Backward]:s.x[Nt.Backward]||i.x===-1,[Nt.Forward]:s.x[Nt.Forward]||i.x===1},y:{[Nt.Backward]:s.y[Nt.Backward]||i.y===-1,[Nt.Forward]:s.y[Nt.Forward]||i.y===1}}},[n,e,r])}function JG(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Du(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function ZG(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var ou;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ou||(ou={}));var nv;(function(t){t.Optimized="optimized"})(nv||(nv={}));const GT=new Map;function eK(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=y.useState(null),{frequency:a,measure:l,strategy:c}=s,d=y.useRef(t),h=T(),p=ru(h),m=y.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(_=>_===null?b:_.concat(b.filter(E=>!_.includes(E))))},[p]),x=y.useRef(null),w=Du(b=>{if(h&&!n)return GT;if(!b||b===GT||d.current!==t||i!=null){const _=new Map;for(let E of t){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){_.set(E.id,E.rect.current);continue}const C=E.node.current,P=C?new sx(l(C),C):null;E.rect.current=P,P&&_.set(E.id,P)}return _}return b},[t,i,n,h,l]);return y.useEffect(()=>{d.current=t},[t]),y.useEffect(()=>{h||m()},[n,h]),y.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),y.useEffect(()=>{h||typeof a!="number"||x.current!==null||(x.current=setTimeout(()=>{m(),x.current=null},a))},[a,h,m,...r]),{droppableRects:w,measureDroppableContainers:m,measuringScheduled:i!=null};function T(){switch(c){case ou.Always:return!1;case ou.BeforeDragging:return n;default:return!n}}}function C2(t,e){return Du(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function tK(t,e){return C2(t,e)}function nK(t){let{callback:e,disabled:n}=t;const r=nx(e),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Tp(t){let{callback:e,disabled:n}=t;const r=nx(e),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function rK(t){return new sx(ul(t),t)}function KT(t,e,n){e===void 0&&(e=rK);const[r,s]=y.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const o=nK({callback(l){if(t)for(const c of l){const{type:d,target:h}=c;if(d==="childList"&&h instanceof HTMLElement&&h.contains(t)){i();break}}}}),a=Tp({callback:i});return Qr(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function sK(t){const e=C2(t);return w2(t,e)}const QT=[];function iK(t){const e=y.useRef(t),n=Du(r=>t?r&&r!==QT&&t&&e.current&&t.parentNode===e.current.parentNode?r:Ep(t):QT,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function oK(t){const[e,n]=y.useState(null),r=y.useRef(t),s=y.useCallback(i=>{const o=eg(i.target);o&&n(a=>a?(a.set(o,ev(o)),new Map(a)):null)},[]);return y.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(l=>{const c=eg(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,ev(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(l=>{const c=eg(l);c==null||c.removeEventListener("scroll",s)})}},[s,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Ta(i,o),Sr):S2(t):Sr,[t,e])}function YT(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==Sr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?su(t,n.current):Sr}function aK(t){y.useEffect(()=>{if(!bp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function lK(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function k2(t){return y.useMemo(()=>t?NG(t):null,[t])}const XT=[];function cK(t,e){e===void 0&&(e=ul);const[n]=t,r=k2(n?Cn(n):null),[s,i]=y.useState(XT);function o(){i(()=>t.length?t.map(l=>E2(l)?r:new sx(e(l),l)):XT)}const a=Tp({callback:o});return Qr(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),s}function uK(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Nu(e)?e:t}function dK(t){let{measure:e}=t;const[n,r]=y.useState(null),s=y.useCallback(c=>{for(const{target:d}of c)if(Nu(d)){r(h=>{const p=e(d);return h?{...h,width:p.width,height:p.height}:p});break}},[e]),i=Tp({callback:s}),o=y.useCallback(c=>{const d=uK(c);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?e(d):null)},[e,i]),[a,l]=df(o);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const hK=[{sensor:ax,options:{}},{sensor:ix,options:{}}],fK={current:{}},Zd={draggable:{measure:zT},droppable:{measure:zT,strategy:ou.WhileDragging,frequency:nv.Optimized},dragOverlay:{measure:ul}};class wc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const pK={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zd,measureDroppableContainers:hf,windowRect:null,measuringScheduled:!1},mK={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hf,draggableNodes:new Map,over:null,measureDroppableContainers:hf},Sp=y.createContext(mK),A2=y.createContext(pK);function gK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wc}}}function yK(t,e){switch(e.type){case bt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case bt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case bt.DragEnd:case bt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case bt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new wc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case bt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new wc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case bt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new wc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function vK(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=y.useContext(Sp),i=Jy(r),o=Jy(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!rx(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const h=uG(d);if(h){h.focus();break}}})}},[r,e,s,o,i]),null}function wK(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function xK(t){return y.useMemo(()=>({draggable:{...Zd.draggable,...t==null?void 0:t.draggable},droppable:{...Zd.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Zd.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function _K(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=y.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Qr(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=n(c),h=w2(d,r);if(o||(h.x=0),a||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=x2(c);p&&p.scrollBy({top:h.y,left:h.x})}},[e,o,a,r,n])}const R2=y.createContext({...Sr,scaleX:1,scaleY:1});var $s;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})($s||($s={}));const bK=y.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:d=hK,collisionDetection:h=SG,measuring:p,modifiers:m,...x}=e;const w=y.useReducer(yK,void 0,gK),[T,b]=w,[_,E]=gG(),[C,P]=y.useState($s.Uninitialized),M=C===$s.Initialized,{draggable:{active:I,nodes:S,translate:k},droppable:{containers:R}}=T,D=I!=null?S.get(I):null,O=y.useRef({initial:null,translated:null}),N=y.useMemo(()=>{var Re;return I!=null?{id:I,data:(Re=D==null?void 0:D.data)!=null?Re:fK,rect:O}:null},[I,D]),X=y.useRef(null),[W,Y]=y.useState(null),[H,F]=y.useState(null),U=ru(x,Object.values(x)),j=Lu("DndDescribedBy",o),L=y.useMemo(()=>R.getEnabled(),[R]),G=xK(p),{droppableRects:ee,measureDroppableContainers:re,measuringScheduled:oe}=eK(L,{dragging:M,dependencies:[k.x,k.y],config:G.droppable}),te=JG(S,I),ne=y.useMemo(()=>H?Zy(H):null,[H]),ce=Ou(),we=tK(te,G.draggable.measure);_K({activeNode:I!=null?S.get(I):null,config:ce.layoutShiftCompensation,initialRect:we,measure:G.draggable.measure});const ie=KT(te,G.draggable.measure,we),ke=KT(te?te.parentElement:null),_e=y.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Le=R.getNodeFor((n=_e.current.over)==null?void 0:n.id),he=dK({measure:G.dragOverlay.measure}),Qe=(r=he.nodeRef.current)!=null?r:te,rt=M?(s=he.rect)!=null?s:ie:null,kt=!!(he.nodeRef.current&&he.rect),sn=sK(kt?null:ie),je=k2(Qe?Cn(Qe):null),Se=iK(M?Le??te:null),lr=cK(Se),ks=wK(m,{transform:{x:k.x-sn.x,y:k.y-sn.y,scaleX:1,scaleY:1},activatorEvent:H,active:N,activeNodeRect:ie,containerNodeRect:ke,draggingNodeRect:rt,over:_e.current.over,overlayNodeRect:he.rect,scrollableAncestors:Se,scrollableAncestorRects:lr,windowRect:je}),Ri=ne?Ta(ne,k):null,Pi=oK(Se),Jr=YT(Pi),Ni=YT(Pi,[ie]),cr=Ta(ks,Jr),qn=rt?kG(rt,ks):null,Cr=N&&qn?h({active:N,collisionRect:qn,droppableRects:ee,droppableContainers:L,pointerCoordinates:Ri}):null,Di=v2(Cr,"id"),[on,Li]=y.useState(null),Zr=kt?ks:Ta(ks,Ni),dl=IG(Zr,(i=on==null?void 0:on.rect)!=null?i:null,ie),ji=y.useRef(null),kr=y.useCallback((Re,zt)=>{let{sensor:vt,options:mn}=zt;if(X.current==null)return;const gn=S.get(X.current);if(!gn)return;const an=Re.nativeEvent,Mt=new vt({active:X.current,activeNode:gn,event:an,options:mn,context:_e,onAbort(wt){if(!S.get(wt))return;const{onDragAbort:An}=U.current,Gn={id:wt};An==null||An(Gn),_({type:"onDragAbort",event:Gn})},onPending(wt,kn,An,Gn){if(!S.get(wt))return;const{onDragPending:ur}=U.current,Ar={id:wt,constraint:kn,initialCoordinates:An,offset:Gn};ur==null||ur(Ar),_({type:"onDragPending",event:Ar})},onStart(wt){const kn=X.current;if(kn==null)return;const An=S.get(kn);if(!An)return;const{onDragStart:Gn}=U.current,es={activatorEvent:an,active:{id:kn,data:An.data,rect:O}};sa.unstable_batchedUpdates(()=>{Gn==null||Gn(es),P($s.Initializing),b({type:bt.DragStart,initialCoordinates:wt,active:kn}),_({type:"onDragStart",event:es}),Y(ji.current),F(an)})},onMove(wt){b({type:bt.DragMove,coordinates:wt})},onEnd:As(bt.DragEnd),onCancel:As(bt.DragCancel)});ji.current=Mt;function As(wt){return async function(){const{active:An,collisions:Gn,over:es,scrollAdjustedTranslate:ur}=_e.current;let Ar=null;if(An&&ur){const{cancelDrop:yn}=U.current;Ar={activatorEvent:an,active:An,collisions:Gn,delta:ur,over:es},wt===bt.DragEnd&&typeof yn=="function"&&await Promise.resolve(yn(Ar))&&(wt=bt.DragCancel)}X.current=null,sa.unstable_batchedUpdates(()=>{b({type:wt}),P($s.Uninitialized),Li(null),Y(null),F(null),ji.current=null;const yn=wt===bt.DragEnd?"onDragEnd":"onDragCancel";if(Ar){const Mo=U.current[yn];Mo==null||Mo(Ar),_({type:yn,event:Ar})}})}}},[S]),ju=y.useCallback((Re,zt)=>(vt,mn)=>{const gn=vt.nativeEvent,an=S.get(mn);if(X.current!==null||!an||gn.dndKit||gn.defaultPrevented)return;const Mt={active:an};Re(vt,zt.options,Mt)===!0&&(gn.dndKit={capturedBy:zt.sensor},X.current=mn,kr(vt,zt))},[S,kr]),Mi=ZG(d,ju);aK(d),Qr(()=>{ie&&C===$s.Initializing&&P($s.Initialized)},[ie,C]),y.useEffect(()=>{const{onDragMove:Re}=U.current,{active:zt,activatorEvent:vt,collisions:mn,over:gn}=_e.current;if(!zt||!vt)return;const an={active:zt,activatorEvent:vt,collisions:mn,delta:{x:cr.x,y:cr.y},over:gn};sa.unstable_batchedUpdates(()=>{Re==null||Re(an),_({type:"onDragMove",event:an})})},[cr.x,cr.y]),y.useEffect(()=>{const{active:Re,activatorEvent:zt,collisions:vt,droppableContainers:mn,scrollAdjustedTranslate:gn}=_e.current;if(!Re||X.current==null||!zt||!gn)return;const{onDragOver:an}=U.current,Mt=mn.get(Di),As=Mt&&Mt.rect.current?{id:Mt.id,rect:Mt.rect.current,data:Mt.data,disabled:Mt.disabled}:null,wt={active:Re,activatorEvent:zt,collisions:vt,delta:{x:gn.x,y:gn.y},over:As};sa.unstable_batchedUpdates(()=>{Li(As),an==null||an(wt),_({type:"onDragOver",event:wt})})},[Di]),Qr(()=>{_e.current={activatorEvent:H,active:N,activeNode:te,collisionRect:qn,collisions:Cr,droppableRects:ee,draggableNodes:S,draggingNode:Qe,draggingNodeRect:rt,droppableContainers:R,over:on,scrollableAncestors:Se,scrollAdjustedTranslate:cr},O.current={initial:rt,translated:qn}},[N,te,Cr,qn,S,Qe,rt,ee,R,on,Se,cr]),QG({...ce,delta:k,draggingRect:qn,pointerCoordinates:Ri,scrollableAncestors:Se,scrollableAncestorRects:lr});const Mu=y.useMemo(()=>({active:N,activeNode:te,activeNodeRect:ie,activatorEvent:H,collisions:Cr,containerNodeRect:ke,dragOverlay:he,draggableNodes:S,droppableContainers:R,droppableRects:ee,over:on,measureDroppableContainers:re,scrollableAncestors:Se,scrollableAncestorRects:lr,measuringConfiguration:G,measuringScheduled:oe,windowRect:je}),[N,te,ie,H,Cr,ke,he,S,R,ee,on,re,Se,lr,G,oe,je]),Oi=y.useMemo(()=>({activatorEvent:H,activators:Mi,active:N,activeNodeRect:ie,ariaDescribedById:{draggable:j},dispatch:b,draggableNodes:S,over:on,measureDroppableContainers:re}),[H,Mi,N,ie,b,j,S,on,re]);return un.createElement(m2.Provider,{value:E},un.createElement(Sp.Provider,{value:Oi},un.createElement(A2.Provider,{value:Mu},un.createElement(R2.Provider,{value:dl},c)),un.createElement(vK,{disabled:(a==null?void 0:a.restoreFocus)===!1})),un.createElement(wG,{...a,hiddenTextDescribedById:j}));function Ou(){const Re=(W==null?void 0:W.autoScrollEnabled)===!1,zt=typeof l=="object"?l.enabled===!1:l===!1,vt=M&&!Re&&!zt;return typeof l=="object"?{...l,enabled:vt}:{enabled:vt}}}),EK=y.createContext(null),JT="button",TK="Draggable";function SK(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Lu(TK),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:h,over:p}=y.useContext(Sp),{role:m=JT,roleDescription:x="draggable",tabIndex:w=0}=s??{},T=(l==null?void 0:l.id)===e,b=y.useContext(T?R2:EK),[_,E]=df(),[C,P]=df(),M=lK(o,e),I=ru(n);Qr(()=>(h.set(e,{id:e,key:i,node:_,activatorNode:C,data:I}),()=>{const k=h.get(e);k&&k.key===i&&h.delete(e)}),[h,e]);const S=y.useMemo(()=>({role:m,tabIndex:w,"aria-disabled":r,"aria-pressed":T&&m===JT?!0:void 0,"aria-roledescription":x,"aria-describedby":d.draggable}),[r,m,w,T,x,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:S,isDragging:T,listeners:r?void 0:M,node:_,over:p,setNodeRef:E,setActivatorNodeRef:P,transform:b}}function IK(){return y.useContext(A2)}const CK="Droppable",kK={timeout:25};function AK(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Lu(CK),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(Sp),d=y.useRef({disabled:n}),h=y.useRef(!1),p=y.useRef(null),m=y.useRef(null),{disabled:x,updateMeasurementsFor:w,timeout:T}={...kK,...s},b=ru(w??r),_=y.useCallback(()=>{if(!h.current){h.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),m.current=null},T)},[T]),E=Tp({callback:_,disabled:x||!o}),C=y.useCallback((S,k)=>{E&&(k&&(E.unobserve(k),h.current=!1),S&&E.observe(S))},[E]),[P,M]=df(C),I=ru(e);return y.useEffect(()=>{!E||!P.current||(E.disconnect(),h.current=!1,E.observe(P.current))},[P,E]),y.useEffect(()=>(a({type:bt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:P,rect:p,data:I}}),()=>a({type:bt.UnregisterDroppable,key:i,id:r})),[r]),y.useEffect(()=>{n!==d.current.disabled&&(a({type:bt.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,a]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:P,over:l,setNodeRef:M}}function lx(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function RK(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Td(t){return t!==null&&t>=0}function PK(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function NK(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const P2=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=lx(e,r,n),o=e[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},Sd={scaleX:1,scaleY:1},DK=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const a=(e=i[n])!=null?e:r;if(!a)return null;if(s===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...Sd}:null}const l=LK(i,s,n);return s>n&&s<=o?{x:0,y:-a.height-l,...Sd}:s<n&&s>=o?{x:0,y:a.height+l,...Sd}:{x:0,y:0,...Sd}};function LK(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const N2="Sortable",D2=un.createContext({activeIndex:-1,containerId:N2,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:P2,disabled:{draggable:!1,droppable:!1}});function jK(t){let{children:e,id:n,items:r,strategy:s=P2,disabled:i=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:d}=IK(),h=Lu(N2,n),p=a.rect!==null,m=y.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),x=o!=null,w=o?m.indexOf(o.id):-1,T=c?m.indexOf(c.id):-1,b=y.useRef(m),_=!PK(m,b.current),E=T!==-1&&w===-1||_,C=NK(i);Qr(()=>{_&&x&&d(m)},[_,m,x,d]),y.useEffect(()=>{b.current=m},[m]);const P=y.useMemo(()=>({activeIndex:w,containerId:h,disabled:C,disableTransforms:E,items:m,overIndex:T,useDragOverlay:p,sortedRects:RK(m,l),strategy:s}),[w,h,C.draggable,C.droppable,E,m,T,l,p,s]);return un.createElement(D2.Provider,{value:P},e)}const MK=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return lx(n,r,s).indexOf(e)},OK=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==i&&s===o?!1:n?!0:o!==s&&e===l},VK={duration:200,easing:"ease"},L2="transform",FK=iu.Transition.toString({property:L2,duration:0,easing:"linear"}),UK={roleDescription:"sortable"};function BK(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=y.useState(null),a=y.useRef(n);return Qr(()=>{if(!e&&n!==a.current&&r.current){const l=s.current;if(l){const c=ul(r.current,{ignoreTransform:!0}),d={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(d.x||d.y)&&o(d)}}n!==a.current&&(a.current=n)},[e,n,r,s]),y.useEffect(()=>{i&&o(null)},[i]),i}function $K(t){let{animateLayoutChanges:e=OK,attributes:n,disabled:r,data:s,getNewIndex:i=MK,id:o,strategy:a,resizeObserverConfig:l,transition:c=VK}=t;const{items:d,containerId:h,activeIndex:p,disabled:m,disableTransforms:x,sortedRects:w,overIndex:T,useDragOverlay:b,strategy:_}=y.useContext(D2),E=zK(r,m),C=d.indexOf(o),P=y.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...s}),[h,s,C,d]),M=y.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:I,node:S,isOver:k,setNodeRef:R}=AK({id:o,data:P,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...l}}),{active:D,activatorEvent:O,activeNodeRect:N,attributes:X,setNodeRef:W,listeners:Y,isDragging:H,over:F,setActivatorNodeRef:U,transform:j}=SK({id:o,data:P,attributes:{...UK,...n},disabled:E.draggable}),L=oG(R,W),G=!!D,ee=G&&!x&&Td(p)&&Td(T),re=!b&&H,oe=re&&ee?j:null,ne=ee?oe??(a??_)({rects:w,activeNodeRect:N,activeIndex:p,overIndex:T,index:C}):null,ce=Td(p)&&Td(T)?i({id:o,items:d,activeIndex:p,overIndex:T}):C,we=D==null?void 0:D.id,ie=y.useRef({activeId:we,items:d,newIndex:ce,containerId:h}),ke=d!==ie.current.items,_e=e({active:D,containerId:h,isDragging:H,isSorting:G,id:o,index:C,items:d,newIndex:ie.current.newIndex,previousItems:ie.current.items,previousContainerId:ie.current.containerId,transition:c,wasDragging:ie.current.activeId!=null}),Le=BK({disabled:!_e,index:C,node:S,rect:I});return y.useEffect(()=>{G&&ie.current.newIndex!==ce&&(ie.current.newIndex=ce),h!==ie.current.containerId&&(ie.current.containerId=h),d!==ie.current.items&&(ie.current.items=d)},[G,ce,h,d]),y.useEffect(()=>{if(we===ie.current.activeId)return;if(we!=null&&ie.current.activeId==null){ie.current.activeId=we;return}const Qe=setTimeout(()=>{ie.current.activeId=we},50);return()=>clearTimeout(Qe)},[we]),{active:D,activeIndex:p,attributes:X,data:P,rect:I,index:C,newIndex:ce,items:d,isOver:k,isSorting:G,isDragging:H,listeners:Y,node:S,overIndex:T,over:F,setNodeRef:L,setActivatorNodeRef:U,setDroppableNodeRef:R,setDraggableNodeRef:W,transform:Le??ne,transition:he()};function he(){if(Le||ke&&ie.current.newIndex===C)return FK;if(!(re&&!rx(O)||!c)&&(G||_e))return iu.Transition.toString({...c,property:L2})}}function zK(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function pf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const WK=[Ie.Down,Ie.Right,Ie.Up,Ie.Left],HK=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:a}}=e;if(WK.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=s.get(h.id);if(p)switch(t.code){case Ie.Down:r.top<p.top&&l.push(h);break;case Ie.Up:r.top>p.top&&l.push(h);break;case Ie.Left:r.left>p.left&&l.push(h);break;case Ie.Right:r.left<p.left&&l.push(h);break}});const c=EG({collisionRect:r,droppableRects:s,droppableContainers:l});let d=v2(c,"id");if(d===(o==null?void 0:o.id)&&c.length>1&&(d=c[1].id),d!=null){const h=i.get(n.id),p=i.get(d),m=p?s.get(p.id):null,x=p==null?void 0:p.node.current;if(x&&m&&h&&p){const T=Ep(x).some((M,I)=>a[I]!==M),b=j2(h,p),_=qK(h,p),E=T||!b?{x:0,y:0}:{x:_?r.width-m.width:0,y:_?r.height-m.height:0},C={x:m.left,y:m.top};return E.x&&E.y?C:su(C,E)}}}};function j2(t,e){return!pf(t)||!pf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function qK(t,e){return!pf(t)||!pf(e)||!j2(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const GK=({id:t,gift:e,index:n,onRemove:r})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l}=$K({id:t}),c={transform:iu.Transform.toString(a),transition:l};return f.jsxs("div",{ref:o,style:c,...s,...i,className:"bg-white p-3 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-3 mb-3 touch-none",children:[f.jsx("div",{className:"text-slate-300",children:f.jsx(i5,{size:20})}),f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${n===0?"bg-yellow-100 text-yellow-600":n===1?"bg-slate-100 text-slate-500":n===2?"bg-orange-100 text-orange-600":"bg-slate-50 text-slate-400"}`,children:n<3?f.jsx(vA,{size:14}):n+1}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("p",{className:"font-medium text-darkbg truncate",children:(e==null?void 0:e.title)||"Unknown Gift"})}),f.jsx("button",{onClick:()=>r(t),className:"p-2 text-slate-300 hover:text-red-400",children:f.jsx(Er,{size:18})})]})},KK=()=>{const{user:t,userProfile:e}=Ct(),[n,r]=y.useState([]),[s,i]=y.useState([]),[o,a]=y.useState(""),l=xG(UT(ax,{activationConstraint:{distance:5}}),UT(ix,{coordinateGetter:HK}));y.useEffect(()=>{(async()=>{if(t)try{e!=null&&e.top5&&i(e.top5);const{collection:T,query:b,where:_,getDocs:E}=await h2(async()=>{const{collection:I,query:S,where:k,getDocs:R}=await Promise.resolve().then(()=>eN);return{collection:I,query:S,where:k,getDocs:R}},[]),C=b(T(le,"gifts"),_("ownerId","==",t.uid)),M=(await E(C)).docs.map(I=>({id:I.id,...I.data()}));r(M)}catch(T){console.error("Error loading top 5 data",T)}})()},[t,e]);const c=w=>{const{active:T,over:b}=w;T.id!==b.id&&i(_=>{const E=_.indexOf(T.id),C=_.indexOf(b.id),P=lx(_,E,C);return d(P),P})},d=async w=>{if(t)try{await tr(et(le,"users",t.uid),{top5:w})}catch(T){console.error("Error saving top 5",T)}},h=w=>{if(s.length>=5){alert("You can only have 5 top wishes! Remove one first.");return}if(s.includes(w))return;const T=[...s,w];i(T),d(T)},p=w=>{const T=s.filter(b=>b!==w);i(T),d(T)},m=s.map(w=>n.find(T=>T.id===w)).filter(Boolean),x=n.filter(w=>{var T;return!s.includes(w.id)&&((T=w.title)==null?void 0:T.toLowerCase().includes(o.toLowerCase()))});return f.jsxs("div",{className:"min-h-screen bg-lightbg font-sans pb-32",children:[f.jsxs("header",{className:"bg-darkbg text-white px-6 pt-12 pb-8 rounded-b-3xl shadow-xl mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(vA,{className:"text-yellow-400",size:24}),f.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Top 5 Wishes"})]}),f.jsx("p",{className:"text-slate-400 text-sm",children:"Rank your most wanted gifts for your partner to see."})]}),f.jsxs("main",{className:"px-6 space-y-6",children:[f.jsxs("section",{children:[f.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3 flex justify-between",children:f.jsxs("span",{children:["Your Top 5 (",s.length,"/5)"]})}),f.jsx(bK,{sensors:l,collisionDetection:bG,onDragEnd:c,children:f.jsx(jK,{items:s,strategy:DK,children:f.jsxs("div",{className:"space-y-1",children:[m.map((w,T)=>f.jsx(GK,{id:w.id,gift:w,index:T,onRemove:p},w.id)),s.length===0&&f.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center text-slate-400",children:[f.jsx(k1,{size:32,className:"mb-2 opacity-20"}),f.jsx("p",{className:"text-sm",children:"Drag or add gifts here"})]})]})})})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Add from Wishlist"}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx(mA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-300",size:16}),f.jsx("input",{type:"text",placeholder:"Search gifts...",value:o,onChange:w=>a(w.target.value),className:"w-full bg-white pl-9 pr-4 py-3 rounded-xl border border-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),f.jsxs("div",{className:"space-y-3",children:[x.map(w=>f.jsxs(qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-white p-3 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[f.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0",children:w.imageUrl?f.jsx("img",{src:w.imageUrl,alt:w.title,className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:f.jsx(k1,{size:12})})}),f.jsx("p",{className:"text-sm font-medium text-darkbg truncate",children:w.title})]}),f.jsx("button",{onClick:()=>h(w.id),disabled:s.length>=5,className:"w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white transition-colors",children:f.jsx(Ff,{size:16})})]},w.id)),x.length===0&&o&&f.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:"No gifts found."})]})]})]})]})},QK=()=>{const[t]=PC(),e=It(),{user:n,loading:r}=Ct(),[s,i]=y.useState(!1);return y.useEffect(()=>{const o=setTimeout(()=>{i(!0)},1500);return()=>clearTimeout(o)},[]),y.useEffect(()=>{if(r||!s)return;const o=t.get("url"),a=t.get("text"),l=t.get("title");let c=o;if(!c&&a){const d=a.match(/(https?:\/\/[^\s]+)/g);d&&d.length>0&&(c=d[0])}if(!c&&a&&a.startsWith("http")&&(c=a),!c){console.warn("ShareTarget: No URL found"),e("/dashboard",{replace:!0});return}n?e("/dashboard",{replace:!0,state:{openAddGift:!0,initialUrl:c,initialTitle:l||""}}):(localStorage.setItem("pendingShareUrl",c),l&&localStorage.setItem("pendingShareTitle",l),e("/login",{replace:!0}))},[n,r,s,t,e]),f.jsx("div",{className:"flex items-center justify-center h-screen bg-lightbg text-darkbg font-sans",children:f.jsxs("div",{className:"flex flex-col items-center gap-6 p-8 bg-white rounded-3xl shadow-xl max-w-sm w-full mx-4 text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center text-primary animate-pulse",children:f.jsx(go,{size:32})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold mb-2",children:"Processing Gift..."}),f.jsx("p",{className:"text-slate-500 text-sm",children:"Do not close the app."})]}),f.jsx("div",{className:"w-full bg-slate-100 h-1.5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-primary animate-progress-indeterminate"})})]})})},YK=()=>{const{id:t}=e0(),e=It(),[n,r]=y.useState(null),[s,i]=y.useState(!0);if(y.useEffect(()=>{(async()=>{if(t)try{const h=et(le,"greetings",t),p=await Ru(h);p.exists()&&r(p.data())}catch(h){console.error(h)}finally{i(!1)}})()},[t]),s)return f.jsx("div",{className:"min-h-screen bg-lightbg flex items-center justify-center",children:f.jsx(In,{className:"animate-spin text-primary"})});if(!n)return f.jsx("div",{className:"min-h-screen bg-lightbg flex items-center justify-center",children:"Greeting not found."});const{theme:o,message:a,senderName:l,videoUrl:c}=n;return f.jsxs("div",{className:"min-h-screen bg-lightbg flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[o==="party"&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 pointer-events-none"}),f.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-in fade-in zoom-in duration-500",children:[f.jsxs("div",{className:`p-8 text-center text-white relative overflow-hidden
                    ${o==="party"?"bg-gradient-to-br from-indigo-400 to-cyan-400":o==="heart"?"bg-gradient-to-br from-rose-400 to-red-400":o==="funny"?"bg-gradient-to-br from-yellow-400 to-orange-400":"bg-slate-100 text-slate-800"}
                 `,children:[o==="party"&&f.jsx(B0,{className:"absolute top-4 right-4 opacity-50 w-8 h-8"}),o==="heart"&&f.jsx(go,{className:"absolute top-4 right-4 opacity-50 w-8 h-8"}),f.jsxs("h1",{className:"text-3xl font-bold mb-2 font-handwriting",children:[l," sent you a wish!"]})]}),c&&f.jsx("div",{className:"aspect-video bg-black relative group",children:f.jsx("video",{src:c,className:"w-full h-full object-cover",controls:!0,autoPlay:!0})}),f.jsx("div",{className:"p-8 text-center",children:f.jsxs("p",{className:"text-xl font-medium text-slate-700 leading-relaxed font-handwriting",children:['"',a,'"']})}),f.jsx("div",{className:"p-6 bg-slate-50 border-t border-slate-100 text-center",children:f.jsx("button",{onClick:()=>e("/"),className:"text-primary font-bold text-sm hover:underline",children:"Send a return wish on WishU"})})]})]})},XK=()=>{const{t}=Si(),[e,n]=y.useState(!1),[r,s]=y.useState(null),[i,o]=y.useState(!1),[a,l]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const p=localStorage.getItem("installPromptDismissedAt");if(p&&(Date.now()-parseInt(p,10))/864e5<7)return;const m=window.navigator.userAgent.toLowerCase(),x=/iphone|ipad|ipod/.test(m);if(o(x),x){const b=setTimeout(()=>n(!0),3e3);return()=>clearTimeout(b)}const w=b=>{b.preventDefault(),s(b),n(!0)};window.addEventListener("beforeinstallprompt",w);const T=setTimeout(()=>{n(b=>b||!0)},5e3);return()=>{window.removeEventListener("beforeinstallprompt",w),clearTimeout(T)}},[]);const c=async()=>{if(r){r.prompt();const{outcome:h}=await r.userChoice;console.log(`User choice: ${h}`),s(null),n(!1)}else l(!0)},d=()=>{n(!1),localStorage.setItem("installPromptDismissedAt",Date.now().toString())};return e?f.jsx(_s,{children:f.jsx("div",{className:"fixed inset-x-0 bottom-0 z-50 pointer-events-none flex justify-center pb-6 px-4",children:f.jsxs(qe.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"pointer-events-auto w-full max-w-sm bg-white/90 backdrop-blur-md border border-pink-100 rounded-3xl shadow-2xl p-5 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-pink-200/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-purple-200/20 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2"}),f.jsx("button",{onClick:d,className:"absolute top-3 right-3 p-1 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors","aria-label":t("close"),children:f.jsx(Er,{size:18})}),f.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-2xl flex items-center justify-center text-primary",children:f.jsx(U0,{size:20,fill:"currentColor"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-darkbg text-lg leading-tight",children:t("install_title")}),f.jsx("p",{className:"text-xs text-slate-500",children:t(i?"install_desc_ios":"install_desc_android")})]})]}),i?f.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 flex items-center gap-3 border border-slate-100",children:[f.jsx(f5,{size:20,className:"text-blue-500 animate-bounce"}),f.jsx("p",{className:"text-sm text-slate-600 font-medium",children:t("install_ios_instruction")})]}):f.jsx(f.Fragment,{children:a?f.jsxs(qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-amber-50 rounded-xl p-3 flex items-center gap-3 border border-amber-100",children:[f.jsx(c5,{size:20,className:"text-amber-600 animate-bounce"}),f.jsx("p",{className:"text-sm text-slate-700 font-medium",children:t("install_android_manual")})]}):f.jsx("button",{onClick:c,className:"w-full bg-primary text-white font-bold py-3 rounded-xl shadow-lg shadow-primary/30 active:scale-95 transition-all text-sm",children:t("install_button")})})]})]})})}):null},JK=()=>{const[t]=PC(),e=It(),{user:n,loading:r}=Ct(),{showToast:s}=Jw(),i=y.useRef(!1);return y.useEffect(()=>{if(r||i.current)return;(async()=>{const a=t.get("from");if(!a){e("/");return}if(n){if(i.current=!0,n.uid===a){e("/dashboard");return}try{const l=ft(Ve(le,"friendships"),Tt("users","array-contains",n.uid));(await Jt(l)).docs.some(h=>h.data().users.includes(a))||(await _o(Ve(le,"friendships"),{users:[n.uid,a],senderId:a,status:"accepted",createdAt:bo()}),s("You are now connected!","success")),e(`/friend/${a}`)}catch(l){console.error("Invite error",l),e("/")}}else localStorage.setItem("pendingInvite",a),e("/")})()},[t,n,r,e,s]),f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-darkbg text-primary",children:"Connecting..."})},ZK=()=>{const{user:t}=Ct(),{showToast:e}=Jw(),n=y.useRef(!1);return y.useEffect(()=>{(async()=>{if(!t||n.current)return;const s=localStorage.getItem("pendingInvite");if(s){if(s===t.uid){localStorage.removeItem("pendingInvite");return}try{const i=ft(Ve(le,"friendships"),Tt("users","array-contains",t.uid));(await Jt(i)).docs.some(l=>l.data().users.includes(s))||(await _o(Ve(le,"friendships"),{users:[t.uid,s],senderId:s,status:"accepted",createdAt:bo()}),e("You are now connected with your friend!","success")),localStorage.removeItem("pendingInvite"),n.current=!0}catch(i){console.error("Error creating friendship from invite:",i)}}})()},[t,e]),null},cx=({onAddClick:t})=>{const e=Ir(),n=It(),{user:r}=Ct(),s=e.pathname,[i,o]=y.useState(0),a=l=>l==="/dashboard"?s==="/dashboard"||s==="/":s===l||s.startsWith(l+"/");return y.useEffect(()=>{if(!r)return;const l=ft(Ve(le,"friendships"),Tt("receiverId","==",r.uid),Tt("status","==","pending")),c=jo(l,d=>{o(d.docs.length)});return()=>c()},[r]),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 pointer-events-auto",children:f.jsxs("div",{className:"bg-primary pt-3 pb-6 px-4 flex justify-around items-center border-t border-white/5 shadow-[0_-5px_25px_rgba(0,0,0,0.3)] relative min-h-[85px]",children:[f.jsxs("div",{className:"flex flex-1 justify-around items-center",children:[f.jsx(Id,{icon:f.jsx(o5,{size:24,strokeWidth:2.5}),label:"Home",active:a("/dashboard"),onClick:()=>n("/dashboard")}),f.jsxs("div",{className:"relative",children:[f.jsx(Id,{icon:f.jsx(Mh,{size:24,strokeWidth:2.5}),label:"Friends",active:a("/friends"),onClick:()=>n("/friends")}),i>0&&f.jsx("div",{className:"absolute top-1 -right-1 bg-secondary text-primary text-[10px] font-bold w-4 h-4 flex items-center justify-center rounded-full",children:i})]})]}),f.jsx("div",{className:"relative flex justify-center w-20",children:f.jsx(qe.button,{whileHover:{scale:1.1,y:-45},whileTap:{scale:.95},onClick:t,className:"w-16 h-16 bg-secondary rounded-full flex items-center justify-center shadow-[0_10px_20px_rgba(231,155,227,0.3)] text-white cursor-pointer absolute -top-12 border-4 border-white transition-all active:shadow-inner",children:f.jsx(Ff,{size:36,strokeWidth:3.5})})}),f.jsxs("div",{className:"flex flex-1 justify-around items-center",children:[f.jsx(Id,{icon:f.jsx(uA,{size:24,strokeWidth:2.5}),label:"Dates",active:a("/calendar"),onClick:()=>n("/calendar")}),f.jsx(Id,{icon:f.jsx(yy,{size:24,strokeWidth:2.5}),label:"Profile",active:a("/profile"),onClick:()=>n("/profile")})]})]})})},Id=({icon:t,active:e=!1,onClick:n})=>f.jsx(qe.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,className:`p-2 transition-all duration-300 relative group flex flex-col items-center justify-center ${e?"text-white":"text-white/80 hover:text-white"}`,children:e?f.jsxs("div",{className:"flex flex-col items-center",children:[t,f.jsx(qe.div,{layoutId:"active-dot",className:"w-1.5 h-1.5 bg-secondary rounded-full mt-1"})]}):t}),co=y.forwardRef(({label:t,error:e,className:n="",...r},s)=>f.jsxs("div",{className:"mb-4 w-full",children:[t&&f.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ms-1",children:t}),f.jsx("input",{ref:s,className:`w-full bg-white border border-slate-200 rounded-2xl px-5 py-4 text-darkbg placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent transition-all shadow-sm ${e?"border-red-500 focus:ring-red-200":""} ${n}`,...r}),e&&f.jsx("p",{className:"text-red-500 text-sm mt-1 ms-1",children:e})]}));co.displayName="Input";const eQ=y.forwardRef(({label:t,error:e,className:n="",...r},s)=>f.jsxs("div",{className:"mb-4 w-full",children:[t&&f.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ms-1",children:t}),f.jsx("textarea",{ref:s,className:`w-full bg-white border border-slate-200 rounded-2xl px-5 py-4 text-darkbg placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent transition-all shadow-sm resize-none ${e?"border-red-500 focus:ring-red-200":""} ${n}`,...r}),e&&f.jsx("p",{className:"text-red-500 text-sm mt-1 ms-1",children:e})]}));eQ.displayName="TextArea";const tQ=["hm.com","adidas.co.il","adidas.com","zara.com"],nQ=t=>{try{const e=new URL(t).hostname.toLowerCase();return tQ.some(n=>e.includes(n))}catch{return!1}},rQ=t=>{try{const e=new URL(t),n=[];return e.searchParams.forEach((r,s)=>{const i=s.toLowerCase();(i.startsWith("utm_")||i==="fbclid"||i==="gclid"||i==="msclkid"||i.startsWith("mc_")||i.startsWith("_ga")||i==="affiliate"||i==="clickid")&&n.push(s)}),n.forEach(r=>e.searchParams.delete(r)),e.toString()}catch{return t}},sQ=async t=>{console.log("Scraper: Calling Firebase Cloud Function for:",t);try{const n=await U7(yH,"scrapeProductDetails",{timeout:65e3})({url:t});return console.log("Scraper: Cloud function returned:",n.data),n.data.error?(console.warn("Scraper: Cloud function error:",n.data.error),null):n.data}catch(e){return console.error("Scraper: Cloud function failed:",e),null}},M2=async t=>{var e;console.log("Scraper: Starting fetch for URL:",t);try{if(!t)return console.log("Scraper: Empty URL provided"),null;if(nQ(t))return console.log("Scraper: Blocked domain:",t),{title:"",description:"",image:"",url:t,isBlocked:!0,message:"This site blocks automated access. Please enter details manually.",priceSource:"none"};const n=rQ(t),r=await sQ(n);return r&&(r.title||r.price)?(console.log("Scraper: Success!",{title:(e=r.title)==null?void 0:e.substring(0,50),price:r.price}),{title:r.title,description:r.description,image:r.image,url:n,price:r.price,currency:r.currency,isBlocked:!1,priceSource:r.priceSource}):(console.warn("Scraper: No data from cloud function"),{title:"",description:"",image:"",url:t,isBlocked:!0,message:"Could not fetch product details. Please enter manually.",priceSource:"none"})}catch(n){return console.error("Scraper failed:",n),{title:"",description:"",image:"",url:t,isBlocked:!0,message:"We couldn't grab the details automatically. Please enter them manually.",priceSource:"none"}}},iQ=({onClose:t,initialUrl:e})=>{const{t:n}=Si(),{user:r}=Ct(),[s,i]=y.useState(e||""),[o,a]=y.useState(""),[l,c]=y.useState(""),[d,h]=y.useState(""),[p,m]=y.useState(["Friends","Family","Partner","Work","Other"]),[x,w]=y.useState(!1),[T,b]=y.useState(!1),[_,E]=y.useState(""),[C,P]=y.useState(!1),[M,I]=y.useState(!1),S=y.useRef(""),k=y.useRef(null),R=y.useRef(null);y.useEffect(()=>{let W=!1,Y;const H=setTimeout(async()=>{if(console.log("AddGift: Effect triggered with link:",s),s&&s.startsWith("http")&&s!==S.current){console.log("AddGift: Starting scrape for:",s),b(!0),E(" Searching deeply for price... (this may take 15-20 seconds)"),S.current=s,Y=setTimeout(()=>{var U;W||(console.log("AddGift: Still searching - prompting manual input"),E(" Deep search in progress... You can enter details manually below while we keep looking."),(U=R.current)==null||U.focus())},8e3);const F=await M2(s);if(clearTimeout(Y),W)return;console.log("AddGift: Scrape result:",F),F?F.isBlocked?(E(F.message||"Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=R.current)==null?void 0:U.focus()},100)):(F.title&&!o&&a(F.title),F.image&&!d&&h(F.image),F.price?(l?E(` Found price: ${F.price} (keeping your entry)`):(c(F.price),E(` Price found: ${F.price}`)),setTimeout(()=>E(""),3e3)):(E(" Price not found. Please enter manually."),l||setTimeout(()=>{var U;return(U=R.current)==null?void 0:U.focus()},100))):(console.warn("AddGift: Scraper returned no data"),E("Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=R.current)==null?void 0:U.focus()},100)),b(!1)}else(!s||!s.startsWith("http"))&&console.log("AddGift: Link ignored (empty or no http)")},800);return()=>{W=!0,clearTimeout(H),clearTimeout(Y)}},[s]);const D=W=>/\d/.test(W),O=W=>{var F;const Y=(F=W.target.files)==null?void 0:F[0];if(!Y)return;const H=new FileReader;H.onloadend=()=>{h(H.result)},H.readAsDataURL(Y)},N=async()=>{if(I(!0),!D(l)){P(!0);return}if(P(!1),!o){console.warn("Missing title");return}if(!r){console.warn("Missing user");return}w(!0);try{await _o(Ve(le,"gifts"),{ownerId:r.uid,title:o,price:l,link:s,imageUrl:d,status:"available",visibility:p,createdAt:bo()}),t()}catch(W){console.error("Failed to add gift",W),alert("Error adding gift")}finally{w(!1)}},X=M&&!D(l);return f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-end sm:items-center justify-center p-4 sm:p-6",children:f.jsxs(qe.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"bg-lightbg w-full max-w-lg rounded-3xl p-6 shadow-2xl relative max-h-[90vh] overflow-y-auto scrollbar-thin",children:[f.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 bg-slate-100 rounded-full text-slate-500 hover:bg-slate-200",children:f.jsx(Er,{size:20})}),f.jsx("h2",{className:"text-2xl font-bold text-darkbg mb-6 text-center",children:n("add_gift")}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(co,{value:s,onChange:W=>i(W.target.value),placeholder:n("paste_link"),label:"Link",className:"pl-10"}),f.jsx("div",{className:"absolute left-3 top-[38px] text-slate-400",children:T?f.jsx(In,{size:18,className:"animate-spin text-primary"}):f.jsx(fA,{size:18})})]}),_&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-xl text-amber-700 text-sm animate-pulse",children:[f.jsx(Nh,{size:18}),f.jsx("span",{children:_})]}),f.jsxs("div",{className:"flex gap-4 p-3 bg-white rounded-2xl shadow-sm border border-slate-100",children:[f.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center relative cursor-pointer group",onClick:()=>{var W;return(W=k.current)==null?void 0:W.click()},children:d?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:f.jsx(jh,{size:20,className:"text-white"})})]}):f.jsxs("div",{className:"flex flex-col items-center gap-1 text-slate-300",children:[f.jsx(hA,{size:24}),f.jsx("span",{className:"text-[10px]",children:"Upload"})]})}),f.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:O,className:"hidden"}),f.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[f.jsx("h4",{className:"font-semibold text-sm text-darkbg truncate",children:o||"Gift Title"}),f.jsx("p",{className:"text-xs text-slate-500 truncate",children:s||"Paste a link above"}),!d&&f.jsxs("button",{onClick:()=>{var W;return(W=k.current)==null?void 0:W.click()},className:"mt-1 text-xs text-primary font-medium flex items-center gap-1",children:[f.jsx(jh,{size:12}),"Upload image"]})]})]}),f.jsx(co,{value:o,onChange:W=>a(W.target.value),placeholder:n("gift_title"),label:n("gift_title")}),f.jsxs("div",{children:[f.jsx(co,{ref:R,value:l,onChange:W=>{c(W.target.value),C&&D(W.target.value)&&P(!1)},placeholder:n("price")+" (e.g. 100)",label:n("price")+" *",className:X?"border-red-500 focus:ring-red-500":""}),X&&f.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[f.jsx(Nh,{size:12}),"Price is required"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Who can see this?"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["Friends","Family","Partner","Work","Other"].map(W=>f.jsx("button",{onClick:()=>{p.includes(W)?m(p.filter(Y=>Y!==W)):m([...p,W])},className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-colors ${p.includes(W)?"bg-darkbg text-white border-darkbg":"bg-white text-slate-400 border-slate-200"}`,children:W},W))})]})]}),f.jsxs("button",{onClick:N,disabled:!o||x,className:"w-full py-4 bg-primary text-white rounded-2xl font-bold text-lg shadow-xl shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:hover:scale-100 mt-4 flex items-center justify-center gap-2",children:[x?f.jsx(In,{className:"animate-spin"}):f.jsx(Ff,{size:20}),n("add_gift")]})]})})},oQ=({gift:t,onClose:e})=>{const{t:n}=Si(),{user:r}=Ct(),[s,i]=y.useState(t.link||""),[o,a]=y.useState(t.title||""),[l,c]=y.useState(t.price||""),[d,h]=y.useState(t.imageUrl||""),[p,m]=y.useState(t.visibility||["Friends","Family","Partner","Work","Other"]),[x,w]=y.useState(!1),[T,b]=y.useState(!1),[_,E]=y.useState(""),[C,P]=y.useState(!1),[M,I]=y.useState(!1),S=y.useRef(null),k=y.useRef(null),R=H=>/\d/.test(H),D=async()=>{if(!s)return;b(!0),E(" Searching for price...");const H=setTimeout(()=>{var F;E(" Still searching... You can update details manually below."),(F=k.current)==null||F.focus()},4e3);try{const F=await M2(s);clearTimeout(H),F?F.isBlocked?(E(F.message||"Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100)):(F.title&&a(F.title),F.image&&h(F.image),F.price?(c(F.price),E(` Price found: ${F.price}`),setTimeout(()=>E(""),3e3)):(E(" Price not found. Please enter manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100))):(E("Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100))}catch(F){clearTimeout(H),console.error("Resync failed",F),E("Sync failed. Please update manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100)}finally{b(!1)}},O=H=>{var j;const F=(j=H.target.files)==null?void 0:j[0];if(!F)return;const U=new FileReader;U.onloadend=()=>{h(U.result)},U.readAsDataURL(F)},N=async()=>{if(I(!0),!R(l)){P(!0);return}if(P(!1),!(!r||!o)){w(!0);try{await tr(et(le,"gifts",t.id),{title:o,price:l,link:s,imageUrl:d,visibility:p,updatedAt:new Date}),e()}catch(H){console.error("Failed to update gift",H),alert("Error updating gift")}finally{w(!1)}}},X=async()=>{if(confirm(n("delete_confirm")||"Are you sure you want to delete this gift?")){w(!0);try{await yp(et(le,"gifts",t.id)),e()}catch(H){console.error("Failed to delete gift",H),alert("Error deleting gift"),w(!1)}}},W=H=>{p.includes(H)?m(p.filter(F=>F!==H)):m([...p,H])},Y=M&&!R(l);return f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",onClick:e,children:f.jsxs(qe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-lightbg w-full max-w-lg rounded-3xl p-6 shadow-2xl relative max-h-[90vh] overflow-y-auto scrollbar-thin",onClick:H=>H.stopPropagation(),children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-slate-100 rounded-full text-slate-500 hover:bg-slate-200 transition-colors",children:f.jsx(Er,{size:20})}),f.jsx("h2",{className:"text-2xl font-bold text-darkbg mb-6",children:"Edit Gift"}),f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(co,{value:s,onChange:H=>i(H.target.value),placeholder:n("paste_link"),label:"Link",className:"pl-10"}),f.jsx("div",{className:"absolute left-3 top-[38px] text-slate-400",children:f.jsx(fA,{size:18})})]}),f.jsx("button",{onClick:D,disabled:T,className:"p-3 bg-secondary text-slate-600 rounded-xl hover:bg-slate-300 transition-colors mb-[2px]",title:"Re-sync data",children:T?f.jsx(In,{size:20,className:"animate-spin"}):f.jsx(u5,{size:20})})]}),_&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-xl text-amber-700 text-sm animate-pulse",children:[f.jsx(Nh,{size:18}),f.jsx("span",{children:_})]}),f.jsxs("div",{className:"flex gap-4 p-3 bg-white rounded-2xl shadow-sm border border-slate-100",children:[f.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center relative cursor-pointer group",onClick:()=>{var H;return(H=S.current)==null?void 0:H.click()},children:d?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:f.jsx(jh,{size:20,className:"text-white"})})]}):f.jsxs("div",{className:"flex flex-col items-center gap-1 text-slate-300",children:[f.jsx(hA,{size:24}),f.jsx("span",{className:"text-[10px]",children:"Upload"})]})}),f.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:O,className:"hidden"}),f.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[f.jsx("h4",{className:"font-semibold text-sm text-darkbg truncate",children:o}),f.jsx("p",{className:"text-xs text-slate-500 truncate",children:s}),!d&&f.jsxs("button",{onClick:()=>{var H;return(H=S.current)==null?void 0:H.click()},className:"mt-1 text-xs text-primary font-medium flex items-center gap-1",children:[f.jsx(jh,{size:12}),"Upload image"]})]})]}),f.jsx(co,{value:o,onChange:H=>a(H.target.value),placeholder:"Gift Title",label:"Title"}),f.jsxs("div",{children:[f.jsx(co,{ref:k,value:l,onChange:H=>{c(H.target.value),C&&R(H.target.value)&&P(!1)},placeholder:"Price (e.g. 100)",label:"Price *",className:Y?"border-red-500 focus:ring-red-500":""}),Y&&f.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[f.jsx(Nh,{size:12}),"Price is required"]})]}),f.jsxs("div",{className:"p-4 bg-white rounded-2xl border border-slate-100",children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Who can see this?"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["Friends","Family","Partner","Work","Other"].map(H=>f.jsx("button",{onClick:()=>W(H),className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-colors ${p.includes(H)?"bg-darkbg text-white border-darkbg":"bg-white text-slate-400 border-slate-200 hover:border-slate-300"}`,children:H},H))})]}),f.jsxs("div",{className:"flex gap-3 pt-2",children:[f.jsx("button",{onClick:X,disabled:x,className:"px-4 py-3 bg-red-50 text-red-500 rounded-xl font-bold hover:bg-red-100 transition-colors flex items-center gap-2",children:f.jsx(yA,{size:20})}),f.jsxs("button",{onClick:N,disabled:!o||x,className:"flex-1 py-3 bg-primary text-white rounded-xl font-bold hover:brightness-110 active:scale-95 transition-all flex items-center justify-center gap-2",children:[x?f.jsx(In,{className:"animate-spin"}):f.jsx(h5,{size:20}),"Save Changes"]})]})]})]})})},aQ=({greetingId:t,onClose:e})=>{const[n,r]=y.useState(null),[s,i]=y.useState(!1);y.useEffect(()=>{(async()=>{if(t){i(!0);try{const l=await Ru(et(le,"greetings",t));l.exists()&&r(l.data())}catch(l){console.error("Error fetching greeting:",l)}finally{i(!1)}}})()},[t]);const o=a=>{a.target===a.currentTarget&&e()};return t?f.jsx(_s,{children:f.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-darkbg/90 backdrop-blur-md z-[100] flex items-center justify-center p-4 overflow-hidden",onClick:o,children:[f.jsx(qe.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] aspect-square bg-secondary rounded-full -z-10",style:{filter:"blur(40px)"}}),f.jsxs(qe.div,{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},className:"bg-white rounded-[40px] w-full max-w-lg shadow-2xl relative overflow-hidden flex flex-col",onClick:a=>a.stopPropagation(),children:[f.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full text-slate-500 hover:bg-slate-200 transition-all z-20",children:f.jsx(Er,{size:20})}),s?f.jsxs("div",{className:"p-20 flex flex-col items-center justify-center gap-4",children:[f.jsx(In,{className:"animate-spin text-primary",size:32}),f.jsx("p",{className:"text-slate-400 font-medium",children:"Opening your wish..."})]}):n?f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("div",{className:`p-10 text-center text-white relative overflow-hidden
                                ${n.theme==="party"?"bg-gradient-to-br from-indigo-500 to-cyan-400":n.theme==="heart"?"bg-gradient-to-br from-rose-500 to-red-400":n.theme==="funny"?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-primary"}
                            `,children:[f.jsxs("div",{className:"relative z-10",children:[f.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:n.theme==="party"?f.jsx(B0,{size:32}):f.jsx(go,{size:32})}),f.jsx("h2",{className:"text-3xl font-black italic tracking-tight mb-2 uppercase",children:"Message From"}),f.jsx("p",{className:"text-5xl font-black drop-shadow-lg",children:n.senderName})]}),f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"})]}),f.jsxs("div",{className:"p-10 text-center space-y-8",children:[n.videoUrl&&f.jsx("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl bg-black border-4 border-slate-50 aspect-video group",children:f.jsx("video",{src:n.videoUrl,controls:!0,className:"w-full h-full object-cover",poster:`https://ui-avatars.com/api/?name=${n.senderName}&background=E79BE3&color=fff&size=512`})}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"text-primary/10 text-9xl font-black absolute -top-12 left-1/2 -translate-x-1/2 select-none",children:""}),f.jsx("p",{className:"text-2xl font-bold text-darkbg leading-relaxed font-handwriting relative z-10 px-4",children:n.message})]}),f.jsx("button",{onClick:e,className:"w-full py-4 bg-darkbg text-white rounded-2xl font-black text-lg tracking-wide uppercase hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl shadow-darkbg/20",children:"Close Wish"})]})]}):f.jsx("div",{className:"p-12 text-center text-slate-500",children:"Greeting not found or has been deleted."})]})]})}):null},lQ=({onOpenGreeting:t})=>{const[e,n]=y.useState(!1),{notifications:r,unreadCount:s,markAsRead:i,loading:o}=Zw(),a=It(),l=y.useRef(null);y.useEffect(()=>{const d=h=>{l.current&&!l.current.contains(h.target)&&n(!1)};return e&&document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[e]);const c=async d=>{n(!1),d.read||await i(d.id),d.type==="greeting"&&d.data.greetingId?t(d.data.greetingId):d.type==="birthday"&&d.data.friendId&&a(`/friend/${d.data.friendId}`)};return f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>n(!e),className:"p-2 text-primary hover:bg-slate-50 rounded-full transition-colors relative",children:[f.jsx(zc,{size:24}),s>0&&f.jsx("span",{className:"absolute top-1.5 right-1.5 w-5 h-5 bg-accent text-darkbg text-[10px] font-bold flex items-center justify-center rounded-full border-2 border-white",children:s>9?"9+":s})]}),f.jsx(_s,{children:e&&f.jsxs(f.Fragment,{children:[f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[60] sm:hidden",onClick:()=>n(!1)}),f.jsxs(qe.div,{ref:l,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"absolute right-0 top-full mt-2 w-[320px] sm:w-[380px] bg-white rounded-3xl shadow-2xl border border-slate-100 z-[70] overflow-hidden flex flex-col max-h-[500px]",children:[f.jsxs("div",{className:"p-4 border-b border-slate-50 flex items-center justify-between bg-white sticky top-0 z-10",children:[f.jsx("h3",{className:"font-bold text-darkbg",children:"Notifications"}),f.jsx("button",{onClick:()=>n(!1),className:"p-1 text-slate-400",children:f.jsx(Er,{size:18})})]}),f.jsxs("div",{className:"overflow-y-auto scrollbar-thin",children:[o&&f.jsx("div",{className:"p-10 flex justify-center",children:f.jsx(In,{className:"animate-spin text-primary"})}),!o&&r.length===0&&f.jsxs("div",{className:"p-12 text-center",children:[f.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-300",children:f.jsx(zc,{size:24})}),f.jsx("p",{className:"text-sm text-slate-400",children:"No notifications yet"})]}),!o&&r.map(d=>{var h;return f.jsxs("button",{onClick:()=>c(d),className:`w-full text-left p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors flex items-start gap-3 relative ${d.read?"":"bg-primary/5"}`,children:[f.jsx("div",{className:`mt-1 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                                            ${d.type==="greeting"?"bg-pink-100 text-pink-500":"bg-blue-100 text-blue-500"}
                                        `,children:d.type==="greeting"?f.jsx(pA,{size:16}):f.jsx(n5,{size:16})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-bold text-darkbg mb-0.5",children:d.title}),d.message&&f.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:d.message}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-1 uppercase font-medium",children:(h=d.createdAt)!=null&&h.toDate?d.createdAt.toDate().toLocaleDateString():"Just now"})]}),!d.read&&f.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),f.jsx("div",{className:"mt-2 text-slate-300",children:f.jsx(e5,{size:14})})]},d.id)})]}),r.length>0&&f.jsx("div",{className:"p-3 bg-slate-50 text-center",children:f.jsx("button",{onClick:()=>n(!1),className:"text-xs text-slate-500 font-bold hover:text-primary",children:"Close"})})]})]})})]})},cQ=({onSearch:t,onOpenGreeting:e=()=>{}})=>{const{searchQuery:n,setSearchQuery:r}=xp(),{headerState:s}=t2(),i=It(),o=a=>{r(a),t==null||t(a)};return f.jsx("header",{className:"bg-white px-6 pt-[5px] pb-[10px] sticky top-0 z-50",children:f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("div",{className:"w-10 flex justify-start",children:s.showBackButton?f.jsx("button",{onClick:()=>i(-1),className:"p-2 text-primary bg-secondary/20 rounded-full hover:bg-secondary/30 transition-colors",children:f.jsx(F0,{size:20})}):f.jsx("div",{className:"w-10"})}),f.jsx("div",{className:"flex-1 flex justify-center",children:f.jsx("img",{src:"/wishu_logo.png",alt:"WishU",className:"w-[160px] h-auto object-contain mix-blend-multiply"})}),f.jsx("div",{className:"w-10 flex justify-end",children:f.jsx(lQ,{onOpenGreeting:e})})]}),s.title&&f.jsxs("div",{className:"text-center mb-2",children:[f.jsx("h1",{className:"text-lg font-bold text-darkbg",children:s.title}),s.subtitle&&f.jsx("p",{className:"text-xs text-slate-400",children:s.subtitle})]}),f.jsx("div",{className:"relative w-full",children:s.customBottomBar?s.customBottomBar:f.jsxs("div",{className:"relative w-full",children:[f.jsx(mA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary",size:20}),f.jsx("input",{type:"text",value:n,placeholder:"",onChange:a=>o(a.target.value),className:"w-full bg-secondary text-primary font-medium rounded-full py-3.5 pl-12 pr-6 outline-none border-none placeholder-primary/60 focus:ring-2 focus:ring-primary/20 shadow-sm"})]})})]})})},uQ=()=>f.jsx(oq,{children:f.jsx(rq,{children:f.jsx(d2,{children:f.jsx(cq,{children:f.jsx(dQ,{})})})})}),dQ=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState(""),[s,i]=y.useState(null),{editingGift:o,setEditingGift:a}=Xw(),l=Ir(),c=It();y.useEffect(()=>{const h=l.state;h!=null&&h.openAddGift&&(h!=null&&h.initialUrl)&&(console.log("MainLayout: Opening AddGift with shared URL:",h.initialUrl),r(h.initialUrl),e(!0),c(l.pathname,{replace:!0,state:{}}))},[l.state,l.pathname,c]);const d=()=>{e(!1),r("")};return f.jsxs("div",{className:"min-h-screen bg-white font-sans",children:[f.jsx(cQ,{onSearch:h=>console.log("Search:",h),onOpenGreeting:i}),f.jsx("div",{className:"pb-24",children:f.jsx(SM,{})}),f.jsx(cx,{onAddClick:()=>e(!0)}),f.jsx(_s,{children:t&&f.jsx(iQ,{onClose:d,initialUrl:n})}),f.jsx(_s,{children:o&&f.jsx(oQ,{gift:o,onClose:()=>a(null)})}),f.jsx(aQ,{greetingId:s,onClose:()=>i(null)})]})},$o=({title:t,value:e,icon:n,trend:r,trendUp:s,onClick:i})=>f.jsxs("div",{onClick:i,className:`bg-white p-6 rounded-2xl shadow-sm border border-slate-100 transition-all duration-300 flex flex-col justify-between h-full
            ${i?"cursor-pointer hover:shadow-md hover:scale-[1.02] active:scale-[0.98]":"hover:shadow-md"}
            `,children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsx("div",{className:"p-3 bg-slate-50 rounded-xl text-primaryPink",children:n}),r&&f.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${s?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-slate-500 text-sm font-medium mb-1",children:t}),f.jsx("p",{className:"text-3xl font-bold text-deepNavy",children:e})]})]}),hQ=()=>{const t=It(),{requestPermission:e}=Zw(),[n,r]=y.useState({users:0,wishes:0,greetings:0,notifications:0,purchasedCount:0,totalValue:0}),[s,i]=y.useState([]),[o,a]=y.useState([]),[l,c]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const h=Ve(le,"users"),p=Ve(le,"gifts"),m=Ve(le,"greetings"),x=Ve(le,"NotificationQueue"),[w,T,b,_]=await Promise.all([Kl(h),Kl(p),Kl(m),Jt(ft(Ve(le,"notifications"),ua("createdAt","desc"),da(5)))]);console.log("Recent notifications:",_.docs.map(W=>W.data()));let E=0;try{E=(await Kl(x)).data().count}catch(W){console.log("NotificationQueue collection might not exist yet",W)}const C=ft(p,Tt("status","==","purchased")),P=await Jt(C),M=P.size;let I=0;P.forEach(W=>{const Y=W.data();if(Y.price){const H=parseFloat(Y.price.toString().replace(/[^0-9.]/g,""));isNaN(H)||(I+=H)}}),r({users:w.data().count,wishes:T.data().count,greetings:b.data().count,notifications:E,purchasedCount:M,totalValue:Math.round(I)});const S=ft(h,ua("createdAt","desc"),da(20)),k=ft(p,ua("createdAt","desc"),da(20)),R=ft(m,ua("createdAt","desc"),da(20)),[D,O,N]=await Promise.all([Jt(S),Jt(k),Jt(R)]),X=[];D.forEach(W=>{const Y=W.data();Y.createdAt&&X.push({id:W.id,type:"user",title:"New User Joined",subtitle:Y.displayName||Y.email||"Anonymous",timestamp:Y.createdAt instanceof Me?Y.createdAt:Me.fromDate(new Date(Y.createdAt)),image:Y.photoURL})}),O.forEach(W=>{const Y=W.data();Y.createdAt&&X.push({id:W.id,type:"gift",title:"New Wish Added",subtitle:Y.title,timestamp:Y.createdAt,image:Y.image})}),N.forEach(W=>{const Y=W.data();Y.createdAt&&X.push({id:W.id,type:"greeting",title:"Greeting Sent",subtitle:`From ${Y.senderName} to ${Y.recipientName||"Friend"}`,timestamp:Y.createdAt})}),X.sort((W,Y)=>Y.timestamp.seconds-W.timestamp.seconds),i(X.slice(0,20)),a(_.docs.map(W=>({id:W.id,...W.data()}))),window.recentNotifs=_.docs.map(W=>({id:W.id,...W.data()}))}catch(h){console.error("Error fetching admin data:",h)}finally{c(!1)}})()},[]),l?f.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading dashboard data..."}):f.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans",children:[f.jsx("header",{className:"bg-white border-b border-slate-200 px-8 py-4 sticky top-0 z-10 flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primaryPink rounded-xl flex items-center justify-center text-white font-bold text-xl",children:"A"}),f.jsx("h1",{className:"text-xl font-bold text-deepNavy",children:"Admin Dashboard v2.0"})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-8 pb-32",children:[f.jsxs("div",{className:"mb-6 flex justify-end gap-3",children:[f.jsx("button",{onClick:e,className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg shadow-blue-200 hover:scale-105 active:scale-95 transition-all",children:"ENABLE NOTIFICATIONS"}),f.jsx("button",{onClick:async()=>{try{const{addDoc:d,collection:h,serverTimestamp:p}=await h2(async()=>{const{addDoc:m,collection:x,serverTimestamp:w}=await Promise.resolve().then(()=>eN);return{addDoc:m,collection:x,serverTimestamp:w}},void 0);await d(h(le,"notifications"),{userId:"SnlRjWGr53crY65mNXKIc8tWoFE3",title:"Test from Dashboard v2",message:"This is a valid test!",type:"test",createdAt:p()}),alert("Test notification sent!")}catch(d){alert("Error sending test: "+d),console.error(d)}},className:"px-6 py-3 bg-primaryPink text-white rounded-xl font-bold shadow-lg shadow-pink-200 hover:scale-105 active:scale-95 transition-all",children:"SEND TEST NOTIFICATION"})]}),f.jsxs("div",{className:"mb-10 p-6 bg-white rounded-2xl shadow-sm border border-slate-100",children:[f.jsx("h3",{className:"text-lg font-bold text-deepNavy mb-4",children:"Recent Notifications (Debug)"}),f.jsxs("div",{className:"space-y-2",children:[n.notifications===0&&f.jsx("p",{className:"text-slate-400",children:"No pending notifications found via stats count."}),o.length>0?o.map(d=>f.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100 text-sm",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"ID:"})," ",d.id]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Title:"})," ",d.title]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Created:"})," ",d.createdAt?new Date(d.createdAt.seconds*1e3).toLocaleString():"Pending..."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"UserID:"})," ",d.userId]})]},d.id)):f.jsx("p",{className:"text-slate-400 text-sm",children:"No recent notifications fetched."})]})]}),f.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[f.jsx($o,{title:"Total Users",value:n.users,icon:f.jsx(Mh,{size:24})}),f.jsx($o,{title:"Total Wishes",value:n.wishes,icon:f.jsx(go,{size:24})}),f.jsx($o,{title:"Engagement (Greetings)",value:n.greetings,icon:f.jsx(I1,{size:24})}),f.jsx($o,{title:"Pending Notifications",value:n.notifications,icon:f.jsx(zc,{size:24})}),f.jsx($o,{title:"Purchased Gifts",value:n.purchasedCount,icon:f.jsx(Lh,{size:24}),onClick:()=>t("/admin/purchased")}),f.jsx($o,{title:"Total Value",value:`${n.totalValue.toLocaleString()}`,icon:f.jsx(t5,{size:24})})]}),f.jsxs("section",{className:"bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden",children:[f.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center gap-2",children:[f.jsx(Z3,{className:"text-primaryPink",size:20}),f.jsx("h2",{className:"text-lg font-bold text-deepNavy",children:"Recent Activity"})]}),f.jsxs("div",{className:"divide-y divide-slate-100 max-h-[800px] overflow-y-auto",children:[s.map(d=>f.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 hover:bg-slate-50 transition-colors",children:[f.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 
                                    ${d.type==="user"?"bg-blue-100 text-blue-600":d.type==="gift"?"bg-pink-100 text-pink-600":"bg-amber-100 text-amber-600"}`,children:[d.type==="user"&&f.jsx(Mh,{size:18}),d.type==="gift"&&f.jsx(go,{size:18}),d.type==="greeting"&&f.jsx(I1,{size:18})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-semibold text-deepNavy truncate",children:d.title}),f.jsx("p",{className:"text-sm text-slate-500 truncate",children:d.subtitle})]}),f.jsxs("div",{className:"text-xs text-slate-400 whitespace-nowrap",children:[d.timestamp.toDate().toLocaleDateString()," ",d.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},`${d.type}-${d.id}`)),s.length===0&&f.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"No recent activity found."})]})]})]}),f.jsx(cx,{})]})},fQ=()=>{const t=It(),[e,n]=y.useState([]),[r,s]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const o=ft(Ve(le,"gifts"),Tt("status","==","purchased")),a=await Jt(o),l=[],c=new Set;a.forEach(m=>{const x=m.data();l.push({id:m.id,title:x.title,price:x.price,ownerId:x.ownerId,purchasedBy:x.purchasedBy,imageUrl:x.imageUrl}),x.ownerId&&c.add(x.ownerId),x.purchasedBy&&c.add(x.purchasedBy)});const d=new Map,h=Array.from(c);if(h.length>0){const m=ft(Ve(le,"users"),Tt(jP(),"in",h.slice(0,30)));(await Jt(m)).forEach(w=>{const T=w.data();d.set(w.id,T.displayName||T.email||"Unknown User")})}const p=l.map(m=>({...m,ownerName:d.get(m.ownerId)||"Unknown Recipient",purchasedByName:m.purchasedBy&&d.get(m.purchasedBy)||"Unknown Buyer"}));n(p)}catch(o){console.error("Error fetching purchased gifts:",o)}finally{s(!1)}})()},[]),f.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans pb-24",children:[f.jsxs("header",{className:"bg-white border-b border-slate-200 px-6 py-4 sticky top-0 z-10 flex items-center gap-4",children:[f.jsx("button",{onClick:()=>t("/admin"),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors",children:f.jsx(F0,{size:20,className:"text-deepNavy"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Lh,{className:"text-primaryPink",size:24}),f.jsx("h1",{className:"text-xl font-bold text-deepNavy",children:"Purchased Gifts"})]})]}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8",children:r?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(In,{className:"animate-spin text-slate-400"})}):f.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Gift"}),f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Cost"}),f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Buyer"}),f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Recipient"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:e.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-400 text-sm",children:"No gifts have been purchased yet."})}):e.map(i=>{var o;return f.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[i.imageUrl?f.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 overflow-hidden shrink-0",children:f.jsx("img",{src:i.imageUrl,alt:"",className:"w-full h-full object-cover"})}):f.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center shrink-0",children:f.jsx(Lh,{size:16,className:"text-slate-400"})}),f.jsx("span",{className:"font-medium text-deepNavy truncate max-w-[200px]",children:i.title})]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:i.price||"-"})}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("div",{className:"text-sm text-slate-700 font-medium",children:i.purchasedByName}),f.jsxs("div",{className:"text-xs text-slate-400 font-mono hidden sm:block",children:[(o=i.purchasedBy)==null?void 0:o.slice(0,6),"..."]})]}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("div",{className:"text-sm text-slate-700 font-medium",children:i.ownerName}),f.jsxs("div",{className:"text-xs text-slate-400 font-mono hidden sm:block",children:[i.ownerId.slice(0,6),"..."]})]})]},i.id)})})]})})})}),f.jsx(cx,{})]})},ZT=({children:t})=>{const{user:e,loading:n,userProfile:r}=Ct();return n?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 text-slate-400",children:f.jsx(In,{className:"animate-spin"})}):!e||!(r!=null&&r.isAdmin)?f.jsx(Dr,{to:"/",replace:!0}):f.jsx(f.Fragment,{children:t})};function pQ(){const{user:t,loading:e}=Ct(),{i18n:n}=Si();return y.useEffect(()=>{document.dir=n.dir(),document.documentElement.lang=n.language,document.documentElement.setAttribute("dir",n.dir())},[n.language]),e?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-darkbg text-primary",children:"Loading..."}):f.jsx(uq,{children:f.jsx(d2,{children:f.jsxs(y.Suspense,{fallback:f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-darkbg text-primary",children:"Loading..."}),children:[f.jsxs(CM,{children:[f.jsx(Gt,{path:"/",element:t?f.jsx(Dr,{to:"/dashboard"}):f.jsx(_H,{})}),f.jsx(Gt,{path:"/admin",element:f.jsx(ZT,{children:f.jsx(hQ,{})})}),f.jsx(Gt,{path:"/admin/purchased",element:f.jsx(ZT,{children:f.jsx(fQ,{})})}),f.jsxs(Gt,{element:f.jsx(uQ,{}),children:[f.jsx(Gt,{path:"/dashboard",element:t?f.jsx(aq,{}):f.jsx(Dr,{to:"/"})}),f.jsx(Gt,{path:"/friends",element:t?f.jsx(lq,{}):f.jsx(Dr,{to:"/"})}),f.jsx(Gt,{path:"/friend/:id",element:t?f.jsx(fq,{}):f.jsx(Dr,{to:"/"})}),f.jsx(Gt,{path:"/calendar",element:t?f.jsx(pq,{}):f.jsx(Dr,{to:"/"})}),f.jsx(Gt,{path:"/profile",element:t?f.jsx(nG,{}):f.jsx(Dr,{to:"/"})}),f.jsx(Gt,{path:"/top5",element:t?f.jsx(KK,{}):f.jsx(Dr,{to:"/"})}),f.jsx(Gt,{path:"/gift/:id",element:t?f.jsx(rG,{}):f.jsx(Dr,{to:"/"})}),f.jsx(Gt,{path:"/share-target",element:f.jsx(QK,{})})]}),f.jsx(Gt,{path:"/greeting/:id",element:f.jsx(YK,{})}),f.jsx(Gt,{path:"/invite",element:f.jsx(JK,{})}),f.jsx(Gt,{path:"*",element:f.jsx(Dr,{to:"/"})})]}),f.jsx(ZK,{}),f.jsx(XK,{})]})})})}rg.createRoot(document.getElementById("root")).render(f.jsx(un.StrictMode,{children:f.jsx(JM,{children:f.jsx(wH,{children:f.jsx(pQ,{})})})}));
