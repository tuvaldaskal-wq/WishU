var q2=Object.defineProperty;var K2=(t,e,n)=>e in t?q2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Bx=(t,e,n)=>K2(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Q2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KT={exports:{}},pf={},QT={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lu=Symbol.for("react.element"),Y2=Symbol.for("react.portal"),X2=Symbol.for("react.fragment"),J2=Symbol.for("react.strict_mode"),Z2=Symbol.for("react.profiler"),eD=Symbol.for("react.provider"),tD=Symbol.for("react.context"),nD=Symbol.for("react.forward_ref"),rD=Symbol.for("react.suspense"),sD=Symbol.for("react.memo"),iD=Symbol.for("react.lazy"),$x=Symbol.iterator;function oD(t){return t===null||typeof t!="object"?null:(t=$x&&t[$x]||t["@@iterator"],typeof t=="function"?t:null)}var YT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XT=Object.assign,JT={};function za(t,e,n){this.props=t,this.context=e,this.refs=JT,this.updater=n||YT}za.prototype.isReactComponent={};za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ZT(){}ZT.prototype=za.prototype;function ev(t,e,n){this.props=t,this.context=e,this.refs=JT,this.updater=n||YT}var tv=ev.prototype=new ZT;tv.constructor=ev;XT(tv,za.prototype);tv.isPureReactComponent=!0;var zx=Array.isArray,eS=Object.prototype.hasOwnProperty,nv={current:null},tS={key:!0,ref:!0,__self:!0,__source:!0};function nS(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)eS.call(e,r)&&!tS.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:lu,type:t,key:i,ref:o,props:s,_owner:nv.current}}function aD(t,e){return{$$typeof:lu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rv(t){return typeof t=="object"&&t!==null&&t.$$typeof===lu}function lD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wx=/\/+/g;function Op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lD(""+t.key):e.toString(36)}function kd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lu:case Y2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Op(o,0):r,zx(s)?(n="",t!=null&&(n=t.replace(Wx,"$&/")+"/"),kd(s,e,n,"",function(c){return c})):s!=null&&(rv(s)&&(s=aD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",zx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Op(i,a);o+=kd(i,e,n,l,s)}else if(l=oD(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Op(i,a++),o+=kd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ku(t,e,n){if(t==null)return t;var r=[],s=0;return kd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},Ad={transition:null},uD={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Ad,ReactCurrentOwner:nv};function rS(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Ku,forEach:function(t,e,n){Ku(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ku(t,function(){e++}),e},toArray:function(t){return Ku(t,function(e){return e})||[]},only:function(t){if(!rv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=za;xe.Fragment=X2;xe.Profiler=Z2;xe.PureComponent=ev;xe.StrictMode=J2;xe.Suspense=rD;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uD;xe.act=rS;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=XT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=nv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eS.call(e,l)&&!tS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:lu,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:tD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eD,_context:t},t.Consumer=t};xe.createElement=nS;xe.createFactory=function(t){var e=nS.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:nD,render:t}};xe.isValidElement=rv;xe.lazy=function(t){return{$$typeof:iD,_payload:{_status:-1,_result:t},_init:cD}};xe.memo=function(t,e){return{$$typeof:sD,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Ad.transition;Ad.transition={};try{t()}finally{Ad.transition=e}};xe.unstable_act=rS;xe.useCallback=function(t,e){return pn.current.useCallback(t,e)};xe.useContext=function(t){return pn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return pn.current.useEffect(t,e)};xe.useId=function(){return pn.current.useId()};xe.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return pn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};xe.useRef=function(t){return pn.current.useRef(t)};xe.useState=function(t){return pn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return pn.current.useTransition()};xe.version="18.3.1";QT.exports=xe;var y=QT.exports;const un=Q2(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dD=y,hD=Symbol.for("react.element"),fD=Symbol.for("react.fragment"),pD=Object.prototype.hasOwnProperty,mD=dD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gD={key:!0,ref:!0,__self:!0,__source:!0};function sS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pD.call(e,r)&&!gD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hD,type:t,key:i,ref:o,props:s,_owner:mD.current}}pf.Fragment=fD;pf.jsx=sS;pf.jsxs=sS;KT.exports=pf;var f=KT.exports,tg={},iS={exports:{}},Bn={},oS={exports:{}},aS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var j=F.length;F.push(U);e:for(;0<j;){var L=j-1>>>1,G=F[L];if(0<s(G,U))F[L]=U,F[j]=G,j=L;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],j=F.pop();if(j!==U){F[0]=j;e:for(var L=0,G=F.length,ee=G>>>1;L<ee;){var re=2*(L+1)-1,oe=F[re],te=re+1,ne=F[te];if(0>s(oe,j))te<G&&0>s(ne,oe)?(F[L]=ne,F[te]=j,L=te):(F[L]=oe,F[re]=j,L=re);else if(te<G&&0>s(ne,j))F[L]=ne,F[te]=j,L=te;else break e}}return U}function s(F,U){var j=F.sortIndex-U.sortIndex;return j!==0?j:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,_=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function C(F){if(x=!1,b(F),!_)if(n(l)!==null)_=!0,Y(R);else{var U=n(c);U!==null&&z(C,U.startTime-F)}}function R(F,U){_=!1,x&&(x=!1,E(S),S=-1),m=!0;var j=p;try{for(b(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!D());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var G=L(h.expirationTime<=U);U=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),b(U)}else r(l);h=n(l)}if(h!==null)var ee=!0;else{var re=n(c);re!==null&&z(C,re.startTime-U),ee=!1}return ee}finally{h=null,p=j,m=!1}}var O=!1,I=null,S=-1,k=5,P=-1;function D(){return!(t.unstable_now()-P<k)}function M(){if(I!==null){var F=t.unstable_now();P=F;var U=!0;try{U=I(!0,F)}finally{U?N():(O=!1,I=null)}}else O=!1}var N;if(typeof w=="function")N=function(){w(M)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=M,N=function(){q.postMessage(null)}}else N=function(){T(M,0)};function Y(F){I=F,O||(O=!0,N())}function z(F,U){S=T(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,Y(R))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var j=p;p=U;try{return F()}finally{p=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var j=p;p=F;try{return U()}finally{p=j}},t.unstable_scheduleCallback=function(F,U,j){var L=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?L+j:L):j=L,F){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=j+G,F={id:d++,callback:U,priorityLevel:F,startTime:j,expirationTime:G,sortIndex:-1},j>L?(F.sortIndex=j,e(c,F),n(l)===null&&F===n(c)&&(x?(E(S),S=-1):x=!0,z(C,j-L))):(F.sortIndex=G,e(l,F),_||m||(_=!0,Y(R))),F},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(F){var U=p;return function(){var j=p;p=U;try{return F.apply(this,arguments)}finally{p=j}}}})(aS);oS.exports=aS;var yD=oS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD=y,Vn=yD;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lS=new Set,_c={};function Io(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(_c[t]=e,t=0;t<e.length;t++)lS.add(e[t])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ng=Object.prototype.hasOwnProperty,wD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hx={},Gx={};function xD(t){return ng.call(Gx,t)?!0:ng.call(Hx,t)?!1:wD.test(t)?Gx[t]=!0:(Hx[t]=!0,!1)}function _D(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bD(t,e,n,r){if(e===null||typeof e>"u"||_D(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var sv=/[\-:]([a-z])/g;function iv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sv,iv);$t[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sv,iv);$t[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sv,iv);$t[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ov(t,e,n,r){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bD(e,n,s,r)&&(n=null),r||s===null?xD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ss=vD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qu=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),av=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),cS=Symbol.for("react.provider"),uS=Symbol.for("react.context"),lv=Symbol.for("react.forward_ref"),sg=Symbol.for("react.suspense"),ig=Symbol.for("react.suspense_list"),cv=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),dS=Symbol.for("react.offscreen"),qx=Symbol.iterator;function bl(t){return t===null||typeof t!="object"?null:(t=qx&&t[qx]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Vp;function Fl(t){if(Vp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vp=e&&e[1]||""}return`
`+Vp+t}var Fp=!1;function Up(t,e){if(!t||Fp)return"";Fp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fl(t):""}function ED(t){switch(t.tag){case 5:return Fl(t.type);case 16:return Fl("Lazy");case 13:return Fl("Suspense");case 19:return Fl("SuspenseList");case 0:case 2:case 15:return t=Up(t.type,!1),t;case 11:return t=Up(t.type.render,!1),t;case 1:return t=Up(t.type,!0),t;default:return""}}function og(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case Ho:return"Portal";case rg:return"Profiler";case av:return"StrictMode";case sg:return"Suspense";case ig:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uS:return(t.displayName||"Context")+".Consumer";case cS:return(t._context.displayName||"Context")+".Provider";case lv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cv:return e=t.displayName||null,e!==null?e:og(t.type)||"Memo";case Fs:e=t._payload,t=t._init;try{return og(t(e))}catch{}}return null}function TD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return og(e);case 8:return e===av?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SD(t){var e=hS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yu(t){t._valueTracker||(t._valueTracker=SD(t))}function fS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ag(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pS(t,e){e=e.checked,e!=null&&ov(t,"checked",e,!1)}function lg(t,e){pS(t,e);var n=ui(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cg(t,e.type,n):e.hasOwnProperty("defaultValue")&&cg(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cg(t,e,n){(e!=="number"||th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ul=Array.isArray;function ha(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ui(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ug(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Ul(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ui(n)}}function mS(t,e){var n=ui(e.value),r=ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xu,yS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xu=Xu||document.createElement("div"),Xu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ID=["Webkit","ms","Moz","O"];Object.keys(Yl).forEach(function(t){ID.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yl[e]=Yl[t]})});function vS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yl.hasOwnProperty(t)&&Yl[t]?(""+e).trim():e+"px"}function wS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var CD=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hg(t,e){if(e){if(CD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function fg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=null;function uv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mg=null,fa=null,pa=null;function Jx(t){if(t=du(t)){if(typeof mg!="function")throw Error(H(280));var e=t.stateNode;e&&(e=wf(e),mg(t.stateNode,t.type,e))}}function xS(t){fa?pa?pa.push(t):pa=[t]:fa=t}function _S(){if(fa){var t=fa,e=pa;if(pa=fa=null,Jx(t),e)for(t=0;t<e.length;t++)Jx(e[t])}}function bS(t,e){return t(e)}function ES(){}var Bp=!1;function TS(t,e,n){if(Bp)return t(e,n);Bp=!0;try{return bS(t,e,n)}finally{Bp=!1,(fa!==null||pa!==null)&&(ES(),_S())}}function Ec(t,e){var n=t.stateNode;if(n===null)return null;var r=wf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var gg=!1;if(ps)try{var El={};Object.defineProperty(El,"passive",{get:function(){gg=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{gg=!1}function kD(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Xl=!1,nh=null,rh=!1,yg=null,AD={onError:function(t){Xl=!0,nh=t}};function RD(t,e,n,r,s,i,o,a,l){Xl=!1,nh=null,kD.apply(AD,arguments)}function PD(t,e,n,r,s,i,o,a,l){if(RD.apply(this,arguments),Xl){if(Xl){var c=nh;Xl=!1,nh=null}else throw Error(H(198));rh||(rh=!0,yg=c)}}function Co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function SS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zx(t){if(Co(t)!==t)throw Error(H(188))}function ND(t){var e=t.alternate;if(!e){if(e=Co(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Zx(s),t;if(i===r)return Zx(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function IS(t){return t=ND(t),t!==null?CS(t):null}function CS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CS(t);if(e!==null)return e;t=t.sibling}return null}var kS=Vn.unstable_scheduleCallback,e_=Vn.unstable_cancelCallback,DD=Vn.unstable_shouldYield,LD=Vn.unstable_requestPaint,ht=Vn.unstable_now,jD=Vn.unstable_getCurrentPriorityLevel,dv=Vn.unstable_ImmediatePriority,AS=Vn.unstable_UserBlockingPriority,sh=Vn.unstable_NormalPriority,MD=Vn.unstable_LowPriority,RS=Vn.unstable_IdlePriority,mf=null,Vr=null;function OD(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(mf,t,void 0,(t.current.flags&128)===128)}catch{}}var gr=Math.clz32?Math.clz32:UD,VD=Math.log,FD=Math.LN2;function UD(t){return t>>>=0,t===0?32:31-(VD(t)/FD|0)|0}var Ju=64,Zu=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Bl(a):(i&=o,i!==0&&(r=Bl(i)))}else o=n&~s,o!==0?r=Bl(o):i!==0&&(r=Bl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gr(e),s=1<<n,r|=t[n],e&=~s;return r}function BD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $D(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=BD(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function vg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function PS(){var t=Ju;return Ju<<=1,!(Ju&4194240)&&(Ju=64),t}function $p(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gr(e),t[e]=n}function zD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function hv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ne=0;function NS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DS,fv,LS,jS,MS,wg=!1,ed=[],Js=null,Zs=null,ei=null,Tc=new Map,Sc=new Map,$s=[],WD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t_(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":Tc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(e.pointerId)}}function Tl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=du(e),e!==null&&fv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HD(t,e,n,r,s){switch(e){case"focusin":return Js=Tl(Js,t,e,n,r,s),!0;case"dragenter":return Zs=Tl(Zs,t,e,n,r,s),!0;case"mouseover":return ei=Tl(ei,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Tc.set(i,Tl(Tc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sc.set(i,Tl(Sc.get(i)||null,t,e,n,r,s)),!0}return!1}function OS(t){var e=Ki(t.target);if(e!==null){var n=Co(e);if(n!==null){if(e=n.tag,e===13){if(e=SS(n),e!==null){t.blockedOn=e,MS(t.priority,function(){LS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pg=r,n.target.dispatchEvent(r),pg=null}else return e=du(n),e!==null&&fv(e),t.blockedOn=n,!1;e.shift()}return!0}function n_(t,e,n){Rd(t)&&n.delete(e)}function GD(){wg=!1,Js!==null&&Rd(Js)&&(Js=null),Zs!==null&&Rd(Zs)&&(Zs=null),ei!==null&&Rd(ei)&&(ei=null),Tc.forEach(n_),Sc.forEach(n_)}function Sl(t,e){t.blockedOn===e&&(t.blockedOn=null,wg||(wg=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,GD)))}function Ic(t){function e(s){return Sl(s,t)}if(0<ed.length){Sl(ed[0],t);for(var n=1;n<ed.length;n++){var r=ed[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&Sl(Js,t),Zs!==null&&Sl(Zs,t),ei!==null&&Sl(ei,t),Tc.forEach(e),Sc.forEach(e),n=0;n<$s.length;n++)r=$s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$s.length&&(n=$s[0],n.blockedOn===null);)OS(n),n.blockedOn===null&&$s.shift()}var ma=Ss.ReactCurrentBatchConfig,oh=!0;function qD(t,e,n,r){var s=Ne,i=ma.transition;ma.transition=null;try{Ne=1,pv(t,e,n,r)}finally{Ne=s,ma.transition=i}}function KD(t,e,n,r){var s=Ne,i=ma.transition;ma.transition=null;try{Ne=4,pv(t,e,n,r)}finally{Ne=s,ma.transition=i}}function pv(t,e,n,r){if(oh){var s=xg(t,e,n,r);if(s===null)Jp(t,e,r,ah,n),t_(t,r);else if(HD(s,t,e,n,r))r.stopPropagation();else if(t_(t,r),e&4&&-1<WD.indexOf(t)){for(;s!==null;){var i=du(s);if(i!==null&&DS(i),i=xg(t,e,n,r),i===null&&Jp(t,e,r,ah,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Jp(t,e,r,null,n)}}var ah=null;function xg(t,e,n,r){if(ah=null,t=uv(r),t=Ki(t),t!==null)if(e=Co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=SS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ah=t,null}function VS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jD()){case dv:return 1;case AS:return 4;case sh:case MD:return 16;case RS:return 536870912;default:return 16}default:return 16}}var Qs=null,mv=null,Pd=null;function FS(){if(Pd)return Pd;var t,e=mv,n=e.length,r,s="value"in Qs?Qs.value:Qs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pd=s.slice(t,1<r?1-r:void 0)}function Nd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function td(){return!0}function r_(){return!1}function $n(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?td:r_,this.isPropagationStopped=r_,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=td)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=td)},persist:function(){},isPersistent:td}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gv=$n(Wa),uu=tt({},Wa,{view:0,detail:0}),QD=$n(uu),zp,Wp,Il,gf=tt({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Il&&(Il&&t.type==="mousemove"?(zp=t.screenX-Il.screenX,Wp=t.screenY-Il.screenY):Wp=zp=0,Il=t),zp)},movementY:function(t){return"movementY"in t?t.movementY:Wp}}),s_=$n(gf),YD=tt({},gf,{dataTransfer:0}),XD=$n(YD),JD=tt({},uu,{relatedTarget:0}),Hp=$n(JD),ZD=tt({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),eL=$n(ZD),tL=tt({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nL=$n(tL),rL=tt({},Wa,{data:0}),i_=$n(rL),sL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oL[t])?!!e[t]:!1}function yv(){return aL}var lL=tt({},uu,{key:function(t){if(t.key){var e=sL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yv,charCode:function(t){return t.type==="keypress"?Nd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cL=$n(lL),uL=tt({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o_=$n(uL),dL=tt({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yv}),hL=$n(dL),fL=tt({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),pL=$n(fL),mL=tt({},gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gL=$n(mL),yL=[9,13,27,32],vv=ps&&"CompositionEvent"in window,Jl=null;ps&&"documentMode"in document&&(Jl=document.documentMode);var vL=ps&&"TextEvent"in window&&!Jl,US=ps&&(!vv||Jl&&8<Jl&&11>=Jl),a_=" ",l_=!1;function BS(t,e){switch(t){case"keyup":return yL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $S(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qo=!1;function wL(t,e){switch(t){case"compositionend":return $S(e);case"keypress":return e.which!==32?null:(l_=!0,a_);case"textInput":return t=e.data,t===a_&&l_?null:t;default:return null}}function xL(t,e){if(qo)return t==="compositionend"||!vv&&BS(t,e)?(t=FS(),Pd=mv=Qs=null,qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return US&&e.locale!=="ko"?null:e.data;default:return null}}var _L={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_L[t.type]:e==="textarea"}function zS(t,e,n,r){xS(r),e=lh(e,"onChange"),0<e.length&&(n=new gv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zl=null,Cc=null;function bL(t){eI(t,0)}function yf(t){var e=Yo(t);if(fS(e))return t}function EL(t,e){if(t==="change")return e}var WS=!1;if(ps){var Gp;if(ps){var qp="oninput"in document;if(!qp){var u_=document.createElement("div");u_.setAttribute("oninput","return;"),qp=typeof u_.oninput=="function"}Gp=qp}else Gp=!1;WS=Gp&&(!document.documentMode||9<document.documentMode)}function d_(){Zl&&(Zl.detachEvent("onpropertychange",HS),Cc=Zl=null)}function HS(t){if(t.propertyName==="value"&&yf(Cc)){var e=[];zS(e,Cc,t,uv(t)),TS(bL,e)}}function TL(t,e,n){t==="focusin"?(d_(),Zl=e,Cc=n,Zl.attachEvent("onpropertychange",HS)):t==="focusout"&&d_()}function SL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(Cc)}function IL(t,e){if(t==="click")return yf(e)}function CL(t,e){if(t==="input"||t==="change")return yf(e)}function kL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xr=typeof Object.is=="function"?Object.is:kL;function kc(t,e){if(xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ng.call(e,s)||!xr(t[s],e[s]))return!1}return!0}function h_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function f_(t,e){var n=h_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h_(n)}}function GS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qS(){for(var t=window,e=th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=th(t.document)}return e}function wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AL(t){var e=qS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GS(n.ownerDocument.documentElement,n)){if(r!==null&&wv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=f_(n,i);var o=f_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RL=ps&&"documentMode"in document&&11>=document.documentMode,Ko=null,_g=null,ec=null,bg=!1;function p_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bg||Ko==null||Ko!==th(r)||(r=Ko,"selectionStart"in r&&wv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ec&&kc(ec,r)||(ec=r,r=lh(_g,"onSelect"),0<r.length&&(e=new gv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ko)))}function nd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qo={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionend:nd("Transition","TransitionEnd")},Kp={},KS={};ps&&(KS=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function vf(t){if(Kp[t])return Kp[t];if(!Qo[t])return t;var e=Qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KS)return Kp[t]=e[n];return t}var QS=vf("animationend"),YS=vf("animationiteration"),XS=vf("animationstart"),JS=vf("transitionend"),ZS=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(t,e){ZS.set(t,e),Io(e,[t])}for(var Qp=0;Qp<m_.length;Qp++){var Yp=m_[Qp],PL=Yp.toLowerCase(),NL=Yp[0].toUpperCase()+Yp.slice(1);_i(PL,"on"+NL)}_i(QS,"onAnimationEnd");_i(YS,"onAnimationIteration");_i(XS,"onAnimationStart");_i("dblclick","onDoubleClick");_i("focusin","onFocus");_i("focusout","onBlur");_i(JS,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);Io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Io("onBeforeInput",["compositionend","keypress","textInput","paste"]);Io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DL=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function g_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PD(r,e,void 0,t),t.currentTarget=null}function eI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;g_(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;g_(s,a,c),i=l}}}if(rh)throw t=yg,rh=!1,yg=null,t}function ze(t,e){var n=e[Cg];n===void 0&&(n=e[Cg]=new Set);var r=t+"__bubble";n.has(r)||(tI(e,t,2,!1),n.add(r))}function Xp(t,e,n){var r=0;e&&(r|=4),tI(n,t,r,e)}var rd="_reactListening"+Math.random().toString(36).slice(2);function Ac(t){if(!t[rd]){t[rd]=!0,lS.forEach(function(n){n!=="selectionchange"&&(DL.has(n)||Xp(n,!1,t),Xp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rd]||(e[rd]=!0,Xp("selectionchange",!1,e))}}function tI(t,e,n,r){switch(VS(e)){case 1:var s=qD;break;case 4:s=KD;break;default:s=pv}n=s.bind(null,e,n,t),s=void 0,!gg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Jp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ki(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}TS(function(){var c=i,d=uv(n),h=[];e:{var p=ZS.get(t);if(p!==void 0){var m=gv,_=t;switch(t){case"keypress":if(Nd(n)===0)break e;case"keydown":case"keyup":m=cL;break;case"focusin":_="focus",m=Hp;break;case"focusout":_="blur",m=Hp;break;case"beforeblur":case"afterblur":m=Hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=s_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=XD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hL;break;case QS:case YS:case XS:m=eL;break;case JS:m=pL;break;case"scroll":m=QD;break;case"wheel":m=gL;break;case"copy":case"cut":case"paste":m=nL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=o_}var x=(e&4)!==0,T=!x&&t==="scroll",E=x?p!==null?p+"Capture":null:p;x=[];for(var w=c,b;w!==null;){b=w;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,E!==null&&(C=Ec(w,E),C!=null&&x.push(Rc(w,C,b)))),T)break;w=w.return}0<x.length&&(p=new m(p,_,null,n,d),h.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==pg&&(_=n.relatedTarget||n.fromElement)&&(Ki(_)||_[ms]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?Ki(_):null,_!==null&&(T=Co(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(x=s_,C="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=o_,C="onPointerLeave",E="onPointerEnter",w="pointer"),T=m==null?p:Yo(m),b=_==null?p:Yo(_),p=new x(C,w+"leave",m,n,d),p.target=T,p.relatedTarget=b,C=null,Ki(d)===c&&(x=new x(E,w+"enter",_,n,d),x.target=b,x.relatedTarget=T,C=x),T=C,m&&_)t:{for(x=m,E=_,w=0,b=x;b;b=Vo(b))w++;for(b=0,C=E;C;C=Vo(C))b++;for(;0<w-b;)x=Vo(x),w--;for(;0<b-w;)E=Vo(E),b--;for(;w--;){if(x===E||E!==null&&x===E.alternate)break t;x=Vo(x),E=Vo(E)}x=null}else x=null;m!==null&&y_(h,p,m,x,!1),_!==null&&T!==null&&y_(h,T,_,x,!0)}}e:{if(p=c?Yo(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=EL;else if(c_(p))if(WS)R=CL;else{R=SL;var O=TL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=IL);if(R&&(R=R(t,c))){zS(h,R,n,d);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&cg(p,"number",p.value)}switch(O=c?Yo(c):window,t){case"focusin":(c_(O)||O.contentEditable==="true")&&(Ko=O,_g=c,ec=null);break;case"focusout":ec=_g=Ko=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,p_(h,n,d);break;case"selectionchange":if(RL)break;case"keydown":case"keyup":p_(h,n,d)}var I;if(vv)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else qo?BS(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(US&&n.locale!=="ko"&&(qo||S!=="onCompositionStart"?S==="onCompositionEnd"&&qo&&(I=FS()):(Qs=d,mv="value"in Qs?Qs.value:Qs.textContent,qo=!0)),O=lh(c,S),0<O.length&&(S=new i_(S,t,null,n,d),h.push({event:S,listeners:O}),I?S.data=I:(I=$S(n),I!==null&&(S.data=I)))),(I=vL?wL(t,n):xL(t,n))&&(c=lh(c,"onBeforeInput"),0<c.length&&(d=new i_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}eI(h,e)})}function Rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ec(t,n),i!=null&&r.unshift(Rc(t,i,s)),i=Ec(t,e),i!=null&&r.push(Rc(t,i,s))),t=t.return}return r}function Vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ec(n,i),l!=null&&o.unshift(Rc(n,l,a))):s||(l=Ec(n,i),l!=null&&o.push(Rc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LL=/\r\n?/g,jL=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(LL,`
`).replace(jL,"")}function sd(t,e,n){if(e=v_(e),v_(t)!==e&&n)throw Error(H(425))}function ch(){}var Eg=null,Tg=null;function Sg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ig=typeof setTimeout=="function"?setTimeout:void 0,ML=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,OL=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(VL)}:Ig;function VL(t){setTimeout(function(){throw t})}function Zp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ic(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ic(e)}function ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),jr="__reactFiber$"+Ha,Pc="__reactProps$"+Ha,ms="__reactContainer$"+Ha,Cg="__reactEvents$"+Ha,FL="__reactListeners$"+Ha,UL="__reactHandles$"+Ha;function Ki(t){var e=t[jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ms]||n[jr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x_(t);t!==null;){if(n=t[jr])return n;t=x_(t)}return e}t=n,n=t.parentNode}return null}function du(t){return t=t[jr]||t[ms],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function wf(t){return t[Pc]||null}var kg=[],Xo=-1;function bi(t){return{current:t}}function We(t){0>Xo||(t.current=kg[Xo],kg[Xo]=null,Xo--)}function Ue(t,e){Xo++,kg[Xo]=t.current,t.current=e}var di={},nn=bi(di),bn=bi(!1),co=di;function Ia(t,e){var n=t.type.contextTypes;if(!n)return di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function En(t){return t=t.childContextTypes,t!=null}function uh(){We(bn),We(nn)}function __(t,e,n){if(nn.current!==di)throw Error(H(168));Ue(nn,e),Ue(bn,n)}function nI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,TD(t)||"Unknown",s));return tt({},n,r)}function dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,co=nn.current,Ue(nn,t),Ue(bn,bn.current),!0}function b_(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=nI(t,e,co),r.__reactInternalMemoizedMergedChildContext=t,We(bn),We(nn),Ue(nn,t)):We(bn),Ue(bn,n)}var ns=null,xf=!1,em=!1;function rI(t){ns===null?ns=[t]:ns.push(t)}function BL(t){xf=!0,rI(t)}function Ei(){if(!em&&ns!==null){em=!0;var t=0,e=Ne;try{var n=ns;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ns=null,xf=!1}catch(s){throw ns!==null&&(ns=ns.slice(t+1)),kS(dv,Ei),s}finally{Ne=e,em=!1}}return null}var Jo=[],Zo=0,hh=null,fh=0,Qn=[],Yn=0,uo=null,ss=1,is="";function zi(t,e){Jo[Zo++]=fh,Jo[Zo++]=hh,hh=t,fh=e}function sI(t,e,n){Qn[Yn++]=ss,Qn[Yn++]=is,Qn[Yn++]=uo,uo=t;var r=ss;t=is;var s=32-gr(r)-1;r&=~(1<<s),n+=1;var i=32-gr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ss=1<<32-gr(e)+s|n<<s|r,is=i+t}else ss=1<<i|n<<s|r,is=t}function xv(t){t.return!==null&&(zi(t,1),sI(t,1,0))}function _v(t){for(;t===hh;)hh=Jo[--Zo],Jo[Zo]=null,fh=Jo[--Zo],Jo[Zo]=null;for(;t===uo;)uo=Qn[--Yn],Qn[Yn]=null,is=Qn[--Yn],Qn[Yn]=null,ss=Qn[--Yn],Qn[Yn]=null}var Mn=null,Dn=null,qe=!1,pr=null;function iI(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mn=t,Dn=ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mn=t,Dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uo!==null?{id:ss,overflow:is}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mn=t,Dn=null,!0):!1;default:return!1}}function Ag(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rg(t){if(qe){var e=Dn;if(e){var n=e;if(!E_(t,e)){if(Ag(t))throw Error(H(418));e=ti(n.nextSibling);var r=Mn;e&&E_(t,e)?iI(r,n):(t.flags=t.flags&-4097|2,qe=!1,Mn=t)}}else{if(Ag(t))throw Error(H(418));t.flags=t.flags&-4097|2,qe=!1,Mn=t}}}function T_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mn=t}function id(t){if(t!==Mn)return!1;if(!qe)return T_(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sg(t.type,t.memoizedProps)),e&&(e=Dn)){if(Ag(t))throw oI(),Error(H(418));for(;e;)iI(t,e),e=ti(e.nextSibling)}if(T_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dn=ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dn=null}}else Dn=Mn?ti(t.stateNode.nextSibling):null;return!0}function oI(){for(var t=Dn;t;)t=ti(t.nextSibling)}function Ca(){Dn=Mn=null,qe=!1}function bv(t){pr===null?pr=[t]:pr.push(t)}var $L=Ss.ReactCurrentBatchConfig;function Cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function od(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function S_(t){var e=t._init;return e(t._payload)}function aI(t){function e(E,w){if(t){var b=E.deletions;b===null?(E.deletions=[w],E.flags|=16):b.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=ii(E,w),E.index=0,E.sibling=null,E}function i(E,w,b){return E.index=b,t?(b=E.alternate,b!==null?(b=b.index,b<w?(E.flags|=2,w):b):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,b,C){return w===null||w.tag!==6?(w=am(b,E.mode,C),w.return=E,w):(w=s(w,b),w.return=E,w)}function l(E,w,b,C){var R=b.type;return R===Go?d(E,w,b.props.children,C,b.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Fs&&S_(R)===w.type)?(C=s(w,b.props),C.ref=Cl(E,w,b),C.return=E,C):(C=Fd(b.type,b.key,b.props,null,E.mode,C),C.ref=Cl(E,w,b),C.return=E,C)}function c(E,w,b,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=lm(b,E.mode,C),w.return=E,w):(w=s(w,b.children||[]),w.return=E,w)}function d(E,w,b,C,R){return w===null||w.tag!==7?(w=no(b,E.mode,C,R),w.return=E,w):(w=s(w,b),w.return=E,w)}function h(E,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=am(""+w,E.mode,b),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qu:return b=Fd(w.type,w.key,w.props,null,E.mode,b),b.ref=Cl(E,null,w),b.return=E,b;case Ho:return w=lm(w,E.mode,b),w.return=E,w;case Fs:var C=w._init;return h(E,C(w._payload),b)}if(Ul(w)||bl(w))return w=no(w,E.mode,b,null),w.return=E,w;od(E,w)}return null}function p(E,w,b,C){var R=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:a(E,w,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qu:return b.key===R?l(E,w,b,C):null;case Ho:return b.key===R?c(E,w,b,C):null;case Fs:return R=b._init,p(E,w,R(b._payload),C)}if(Ul(b)||bl(b))return R!==null?null:d(E,w,b,C,null);od(E,b)}return null}function m(E,w,b,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return E=E.get(b)||null,a(w,E,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Qu:return E=E.get(C.key===null?b:C.key)||null,l(w,E,C,R);case Ho:return E=E.get(C.key===null?b:C.key)||null,c(w,E,C,R);case Fs:var O=C._init;return m(E,w,b,O(C._payload),R)}if(Ul(C)||bl(C))return E=E.get(b)||null,d(w,E,C,R,null);od(w,C)}return null}function _(E,w,b,C){for(var R=null,O=null,I=w,S=w=0,k=null;I!==null&&S<b.length;S++){I.index>S?(k=I,I=null):k=I.sibling;var P=p(E,I,b[S],C);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(E,I),w=i(P,w,S),O===null?R=P:O.sibling=P,O=P,I=k}if(S===b.length)return n(E,I),qe&&zi(E,S),R;if(I===null){for(;S<b.length;S++)I=h(E,b[S],C),I!==null&&(w=i(I,w,S),O===null?R=I:O.sibling=I,O=I);return qe&&zi(E,S),R}for(I=r(E,I);S<b.length;S++)k=m(I,E,S,b[S],C),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?S:k.key),w=i(k,w,S),O===null?R=k:O.sibling=k,O=k);return t&&I.forEach(function(D){return e(E,D)}),qe&&zi(E,S),R}function x(E,w,b,C){var R=bl(b);if(typeof R!="function")throw Error(H(150));if(b=R.call(b),b==null)throw Error(H(151));for(var O=R=null,I=w,S=w=0,k=null,P=b.next();I!==null&&!P.done;S++,P=b.next()){I.index>S?(k=I,I=null):k=I.sibling;var D=p(E,I,P.value,C);if(D===null){I===null&&(I=k);break}t&&I&&D.alternate===null&&e(E,I),w=i(D,w,S),O===null?R=D:O.sibling=D,O=D,I=k}if(P.done)return n(E,I),qe&&zi(E,S),R;if(I===null){for(;!P.done;S++,P=b.next())P=h(E,P.value,C),P!==null&&(w=i(P,w,S),O===null?R=P:O.sibling=P,O=P);return qe&&zi(E,S),R}for(I=r(E,I);!P.done;S++,P=b.next())P=m(I,E,S,P.value,C),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?S:P.key),w=i(P,w,S),O===null?R=P:O.sibling=P,O=P);return t&&I.forEach(function(M){return e(E,M)}),qe&&zi(E,S),R}function T(E,w,b,C){if(typeof b=="object"&&b!==null&&b.type===Go&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Qu:e:{for(var R=b.key,O=w;O!==null;){if(O.key===R){if(R=b.type,R===Go){if(O.tag===7){n(E,O.sibling),w=s(O,b.props.children),w.return=E,E=w;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Fs&&S_(R)===O.type){n(E,O.sibling),w=s(O,b.props),w.ref=Cl(E,O,b),w.return=E,E=w;break e}n(E,O);break}else e(E,O);O=O.sibling}b.type===Go?(w=no(b.props.children,E.mode,C,b.key),w.return=E,E=w):(C=Fd(b.type,b.key,b.props,null,E.mode,C),C.ref=Cl(E,w,b),C.return=E,E=C)}return o(E);case Ho:e:{for(O=b.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(E,w.sibling),w=s(w,b.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=lm(b,E.mode,C),w.return=E,E=w}return o(E);case Fs:return O=b._init,T(E,w,O(b._payload),C)}if(Ul(b))return _(E,w,b,C);if(bl(b))return x(E,w,b,C);od(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,b),w.return=E,E=w):(n(E,w),w=am(b,E.mode,C),w.return=E,E=w),o(E)):n(E,w)}return T}var ka=aI(!0),lI=aI(!1),ph=bi(null),mh=null,ea=null,Ev=null;function Tv(){Ev=ea=mh=null}function Sv(t){var e=ph.current;We(ph),t._currentValue=e}function Pg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ga(t,e){mh=t,Ev=ea=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function tr(t){var e=t._currentValue;if(Ev!==t)if(t={context:t,memoizedValue:e,next:null},ea===null){if(mh===null)throw Error(H(308));ea=t,mh.dependencies={lanes:0,firstContext:t}}else ea=ea.next=t;return e}var Qi=null;function Iv(t){Qi===null?Qi=[t]:Qi.push(t)}function cI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Iv(e)):(n.next=s.next,s.next=n),e.interleaved=n,gs(t,r)}function gs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Us=!1;function Cv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ls(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,gs(t,n)}return s=r.interleaved,s===null?(e.next=e,Iv(r)):(e.next=s.next,s.next=e),r.interleaved=e,gs(t,n)}function Dd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hv(t,n)}}function I_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gh(t,e,n,r){var s=t.updateQueue;Us=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,x=a;switch(p=e,m=n,x.tag){case 1:if(_=x.payload,typeof _=="function"){h=_.call(m,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,p=typeof _=="function"?_.call(m,h,p):_,p==null)break e;h=tt({},h,p);break e;case 2:Us=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fo|=o,t.lanes=o,t.memoizedState=h}}function C_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var hu={},Fr=bi(hu),Nc=bi(hu),Dc=bi(hu);function Yi(t){if(t===hu)throw Error(H(174));return t}function kv(t,e){switch(Ue(Dc,e),Ue(Nc,t),Ue(Fr,hu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dg(e,t)}We(Fr),Ue(Fr,e)}function Aa(){We(Fr),We(Nc),We(Dc)}function dI(t){Yi(Dc.current);var e=Yi(Fr.current),n=dg(e,t.type);e!==n&&(Ue(Nc,t),Ue(Fr,n))}function Av(t){Nc.current===t&&(We(Fr),We(Nc))}var Ye=bi(0);function yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tm=[];function Rv(){for(var t=0;t<tm.length;t++)tm[t]._workInProgressVersionPrimary=null;tm.length=0}var Ld=Ss.ReactCurrentDispatcher,nm=Ss.ReactCurrentBatchConfig,ho=0,Ze=null,bt=null,Pt=null,vh=!1,tc=!1,Lc=0,zL=0;function Wt(){throw Error(H(321))}function Pv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xr(t[n],e[n]))return!1;return!0}function Nv(t,e,n,r,s,i){if(ho=i,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ld.current=t===null||t.memoizedState===null?qL:KL,t=n(r,s),tc){i=0;do{if(tc=!1,Lc=0,25<=i)throw Error(H(301));i+=1,Pt=bt=null,e.updateQueue=null,Ld.current=QL,t=n(r,s)}while(tc)}if(Ld.current=wh,e=bt!==null&&bt.next!==null,ho=0,Pt=bt=Ze=null,vh=!1,e)throw Error(H(300));return t}function Dv(){var t=Lc!==0;return Lc=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ze.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function nr(){if(bt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var e=Pt===null?Ze.memoizedState:Pt.next;if(e!==null)Pt=e,bt=t;else{if(t===null)throw Error(H(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Pt===null?Ze.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function jc(t,e){return typeof e=="function"?e(t):e}function rm(t){var e=nr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=bt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((ho&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ze.lanes|=d,fo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,xr(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ze.lanes|=i,fo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sm(t){var e=nr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xr(i,e.memoizedState)||(_n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function hI(){}function fI(t,e){var n=Ze,r=nr(),s=e(),i=!xr(r.memoizedState,s);if(i&&(r.memoizedState=s,_n=!0),r=r.queue,Lv(gI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,Mc(9,mI.bind(null,n,r,s,e),void 0,null),Lt===null)throw Error(H(349));ho&30||pI(n,e,s)}return s}function pI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mI(t,e,n,r){e.value=n,e.getSnapshot=r,yI(e)&&vI(t)}function gI(t,e,n){return n(function(){yI(e)&&vI(t)})}function yI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xr(t,n)}catch{return!0}}function vI(t){var e=gs(t,1);e!==null&&yr(e,t,1,-1)}function k_(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jc,lastRenderedState:t},e.queue=t,t=t.dispatch=GL.bind(null,Ze,t),[e.memoizedState,t]}function Mc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wI(){return nr().memoizedState}function jd(t,e,n,r){var s=Dr();Ze.flags|=t,s.memoizedState=Mc(1|e,n,void 0,r===void 0?null:r)}function _f(t,e,n,r){var s=nr();r=r===void 0?null:r;var i=void 0;if(bt!==null){var o=bt.memoizedState;if(i=o.destroy,r!==null&&Pv(r,o.deps)){s.memoizedState=Mc(e,n,i,r);return}}Ze.flags|=t,s.memoizedState=Mc(1|e,n,i,r)}function A_(t,e){return jd(8390656,8,t,e)}function Lv(t,e){return _f(2048,8,t,e)}function xI(t,e){return _f(4,2,t,e)}function _I(t,e){return _f(4,4,t,e)}function bI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function EI(t,e,n){return n=n!=null?n.concat([t]):null,_f(4,4,bI.bind(null,e,t),n)}function jv(){}function TI(t,e){var n=nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function SI(t,e){var n=nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function II(t,e,n){return ho&21?(xr(n,e)||(n=PS(),Ze.lanes|=n,fo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function WL(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=nm.transition;nm.transition={};try{t(!1),e()}finally{Ne=n,nm.transition=r}}function CI(){return nr().memoizedState}function HL(t,e,n){var r=si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kI(t))AI(e,n);else if(n=cI(t,e,n,r),n!==null){var s=hn();yr(n,t,r,s),RI(n,e,r)}}function GL(t,e,n){var r=si(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kI(t))AI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,xr(a,o)){var l=e.interleaved;l===null?(s.next=s,Iv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cI(t,e,s,r),n!==null&&(s=hn(),yr(n,t,r,s),RI(n,e,r))}}function kI(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function AI(t,e){tc=vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hv(t,n)}}var wh={readContext:tr,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},qL={readContext:tr,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:tr,useEffect:A_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jd(4194308,4,bI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jd(4194308,4,t,e)},useInsertionEffect:function(t,e){return jd(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HL.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:k_,useDebugValue:jv,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=k_(!1),e=t[0];return t=WL.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,s=Dr();if(qe){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Lt===null)throw Error(H(349));ho&30||pI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,A_(gI.bind(null,r,i,t),[t]),r.flags|=2048,Mc(9,mI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Dr(),e=Lt.identifierPrefix;if(qe){var n=is,r=ss;n=(r&~(1<<32-gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KL={readContext:tr,useCallback:TI,useContext:tr,useEffect:Lv,useImperativeHandle:EI,useInsertionEffect:xI,useLayoutEffect:_I,useMemo:SI,useReducer:rm,useRef:wI,useState:function(){return rm(jc)},useDebugValue:jv,useDeferredValue:function(t){var e=nr();return II(e,bt.memoizedState,t)},useTransition:function(){var t=rm(jc)[0],e=nr().memoizedState;return[t,e]},useMutableSource:hI,useSyncExternalStore:fI,useId:CI,unstable_isNewReconciler:!1},QL={readContext:tr,useCallback:TI,useContext:tr,useEffect:Lv,useImperativeHandle:EI,useInsertionEffect:xI,useLayoutEffect:_I,useMemo:SI,useReducer:sm,useRef:wI,useState:function(){return sm(jc)},useDebugValue:jv,useDeferredValue:function(t){var e=nr();return bt===null?e.memoizedState=t:II(e,bt.memoizedState,t)},useTransition:function(){var t=sm(jc)[0],e=nr().memoizedState;return[t,e]},useMutableSource:hI,useSyncExternalStore:fI,useId:CI,unstable_isNewReconciler:!1};function hr(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ng(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bf={isMounted:function(t){return(t=t._reactInternals)?Co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=si(t),i=ls(r,s);i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&(yr(e,t,s,r),Dd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=si(t),i=ls(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&(yr(e,t,s,r),Dd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=si(t),s=ls(n,r);s.tag=2,e!=null&&(s.callback=e),e=ni(t,s,r),e!==null&&(yr(e,t,r,n),Dd(e,t,r))}};function R_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!kc(n,r)||!kc(s,i):!0}function PI(t,e,n){var r=!1,s=di,i=e.contextType;return typeof i=="object"&&i!==null?i=tr(i):(s=En(e)?co:nn.current,r=e.contextTypes,i=(r=r!=null)?Ia(t,s):di),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function P_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bf.enqueueReplaceState(e,e.state,null)}function Dg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tr(i):(i=En(e)?co:nn.current,s.context=Ia(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ng(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bf.enqueueReplaceState(s,s.state,null),gh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var n="",r=e;do n+=ED(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function im(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YL=typeof WeakMap=="function"?WeakMap:Map;function NI(t,e,n){n=ls(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_h||(_h=!0,Wg=r),Lg(t,e)},n}function DI(t,e,n){n=ls(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Lg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lg(t,e),typeof r!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function N_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YL;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uj.bind(null,t,e,n),e.then(t,t))}function D_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ls(-1,1),e.tag=2,ni(n,e,1))),n.lanes|=1),t)}var XL=Ss.ReactCurrentOwner,_n=!1;function cn(t,e,n,r){e.child=t===null?lI(e,null,n,r):ka(e,t.child,n,r)}function j_(t,e,n,r,s){n=n.render;var i=e.ref;return ga(e,s),r=Nv(t,e,n,r,i,s),n=Dv(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ys(t,e,s)):(qe&&n&&xv(e),e.flags|=1,cn(t,e,r,s),e.child)}function M_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!zv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,LI(t,e,i,r,s)):(t=Fd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:kc,n(o,r)&&t.ref===e.ref)return ys(t,e,s)}return e.flags|=1,t=ii(i,r),t.ref=e.ref,t.return=e,e.child=t}function LI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(kc(i,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,ys(t,e,s)}return jg(t,e,n,r,s)}function jI(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(na,Rn),Rn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(na,Rn),Rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ue(na,Rn),Rn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ue(na,Rn),Rn|=r;return cn(t,e,s,n),e.child}function MI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jg(t,e,n,r,s){var i=En(n)?co:nn.current;return i=Ia(e,i),ga(e,s),n=Nv(t,e,n,r,i,s),r=Dv(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ys(t,e,s)):(qe&&r&&xv(e),e.flags|=1,cn(t,e,n,s),e.child)}function O_(t,e,n,r,s){if(En(n)){var i=!0;dh(e)}else i=!1;if(ga(e,s),e.stateNode===null)Md(t,e),PI(e,n,r),Dg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=tr(c):(c=En(n)?co:nn.current,c=Ia(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&P_(e,o,r,c),Us=!1;var p=e.memoizedState;o.state=p,gh(e,r,o,s),l=e.memoizedState,a!==r||p!==l||bn.current||Us?(typeof d=="function"&&(Ng(e,n,d,r),l=e.memoizedState),(a=Us||R_(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:hr(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tr(l):(l=En(n)?co:nn.current,l=Ia(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&P_(e,o,r,l),Us=!1,p=e.memoizedState,o.state=p,gh(e,r,o,s);var _=e.memoizedState;a!==h||p!==_||bn.current||Us?(typeof m=="function"&&(Ng(e,n,m,r),_=e.memoizedState),(c=Us||R_(e,n,c,r,p,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Mg(t,e,n,r,i,s)}function Mg(t,e,n,r,s,i){MI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&b_(e,n,!1),ys(t,e,i);r=e.stateNode,XL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ka(e,t.child,null,i),e.child=ka(e,null,a,i)):cn(t,e,a,i),e.memoizedState=r.state,s&&b_(e,n,!0),e.child}function OI(t){var e=t.stateNode;e.pendingContext?__(t,e.pendingContext,e.pendingContext!==e.context):e.context&&__(t,e.context,!1),kv(t,e.containerInfo)}function V_(t,e,n,r,s){return Ca(),bv(s),e.flags|=256,cn(t,e,n,r),e.child}var Og={dehydrated:null,treeContext:null,retryLane:0};function Vg(t){return{baseLanes:t,cachePool:null,transitions:null}}function VI(t,e,n){var r=e.pendingProps,s=Ye.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ue(Ye,s&1),t===null)return Rg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sf(o,r,0,null),t=no(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vg(n),e.memoizedState=Og,t):Mv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return JL(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ii(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ii(a,i):(i=no(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Vg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Og,r}return i=t.child,t=i.sibling,r=ii(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mv(t,e){return e=Sf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ad(t,e,n,r){return r!==null&&bv(r),ka(e,t.child,null,n),t=Mv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JL(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=im(Error(H(422))),ad(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Sf({mode:"visible",children:r.children},s,0,null),i=no(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ka(e,t.child,null,o),e.child.memoizedState=Vg(o),e.memoizedState=Og,i);if(!(e.mode&1))return ad(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(H(419)),r=im(i,r,void 0),ad(t,e,o,r)}if(a=(o&t.childLanes)!==0,_n||a){if(r=Lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,gs(t,s),yr(r,t,s,-1))}return $v(),r=im(Error(H(421))),ad(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dn=ti(s.nextSibling),Mn=e,qe=!0,pr=null,t!==null&&(Qn[Yn++]=ss,Qn[Yn++]=is,Qn[Yn++]=uo,ss=t.id,is=t.overflow,uo=e),e=Mv(e,r.children),e.flags|=4096,e)}function F_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pg(t.return,e,n)}function om(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function FI(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cn(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F_(t,n,e);else if(t.tag===19)F_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ue(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&yh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),om(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}om(e,!0,n,null,i);break;case"together":om(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Md(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZL(t,e,n){switch(e.tag){case 3:OI(e),Ca();break;case 5:dI(e);break;case 1:En(e.type)&&dh(e);break;case 4:kv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ue(ph,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?VI(t,e,n):(Ue(Ye,Ye.current&1),t=ys(t,e,n),t!==null?t.sibling:null);Ue(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ue(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,jI(t,e,n)}return ys(t,e,n)}var UI,Fg,BI,$I;UI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fg=function(){};BI=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Yi(Fr.current);var i=null;switch(n){case"input":s=ag(t,s),r=ag(t,r),i=[];break;case"select":s=tt({},s,{value:void 0}),r=tt({},r,{value:void 0}),i=[];break;case"textarea":s=ug(t,s),r=ug(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ch)}hg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_c.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_c.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ze("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};$I=function(t,e,n,r){n!==r&&(e.flags|=4)};function kl(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ej(t,e,n){var r=e.pendingProps;switch(_v(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return En(e.type)&&uh(),Ht(e),null;case 3:return r=e.stateNode,Aa(),We(bn),We(nn),Rv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(id(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pr!==null&&(qg(pr),pr=null))),Fg(t,e),Ht(e),null;case 5:Av(e);var s=Yi(Dc.current);if(n=e.type,t!==null&&e.stateNode!=null)BI(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Ht(e),null}if(t=Yi(Fr.current),id(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[jr]=e,r[Pc]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<$l.length;s++)ze($l[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Kx(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":Yx(r,i),ze("invalid",r)}hg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&sd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&sd(r.textContent,a,t),s=["children",""+a]):_c.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Yu(r),Qx(r,i,!0);break;case"textarea":Yu(r),Xx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ch)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[jr]=e,t[Pc]=r,UI(t,e,!1,!1),e.stateNode=t;e:{switch(o=fg(n,r),n){case"dialog":ze("cancel",t),ze("close",t),s=r;break;case"iframe":case"object":case"embed":ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<$l.length;s++)ze($l[s],t);s=r;break;case"source":ze("error",t),s=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=r;break;case"details":ze("toggle",t),s=r;break;case"input":Kx(t,r),s=ag(t,r),ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=tt({},r,{value:void 0}),ze("invalid",t);break;case"textarea":Yx(t,r),s=ug(t,r),ze("invalid",t);break;default:s=r}hg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wS(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yS(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bc(t,l):typeof l=="number"&&bc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_c.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ze("scroll",t):l!=null&&ov(t,i,l,o))}switch(n){case"input":Yu(t),Qx(t,r,!1);break;case"textarea":Yu(t),Xx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ui(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ha(t,!!r.multiple,i,!1):r.defaultValue!=null&&ha(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)$I(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Yi(Dc.current),Yi(Fr.current),id(e)){if(r=e.stateNode,n=e.memoizedProps,r[jr]=e,(i=r.nodeValue!==n)&&(t=Mn,t!==null))switch(t.tag){case 3:sd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=e,e.stateNode=r}return Ht(e),null;case 13:if(We(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&Dn!==null&&e.mode&1&&!(e.flags&128))oI(),Ca(),e.flags|=98560,i=!1;else if(i=id(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[jr]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),i=!1}else pr!==null&&(qg(pr),pr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?Tt===0&&(Tt=3):$v())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Aa(),Fg(t,e),t===null&&Ac(e.stateNode.containerInfo),Ht(e),null;case 10:return Sv(e.type._context),Ht(e),null;case 17:return En(e.type)&&uh(),Ht(e),null;case 19:if(We(Ye),i=e.memoizedState,i===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)kl(i,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yh(t),o!==null){for(e.flags|=128,kl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Ye,Ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&ht()>Pa&&(e.flags|=128,r=!0,kl(i,!1),e.lanes=4194304)}else{if(!r)if(t=yh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),kl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return Ht(e),null}else 2*ht()-i.renderingStartTime>Pa&&n!==1073741824&&(e.flags|=128,r=!0,kl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ht(),e.sibling=null,n=Ye.current,Ue(Ye,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return Bv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function tj(t,e){switch(_v(e),e.tag){case 1:return En(e.type)&&uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Aa(),We(bn),We(nn),Rv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Av(e),null;case 13:if(We(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ye),null;case 4:return Aa(),null;case 10:return Sv(e.type._context),null;case 22:case 23:return Bv(),null;case 24:return null;default:return null}}var ld=!1,Yt=!1,nj=typeof WeakSet=="function"?WeakSet:Set,J=null;function ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(t,e,r)}else n.current=null}function Ug(t,e,n){try{n()}catch(r){ot(t,e,r)}}var U_=!1;function rj(t,e){if(Eg=oh,t=qS(),wv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tg={focusedElem:t,selectionRange:n},oh=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,T=_.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?x:hr(e.type,x),T);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(C){ot(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return _=U_,U_=!1,_}function nc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ug(e,n,i)}s=s.next}while(s!==r)}}function Ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zI(t){var e=t.alternate;e!==null&&(t.alternate=null,zI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jr],delete e[Pc],delete e[Cg],delete e[FL],delete e[UL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WI(t){return t.tag===5||t.tag===3||t.tag===4}function B_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $g(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ch));else if(r!==4&&(t=t.child,t!==null))for($g(t,e,n),t=t.sibling;t!==null;)$g(t,e,n),t=t.sibling}function zg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zg(t,e,n),t=t.sibling;t!==null;)zg(t,e,n),t=t.sibling}var Ot=null,fr=!1;function Ls(t,e,n){for(n=n.child;n!==null;)HI(t,e,n),n=n.sibling}function HI(t,e,n){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(mf,n)}catch{}switch(n.tag){case 5:Yt||ta(n,e);case 6:var r=Ot,s=fr;Ot=null,Ls(t,e,n),Ot=r,fr=s,Ot!==null&&(fr?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(fr?(t=Ot,n=n.stateNode,t.nodeType===8?Zp(t.parentNode,n):t.nodeType===1&&Zp(t,n),Ic(t)):Zp(Ot,n.stateNode));break;case 4:r=Ot,s=fr,Ot=n.stateNode.containerInfo,fr=!0,Ls(t,e,n),Ot=r,fr=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ug(n,e,o),s=s.next}while(s!==r)}Ls(t,e,n);break;case 1:if(!Yt&&(ta(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ot(n,e,a)}Ls(t,e,n);break;case 21:Ls(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,Ls(t,e,n),Yt=r):Ls(t,e,n);break;default:Ls(t,e,n)}}function $_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nj),e.forEach(function(r){var s=hj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ot=a.stateNode,fr=!1;break e;case 3:Ot=a.stateNode.containerInfo,fr=!0;break e;case 4:Ot=a.stateNode.containerInfo,fr=!0;break e}a=a.return}if(Ot===null)throw Error(H(160));HI(i,o,s),Ot=null,fr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ot(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GI(e,t),e=e.sibling}function GI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Pr(t),r&4){try{nc(3,t,t.return),Ef(3,t)}catch(x){ot(t,t.return,x)}try{nc(5,t,t.return)}catch(x){ot(t,t.return,x)}}break;case 1:ur(e,t),Pr(t),r&512&&n!==null&&ta(n,n.return);break;case 5:if(ur(e,t),Pr(t),r&512&&n!==null&&ta(n,n.return),t.flags&32){var s=t.stateNode;try{bc(s,"")}catch(x){ot(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&pS(s,i),fg(a,o);var c=fg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?wS(s,h):d==="dangerouslySetInnerHTML"?yS(s,h):d==="children"?bc(s,h):ov(s,d,h,c)}switch(a){case"input":lg(s,i);break;case"textarea":mS(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ha(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?ha(s,!!i.multiple,i.defaultValue,!0):ha(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pc]=i}catch(x){ot(t,t.return,x)}}break;case 6:if(ur(e,t),Pr(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ot(t,t.return,x)}}break;case 3:if(ur(e,t),Pr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ic(e.containerInfo)}catch(x){ot(t,t.return,x)}break;case 4:ur(e,t),Pr(t);break;case 13:ur(e,t),Pr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Fv=ht())),r&4&&$_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(c=Yt)||d,ur(e,t),Yt=c):ur(e,t),Pr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(J=t,d=t.child;d!==null;){for(h=J=d;J!==null;){switch(p=J,m=p.child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:ta(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(x){ot(r,n,x)}}break;case 5:ta(p,p.return);break;case 22:if(p.memoizedState!==null){W_(h);continue}}m!==null?(m.return=p,J=m):W_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vS("display",o))}catch(x){ot(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){ot(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ur(e,t),Pr(t),r&4&&$_(t);break;case 21:break;default:ur(e,t),Pr(t)}}function Pr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WI(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bc(s,""),r.flags&=-33);var i=B_(t);zg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=B_(t);$g(t,a,o);break;default:throw Error(H(161))}}catch(l){ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sj(t,e,n){J=t,qI(t)}function qI(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ld;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Yt;a=ld;var c=Yt;if(ld=o,(Yt=l)&&!c)for(J=s;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?H_(s):l!==null?(l.return=o,J=l):H_(s);for(;i!==null;)J=i,qI(i),i=i.sibling;J=s,ld=a,Yt=c}z_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):z_(t)}}function z_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Ef(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&C_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}C_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ic(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Yt||e.flags&512&&Bg(e)}catch(p){ot(e,e.return,p)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function W_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function H_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ef(4,e)}catch(l){ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ot(e,s,l)}}var i=e.return;try{Bg(e)}catch(l){ot(e,i,l)}break;case 5:var o=e.return;try{Bg(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var ij=Math.ceil,xh=Ss.ReactCurrentDispatcher,Ov=Ss.ReactCurrentOwner,Jn=Ss.ReactCurrentBatchConfig,Ae=0,Lt=null,mt=null,Ut=0,Rn=0,na=bi(0),Tt=0,Oc=null,fo=0,Tf=0,Vv=0,rc=null,xn=null,Fv=0,Pa=1/0,es=null,_h=!1,Wg=null,ri=null,cd=!1,Ys=null,bh=0,sc=0,Hg=null,Od=-1,Vd=0;function hn(){return Ae&6?ht():Od!==-1?Od:Od=ht()}function si(t){return t.mode&1?Ae&2&&Ut!==0?Ut&-Ut:$L.transition!==null?(Vd===0&&(Vd=PS()),Vd):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:VS(t.type)),t):1}function yr(t,e,n,r){if(50<sc)throw sc=0,Hg=null,Error(H(185));cu(t,n,r),(!(Ae&2)||t!==Lt)&&(t===Lt&&(!(Ae&2)&&(Tf|=n),Tt===4&&zs(t,Ut)),Tn(t,r),n===1&&Ae===0&&!(e.mode&1)&&(Pa=ht()+500,xf&&Ei()))}function Tn(t,e){var n=t.callbackNode;$D(t,e);var r=ih(t,t===Lt?Ut:0);if(r===0)n!==null&&e_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&e_(n),e===1)t.tag===0?BL(G_.bind(null,t)):rI(G_.bind(null,t)),OL(function(){!(Ae&6)&&Ei()}),n=null;else{switch(NS(r)){case 1:n=dv;break;case 4:n=AS;break;case 16:n=sh;break;case 536870912:n=RS;break;default:n=sh}n=tC(n,KI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KI(t,e){if(Od=-1,Vd=0,Ae&6)throw Error(H(327));var n=t.callbackNode;if(ya()&&t.callbackNode!==n)return null;var r=ih(t,t===Lt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Eh(t,r);else{e=r;var s=Ae;Ae|=2;var i=YI();(Lt!==t||Ut!==e)&&(es=null,Pa=ht()+500,to(t,e));do try{lj();break}catch(a){QI(t,a)}while(!0);Tv(),xh.current=i,Ae=s,mt!==null?e=0:(Lt=null,Ut=0,e=Tt)}if(e!==0){if(e===2&&(s=vg(t),s!==0&&(r=s,e=Gg(t,s))),e===1)throw n=Oc,to(t,0),zs(t,r),Tn(t,ht()),n;if(e===6)zs(t,r);else{if(s=t.current.alternate,!(r&30)&&!oj(s)&&(e=Eh(t,r),e===2&&(i=vg(t),i!==0&&(r=i,e=Gg(t,i))),e===1))throw n=Oc,to(t,0),zs(t,r),Tn(t,ht()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Wi(t,xn,es);break;case 3:if(zs(t,r),(r&130023424)===r&&(e=Fv+500-ht(),10<e)){if(ih(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ig(Wi.bind(null,t,xn,es),e);break}Wi(t,xn,es);break;case 4:if(zs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ij(r/1960))-r,10<r){t.timeoutHandle=Ig(Wi.bind(null,t,xn,es),r);break}Wi(t,xn,es);break;case 5:Wi(t,xn,es);break;default:throw Error(H(329))}}}return Tn(t,ht()),t.callbackNode===n?KI.bind(null,t):null}function Gg(t,e){var n=rc;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=Eh(t,e),t!==2&&(e=xn,xn=n,e!==null&&qg(e)),t}function qg(t){xn===null?xn=t:xn.push.apply(xn,t)}function oj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zs(t,e){for(e&=~Vv,e&=~Tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gr(e),r=1<<n;t[n]=-1,e&=~r}}function G_(t){if(Ae&6)throw Error(H(327));ya();var e=ih(t,0);if(!(e&1))return Tn(t,ht()),null;var n=Eh(t,e);if(t.tag!==0&&n===2){var r=vg(t);r!==0&&(e=r,n=Gg(t,r))}if(n===1)throw n=Oc,to(t,0),zs(t,e),Tn(t,ht()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wi(t,xn,es),Tn(t,ht()),null}function Uv(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(Pa=ht()+500,xf&&Ei())}}function po(t){Ys!==null&&Ys.tag===0&&!(Ae&6)&&ya();var e=Ae;Ae|=1;var n=Jn.transition,r=Ne;try{if(Jn.transition=null,Ne=1,t)return t()}finally{Ne=r,Jn.transition=n,Ae=e,!(Ae&6)&&Ei()}}function Bv(){Rn=na.current,We(na)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ML(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(_v(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uh();break;case 3:Aa(),We(bn),We(nn),Rv();break;case 5:Av(r);break;case 4:Aa();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:Sv(r.type._context);break;case 22:case 23:Bv()}n=n.return}if(Lt=t,mt=t=ii(t.current,null),Ut=Rn=e,Tt=0,Oc=null,Vv=Tf=fo=0,xn=rc=null,Qi!==null){for(e=0;e<Qi.length;e++)if(n=Qi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qi=null}return t}function QI(t,e){do{var n=mt;try{if(Tv(),Ld.current=wh,vh){for(var r=Ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vh=!1}if(ho=0,Pt=bt=Ze=null,tc=!1,Lc=0,Ov.current=null,n===null||n.return===null){Tt=1,Oc=e,mt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=D_(o);if(m!==null){m.flags&=-257,L_(m,o,a,i,e),m.mode&1&&N_(i,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var x=new Set;x.add(l),e.updateQueue=x}else _.add(l);break e}else{if(!(e&1)){N_(i,c,e),$v();break e}l=Error(H(426))}}else if(qe&&a.mode&1){var T=D_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),L_(T,o,a,i,e),bv(Ra(l,a));break e}}i=l=Ra(l,a),Tt!==4&&(Tt=2),rc===null?rc=[i]:rc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=NI(i,l,e);I_(i,E);break e;case 1:a=l;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ri===null||!ri.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=DI(i,a,e);I_(i,C);break e}}i=i.return}while(i!==null)}JI(n)}catch(R){e=R,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function YI(){var t=xh.current;return xh.current=wh,t===null?wh:t}function $v(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Lt===null||!(fo&268435455)&&!(Tf&268435455)||zs(Lt,Ut)}function Eh(t,e){var n=Ae;Ae|=2;var r=YI();(Lt!==t||Ut!==e)&&(es=null,to(t,e));do try{aj();break}catch(s){QI(t,s)}while(!0);if(Tv(),Ae=n,xh.current=r,mt!==null)throw Error(H(261));return Lt=null,Ut=0,Tt}function aj(){for(;mt!==null;)XI(mt)}function lj(){for(;mt!==null&&!DD();)XI(mt)}function XI(t){var e=eC(t.alternate,t,Rn);t.memoizedProps=t.pendingProps,e===null?JI(t):mt=e,Ov.current=null}function JI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tj(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,mt=null;return}}else if(n=ej(n,e,Rn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);Tt===0&&(Tt=5)}function Wi(t,e,n){var r=Ne,s=Jn.transition;try{Jn.transition=null,Ne=1,cj(t,e,n,r)}finally{Jn.transition=s,Ne=r}return null}function cj(t,e,n,r){do ya();while(Ys!==null);if(Ae&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(zD(t,i),t===Lt&&(mt=Lt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cd||(cd=!0,tC(sh,function(){return ya(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jn.transition,Jn.transition=null;var o=Ne;Ne=1;var a=Ae;Ae|=4,Ov.current=null,rj(t,n),GI(n,t),AL(Tg),oh=!!Eg,Tg=Eg=null,t.current=n,sj(n),LD(),Ae=a,Ne=o,Jn.transition=i}else t.current=n;if(cd&&(cd=!1,Ys=t,bh=s),i=t.pendingLanes,i===0&&(ri=null),OD(n.stateNode),Tn(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_h)throw _h=!1,t=Wg,Wg=null,t;return bh&1&&t.tag!==0&&ya(),i=t.pendingLanes,i&1?t===Hg?sc++:(sc=0,Hg=t):sc=0,Ei(),null}function ya(){if(Ys!==null){var t=NS(bh),e=Jn.transition,n=Ne;try{if(Jn.transition=null,Ne=16>t?16:t,Ys===null)var r=!1;else{if(t=Ys,Ys=null,bh=0,Ae&6)throw Error(H(331));var s=Ae;for(Ae|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:nc(8,d,i)}var h=d.child;if(h!==null)h.return=d,J=h;else for(;J!==null;){d=J;var p=d.sibling,m=d.return;if(zI(d),d===c){J=null;break}if(p!==null){p.return=m,J=p;break}J=m}}}var _=i.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nc(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,J=E;break e}J=i.return}}var w=t.current;for(J=w;J!==null;){o=J;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,J=b;else e:for(o=w;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ef(9,a)}}catch(R){ot(a,a.return,R)}if(a===o){J=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,J=C;break e}J=a.return}}if(Ae=s,Ei(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(mf,t)}catch{}r=!0}return r}finally{Ne=n,Jn.transition=e}}return!1}function q_(t,e,n){e=Ra(n,e),e=NI(t,e,1),t=ni(t,e,1),e=hn(),t!==null&&(cu(t,1,e),Tn(t,e))}function ot(t,e,n){if(t.tag===3)q_(t,t,n);else for(;e!==null;){if(e.tag===3){q_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ri===null||!ri.has(r))){t=Ra(n,t),t=DI(e,t,1),e=ni(e,t,1),t=hn(),e!==null&&(cu(e,1,t),Tn(e,t));break}}e=e.return}}function uj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Ut&n)===n&&(Tt===4||Tt===3&&(Ut&130023424)===Ut&&500>ht()-Fv?to(t,0):Vv|=n),Tn(t,e)}function ZI(t,e){e===0&&(t.mode&1?(e=Zu,Zu<<=1,!(Zu&130023424)&&(Zu=4194304)):e=1);var n=hn();t=gs(t,e),t!==null&&(cu(t,e,n),Tn(t,n))}function dj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ZI(t,n)}function hj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),ZI(t,n)}var eC;eC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,ZL(t,e,n);_n=!!(t.flags&131072)}else _n=!1,qe&&e.flags&1048576&&sI(e,fh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Md(t,e),t=e.pendingProps;var s=Ia(e,nn.current);ga(e,n),s=Nv(null,e,r,t,s,n);var i=Dv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(r)?(i=!0,dh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cv(e),s.updater=bf,e.stateNode=s,s._reactInternals=e,Dg(e,r,t,n),e=Mg(null,e,r,!0,i,n)):(e.tag=0,qe&&i&&xv(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Md(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pj(r),t=hr(r,t),s){case 0:e=jg(null,e,r,t,n);break e;case 1:e=O_(null,e,r,t,n);break e;case 11:e=j_(null,e,r,t,n);break e;case 14:e=M_(null,e,r,hr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),jg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),O_(t,e,r,s,n);case 3:e:{if(OI(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uI(t,e),gh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ra(Error(H(423)),e),e=V_(t,e,r,n,s);break e}else if(r!==s){s=Ra(Error(H(424)),e),e=V_(t,e,r,n,s);break e}else for(Dn=ti(e.stateNode.containerInfo.firstChild),Mn=e,qe=!0,pr=null,n=lI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===s){e=ys(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return dI(e),t===null&&Rg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Sg(r,s)?o=null:i!==null&&Sg(r,i)&&(e.flags|=32),MI(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&Rg(e),null;case 13:return VI(t,e,n);case 4:return kv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ka(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),j_(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ue(ph,r._currentValue),r._currentValue=o,i!==null)if(xr(i.value,o)){if(i.children===s.children&&!bn.current){e=ys(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ls(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Pg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ga(e,n),s=tr(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=hr(r,e.pendingProps),s=hr(r.type,s),M_(t,e,r,s,n);case 15:return LI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Md(t,e),e.tag=1,En(r)?(t=!0,dh(e)):t=!1,ga(e,n),PI(e,r,s),Dg(e,r,s,n),Mg(null,e,r,!0,t,n);case 19:return FI(t,e,n);case 22:return jI(t,e,n)}throw Error(H(156,e.tag))};function tC(t,e){return kS(t,e)}function fj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,r){return new fj(t,e,n,r)}function zv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pj(t){if(typeof t=="function")return zv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lv)return 11;if(t===cv)return 14}return 2}function ii(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")zv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Go:return no(n.children,s,i,e);case av:o=8,s|=8;break;case rg:return t=Xn(12,n,e,s|2),t.elementType=rg,t.lanes=i,t;case sg:return t=Xn(13,n,e,s),t.elementType=sg,t.lanes=i,t;case ig:return t=Xn(19,n,e,s),t.elementType=ig,t.lanes=i,t;case dS:return Sf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cS:o=10;break e;case uS:o=9;break e;case lv:o=11;break e;case cv:o=14;break e;case Fs:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Xn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function no(t,e,n,r){return t=Xn(7,t,r,e),t.lanes=n,t}function Sf(t,e,n,r){return t=Xn(22,t,r,e),t.elementType=dS,t.lanes=n,t.stateNode={isHidden:!1},t}function am(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function lm(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$p(0),this.expirationTimes=$p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$p(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wv(t,e,n,r,s,i,o,a,l){return t=new mj(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cv(i),t}function gj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nC(t){if(!t)return di;t=t._reactInternals;e:{if(Co(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(En(n))return nI(t,n,e)}return e}function rC(t,e,n,r,s,i,o,a,l){return t=Wv(n,r,!0,t,s,i,o,a,l),t.context=nC(null),n=t.current,r=hn(),s=si(n),i=ls(r,s),i.callback=e??null,ni(n,i,s),t.current.lanes=s,cu(t,s,r),Tn(t,r),t}function If(t,e,n,r){var s=e.current,i=hn(),o=si(s);return n=nC(n),e.context===null?e.context=n:e.pendingContext=n,e=ls(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ni(s,e,o),t!==null&&(yr(t,s,o,i),Dd(t,s,o)),o}function Th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hv(t,e){K_(t,e),(t=t.alternate)&&K_(t,e)}function yj(){return null}var sC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gv(t){this._internalRoot=t}Cf.prototype.render=Gv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));If(t,e,null,null)};Cf.prototype.unmount=Gv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;po(function(){If(null,t,null,null)}),e[ms]=null}};function Cf(t){this._internalRoot=t}Cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=jS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$s.length&&e!==0&&e<$s[n].priority;n++);$s.splice(n,0,t),n===0&&OS(t)}};function qv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q_(){}function vj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Th(o);i.call(c)}}var o=rC(e,r,t,0,null,!1,!1,"",Q_);return t._reactRootContainer=o,t[ms]=o.current,Ac(t.nodeType===8?t.parentNode:t),po(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Th(l);a.call(c)}}var l=Wv(t,0,!1,null,null,!1,!1,"",Q_);return t._reactRootContainer=l,t[ms]=l.current,Ac(t.nodeType===8?t.parentNode:t),po(function(){If(e,l,n,r)}),l}function Af(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Th(o);a.call(l)}}If(e,o,t,s)}else o=vj(n,e,t,s,r);return Th(o)}DS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bl(e.pendingLanes);n!==0&&(hv(e,n|1),Tn(e,ht()),!(Ae&6)&&(Pa=ht()+500,Ei()))}break;case 13:po(function(){var r=gs(t,1);if(r!==null){var s=hn();yr(r,t,1,s)}}),Hv(t,1)}};fv=function(t){if(t.tag===13){var e=gs(t,134217728);if(e!==null){var n=hn();yr(e,t,134217728,n)}Hv(t,134217728)}};LS=function(t){if(t.tag===13){var e=si(t),n=gs(t,e);if(n!==null){var r=hn();yr(n,t,e,r)}Hv(t,e)}};jS=function(){return Ne};MS=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};mg=function(t,e,n){switch(e){case"input":if(lg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wf(r);if(!s)throw Error(H(90));fS(r),lg(r,s)}}}break;case"textarea":mS(t,n);break;case"select":e=n.value,e!=null&&ha(t,!!n.multiple,e,!1)}};bS=Uv;ES=po;var wj={usingClientEntryPoint:!1,Events:[du,Yo,wf,xS,_S,Uv]},Al={findFiberByHostInstance:Ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xj={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IS(t),t===null?null:t.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance||yj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ud.isDisabled&&ud.supportsFiber)try{mf=ud.inject(xj),Vr=ud}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wj;Bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qv(e))throw Error(H(200));return gj(t,e,null,n)};Bn.createRoot=function(t,e){if(!qv(t))throw Error(H(299));var n=!1,r="",s=sC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wv(t,1,!1,null,null,n,!1,r,s),t[ms]=e.current,Ac(t.nodeType===8?t.parentNode:t),new Gv(e)};Bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=IS(e),t=t===null?null:t.stateNode,t};Bn.flushSync=function(t){return po(t)};Bn.hydrate=function(t,e,n){if(!kf(e))throw Error(H(200));return Af(null,t,e,!0,n)};Bn.hydrateRoot=function(t,e,n){if(!qv(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=sC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rC(e,null,t,1,n??null,s,!1,i,o),t[ms]=e.current,Ac(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cf(e)};Bn.render=function(t,e,n){if(!kf(e))throw Error(H(200));return Af(null,t,e,!1,n)};Bn.unmountComponentAtNode=function(t){if(!kf(t))throw Error(H(40));return t._reactRootContainer?(po(function(){Af(null,null,t,!1,function(){t._reactRootContainer=null,t[ms]=null})}),!0):!1};Bn.unstable_batchedUpdates=Uv;Bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kf(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Af(t,e,n,!1,r)};Bn.version="18.3.1-next-f1338f8080-20240426";function iC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iC)}catch(t){console.error(t)}}iC(),iS.exports=Bn;var ra=iS.exports,Y_=ra;tg.createRoot=Y_.createRoot,tg.hydrateRoot=Y_.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var X_="popstate";function _j(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Kg("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vc(s)}return Ej(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bj(){return Math.random().toString(36).substring(2,10)}function J_(t,e){return{usr:t.state,key:t.key,idx:e}}function Kg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ga(e):e,state:n,key:e&&e.key||r||bj()}}function Vc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Ej(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let T=d(),E=T==null?null:T-c;c=T,l&&l({action:a,location:x.location,delta:E})}function p(T,E){a="PUSH";let w=Kg(x.location,T,E);c=d()+1;let b=J_(w,c),C=x.createHref(w);try{o.pushState(b,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(C)}i&&l&&l({action:a,location:x.location,delta:1})}function m(T,E){a="REPLACE";let w=Kg(x.location,T,E);c=d();let b=J_(w,c),C=x.createHref(w);o.replaceState(b,"",C),i&&l&&l({action:a,location:x.location,delta:0})}function _(T){return Tj(T)}let x={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(X_,h),l=T,()=>{s.removeEventListener(X_,h),l=null}},createHref(T){return e(s,T)},createURL:_,encodeLocation(T){let E=_(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:m,go(T){return o.go(T)}};return x}function Tj(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Vc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function oC(t,e,n="/"){return Sj(t,e,n,!1)}function Sj(t,e,n,r){let s=typeof e=="string"?Ga(e):e,i=vs(s.pathname||"/",n);if(i==null)return null;let o=aC(t);Ij(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Oj(i);a=jj(o[l],c,r)}return a}function aC(t,e=[],n=[],r="",s=!1){let i=(o,a,l=s,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;Ke(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=cs([r,d.relativePath]),p=n.concat(d);o.children&&o.children.length>0&&(Ke(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),aC(o.children,e,p,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:Dj(h,o.index),routesMeta:p})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of lC(o.path))i(o,a,!0,c)}),e}function lC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=lC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ij(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Lj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Cj=/^:[\w-]+$/,kj=3,Aj=2,Rj=1,Pj=10,Nj=-2,Z_=t=>t==="*";function Dj(t,e){let n=t.split("/"),r=n.length;return n.some(Z_)&&(r+=Nj),e&&(r+=Aj),n.filter(s=>!Z_(s)).reduce((s,i)=>s+(Cj.test(i)?kj:i===""?Rj:Pj),r)}function Lj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function jj(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Sh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Sh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:cs([i,h.pathname]),pathnameBase:Bj(cs([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=cs([i,h.pathnameBase]))}return o}function Sh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:h},p)=>{if(d==="*"){let _=a[p]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const m=a[p];return h&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Mj(t,e=!1,n=!0){rr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Oj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Vj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Fj(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ga(t):t,i;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?i=eb(n.substring(1),"/"):i=eb(n,e)):i=e,{pathname:i,search:$j(r),hash:zj(s)}}function eb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Uj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kv(t){let e=Uj(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Qv(t,e,n,r=!1){let s;typeof t=="string"?s=Ga(t):(s={...t},Ke(!s.pathname||!s.pathname.includes("?"),cm("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),cm("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),cm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=Fj(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var cs=t=>t.join("/").replace(/\/\/+/g,"/"),Bj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$j=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Wj=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Hj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Gj(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var cC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function uC(t,e){let n=t;if(typeof n!="string"||!Vj.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(cC)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),a=vs(o.pathname,e);o.origin===i.origin&&a!=null?n=a+o.search+o.hash:s=!0}catch{rr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dC=["POST","PUT","PATCH","DELETE"];new Set(dC);var qj=["GET",...dC];new Set(qj);var qa=y.createContext(null);qa.displayName="DataRouter";var Rf=y.createContext(null);Rf.displayName="DataRouterState";var Kj=y.createContext(!1),hC=y.createContext({isTransitioning:!1});hC.displayName="ViewTransition";var Qj=y.createContext(new Map);Qj.displayName="Fetchers";var Yj=y.createContext(null);Yj.displayName="Await";var zn=y.createContext(null);zn.displayName="Navigation";var fu=y.createContext(null);fu.displayName="Location";var or=y.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var Yv=y.createContext(null);Yv.displayName="RouteError";var fC="REACT_ROUTER_ERROR",Xj="REDIRECT",Jj="ROUTE_ERROR_RESPONSE";function Zj(t){if(t.startsWith(`${fC}:${Xj}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function eM(t){if(t.startsWith(`${fC}:${Jj}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Wj(e.status,e.statusText,e.data)}catch{}}function tM(t,{relative:e}={}){Ke(Ka(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(zn),{hash:s,pathname:i,search:o}=pu(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:cs([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Ka(){return y.useContext(fu)!=null}function Tr(){return Ke(Ka(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(fu).location}var pC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mC(t){y.useContext(zn).static||y.useLayoutEffect(t)}function Ct(){let{isDataRoute:t}=y.useContext(or);return t?gM():nM()}function nM(){Ke(Ka(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(qa),{basename:e,navigator:n}=y.useContext(zn),{matches:r}=y.useContext(or),{pathname:s}=Tr(),i=JSON.stringify(Kv(r)),o=y.useRef(!1);return mC(()=>{o.current=!0}),y.useCallback((l,c={})=>{if(rr(o.current,pC),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Qv(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:cs([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}var rM=y.createContext(null);function sM(t){let e=y.useContext(or).outlet;return y.useMemo(()=>e&&y.createElement(rM.Provider,{value:t},e),[e,t])}function Xv(){let{matches:t}=y.useContext(or),e=t[t.length-1];return e?e.params:{}}function pu(t,{relative:e}={}){let{matches:n}=y.useContext(or),{pathname:r}=Tr(),s=JSON.stringify(Kv(n));return y.useMemo(()=>Qv(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function iM(t,e){return gC(t,e)}function gC(t,e,n,r,s){var w;Ke(Ka(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(zn),{matches:o}=y.useContext(or),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let b=h&&h.path||"";vC(c,!h||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let p=Tr(),m;if(e){let b=typeof e=="string"?Ga(e):e;Ke(d==="/"||((w=b.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=p;let _=m.pathname||"/",x=_;if(d!=="/"){let b=d.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let T=oC(t,{pathname:x});rr(h||T!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),rr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=uM(T&&T.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:cs([d,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:cs([d,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,n,r,s);return e&&E?y.createElement(fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},E):E}function oM(){let t=mM(),e=Hj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,o)}var aM=y.createElement(oM,null),yC=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=eM(t.digest);n&&(t=n)}let e=t!==void 0?y.createElement(or.Provider,{value:this.props.routeContext},y.createElement(Yv.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?y.createElement(lM,{error:t},e):e}};yC.contextType=Kj;var um=new WeakMap;function lM({children:t,error:e}){let{basename:n}=y.useContext(zn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Zj(e.digest);if(r){let s=um.get(e);if(s)throw s;let i=uC(r.location,n);if(cC&&!um.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw um.set(e,o),o}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function cM({routeContext:t,match:e,children:n}){let r=y.useContext(qa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(or.Provider,{value:t},n)}function uM(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);Ke(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,l=-1;if(n)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=d),h.route.id){let{loaderData:p,errors:m}=n,_=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||_){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let c=n&&r?(d,h)=>{var p,m;r(d,{location:n.location,params:((m=(p=n.matches)==null?void 0:p[0])==null?void 0:m.params)??{},unstable_pattern:Gj(n.matches),errorInfo:h})}:void 0;return i.reduceRight((d,h,p)=>{let m,_=!1,x=null,T=null;n&&(m=o&&h.route.id?o[h.route.id]:void 0,x=h.route.errorElement||aM,a&&(l<0&&p===0?(vC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):l===p&&(_=!0,T=h.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,p+1)),w=()=>{let b;return m?b=x:_?b=T:h.route.Component?b=y.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,y.createElement(cM,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?y.createElement(yC,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:c}):w()},null)}function Jv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dM(t){let e=y.useContext(qa);return Ke(e,Jv(t)),e}function hM(t){let e=y.useContext(Rf);return Ke(e,Jv(t)),e}function fM(t){let e=y.useContext(or);return Ke(e,Jv(t)),e}function Zv(t){let e=fM(t),n=e.matches[e.matches.length-1];return Ke(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function pM(){return Zv("useRouteId")}function mM(){var r;let t=y.useContext(Yv),e=hM("useRouteError"),n=Zv("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function gM(){let{router:t}=dM("useNavigate"),e=Zv("useNavigate"),n=y.useRef(!1);return mC(()=>{n.current=!0}),y.useCallback(async(s,i={})=>{rr(n.current,pC),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var tb={};function vC(t,e,n){!e&&!tb[t]&&(tb[t]=!0,rr(!1,n))}y.memo(yM);function yM({routes:t,future:e,state:n,onError:r}){return gC(t,void 0,n,r,e)}function Nr({to:t,replace:e,state:n,relative:r}){Ke(Ka(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=y.useContext(zn);rr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=y.useContext(or),{pathname:o}=Tr(),a=Ct(),l=Qv(t,Kv(i),o,r==="path"),c=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function vM(t){return sM(t.context)}function qt(t){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function wM({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Ke(!Ka(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=y.useMemo(()=>({basename:a,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[a,s,i,o]);typeof n=="string"&&(n=Ga(n));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=n,_=y.useMemo(()=>{let x=vs(c,a);return x==null?null:{location:{pathname:x,search:d,hash:h,state:p,key:m},navigationType:r}},[a,c,d,h,p,m,r]);return rr(_!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:y.createElement(zn.Provider,{value:l},y.createElement(fu.Provider,{children:e,value:_}))}function xM({children:t,location:e}){return iM(Qg(t),e)}function Qg(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Qg(r.props.children,i));return}Ke(r.type===qt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qg(r.props.children,i)),n.push(o)}),n}var Ud="get",Bd="application/x-www-form-urlencoded";function Pf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function _M(t){return Pf(t)&&t.tagName.toLowerCase()==="button"}function bM(t){return Pf(t)&&t.tagName.toLowerCase()==="form"}function EM(t){return Pf(t)&&t.tagName.toLowerCase()==="input"}function TM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SM(t,e){return t.button===0&&(!e||e==="_self")&&!TM(t)}function Yg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function IM(t,e){let n=Yg(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}var dd=null;function CM(){if(dd===null)try{new FormData(document.createElement("form"),0),dd=!1}catch{dd=!0}return dd}var kM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dm(t){return t!=null&&!kM.has(t)?(rr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):t}function AM(t,e){let n,r,s,i,o;if(bM(t)){let a=t.getAttribute("action");r=a?vs(a,e):null,n=t.getAttribute("method")||Ud,s=dm(t.getAttribute("enctype"))||Bd,i=new FormData(t)}else if(_M(t)||EM(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?vs(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Ud,s=dm(t.getAttribute("formenctype"))||dm(a.getAttribute("enctype"))||Bd,i=new FormData(a,t),!CM()){let{name:c,type:d,value:h}=t;if(d==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,h)}}else{if(Pf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ud,r=null,s=Bd,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function e0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function RM(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&vs(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function PM(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NM(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function DM(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await PM(i,n);return o.links?o.links():[]}return[]}));return OM(r.flat(1).filter(NM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function nb(t,e,n,r,s,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function LM(t,e,{includeHydrateFallback:n}={}){return jM(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function jM(t){return[...new Set(t)]}function MM(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function OM(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(MM(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function wC(){let t=y.useContext(qa);return e0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function VM(){let t=y.useContext(Rf);return e0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var t0=y.createContext(void 0);t0.displayName="FrameworkContext";function xC(){let t=y.useContext(t0);return e0(t,"You must render this element inside a <HydratedRouter> element"),t}function FM(t,e){let n=y.useContext(t0),[r,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,p=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=E=>{E.forEach(w=>{o(w.isIntersecting)})},T=new IntersectionObserver(x,{threshold:.5});return p.current&&T.observe(p.current),()=>{T.disconnect()}}},[t]),y.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let m=()=>{s(!0)},_=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:Rl(a,m),onBlur:Rl(l,_),onMouseEnter:Rl(c,m),onMouseLeave:Rl(d,_),onTouchStart:Rl(h,m)}]:[!1,p,{}]}function Rl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function UM({page:t,...e}){let{router:n}=wC(),r=y.useMemo(()=>oC(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement($M,{page:t,matches:r,...e}):null}function BM(t){let{manifest:e,routeModules:n}=xC(),[r,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return DM(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function $M({page:t,matches:e,...n}){let r=Tr(),{future:s,manifest:i,routeModules:o}=xC(),{basename:a}=wC(),{loaderData:l,matches:c}=VM(),d=y.useMemo(()=>nb(t,e,c,i,r,"data"),[t,e,c,i,r]),h=y.useMemo(()=>nb(t,e,c,i,r,"assets"),[t,e,c,i,r]),p=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,T=!1;if(e.forEach(w=>{var C;let b=i.routes[w.route.id];!b||!b.hasLoader||(!d.some(R=>R.route.id===w.route.id)&&w.route.id in l&&((C=o[w.route.id])!=null&&C.shouldRevalidate)||b.hasClientLoader?T=!0:x.add(w.route.id))}),x.size===0)return[];let E=RM(t,a,s.unstable_trailingSlashAwareDataRequests,"data");return T&&x.size>0&&E.searchParams.set("_routes",e.filter(w=>x.has(w.route.id)).map(w=>w.route.id).join(",")),[E.pathname+E.search]},[a,s.unstable_trailingSlashAwareDataRequests,l,r,i,d,e,t,o]),m=y.useMemo(()=>LM(h,i),[h,i]),_=BM(h);return y.createElement(y.Fragment,null,p.map(x=>y.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>y.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),_.map(({key:x,link:T})=>y.createElement("link",{key:x,nonce:n.nonce,...T,crossOrigin:T.crossOrigin??n.crossOrigin})))}function zM(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var WM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WM&&(window.__reactRouterVersion="7.13.0")}catch{}function HM({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=y.useRef();s.current==null&&(s.current=_j({window:r,v5Compat:!0}));let i=s.current,[o,a]=y.useState({action:i.action,location:i.location}),l=y.useCallback(c=>{n===!1?a(c):y.startTransition(()=>a(c))},[n]);return y.useLayoutEffect(()=>i.listen(l),[i,l]),y.createElement(wM,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var _C=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bC=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p,...m},_){let{basename:x,unstable_useTransitions:T}=y.useContext(zn),E=typeof c=="string"&&_C.test(c),w=uC(c,x);c=w.to;let b=tM(c,{relative:s}),[C,R,O]=FM(r,m),I=QM(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:T});function S(P){e&&e(P),P.defaultPrevented||I(P)}let k=y.createElement("a",{...m,...O,href:w.absoluteURL||b,onClick:w.isExternal||i?e:S,ref:zM(_,R),target:l,"data-discover":!E&&n==="render"?"true":void 0});return C&&!E?y.createElement(y.Fragment,null,k,y.createElement(UM,{page:b})):k});bC.displayName="Link";var GM=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},d){let h=pu(o,{relative:c.relative}),p=Tr(),m=y.useContext(Rf),{navigator:_,basename:x}=y.useContext(zn),T=m!=null&&eO(h)&&a===!0,E=_.encodeLocation?_.encodeLocation(h).pathname:h.pathname,w=p.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(w=w.toLowerCase(),b=b?b.toLowerCase():null,E=E.toLowerCase()),b&&x&&(b=vs(b,x)||b);const C=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let R=w===E||!s&&w.startsWith(E)&&w.charAt(C)==="/",O=b!=null&&(b===E||!s&&b.startsWith(E)&&b.charAt(E.length)==="/"),I={isActive:R,isPending:O,isTransitioning:T},S=R?e:void 0,k;typeof r=="function"?k=r(I):k=[r,R?"active":null,O?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(I):i;return y.createElement(bC,{...c,"aria-current":S,className:k,ref:d,style:P,to:o,viewTransition:a},typeof l=="function"?l(I):l)});GM.displayName="NavLink";var qM=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Ud,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p,...m},_)=>{let{unstable_useTransitions:x}=y.useContext(zn),T=JM(),E=ZM(a,{relative:c}),w=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&_C.test(a),C=R=>{if(l&&l(R),R.defaultPrevented)return;R.preventDefault();let O=R.nativeEvent.submitter,I=(O==null?void 0:O.getAttribute("formmethod"))||o,S=()=>T(O||R.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:s,state:i,relative:c,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p});x&&n!==!1?y.startTransition(()=>S()):S()};return y.createElement("form",{ref:_,method:w,action:E,onSubmit:r?l:C,...m,"data-discover":!b&&t==="render"?"true":void 0})});qM.displayName="Form";function KM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EC(t){let e=y.useContext(qa);return Ke(e,KM(t)),e}function QM(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:l}={}){let c=Ct(),d=Tr(),h=pu(t,{relative:i});return y.useCallback(p=>{if(SM(p,e)){p.preventDefault();let m=n!==void 0?n:Vc(d)===Vc(h),_=()=>c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a});l?y.startTransition(()=>_()):_()}},[d,c,h,n,r,e,t,s,i,o,a,l])}function TC(t){rr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(Yg(t)),n=y.useRef(!1),r=Tr(),s=y.useMemo(()=>IM(r.search,n.current?null:e.current),[r.search]),i=Ct(),o=y.useCallback((a,l)=>{const c=Yg(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var YM=0,XM=()=>`__${String(++YM)}__`;function JM(){let{router:t}=EC("useSubmit"),{basename:e}=y.useContext(zn),n=pM(),r=t.fetch,s=t.navigate;return y.useCallback(async(i,o={})=>{let{action:a,method:l,encType:c,formData:d,body:h}=AM(i,e);if(o.navigate===!1){let p=o.fetcherKey||XM();await r(p,n,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||l,formEncType:o.encType||c,flushSync:o.flushSync})}else await s(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||l,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function ZM(t,{relative:e}={}){let{basename:n}=y.useContext(zn),r=y.useContext(or);Ke(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...pu(t||".",{relative:e})},o=Tr();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:cs([n,i.pathname])),Vc(i)}function eO(t,{relative:e}={}){let n=y.useContext(hC);Ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=EC("useViewTransitionState"),s=pu(t,{relative:e});if(!n.isTransitioning)return!1;let i=vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Sh(s.pathname,o)!=null||Sh(s.pathname,i)!=null}function tO(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ro(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const rb={};function Xg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ro(e[0])&&rb[e[0]]||(ro(e[0])&&(rb[e[0]]=new Date),tO(...e))}const SC=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},sb=(t,e,n)=>{t.loadNamespaces(e,SC(t,n))},ib=(t,e,n,r)=>{ro(n)&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,SC(t,r))},nO=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=e.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!s||o(i,t)))},rO=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Xg("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!i(s.isLanguageChangingTo,t))return!1}}):nO(t,e,n)},ro=t=>typeof t=="string",sO=t=>typeof t=="object"&&t!==null,iO=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,oO={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},aO=t=>oO[t],lO=t=>t.replace(iO,aO);let Jg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:lO};const cO=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jg={...Jg,...t}},uO=()=>Jg;let IC;const dO=t=>{IC=t},hO=()=>IC,fO={type:"3rdParty",init(t){cO(t.options.react),dO(t)}},pO=y.createContext();class mO{constructor(){Bx(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}const gO=(t,e)=>{const n=y.useRef();return y.useEffect(()=>{n.current=t},[t,e]),n.current},CC=(t,e,n,r)=>t.getFixedT(e,n,r),yO=(t,e,n,r)=>y.useCallback(CC(t,e,n,r),[t,e,n,r]),Ti=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=y.useContext(pO)||{},i=n||r||hO();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new mO),!i){Xg("You will need to pass in an i18next instance by using initReactI18next");const C=(O,I)=>ro(I)?I:sO(I)&&ro(I.defaultValue)?I.defaultValue:Array.isArray(O)?O[O.length-1]:O,R=[C,{},!1];return R.t=C,R.i18n={},R.ready=!1,R}i.options.react&&i.options.react.wait!==void 0&&Xg("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...uO(),...i.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let c=s||i.options&&i.options.defaultNS;c=ro(c)?[c]:c||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(c);const d=(i.isInitialized||i.initializedStoreOnce)&&c.every(C=>rO(C,i,o)),h=yO(i,e.lng||null,o.nsMode==="fallback"?c:c[0],l),p=()=>h,m=()=>CC(i,e.lng||null,o.nsMode==="fallback"?c:c[0],l),[_,x]=y.useState(p);let T=c.join();e.lng&&(T=`${e.lng}${T}`);const E=gO(T),w=y.useRef(!0);y.useEffect(()=>{const{bindI18n:C,bindI18nStore:R}=o;w.current=!0,!d&&!a&&(e.lng?ib(i,e.lng,c,()=>{w.current&&x(m)}):sb(i,c,()=>{w.current&&x(m)})),d&&E&&E!==T&&w.current&&x(m);const O=()=>{w.current&&x(m)};return C&&i&&i.on(C,O),R&&i&&i.store.on(R,O),()=>{w.current=!1,C&&i&&C.split(" ").forEach(I=>i.off(I,O)),R&&i&&R.split(" ").forEach(I=>i.store.off(I,O))}},[i,T]),y.useEffect(()=>{w.current&&d&&x(p)},[i,l,d]);const b=[_,i,d];if(b.t=_,b.i18n=i,b.ready=d,d||!d&&!a)return b;throw new Promise(C=>{e.lng?ib(i,e.lng,c,()=>C()):sb(i,c,()=>C())})},n0=y.createContext({});function r0(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Nf=y.createContext(null),s0=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class vO extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function wO({children:t,isPresent:e}){const n=y.useId(),r=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=y.useContext(s0);return y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),f.jsx(vO,{isPresent:e,childRef:r,sizeRef:s,children:y.cloneElement(t,{ref:r})})}const xO=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=r0(_O),l=y.useId(),c=y.useCallback(h=>{a.set(h,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),d=y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),c]:[n,c]);return y.useMemo(()=>{a.forEach((h,p)=>a.set(p,!1))},[n]),y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=f.jsx(wO,{isPresent:n,children:t})),f.jsx(Nf.Provider,{value:d,children:t})};function _O(){return new Map}function kC(t=!0){const e=y.useContext(Nf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=y.useId();y.useEffect(()=>{t&&s(i)},[t]);const o=y.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const hd=t=>t.key||"";function ob(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const i0=typeof window<"u",AC=i0?y.useLayoutEffect:y.useEffect,ws=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=kC(o),c=y.useMemo(()=>ob(t),[t]),d=o&&!a?[]:c.map(hd),h=y.useRef(!0),p=y.useRef(c),m=r0(()=>new Map),[_,x]=y.useState(c),[T,E]=y.useState(c);AC(()=>{h.current=!1,p.current=c;for(let C=0;C<T.length;C++){const R=hd(T[C]);d.includes(R)?m.delete(R):m.get(R)!==!0&&m.set(R,!1)}},[T,d.length,d.join("-")]);const w=[];if(c!==_){let C=[...c];for(let R=0;R<T.length;R++){const O=T[R],I=hd(O);d.includes(I)||(C.splice(R,0,O),w.push(O))}i==="wait"&&w.length&&(C=w),E(ob(C)),x(c);return}const{forceRender:b}=y.useContext(n0);return f.jsx(f.Fragment,{children:T.map(C=>{const R=hd(C),O=o&&!a?!1:c===T||d.includes(R),I=()=>{if(m.has(R))m.set(R,!0);else return;let S=!0;m.forEach(k=>{k||(S=!1)}),S&&(b==null||b(),E(p.current),o&&(l==null||l()),r&&r())};return f.jsx(xO,{isPresent:O,initial:!h.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:O?void 0:I,children:C},R)})})},On=t=>t;let RC=On;function o0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Na=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},us=t=>t*1e3,ds=t=>t/1e3,bO={useManualTiming:!1};function EO(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,d=!1,h=!1)=>{const m=h&&r?e:n;return d&&i.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const fd=["read","resolveKeyframes","update","preRender","render","postRender"],TO=40;function PC(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=fd.reduce((E,w)=>(E[w]=EO(i),E),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:h,postRender:p}=o,m=()=>{const E=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,TO),1),s.timestamp=E,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),d.process(s),h.process(s),p.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(m))},_=()=>{n=!0,r=!0,s.isProcessing||t(m)};return{schedule:fd.reduce((E,w)=>{const b=o[w];return E[w]=(C,R=!1,O=!1)=>(n||_(),b.schedule(C,R,O)),E},{}),cancel:E=>{for(let w=0;w<fd.length;w++)o[fd[w]].cancel(E)},state:s,steps:o}}const{schedule:He,cancel:hi,state:Vt,steps:hm}=PC(typeof requestAnimationFrame<"u"?requestAnimationFrame:On,!0),NC=y.createContext({strict:!1}),ab={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Da={};for(const t in ab)Da[t]={isEnabled:e=>ab[t].some(n=>!!e[n])};function SO(t){for(const e in t)Da[e]={...Da[e],...t[e]}}const IO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ih(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||IO.has(t)}let DC=t=>!Ih(t);function CO(t){t&&(DC=e=>e.startsWith("on")?!Ih(e):t(e))}try{CO(require("@emotion/is-prop-valid").default)}catch{}function kO(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(DC(s)||n===!0&&Ih(s)||!e&&!Ih(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function AO(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Df=y.createContext({});function Fc(t){return typeof t=="string"||Array.isArray(t)}function Lf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const a0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],l0=["initial",...a0];function jf(t){return Lf(t.animate)||l0.some(e=>Fc(t[e]))}function LC(t){return!!(jf(t)||t.variants)}function RO(t,e){if(jf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fc(n)?n:void 0,animate:Fc(r)?r:void 0}}return t.inherit!==!1?e:{}}function PO(t){const{initial:e,animate:n}=RO(t,y.useContext(Df));return y.useMemo(()=>({initial:e,animate:n}),[lb(e),lb(n)])}function lb(t){return Array.isArray(t)?t.join(" "):t}const NO=Symbol.for("motionComponentSymbol");function sa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function DO(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):sa(n)&&(n.current=r))},[e])}const c0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),LO="framerAppearId",jC="data-"+c0(LO),{schedule:u0}=PC(queueMicrotask,!1),MC=y.createContext({});function jO(t,e,n,r,s){var i,o;const{visualElement:a}=y.useContext(Df),l=y.useContext(NC),c=y.useContext(Nf),d=y.useContext(s0).reducedMotion,h=y.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=h.current,m=y.useContext(MC);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&MO(h.current,n,s,m);const _=y.useRef(!1);y.useInsertionEffect(()=>{p&&_.current&&p.update(n,c)});const x=n[jC],T=y.useRef(!!x&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return AC(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),u0.render(p.render),T.current&&p.animationState&&p.animationState.animateChanges())}),y.useEffect(()=>{p&&(!T.current&&p.animationState&&p.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)===null||E===void 0||E.call(window,x)}),T.current=!1))}),p}function MO(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:OC(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&sa(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function OC(t){if(t)return t.options.allowProjection!==!1?t.projection:OC(t.parent)}function OO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&SO(t);function a(c,d){let h;const p={...y.useContext(s0),...c,layoutId:VO(c)},{isStatic:m}=p,_=PO(c),x=r(c,m);if(!m&&i0){FO();const T=UO(p);h=T.MeasureLayout,_.visualElement=jO(s,x,p,e,T.ProjectionNode)}return f.jsxs(Df.Provider,{value:_,children:[h&&_.visualElement?f.jsx(h,{visualElement:_.visualElement,...p}):null,n(s,c,DO(x,_.visualElement,d),x,m,_.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=y.forwardRef(a);return l[NO]=s,l}function VO({layoutId:t}){const e=y.useContext(n0).id;return e&&t!==void 0?e+"-"+t:t}function FO(t,e){y.useContext(NC).strict}function UO(t){const{drag:e,layout:n}=Da;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const BO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function d0(t){return typeof t!="string"||t.includes("-")?!1:!!(BO.indexOf(t)>-1||/[A-Z]/u.test(t))}function cb(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function h0(t,e,n,r){if(typeof e=="function"){const[s,i]=cb(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=cb(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const Zg=t=>Array.isArray(t),$O=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),zO=t=>Zg(t)?t[t.length-1]||0:t,Zt=t=>!!(t&&t.getVelocity);function $d(t){const e=Zt(t)?t.get():t;return $O(e)?e.toValue():e}function WO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:HO(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const VC=t=>(e,n)=>{const r=y.useContext(Df),s=y.useContext(Nf),i=()=>WO(t,e,r,s);return n?i():r0(i)};function HO(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=$d(i[p]);let{initial:o,animate:a}=t;const l=jf(t),c=LC(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!Lf(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const _=h0(t,p[m]);if(_){const{transitionEnd:x,transition:T,...E}=_;for(const w in E){let b=E[w];if(Array.isArray(b)){const C=d?b.length-1:0;b=b[C]}b!==null&&(s[w]=b)}for(const w in x)s[w]=x[w]}}}return s}const Qa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ko=new Set(Qa),FC=t=>e=>typeof e=="string"&&e.startsWith(t),UC=FC("--"),GO=FC("var(--"),f0=t=>GO(t)?qO.test(t.split("/*")[0].trim()):!1,qO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,BC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,xs=(t,e,n)=>n>e?e:n<t?t:n,Ya={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uc={...Ya,transform:t=>xs(0,1,t)},pd={...Ya,default:1},mu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vs=mu("deg"),Ur=mu("%"),ae=mu("px"),KO=mu("vh"),QO=mu("vw"),ub={...Ur,parse:t=>Ur.parse(t)/100,transform:t=>Ur.transform(t*100)},YO={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae},XO={rotate:Vs,rotateX:Vs,rotateY:Vs,rotateZ:Vs,scale:pd,scaleX:pd,scaleY:pd,scaleZ:pd,skew:Vs,skewX:Vs,skewY:Vs,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:Uc,originX:ub,originY:ub,originZ:ae},db={...Ya,transform:Math.round},p0={...YO,...XO,zIndex:db,size:ae,fillOpacity:Uc,strokeOpacity:Uc,numOctaves:db},JO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZO=Qa.length;function eV(t,e,n){let r="",s=!0;for(let i=0;i<ZO;i++){const o=Qa[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=BC(a,p0[o]);if(!l){s=!1;const d=JO[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function m0(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ko.has(l)){o=!0;continue}else if(UC(l)){s[l]=c;continue}else{const d=BC(c,p0[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=eV(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}const tV={offset:"stroke-dashoffset",array:"stroke-dasharray"},nV={offset:"strokeDashoffset",array:"strokeDasharray"};function rV(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?tV:nV;t[i.offset]=ae.transform(-r);const o=ae.transform(e),a=ae.transform(n);t[i.array]=`${o} ${a}`}function hb(t,e,n){return typeof t=="string"?t:ae.transform(e+n*t)}function sV(t,e,n){const r=hb(e,t.x,t.width),s=hb(n,t.y,t.height);return`${r} ${s}`}function g0(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h){if(m0(t,c,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:_}=t;p.transform&&(_&&(m.transform=p.transform),delete p.transform),_&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=sV(_,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&rV(p,o,a,l,!1)}const y0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),$C=()=>({...y0(),attrs:{}}),v0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function zC(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const WC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HC(t,e,n,r){zC(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(WC.has(s)?s:c0(s),e.attrs[s])}const Ch={};function iV(t){Object.assign(Ch,t)}function GC(t,{layout:e,layoutId:n}){return ko.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ch[t]||t==="opacity")}function w0(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(Zt(s[o])||e.style&&Zt(e.style[o])||GC(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function qC(t,e,n){const r=w0(t,e,n);for(const s in t)if(Zt(t[s])||Zt(e[s])){const i=Qa.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function oV(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const fb=["x","y","width","height","cx","cy","r"],aV={useVisualState:VC({scrapeMotionValuesFromProps:qC,createRenderState:$C,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(ko.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<fb.length;a++){const l=fb[a];t[l]!==e[l]&&(o=!0)}o&&He.read(()=>{oV(n,r),He.render(()=>{g0(r,s,v0(n.tagName),t.transformTemplate),HC(n,r)})})}})},lV={useVisualState:VC({scrapeMotionValuesFromProps:w0,createRenderState:y0})};function KC(t,e,n){for(const r in e)!Zt(e[r])&&!GC(r,n)&&(t[r]=e[r])}function cV({transformTemplate:t},e){return y.useMemo(()=>{const n=y0();return m0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function uV(t,e){const n=t.style||{},r={};return KC(r,n,t),Object.assign(r,cV(t,e)),r}function dV(t,e){const n={},r=uV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function hV(t,e,n,r){const s=y.useMemo(()=>{const i=$C();return g0(i,e,v0(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};KC(i,t.style,t),s.style={...i,...s.style}}return s}function fV(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(d0(n)?hV:dV)(r,i,o,n),c=kO(r,typeof n=="string",t),d=n!==y.Fragment?{...c,...l,ref:s}:{},{children:h}=r,p=y.useMemo(()=>Zt(h)?h.get():h,[h]);return y.createElement(n,{...d,children:p})}}function pV(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...d0(r)?aV:lV,preloadedFeatures:t,useRender:fV(s),createVisualElement:e,Component:r};return OO(o)}}function QC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Mf(t,e,n){const r=t.getProps();return h0(r,e,n!==void 0?n:r.custom,t)}const mV=o0(()=>window.ScrollTimeline!==void 0);class gV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(mV()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class yV extends gV{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function x0(t,e){return t?t[e]||t.default||t:void 0}const ey=2e4;function YC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ey;)e+=n,r=t.next(e);return e>=ey?1/0:e}function _0(t){return typeof t=="function"}function pb(t,e){t.timeline=e,t.onfinish=null}const b0=t=>Array.isArray(t)&&typeof t[0]=="number",vV={linearEasing:void 0};function wV(t,e){const n=o0(t);return()=>{var r;return(r=vV[e])!==null&&r!==void 0?r:n()}}const kh=wV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),XC=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(Na(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function JC(t){return!!(typeof t=="function"&&kh()||!t||typeof t=="string"&&(t in ty||kh())||b0(t)||Array.isArray(t)&&t.every(JC))}const zl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ty={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zl([0,.65,.55,1]),circOut:zl([.55,0,1,.45]),backIn:zl([.31,.01,.66,-.59]),backOut:zl([.33,1.53,.69,.99])};function ZC(t,e){if(t)return typeof t=="function"&&kh()?XC(t,e):b0(t)?zl(t):Array.isArray(t)?t.map(n=>ZC(n,e)||ty.easeOut):ty[t]}const dr={x:!1,y:!1};function ek(){return dr.x||dr.y}function xV(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function tk(t,e){const n=xV(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function mb(t){return e=>{e.pointerType==="touch"||ek()||t(e)}}function _V(t,e,n={}){const[r,s,i]=tk(t,n),o=mb(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=mb(h=>{c(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const nk=(t,e)=>e?t===e?!0:nk(t,e.parentElement):!1,E0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,bV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EV(t){return bV.has(t.tagName)||t.tabIndex!==-1}const Wl=new WeakSet;function gb(t){return e=>{e.key==="Enter"&&t(e)}}function fm(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const TV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=gb(()=>{if(Wl.has(n))return;fm(n,"down");const s=gb(()=>{fm(n,"up")}),i=()=>fm(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function yb(t){return E0(t)&&!ek()}function SV(t,e,n={}){const[r,s,i]=tk(t,n),o=a=>{const l=a.currentTarget;if(!yb(a)||Wl.has(l))return;Wl.add(l);const c=e(a),d=(m,_)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!yb(m)||!Wl.has(l))&&(Wl.delete(l),typeof c=="function"&&c(m,{success:_}))},h=m=>{d(m,n.useGlobalTarget||nk(l,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{!EV(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>TV(c,s),s)}),i}function IV(t){return t==="x"||t==="y"?dr[t]?null:(dr[t]=!0,()=>{dr[t]=!1}):dr.x||dr.y?null:(dr.x=dr.y=!0,()=>{dr.x=dr.y=!1})}const rk=new Set(["width","height","top","left","right","bottom",...Qa]);let zd;function CV(){zd=void 0}const Br={now:()=>(zd===void 0&&Br.set(Vt.isProcessing||bO.useManualTiming?Vt.timestamp:performance.now()),zd),set:t=>{zd=t,queueMicrotask(CV)}};function T0(t,e){t.indexOf(e)===-1&&t.push(e)}function S0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class I0{constructor(){this.subscriptions=[]}add(e){return T0(this.subscriptions,e),()=>S0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function sk(t,e){return e?t*(1e3/e):0}const vb=30,kV=t=>!isNaN(parseFloat(t));class AV{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Br.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Br.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=kV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new I0);const r=this.events[e].add(n);return e==="change"?()=>{r(),He.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vb);return sk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bc(t,e){return new AV(t,e)}function RV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bc(n))}function PV(t,e){const n=Mf(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=zO(i[o]);RV(t,o,a)}}function NV(t){return!!(Zt(t)&&t.add)}function ny(t,e){const n=t.getValue("willChange");if(NV(n))return n.add(e)}function ik(t){return t.props[jC]}const ok=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,DV=1e-7,LV=12;function jV(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=ok(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>DV&&++a<LV);return o}function gu(t,e,n,r){if(t===e&&n===r)return On;const s=i=>jV(i,0,1,t,n);return i=>i===0||i===1?i:ok(s(i),e,r)}const ak=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,lk=t=>e=>1-t(1-e),ck=gu(.33,1.53,.69,.99),C0=lk(ck),uk=ak(C0),dk=t=>(t*=2)<1?.5*C0(t):.5*(2-Math.pow(2,-10*(t-1))),k0=t=>1-Math.sin(Math.acos(t)),hk=lk(k0),fk=ak(k0),pk=t=>/^0[^.\s]+$/u.test(t);function MV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||pk(t):!0}const ic=t=>Math.round(t*1e5)/1e5,A0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function OV(t){return t==null}const VV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,R0=(t,e)=>n=>!!(typeof n=="string"&&VV.test(n)&&n.startsWith(t)||e&&!OV(n)&&Object.prototype.hasOwnProperty.call(n,e)),mk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(A0);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},FV=t=>xs(0,255,t),pm={...Ya,transform:t=>Math.round(FV(t))},Xi={test:R0("rgb","red"),parse:mk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+pm.transform(t)+", "+pm.transform(e)+", "+pm.transform(n)+", "+ic(Uc.transform(r))+")"};function UV(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ry={test:R0("#"),parse:UV,transform:Xi.transform},ia={test:R0("hsl","hue"),parse:mk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ur.transform(ic(e))+", "+Ur.transform(ic(n))+", "+ic(Uc.transform(r))+")"},Kt={test:t=>Xi.test(t)||ry.test(t)||ia.test(t),parse:t=>Xi.test(t)?Xi.parse(t):ia.test(t)?ia.parse(t):ry.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xi.transform(t):ia.transform(t)},BV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $V(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(A0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(BV))===null||n===void 0?void 0:n.length)||0)>0}const gk="number",yk="color",zV="var",WV="var(",wb="${}",HV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $c(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(HV,l=>(Kt.test(l)?(r.color.push(i),s.push(yk),n.push(Kt.parse(l))):l.startsWith(WV)?(r.var.push(i),s.push(zV),n.push(l)):(r.number.push(i),s.push(gk),n.push(parseFloat(l))),++i,wb)).split(wb);return{values:n,split:a,indexes:r,types:s}}function vk(t){return $c(t).values}function wk(t){const{split:e,types:n}=$c(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===gk?i+=ic(s[o]):a===yk?i+=Kt.transform(s[o]):i+=s[o]}return i}}const GV=t=>typeof t=="number"?0:t;function qV(t){const e=vk(t);return wk(t)(e.map(GV))}const fi={test:$V,parse:vk,createTransformer:wk,getAnimatableNone:qV},KV=new Set(["brightness","contrast","saturate","opacity"]);function QV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(A0)||[];if(!r)return t;const s=n.replace(r,"");let i=KV.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const YV=/\b([a-z-]*)\(.*?\)/gu,sy={...fi,getAnimatableNone:t=>{const e=t.match(YV);return e?e.map(QV).join(" "):t}},XV={...p0,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:sy,WebkitFilter:sy},P0=t=>XV[t];function xk(t,e){let n=P0(t);return n!==sy&&(n=fi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const JV=new Set(["auto","none","0"]);function ZV(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!JV.has(i)&&$c(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=xk(n,s)}const xb=t=>t===Ya||t===ae,_b=(t,e)=>parseFloat(t.split(", ")[e]),bb=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return _b(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?_b(i[1],t):0}},e4=new Set(["x","y","z"]),t4=Qa.filter(t=>!e4.has(t));function n4(t){const e=[];return t4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const La={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:bb(4,13),y:bb(5,14)};La.translateX=La.x;La.translateY=La.y;const so=new Set;let iy=!1,oy=!1;function _k(){if(oy){const t=Array.from(so).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=n4(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}oy=!1,iy=!1,so.forEach(t=>t.complete()),so.clear()}function bk(){so.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(oy=!0)})}function r4(){bk(),_k()}class N0{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(so.add(this),iy||(iy=!0,He.read(bk),He.resolveKeyframes(_k))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),so.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,so.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ek=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),s4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function i4(t){const e=s4.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Tk(t,e,n=1){const[r,s]=i4(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return Ek(o)?parseFloat(o):o}return f0(s)?Tk(s,e,n+1):s}const Sk=t=>e=>e.test(t),o4={test:t=>t==="auto",parse:t=>t},Ik=[Ya,ae,Ur,Vs,QO,KO,o4],Eb=t=>Ik.find(Sk(t));class Ck extends N0{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),f0(c))){const d=Tk(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!rk.has(r)||e.length!==2)return;const[s,i]=e,o=Eb(s),a=Eb(i);if(o!==a)if(xb(o)&&xb(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)MV(e[s])&&r.push(s);r.length&&ZV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=La[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=La[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Tb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(fi.test(t)||t==="0")&&!t.startsWith("url("));function a4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function l4(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Tb(s,e),a=Tb(i,e);return!o||!a?!1:a4(t)||(n==="spring"||_0(n))&&r}const c4=t=>t!==null;function Of(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(c4),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const u4=40;class kk{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Br.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>u4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&r4(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Br.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!l4(e,r,s,i))if(o)this.options.duration=0;else{l&&l(Of(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Xe=(t,e,n)=>t+(e-t)*n;function mm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function d4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=mm(l,a,t+1/3),i=mm(l,a,t),o=mm(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Ah(t,e){return n=>n>0?e:t}const gm=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},h4=[ry,Xi,ia],f4=t=>h4.find(e=>e.test(t));function Sb(t){const e=f4(t);if(!e)return!1;let n=e.parse(t);return e===ia&&(n=d4(n)),n}const Ib=(t,e)=>{const n=Sb(t),r=Sb(e);if(!n||!r)return Ah(t,e);const s={...n};return i=>(s.red=gm(n.red,r.red,i),s.green=gm(n.green,r.green,i),s.blue=gm(n.blue,r.blue,i),s.alpha=Xe(n.alpha,r.alpha,i),Xi.transform(s))},p4=(t,e)=>n=>e(t(n)),yu=(...t)=>t.reduce(p4),ay=new Set(["none","hidden"]);function m4(t,e){return ay.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function g4(t,e){return n=>Xe(t,e,n)}function D0(t){return typeof t=="number"?g4:typeof t=="string"?f0(t)?Ah:Kt.test(t)?Ib:w4:Array.isArray(t)?Ak:typeof t=="object"?Kt.test(t)?Ib:y4:Ah}function Ak(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>D0(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function y4(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=D0(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function v4(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const w4=(t,e)=>{const n=fi.createTransformer(e),r=$c(t),s=$c(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ay.has(t)&&!s.values.length||ay.has(e)&&!r.values.length?m4(t,e):yu(Ak(v4(r,s),s.values),n):Ah(t,e)};function Rk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xe(t,e,n):D0(t)(t,e)}const x4=5;function Pk(t,e,n){const r=Math.max(e-x4,0);return sk(n-t(r),e-r)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ym=.001;function _4({duration:t=it.duration,bounce:e=it.bounce,velocity:n=it.velocity,mass:r=it.mass}){let s,i,o=1-e;o=xs(it.minDamping,it.maxDamping,o),t=xs(it.minDuration,it.maxDuration,ds(t)),o<1?(s=c=>{const d=c*o,h=d*t,p=d-n,m=ly(c,o),_=Math.exp(-h);return ym-p/m*_},i=c=>{const h=c*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,_=Math.exp(-h),x=ly(Math.pow(c,2),o);return(-s(c)+ym>0?-1:1)*((p-m)*_)/x}):(s=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-ym+d*h},i=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=E4(s,i,a);if(t=us(t),isNaN(l))return{stiffness:it.stiffness,damping:it.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const b4=12;function E4(t,e,n){let r=n;for(let s=1;s<b4;s++)r=r-t(r)/e(r);return r}function ly(t,e){return t*Math.sqrt(1-e*e)}const T4=["duration","bounce"],S4=["stiffness","damping","mass"];function Cb(t,e){return e.some(n=>t[n]!==void 0)}function I4(t){let e={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...t};if(!Cb(t,S4)&&Cb(t,T4))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*xs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:it.mass,stiffness:s,damping:i}}else{const n=_4(t);e={...e,...n,mass:it.mass},e.isResolvedFromDuration=!0}return e}function Nk(t=it.visualDuration,e=it.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=I4({...n,velocity:-ds(n.velocity||0)}),_=p||0,x=c/(2*Math.sqrt(l*d)),T=o-i,E=ds(Math.sqrt(l/d)),w=Math.abs(T)<5;r||(r=w?it.restSpeed.granular:it.restSpeed.default),s||(s=w?it.restDelta.granular:it.restDelta.default);let b;if(x<1){const R=ly(E,x);b=O=>{const I=Math.exp(-x*E*O);return o-I*((_+x*E*T)/R*Math.sin(R*O)+T*Math.cos(R*O))}}else if(x===1)b=R=>o-Math.exp(-E*R)*(T+(_+E*T)*R);else{const R=E*Math.sqrt(x*x-1);b=O=>{const I=Math.exp(-x*E*O),S=Math.min(R*O,300);return o-I*((_+x*E*T)*Math.sinh(S)+R*T*Math.cosh(S))/R}}const C={calculatedDuration:m&&h||null,next:R=>{const O=b(R);if(m)a.done=R>=h;else{let I=0;x<1&&(I=R===0?us(_):Pk(b,R,O));const S=Math.abs(I)<=r,k=Math.abs(o-O)<=s;a.done=S&&k}return a.value=a.done?o:O,a},toString:()=>{const R=Math.min(YC(C),ey),O=XC(I=>C.next(R*I).value,R,30);return R+"ms "+O}};return C}function kb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},m=S=>a!==void 0&&S<a||l!==void 0&&S>l,_=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let x=n*e;const T=h+x,E=o===void 0?T:o(T);E!==T&&(x=E-h);const w=S=>-x*Math.exp(-S/r),b=S=>E+w(S),C=S=>{const k=w(S),P=b(S);p.done=Math.abs(k)<=c,p.value=p.done?E:P};let R,O;const I=S=>{m(p.value)&&(R=S,O=Nk({keyframes:[p.value,_(p.value)],velocity:Pk(b,S,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:S=>{let k=!1;return!O&&R===void 0&&(k=!0,C(S),I(S)),R!==void 0&&S>=R?O.next(S-R):(!k&&C(S),p)}}}const C4=gu(.42,0,1,1),k4=gu(0,0,.58,1),Dk=gu(.42,0,.58,1),A4=t=>Array.isArray(t)&&typeof t[0]!="number",R4={linear:On,easeIn:C4,easeInOut:Dk,easeOut:k4,circIn:k0,circInOut:fk,circOut:hk,backIn:C0,backInOut:uk,backOut:ck,anticipate:dk},Ab=t=>{if(b0(t)){RC(t.length===4);const[e,n,r,s]=t;return gu(e,n,r,s)}else if(typeof t=="string")return R4[t];return t};function P4(t,e,n){const r=[],s=n||Rk,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||On:e;a=yu(l,a)}r.push(a)}return r}function N4(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(RC(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=P4(e,r,s),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Na(t[h],t[h+1],d);return a[h](p)};return n?d=>c(xs(t[0],t[i-1],d)):c}function D4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Na(0,e,r);t.push(Xe(n,1,s))}}function L4(t){const e=[0];return D4(e,t.length-1),e}function j4(t,e){return t.map(n=>n*e)}function M4(t,e){return t.map(()=>e||Dk).splice(0,t.length-1)}function Rh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=A4(r)?r.map(Ab):Ab(r),i={done:!1,value:e[0]},o=j4(n&&n.length===e.length?n:L4(e),t),a=N4(o,e,{ease:Array.isArray(s)?s:M4(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const O4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>He.update(e,!0),stop:()=>hi(e),now:()=>Vt.isProcessing?Vt.timestamp:Br.now()}},V4={decay:kb,inertia:kb,tween:Rh,keyframes:Rh,spring:Nk},F4=t=>t/100;class L0 extends kk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||N0,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=_0(n)?n:V4[n]||Rh;let l,c;a!==Rh&&typeof e[0]!="number"&&(l=yu(F4,Rk(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=YC(d));const{calculatedDuration:h}=d,p=h+s,m=p*(r+1)-s;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return i.next(0);const{delay:p,repeat:m,repeatType:_,repeatDelay:x,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const E=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?E<0:E>d;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let b=this.currentTime,C=i;if(m){const S=Math.min(this.currentTime,d)/h;let k=Math.floor(S),P=S%1;!P&&S>=1&&(P=1),P===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(_==="reverse"?(P=1-P,x&&(P-=x/h)):_==="mirror"&&(C=o)),b=xs(0,1,P)*h}const R=w?{done:!1,value:l[0]}:C.next(b);a&&(R.value=a(R.value));let{done:O}=R;!w&&c!==null&&(O=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&s!==void 0&&(R.value=Of(l,this.options,s)),T&&T(R.value),I&&this.finish(),R}get duration(){const{resolved:e}=this;return e?ds(e.calculatedDuration):0}get time(){return ds(this.currentTime)}set time(e){e=us(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=O4,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const U4=new Set(["opacity","clipPath","filter","transform"]);function B4(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=ZC(a,s);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const $4=o0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ph=10,z4=2e4;function W4(t){return _0(t.type)||t.type==="spring"||!JC(t.ease)}function H4(t,e){const n=new L0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<z4;)r=n.sample(i),s.push(r.value),i+=Ph;return{times:void 0,keyframes:s,duration:i-Ph,ease:"linear"}}const Lk={anticipate:dk,backInOut:uk,circInOut:fk};function G4(t){return t in Lk}class Rb extends kk{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new Ck(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&kh()&&G4(i)&&(i=Lk[i]),W4(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,element:_,...x}=this.options,T=H4(e,x);e=T.keyframes,e.length===1&&(e[1]=e[0]),r=T.duration,s=T.times,i=T.ease,o="keyframes"}const d=B4(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(pb(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(Of(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ds(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ds(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=us(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return On;const{animation:r}=n;pb(r,e)}return On}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:h,element:p,...m}=this.options,_=new L0({...m,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),x=us(this.time);c.setWithVelocity(_.sample(x-Ph).value,_.sample(x).value,Ph)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return $4()&&r&&U4.has(r)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const q4={type:"spring",stiffness:500,damping:25,restSpeed:10},K4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Q4={type:"keyframes",duration:.8},Y4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X4=(t,{keyframes:e})=>e.length>2?Q4:ko.has(t)?t.startsWith("scale")?K4(e[1]):q4:Y4;function J4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const j0=(t,e,n,r={},s,i)=>o=>{const a=x0(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-us(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};J4(a)||(d={...d,...X4(t,d)}),d.duration&&(d.duration=us(d.duration)),d.repeatDelay&&(d.repeatDelay=us(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&e.get()!==void 0){const p=Of(d.keyframes,a);if(p!==void 0)return He.update(()=>{d.onUpdate(p),d.onComplete()}),new yV([])}return!i&&Rb.supports(d)?new Rb(d):new L0(d)};function Z4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function jk(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const p=t.getValue(h,(i=t.latestValues[h])!==null&&i!==void 0?i:null),m=l[h];if(m===void 0||d&&Z4(d,h))continue;const _={delay:n,...x0(o||{},h)};let x=!1;if(window.MotionHandoffAnimation){const E=ik(t);if(E){const w=window.MotionHandoffAnimation(E,h,He);w!==null&&(_.startTime=w,x=!0)}}ny(t,h),p.start(j0(h,p,m,t.shouldReduceMotion&&rk.has(h)?{type:!1}:_,t,x));const T=p.animation;T&&c.push(T)}return a&&Promise.all(c).then(()=>{He.update(()=>{a&&PV(t,a)})}),c}function cy(t,e,n={}){var r;const s=Mf(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(jk(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return eF(t,e,d+c,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function eF(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(tF).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(cy(c,e,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function tF(t,e){return t.sortNodePosition(e)}function nF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>cy(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=cy(t,e,n);else{const s=typeof e=="function"?Mf(t,e,n.custom):e;r=Promise.all(jk(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const rF=l0.length;function Mk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Mk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<rF;n++){const r=l0[n],s=t.props[r];(Fc(s)||s===!1)&&(e[r]=s)}return e}const sF=[...a0].reverse(),iF=a0.length;function oF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>nF(t,n,r)))}function aF(t){let e=oF(t),n=Pb(),r=!0;const s=l=>(c,d)=>{var h;const p=Mf(t,d,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:_,...x}=p;c={...c,...x,..._}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,d=Mk(t.parent)||{},h=[],p=new Set;let m={},_=1/0;for(let T=0;T<iF;T++){const E=sF[T],w=n[E],b=c[E]!==void 0?c[E]:d[E],C=Fc(b),R=E===l?w.isActive:null;R===!1&&(_=T);let O=b===d[E]&&b!==c[E]&&C;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),w.protectedKeys={...m},!w.isActive&&R===null||!b&&!w.prevProp||Lf(b)||typeof b=="boolean")continue;const I=lF(w.prevProp,b);let S=I||E===l&&w.isActive&&!O&&C||T>_&&C,k=!1;const P=Array.isArray(b)?b:[b];let D=P.reduce(s(E),{});R===!1&&(D={});const{prevResolvedValues:M={}}=w,N={...M,...D},Z=z=>{S=!0,p.has(z)&&(k=!0,p.delete(z)),w.needsAnimating[z]=!0;const F=t.getValue(z);F&&(F.liveStyle=!1)};for(const z in N){const F=D[z],U=M[z];if(m.hasOwnProperty(z))continue;let j=!1;Zg(F)&&Zg(U)?j=!QC(F,U):j=F!==U,j?F!=null?Z(z):p.add(z):F!==void 0&&p.has(z)?Z(z):w.protectedKeys[z]=!0}w.prevProp=b,w.prevResolvedValues=D,w.isActive&&(m={...m,...D}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(O&&I)||k)&&h.push(...P.map(z=>({animation:z,options:{type:E}})))}if(p.size){const T={};p.forEach(E=>{const w=t.getBaseTarget(E),b=t.getValue(E);b&&(b.liveStyle=!0),T[E]=w??null}),h.push({animation:T})}let x=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Pb(),r=!0}}}function lF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!QC(e,t):!1}function Bi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pb(){return{animate:Bi(!0),whileInView:Bi(),whileHover:Bi(),whileTap:Bi(),whileDrag:Bi(),whileFocus:Bi(),exit:Bi()}}class Si{constructor(e){this.isMounted=!1,this.node=e}update(){}}class cF extends Si{constructor(e){super(e),e.animationState||(e.animationState=aF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let uF=0;class dF extends Si{constructor(){super(...arguments),this.id=uF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const hF={animation:{Feature:cF},exit:{Feature:dF}};function zc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function vu(t){return{point:{x:t.pageX,y:t.pageY}}}const fF=t=>e=>E0(e)&&t(e,vu(e));function oc(t,e,n,r){return zc(t,e,fF(n),r)}const Nb=(t,e)=>Math.abs(t-e);function pF(t,e){const n=Nb(t.x,e.x),r=Nb(t.y,e.y);return Math.sqrt(n**2+r**2)}class Ok{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=wm(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=pF(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:_}=h,{timestamp:x}=Vt;this.history.push({..._,timestamp:x});const{onStart:T,onMove:E}=this.handlers;p||(T&&T(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=vm(p,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:_,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=wm(h.type==="pointercancel"?this.lastMoveEventInfo:vm(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,T),_&&_(h,T)},!E0(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=vu(e),a=vm(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Vt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,wm(a,this.history)),this.removeListeners=yu(oc(this.contextWindow,"pointermove",this.handlePointerMove),oc(this.contextWindow,"pointerup",this.handlePointerUp),oc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hi(this.updatePoint)}}function vm(t,e){return e?{point:e(t.point)}:t}function Db(t,e){return{x:t.x-e.x,y:t.y-e.y}}function wm({point:t},e){return{point:t,delta:Db(t,Vk(e)),offset:Db(t,mF(e)),velocity:gF(e,.1)}}function mF(t){return t[0]}function Vk(t){return t[t.length-1]}function gF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Vk(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>us(e)));)n--;if(!r)return{x:0,y:0};const i=ds(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Fk=1e-4,yF=1-Fk,vF=1+Fk,Uk=.01,wF=0-Uk,xF=0+Uk;function Fn(t){return t.max-t.min}function _F(t,e,n){return Math.abs(t-e)<=n}function Lb(t,e,n,r=.5){t.origin=r,t.originPoint=Xe(e.min,e.max,t.origin),t.scale=Fn(n)/Fn(e),t.translate=Xe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=yF&&t.scale<=vF||isNaN(t.scale))&&(t.scale=1),(t.translate>=wF&&t.translate<=xF||isNaN(t.translate))&&(t.translate=0)}function ac(t,e,n,r){Lb(t.x,e.x,n.x,r?r.originX:void 0),Lb(t.y,e.y,n.y,r?r.originY:void 0)}function jb(t,e,n){t.min=n.min+e.min,t.max=t.min+Fn(e)}function bF(t,e,n){jb(t.x,e.x,n.x),jb(t.y,e.y,n.y)}function Mb(t,e,n){t.min=e.min-n.min,t.max=t.min+Fn(e)}function lc(t,e,n){Mb(t.x,e.x,n.x),Mb(t.y,e.y,n.y)}function EF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Xe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Xe(n,t,r.max):Math.min(t,n)),t}function Ob(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function TF(t,{top:e,left:n,bottom:r,right:s}){return{x:Ob(t.x,n,s),y:Ob(t.y,e,r)}}function Vb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function SF(t,e){return{x:Vb(t.x,e.x),y:Vb(t.y,e.y)}}function IF(t,e){let n=.5;const r=Fn(t),s=Fn(e);return s>r?n=Na(e.min,e.max-r,t.min):r>s&&(n=Na(t.min,t.max-s,e.min)),xs(0,1,n)}function CF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const uy=.35;function kF(t=uy){return t===!1?t=0:t===!0&&(t=uy),{x:Fb(t,"left","right"),y:Fb(t,"top","bottom")}}function Fb(t,e,n){return{min:Ub(t,e),max:Ub(t,n)}}function Ub(t,e){return typeof t=="number"?t:t[e]||0}const Bb=()=>({translate:0,scale:1,origin:0,originPoint:0}),oa=()=>({x:Bb(),y:Bb()}),$b=()=>({min:0,max:0}),ut=()=>({x:$b(),y:$b()});function qn(t){return[t("x"),t("y")]}function Bk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function AF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function RF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xm(t){return t===void 0||t===1}function dy({scale:t,scaleX:e,scaleY:n}){return!xm(t)||!xm(e)||!xm(n)}function Hi(t){return dy(t)||$k(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $k(t){return zb(t.x)||zb(t.y)}function zb(t){return t&&t!=="0%"}function Nh(t,e,n){const r=t-n,s=e*r;return n+s}function Wb(t,e,n,r,s){return s!==void 0&&(t=Nh(t,s,r)),Nh(t,n,r)+e}function hy(t,e=0,n=1,r,s){t.min=Wb(t.min,e,n,r,s),t.max=Wb(t.max,e,n,r,s)}function zk(t,{x:e,y:n}){hy(t.x,e.translate,e.scale,e.originPoint),hy(t.y,n.translate,n.scale,n.originPoint)}const Hb=.999999999999,Gb=1.0000000000001;function PF(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&la(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,zk(t,o)),r&&Hi(i.latestValues)&&la(t,i.latestValues))}e.x<Gb&&e.x>Hb&&(e.x=1),e.y<Gb&&e.y>Hb&&(e.y=1)}function aa(t,e){t.min=t.min+e,t.max=t.max+e}function qb(t,e,n,r,s=.5){const i=Xe(t.min,t.max,s);hy(t,e,n,i,r)}function la(t,e){qb(t.x,e.x,e.scaleX,e.scale,e.originX),qb(t.y,e.y,e.scaleY,e.scale,e.originY)}function Wk(t,e){return Bk(RF(t.getBoundingClientRect(),e))}function NF(t,e,n){const r=Wk(t,n),{scroll:s}=e;return s&&(aa(r.x,s.offset.x),aa(r.y,s.offset.y)),r}const Hk=({current:t})=>t?t.ownerDocument.defaultView:null,DF=new WeakMap;class LF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ut(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vu(d).point)},i=(d,h)=>{const{drag:p,dragPropagation:m,onDragStart:_}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=IV(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qn(T=>{let E=this.getAxisMotionValue(T).get()||0;if(Ur.test(E)){const{projection:w}=this.visualElement;if(w&&w.layout){const b=w.layout.layoutBox[T];b&&(E=Fn(b)*(parseFloat(E)/100))}}this.originPoint[T]=E}),_&&He.postRender(()=>_(d,h)),ny(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:_,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:T}=h;if(m&&this.currentDirection===null){this.currentDirection=jF(T),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,T),this.updateAxis("y",h.point,T),this.visualElement.render(),x&&x(d,h)},a=(d,h)=>this.stop(d,h),l=()=>qn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Ok(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Hk(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&He.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!md(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=EF(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&sa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=TF(s.layoutBox,n):this.constraints=!1,this.elastic=kF(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&qn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=CF(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!sa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=NF(r,s.root,this.visualElement.getTransformPagePoint());let o=SF(s.layout.layoutBox,i);if(n){const a=n(AF(o));this.hasMutatedConstraints=!!a,a&&(o=Bk(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=qn(d=>{if(!md(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,_={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,_)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ny(this.visualElement,e),r.start(j0(e,r,0,n,this.visualElement,!1))}stopAnimation(){qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qn(n=>{const{drag:r}=this.getProps();if(!md(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Xe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!sa(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};qn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=IF({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qn(o=>{if(!md(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Xe(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;DF.set(this.visualElement,this);const e=this.visualElement.current,n=oc(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();sa(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),He.read(r);const o=zc(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(qn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=uy,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function md(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function jF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class MF extends Si{constructor(e){super(e),this.removeGroupControls=On,this.removeListeners=On,this.controls=new LF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||On}unmount(){this.removeGroupControls(),this.removeListeners()}}const Kb=t=>(e,n)=>{t&&He.postRender(()=>t(e,n))};class OF extends Si{constructor(){super(...arguments),this.removePointerDownListener=On}onPointerDown(e){this.session=new Ok(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Hk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Kb(e),onStart:Kb(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&He.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=oc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=Qb(t,e.target.x),r=Qb(t,e.target.y);return`${n}% ${r}%`}},VF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=fi.parse(t);if(s.length>5)return r;const i=fi.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Xe(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class FF extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;iV(UF),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Wd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||He.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),u0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Gk(t){const[e,n]=kC(),r=y.useContext(n0);return f.jsx(FF,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(MC),isPresent:e,safeToRemove:n})}const UF={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:VF};function BF(t,e,n){const r=Zt(t)?t:Bc(t);return r.start(j0("",r,e,n)),r.animation}function $F(t){return t instanceof SVGElement&&t.tagName!=="svg"}const zF=(t,e)=>t.depth-e.depth;class WF{constructor(){this.children=[],this.isDirty=!1}add(e){T0(this.children,e),this.isDirty=!0}remove(e){S0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zF),this.isDirty=!1,this.children.forEach(e)}}function HF(t,e){const n=Br.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(hi(r),t(i-e))};return He.read(r,!0),()=>hi(r)}const qk=["TopLeft","TopRight","BottomLeft","BottomRight"],GF=qk.length,Yb=t=>typeof t=="string"?parseFloat(t):t,Xb=t=>typeof t=="number"||ae.test(t);function qF(t,e,n,r,s,i){s?(t.opacity=Xe(0,n.opacity!==void 0?n.opacity:1,KF(r)),t.opacityExit=Xe(e.opacity!==void 0?e.opacity:1,0,QF(r))):i&&(t.opacity=Xe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<GF;o++){const a=`border${qk[o]}Radius`;let l=Jb(e,a),c=Jb(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Xb(l)===Xb(c)?(t[a]=Math.max(Xe(Yb(l),Yb(c),r),0),(Ur.test(c)||Ur.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Xe(e.rotate||0,n.rotate||0,r))}function Jb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const KF=Kk(0,.5,hk),QF=Kk(.5,.95,On);function Kk(t,e,n){return r=>r<t?0:r>e?1:n(Na(t,e,r))}function Zb(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){Zb(t.x,e.x),Zb(t.y,e.y)}function e1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function t1(t,e,n,r,s){return t-=e,t=Nh(t,1/n,r),s!==void 0&&(t=Nh(t,1/s,r)),t}function YF(t,e=0,n=1,r=.5,s,i=t,o=t){if(Ur.test(e)&&(e=parseFloat(e),e=Xe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Xe(i.min,i.max,r);t===i&&(a-=e),t.min=t1(t.min,e,n,a,s),t.max=t1(t.max,e,n,a,s)}function n1(t,e,[n,r,s],i,o){YF(t,e[n],e[r],e[s],e.scale,i,o)}const XF=["x","scaleX","originX"],JF=["y","scaleY","originY"];function r1(t,e,n,r){n1(t.x,e,XF,n?n.x:void 0,r?r.x:void 0),n1(t.y,e,JF,n?n.y:void 0,r?r.y:void 0)}function s1(t){return t.translate===0&&t.scale===1}function Qk(t){return s1(t.x)&&s1(t.y)}function i1(t,e){return t.min===e.min&&t.max===e.max}function ZF(t,e){return i1(t.x,e.x)&&i1(t.y,e.y)}function o1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Yk(t,e){return o1(t.x,e.x)&&o1(t.y,e.y)}function a1(t){return Fn(t.x)/Fn(t.y)}function l1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class e3{constructor(){this.members=[]}add(e){T0(this.members,e),e.scheduleRender()}remove(e){if(S0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function t3(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:p,skewX:m,skewY:_}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Gi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Hl=typeof window<"u"&&window.MotionDebug!==void 0,_m=["","X","Y","Z"],n3={visibility:"hidden"},c1=1e3;let r3=0;function bm(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Xk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ik(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",He,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Xk(r)}function Jk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=r3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hl&&(Gi.totalNodes=Gi.resolvedTargetDeltas=Gi.recalculatedProjection=0),this.nodes.forEach(o3),this.nodes.forEach(d3),this.nodes.forEach(h3),this.nodes.forEach(a3),Hl&&window.MotionDebug.record(Gi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new WF)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new I0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$F(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=HF(p,250),Wd.hasAnimatedSinceResize&&(Wd.hasAnimatedSinceResize=!1,this.nodes.forEach(d1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||y3,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=d.getProps(),w=!this.targetLayout||!Yk(this.targetLayout,_)||m,b=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const C={...x0(x,"layout"),onPlay:T,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else p||d1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(f3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Xk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(u1);return}this.isUpdating||this.nodes.forEach(c3),this.isUpdating=!1,this.nodes.forEach(u3),this.nodes.forEach(s3),this.nodes.forEach(i3),this.clearAllSnapshots();const a=Br.now();Vt.delta=xs(0,1e3/60,a-Vt.timestamp),Vt.timestamp=a,Vt.isProcessing=!0,hm.update.process(Vt),hm.preRender.process(Vt),hm.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,u0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(l3),this.sharedNodes.forEach(p3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Qk(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Hi(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),v3(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ut();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(w3))){const{scroll:d}=this.root;d&&(aa(l.x,d.offset.x),aa(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=ut();if(Gn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Gn(l,o),aa(l.x,h.offset.x),aa(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=ut();Gn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&la(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Hi(d.latestValues)&&la(l,d.latestValues)}return Hi(this.latestValues)&&la(l,this.latestValues),l}removeTransform(o){const a=ut();Gn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Hi(c.latestValues))continue;dy(c.latestValues)&&c.updateSnapshot();const d=ut(),h=c.measurePageBox();Gn(d,h),r1(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Hi(this.latestValues)&&r1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),lc(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ut(),this.targetWithTransforms=ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),zk(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),lc(this.relativeTargetOrigin,this.target,m.target),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hl&&Gi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dy(this.parent.latestValues)||$k(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Gn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;PF(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ut());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e1(this.prevProjectionDelta.x,this.projectionDelta.x),e1(this.prevProjectionDelta.y,this.projectionDelta.y)),ac(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!l1(this.projectionDelta.x,this.prevProjectionDelta.x)||!l1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Hl&&Gi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=oa(),this.projectionDelta=oa(),this.projectionDeltaWithTransform=oa()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=oa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=ut(),m=l?l.source:void 0,_=this.layout?this.layout.source:void 0,x=m!==_,T=this.getStack(),E=!T||T.members.length<=1,w=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(g3));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const R=C/1e3;h1(h.x,o.x,R),h1(h.y,o.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m3(this.relativeTarget,this.relativeTargetOrigin,p,R),b&&ZF(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ut()),Gn(b,this.relativeTarget)),x&&(this.animationValues=d,qF(d,c,this.latestValues,R,w,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{Wd.hasAnimatedSinceResize=!0,this.currentAnimation=BF(0,c1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(c1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Zk(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ut();const h=Fn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=Fn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Gn(a,l),la(a,d),ac(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new e3),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&bm("z",o,c,this.animationValues);for(let d=0;d<_m.length;d++)bm(`rotate${_m[d]}`,o,c,this.animationValues),bm(`skew${_m[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return n3;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=$d(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=$d(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Hi(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=t3(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:_}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${_.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in Ch){if(p[x]===void 0)continue;const{correct:T,applyTo:E}=Ch[x],w=c.transform==="none"?p[x]:T(p[x],h);if(E){const b=E.length;for(let C=0;C<b;C++)c[E[C]]=w}else c[x]=w}return this.options.layoutId&&(c.pointerEvents=h===this?$d(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(u1),this.root.sharedNodes.clear()}}}function s3(t){t.updateLayout()}function i3(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?qn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Fn(p);p.min=r[h].min,p.max=p.min+m}):Zk(i,n.layoutBox,r)&&qn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Fn(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=oa();ac(a,r,n.layoutBox);const l=oa();o?ac(l,t.applyTransform(s,!0),n.measuredBox):ac(l,r,n.layoutBox);const c=!Qk(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const _=ut();lc(_,n.layoutBox,p.layoutBox);const x=ut();lc(x,r,m.layoutBox),Yk(_,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function o3(t){Hl&&Gi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function a3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function l3(t){t.clearSnapshot()}function u1(t){t.clearMeasurements()}function c3(t){t.isLayoutDirty=!1}function u3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function d1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function d3(t){t.resolveTargetDelta()}function h3(t){t.calcProjection()}function f3(t){t.resetSkewAndRotation()}function p3(t){t.removeLeadSnapshot()}function h1(t,e,n){t.translate=Xe(e.translate,0,n),t.scale=Xe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function f1(t,e,n,r){t.min=Xe(e.min,n.min,r),t.max=Xe(e.max,n.max,r)}function m3(t,e,n,r){f1(t.x,e.x,n.x,r),f1(t.y,e.y,n.y,r)}function g3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const y3={duration:.45,ease:[.4,0,.1,1]},p1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),m1=p1("applewebkit/")&&!p1("chrome/")?Math.round:On;function g1(t){t.min=m1(t.min),t.max=m1(t.max)}function v3(t){g1(t.x),g1(t.y)}function Zk(t,e,n){return t==="position"||t==="preserve-aspect"&&!_F(a1(e),a1(n),.2)}function w3(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const x3=Jk({attachResizeListener:(t,e)=>zc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Em={current:void 0},eA=Jk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Em.current){const t=new x3({});t.mount(window),t.setOptions({layoutScroll:!0}),Em.current=t}return Em.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),_3={pan:{Feature:OF},drag:{Feature:MF,ProjectionNode:eA,MeasureLayout:Gk}};function y1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&He.postRender(()=>i(e,vu(e)))}class b3 extends Si{mount(){const{current:e}=this.node;e&&(this.unmount=_V(e,n=>(y1(this.node,n,"Start"),r=>y1(this.node,r,"End"))))}unmount(){}}class E3 extends Si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yu(zc(this.node.current,"focus",()=>this.onFocus()),zc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function v1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&He.postRender(()=>i(e,vu(e)))}class T3 extends Si{mount(){const{current:e}=this.node;e&&(this.unmount=SV(e,n=>(v1(this.node,n,"Start"),(r,{success:s})=>v1(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fy=new WeakMap,Tm=new WeakMap,S3=t=>{const e=fy.get(t.target);e&&e(t)},I3=t=>{t.forEach(S3)};function C3({root:t,...e}){const n=t||document;Tm.has(n)||Tm.set(n,{});const r=Tm.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(I3,{root:t,...e})),r[s]}function k3(t,e,n){const r=C3(e);return fy.set(t,n),r.observe(t),()=>{fy.delete(t),r.unobserve(t)}}const A3={some:0,all:1};class R3 extends Si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:A3[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(l)};return k3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(P3(e,n))&&this.startObserver()}unmount(){}}function P3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const N3={inView:{Feature:R3},tap:{Feature:T3},focus:{Feature:E3},hover:{Feature:b3}},D3={layout:{ProjectionNode:eA,MeasureLayout:Gk}},py={current:null},tA={current:!1};function L3(){if(tA.current=!0,!!i0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>py.current=t.matches;t.addListener(e),e()}else py.current=!1}const j3=[...Ik,Kt,fi],M3=t=>j3.find(Sk(t)),w1=new WeakMap;function O3(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Zt(s))t.addValue(r,s);else if(Zt(i))t.addValue(r,Bc(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Bc(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const x1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class V3{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=N0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Br.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,He.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=jf(n),this.isVariantNode=LC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const _=p[m];l[m]!==void 0&&Zt(_)&&_.set(l[m],!1)}}mount(e){this.current=e,w1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),tA.current||L3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:py.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){w1.delete(this.current),this.projection&&this.projection.unmount(),hi(this.notifyUpdate),hi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ko.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&He.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Da){const n=Da[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<x1.length;r++){const s=x1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=O3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Ek(s)||pk(s))?s=parseFloat(s):!M3(s)&&fi.test(n)&&(s=xk(e,n)),this.setBaseTarget(e,Zt(s)?s.get():s)),Zt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=h0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new I0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class nA extends V3{constructor(){super(...arguments),this.KeyframeResolver=Ck}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function F3(t){return window.getComputedStyle(t)}class U3 extends nA{constructor(){super(...arguments),this.type="html",this.renderInstance=zC}readValueFromInstance(e,n){if(ko.has(n)){const r=P0(n);return r&&r.default||0}else{const r=F3(e),s=(UC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Wk(e,n)}build(e,n,r){m0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return w0(e,n,r)}}class B3 extends nA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ut}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ko.has(n)){const r=P0(n);return r&&r.default||0}return n=WC.has(n)?n:c0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return qC(e,n,r)}build(e,n,r){g0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){HC(e,n,r,s)}mount(e){this.isSVGTag=v0(e.tagName),super.mount(e)}}const $3=(t,e)=>d0(t)?new B3(e):new U3(e,{allowProjection:t!==y.Fragment}),z3=pV({...hF,...N3,..._3,...D3},$3),Ge=AO(z3);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(t,e)=>{const n=y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>y.createElement("svg",{ref:d,...W3,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${H3(t)}`,a].join(" "),...c},[...e.map(([h,p])=>y.createElement(h,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=pe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=pe("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=pe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=pe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=pe("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=pe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=pe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=pe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=pe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),c5=()=>{};var S1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},u5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},fA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new d5;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h5=function(t){const e=hA(t);return fA.encodeByteArray(e,!0)},Vh=function(t){return h5(t).replace(/\./g,"")},pA=function(t){try{return fA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=()=>f5().__FIREBASE_DEFAULTS__,m5=()=>{if(typeof process>"u"||typeof S1>"u")return;const t=S1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pA(t[1]);return e&&JSON.parse(e)},Ff=()=>{try{return c5()||p5()||m5()||g5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mA=t=>{var e,n;return(n=(e=Ff())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},F0=t=>{const e=mA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gA=()=>{var t;return(t=Ff())==null?void 0:t.config},yA=t=>{var e;return(e=Ff())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Uf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Vh(JSON.stringify(n)),Vh(JSON.stringify(o)),""].join(".")}const cc={};function v5(){const t={prod:[],emulator:[]};for(const e of Object.keys(cc))cc[e]?t.emulator.push(e):t.prod.push(e);return t}function w5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let I1=!1;function Bf(t,e){if(typeof window>"u"||typeof document>"u"||!Is(window.location.host)||cc[t]===e||cc[t]||I1)return;cc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=v5().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{I1=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=w5(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),x=n("learnmore"),T=document.getElementById(x)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const b=p.element;a(b),d(T,x);const C=c();l(w,E),b.append(w,_,T,C),document.body.appendChild(b)}i?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function _5(){var e;const t=(e=Ff())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function T5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S5(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I5(){return!_5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function C5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k5,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?A5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,a,r)}}function A5(t,e){return t.replace(R5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const R5=/\{\$([^}]+)}/g;function P5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(C1(i)&&C1(o)){if(!pi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function C1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function N5(t,e){const n=new D5(t,e);return n.subscribe.bind(n)}class D5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");L5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sm),s.error===void 0&&(s.error=Sm),s.complete===void 0&&(s.complete=Sm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t){return t&&t._delegate?t._delegate:t}class Un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new y5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O5(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M5(t){return t===qi?void 0:t}function O5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const F5={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},U5=be.INFO,B5={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},$5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=B5[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let U0=class{constructor(e){this.name=e,this._logLevel=U5,this._logHandler=$5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}};const z5=(t,e)=>e.some(n=>t instanceof n);let k1,A1;function W5(){return k1||(k1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H5(){return A1||(A1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _A=new WeakMap,gy=new WeakMap,bA=new WeakMap,Im=new WeakMap,B0=new WeakMap;function G5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_A.set(n,t)}).catch(()=>{}),B0.set(e,t),e}function q5(t){if(gy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gy.set(t,e)}let yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K5(t){yy=t(yy)}function Q5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cm(this),e,...n);return bA.set(r,e.sort?e.sort():[e]),hs(r)}:H5().includes(t)?function(...e){return t.apply(Cm(this),e),hs(_A.get(this))}:function(...e){return hs(t.apply(Cm(this),e))}}function Y5(t){return typeof t=="function"?Q5(t):(t instanceof IDBTransaction&&q5(t),z5(t,W5())?new Proxy(t,yy):t)}function hs(t){if(t instanceof IDBRequest)return G5(t);if(Im.has(t))return Im.get(t);const e=Y5(t);return e!==t&&(Im.set(t,e),B0.set(e,t)),e}const Cm=t=>B0.get(t);function $f(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=hs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hs(o.result),l.oldVersion,l.newVersion,hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function km(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),hs(n).then(()=>{})}const X5=["get","getKey","getAll","getAllKeys","count"],J5=["put","add","delete","clear"],Am=new Map;function R1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=J5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Am.set(e,i),i}K5(t=>({...t,get:(e,n,r)=>R1(e,n)||t.get(e,n,r),has:(e,n)=>!!R1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function e6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vy="@firebase/app",P1="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new U0("@firebase/app"),t6="@firebase/app-compat",n6="@firebase/analytics-compat",r6="@firebase/analytics",s6="@firebase/app-check-compat",i6="@firebase/app-check",o6="@firebase/auth",a6="@firebase/auth-compat",l6="@firebase/database",c6="@firebase/data-connect",u6="@firebase/database-compat",d6="@firebase/functions",h6="@firebase/functions-compat",f6="@firebase/installations",p6="@firebase/installations-compat",m6="@firebase/messaging",g6="@firebase/messaging-compat",y6="@firebase/performance",v6="@firebase/performance-compat",w6="@firebase/remote-config",x6="@firebase/remote-config-compat",_6="@firebase/storage",b6="@firebase/storage-compat",E6="@firebase/firestore",T6="@firebase/ai",S6="@firebase/firestore-compat",I6="firebase",C6="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="[DEFAULT]",k6={[vy]:"fire-core",[t6]:"fire-core-compat",[r6]:"fire-analytics",[n6]:"fire-analytics-compat",[i6]:"fire-app-check",[s6]:"fire-app-check-compat",[o6]:"fire-auth",[a6]:"fire-auth-compat",[l6]:"fire-rtdb",[c6]:"fire-data-connect",[u6]:"fire-rtdb-compat",[d6]:"fire-fn",[h6]:"fire-fn-compat",[f6]:"fire-iid",[p6]:"fire-iid-compat",[m6]:"fire-fcm",[g6]:"fire-fcm-compat",[y6]:"fire-perf",[v6]:"fire-perf-compat",[w6]:"fire-rc",[x6]:"fire-rc-compat",[_6]:"fire-gcs",[b6]:"fire-gcs-compat",[E6]:"fire-fst",[S6]:"fire-fst-compat",[T6]:"fire-vertex","fire-js":"fire-js",[I6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Map,A6=new Map,xy=new Map;function N1(t,e){try{t.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sr(t){const e=t.name;if(xy.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;xy.set(e,t);for(const n of Fh.values())N1(n,t);for(const n of A6.values())N1(n,t);return!0}function Ii(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new Ao("app","Firebase",R6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=C6;function EA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:wy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw oi.create("bad-app-name",{appName:String(s)});if(n||(n=gA()),!n)throw oi.create("no-options");const i=Fh.get(s);if(i){if(pi(n,i.options)&&pi(r,i.config))return i;throw oi.create("duplicate-app",{appName:s})}const o=new V5(s);for(const l of xy.values())o.addComponent(l);const a=new P6(n,r,o);return Fh.set(s,a),a}function xu(t=wy){const e=Fh.get(t);if(!e&&t===wy&&gA())return EA();if(!e)throw oi.create("no-app",{appName:t});return e}function en(t,e,n){let r=k6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(o.join(" "));return}sr(new Un(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6="firebase-heartbeat-database",D6=1,Gc="firebase-heartbeat-store";let Rm=null;function TA(){return Rm||(Rm=$f(N6,D6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw oi.create("idb-open",{originalErrorMessage:t.message})})),Rm}async function L6(t){try{const n=(await TA()).transaction(Gc),r=await n.objectStore(Gc).get(SA(t));return await n.done,r}catch(e){if(e instanceof Sr)_s.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(n.message)}}}async function D1(t,e){try{const r=(await TA()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,SA(t)),await r.done}catch(n){if(n instanceof Sr)_s.warn(n.message);else{const r=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_s.warn(r.message)}}}function SA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=1024,M6=30;class O6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new F6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=L1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>M6){const o=U6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=L1(),{heartbeatsToSend:r,unsentEntries:s}=V6(this._heartbeatsCache.heartbeats),i=Vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return _s.warn(n),""}}}function L1(){return new Date().toISOString().substring(0,10)}function V6(t,e=j6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),j1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),j1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class F6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return D1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return D1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function j1(t){return Vh(JSON.stringify({version:2,heartbeats:t})).length}function U6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t){sr(new Un("platform-logger",e=>new Z5(e),"PRIVATE")),sr(new Un("heartbeat",e=>new O6(e),"PRIVATE")),en(vy,P1,t),en(vy,P1,"esm2020"),en("fire-js","")}B6("");function IA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $6=IA,CA=new Ao("auth","Firebase",IA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new U0("@firebase/auth");function z6(t,...e){Uh.logLevel<=be.WARN&&Uh.warn(`Auth (${Ro}): ${t}`,...e)}function Hd(t,...e){Uh.logLevel<=be.ERROR&&Uh.error(`Auth (${Ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,...e){throw z0(t,...e)}function vr(t,...e){return z0(t,...e)}function $0(t,e,n){const r={...$6(),[e]:n};return new Ao("auth","Firebase",r).create(e,{appName:t.name})}function oo(t){return $0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gr(t,"argument-error"),$0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function z0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return CA.create(t,...e)}function de(t,e,...n){if(!t)throw z0(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hd(e),new Error(e)}function bs(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function H6(){return M1()==="http:"||M1()==="https:"}function M1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H6()||E5()||"connection"in navigator)?navigator.onLine:!0}function q6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,bs(n>e,"Short delay should be less than long delay!"),this.isMobile=x5()||T5()}get(){return G6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e){bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y6=new _u(3e4,6e4);function H0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Xa(t,e,n,r,s={}){return AA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=wu({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return b5()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Is(t.emulatorConfig.host)&&(c.credentials="include"),kA.fetch()(await RA(t,t.config.apiHost,n,a),c)})}async function AA(t,e,n){t._canInitEmulator=!1;const r={...K6,...e};try{const s=new J6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw gd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $0(t,d,c);Gr(t,d)}}catch(s){if(s instanceof Sr)throw s;Gr(t,"network-request-failed",{message:String(s)})}}async function X6(t,e,n,r,s={}){const i=await Xa(t,e,n,r,s);return"mfaPendingCredential"in i&&Gr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function RA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?W0(t.config,s):`${t.config.apiScheme}://${s}`;return Q6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class J6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vr(this.auth,"network-request-failed")),Y6.get())})}}function gd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=vr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(t,e){return Xa(t,"POST","/v1/accounts:delete",e)}async function Bh(t,e){return Xa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eU(t,e=!1){const n=De(t),r=await n.getIdToken(e),s=G0(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:uc(Pm(s.auth_time)),issuedAtTime:uc(Pm(s.iat)),expirationTime:uc(Pm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Pm(t){return Number(t)*1e3}function G0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hd("JWT malformed, contained fewer than 3 sections"),null;try{const s=pA(n);return s?JSON.parse(s):(Hd("Failed to decode base64 JWT payload"),null)}catch(s){return Hd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function O1(t){const e=G0(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sr&&tU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uc(this.lastLoginAt),this.creationTime=uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(t){var h;const e=t.auth,n=await t.getIdToken(),r=await qc(t,Bh(e,{idToken:n}));de(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?PA(s.providerUserInfo):[],o=sU(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new by(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function rU(t){const e=De(t);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function PA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(t,e){const n=await AA(t,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await RA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Is(t.emulatorConfig.host)&&(l.credentials="include"),kA.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oU(t,e){return Xa(t,"POST","/v2/accounts:revokeToken",H0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=O1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iU(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new va;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new nU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new by(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await qc(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eU(this,e)}reload(){return rU(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await qc(this,Z6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:m,providerData:_,stsTokenManager:x}=n;de(h&&x,e,"internal-error");const T=va.fromJSON(this.name,x);de(typeof h=="string",e,"internal-error"),js(r,e.name),js(s,e.name),de(typeof p=="boolean",e,"internal-error"),de(typeof m=="boolean",e,"internal-error"),js(i,e.name),js(o,e.name),js(a,e.name),js(l,e.name),js(c,e.name),js(d,e.name);const E=new mr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:T,createdAt:c,lastLoginAt:d});return _&&Array.isArray(_)&&(E.providerData=_.map(w=>({...w}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new va;s.updateFromServerResponse(n);const i=new mr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $h(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];de(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?PA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new va;a.updateFromIdToken(r);const l=new mr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new by(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Map;function as(t){bs(t instanceof Function,"Expected a class definition");let e=V1.get(t);return e?(bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,V1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NA.type="NONE";const F1=NA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t,e,n){return`firebase:${t}:${e}:${n}`}class wa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Gd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Gd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bh(this.auth,{idToken:e}).catch(()=>{});return n?mr._fromGetAccountInfoResponse(this.auth,n,e):null}return mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wa(as(F1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||as(F1);const o=Gd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Bh(e,{idToken:d}).catch(()=>{});if(!p)break;h=await mr._fromGetAccountInfoResponse(e,p,d)}else h=mr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new wa(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new wa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VA(e))return"Blackberry";if(FA(e))return"Webos";if(LA(e))return"Safari";if((e.includes("chrome/")||jA(e))&&!e.includes("edge/"))return"Chrome";if(OA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DA(t=rn()){return/firefox\//i.test(t)}function LA(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jA(t=rn()){return/crios\//i.test(t)}function MA(t=rn()){return/iemobile/i.test(t)}function OA(t=rn()){return/android/i.test(t)}function VA(t=rn()){return/blackberry/i.test(t)}function FA(t=rn()){return/webos/i.test(t)}function q0(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aU(t=rn()){var e;return q0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lU(){return S5()&&document.documentMode===10}function UA(t=rn()){return q0(t)||OA(t)||FA(t)||VA(t)||/windows phone/i.test(t)||MA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t,e=[]){let n;switch(t){case"Browser":n=U1(rn());break;case"Worker":n=`${U1(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t,e={}){return Xa(t,"GET","/v2/passwordPolicy",H0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=6;class hU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B1(this),this.idTokenSubscription=new B1(this),this.beforeStateQueue=new cU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=as(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bh(this,{idToken:e}),r=await mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(oo(this));const n=e?De(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uU(this),n=new hU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&as(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[as(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&z6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function zf(t){return De(t)}class B1{constructor(e){this.auth=e,this.observer=null,this.addObserver=N5(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pU(t){K0=t}function mU(t){return K0.loadJS(t)}function gU(){return K0.gapiScript}function yU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t,e){const n=Ii(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(pi(i,e??{}))return s;Gr(s,"already-initialized")}return n.initialize({options:e})}function wU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(as);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xU(t,e,n){const r=zf(t);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=$A(e),{host:o,port:a}=_U(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(pi(c,r.config.emulator)&&pi(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Is(o)?(Uf(`${i}//${o}${l}`),Bf("Auth",!0)):bU()}function $A(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _U(t){const e=$A(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:$1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:$1(o)}}}function $1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(t,e){return X6(t,"POST","/v1/accounts:signInWithIdp",H0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU="http://localhost";class go extends zA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new go(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xa(e,n)}buildRequest(){const e={requestUri:EU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Q0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends bu{constructor(){super("facebook.com")}static credential(e){return go._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ws.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return go._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends bu{constructor(){super("github.com")}static credential(e){return go._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends bu{constructor(){super("twitter.com")}static credential(e,n){return go._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await mr._fromIdTokenResponse(e,r,s),o=z1(r);return new ja({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=z1(r);return new ja({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function z1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Sr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new zh(e,n,r,s)}}function WA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?zh._fromErrorAndOperation(t,i,e,r):i})}async function TU(t,e,n=!1){const r=await qc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ja._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e,n=!1){const{auth:r}=t;if(Pn(r.app))return Promise.reject(oo(r));const s="reauthenticate";try{const i=await qc(t,WA(r,s,e,t),n);de(i.idToken,r,"internal-error");const o=G0(i.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),ja._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(t,e,n=!1){if(Pn(t.app))return Promise.reject(oo(t));const r="signIn",s=await WA(t,r,e),i=await ja._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function CU(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function kU(t,e,n){return De(t).beforeAuthStateChanged(e,n)}function AU(t,e,n,r){return De(t).onAuthStateChanged(e,n,r)}function RU(t){return De(t).signOut()}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=1e3,NU=10;class GA extends HA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,NU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}GA.type="LOCAL";const DU=GA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA extends HA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qA.type="SESSION";const KA=qA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await LU(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Y0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function MU(t){$r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function OU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function FU(){return QA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebaseLocalStorageDb",UU=1,Hh="firebaseLocalStorage",XA="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hf(t,e){return t.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function BU(){const t=indexedDB.deleteDatabase(YA);return new Eu(t).toPromise()}function Ey(){const t=indexedDB.open(YA,UU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hh,{keyPath:XA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hh)?e(r):(r.close(),await BU(),e(await Ey()))})})}async function W1(t,e,n){const r=Hf(t,!0).put({[XA]:e,value:n});return new Eu(r).toPromise()}async function $U(t,e){const n=Hf(t,!1).get(e),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function H1(t,e){const n=Hf(t,!0).delete(e);return new Eu(n).toPromise()}const zU=800,WU=3;class JA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ey(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(FU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await OU(),!this.activeServiceWorker)return;this.sender=new jU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ey();return await W1(e,Wh,"1"),await H1(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>W1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$U(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>H1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hf(s,!1).getAll();return new Eu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JA.type="LOCAL";const HU=JA;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){return e?as(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends zA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GU(t){return IU(t.auth,new X0(t),t.bypassAuthState)}function qU(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),SU(n,new X0(t),t.bypassAuthState)}async function KU(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),TU(n,new X0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GU;case"linkViaPopup":case"linkViaRedirect":return KU;case"reauthViaPopup":case"reauthViaRedirect":return qU;default:Gr(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=new _u(2e3,1e4);async function YU(t,e,n){if(Pn(t.app))return Promise.reject(vr(t,"operation-not-supported-in-this-environment"));const r=zf(t);W6(t,e,Q0);const s=ZA(r,n);return new Ji(r,"signInViaPopup",e,s).executeNotNull()}class Ji extends eR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ji.currentPopupAction&&Ji.currentPopupAction.cancel(),Ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){bs(this.filter.length===1,"Popup operations only handle one event");const e=Y0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QU.get())};e()}}Ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="pendingRedirect",qd=new Map;class JU extends eR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const r=await ZU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZU(t,e){const n=n9(e),r=t9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function e9(t,e){qd.set(t._key(),e)}function t9(t){return as(t._redirectPersistence)}function n9(t){return Gd(XU,t.config.apiKey,t.name)}async function r9(t,e,n=!1){if(Pn(t.app))return Promise.reject(oo(t));const r=zf(t),s=ZA(r,e),o=await new JU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=10*60*1e3;class i9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tR(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(vr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s9&&this.cachedEventUids.clear(),this.cachedEventUids.has(G1(e))}saveEventToCache(e){this.cachedEventUids.add(G1(e)),this.lastProcessedEventTime=Date.now()}}function G1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a9(t,e={}){return Xa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c9=/^https?/;async function u9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await a9(t);for(const n of e)try{if(d9(n))return}catch{}Gr(t,"unauthorized-domain")}function d9(t){const e=_y(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!c9.test(n))return!1;if(l9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=new _u(3e4,6e4);function q1(){const t=$r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function f9(t){return new Promise((e,n)=>{var s,i,o;function r(){q1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q1(),n(vr(t,"network-request-failed"))},timeout:h9.get()})}if((i=(s=$r().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=$r().gapi)!=null&&o.load)r();else{const a=yU("iframefcb");return $r()[a]=()=>{gapi.load?r():n(vr(t,"network-request-failed"))},mU(`${gU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Kd=null,e})}let Kd=null;function p9(t){return Kd=Kd||f9(t),Kd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=new _u(5e3,15e3),g9="__/auth/iframe",y9="emulator/auth/iframe",v9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x9(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W0(e,y9):`https://${t.config.authDomain}/${g9}`,r={apiKey:e.apiKey,appName:t.name,v:Ro},s=w9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wu(r).slice(1)}`}async function _9(t){const e=await p9(t),n=$r().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:x9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=vr(t,"network-request-failed"),a=$r().setTimeout(()=>{i(o)},m9.get());function l(){$r().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E9=500,T9=600,S9="_blank",I9="http://localhost";class K1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function C9(t,e,n,r=E9,s=T9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...b9,width:r.toString(),height:s.toString(),top:i,left:o},c=rn().toLowerCase();n&&(a=jA(c)?S9:n),DA(c)&&(e=e||I9,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(aU(c)&&a!=="_self")return k9(e||"",a),new K1(null);const h=window.open(e||"",a,d);de(h,t,"popup-blocked");try{h.focus()}catch{}return new K1(h)}function k9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9="__/auth/handler",R9="emulator/auth/handler",P9=encodeURIComponent("fac");async function Q1(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ro,eventId:s};if(e instanceof Q0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",P5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof bu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${P9}=${encodeURIComponent(l)}`:"";return`${N9(t)}?${wu(a).slice(1)}${c}`}function N9({config:t}){return t.emulator?W0(t,R9):`https://${t.authDomain}/${A9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class D9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KA,this._completeRedirectFn=r9,this._overrideRedirectResult=e9}async _openPopup(e,n,r,s){var o;bs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Q1(e,n,r,_y(),s);return C9(e,i,Y0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Q1(e,n,r,_y(),s);return MU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(bs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _9(e),r=new i9(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nm,{type:Nm},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Nm];i!==void 0&&n(!!i),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UA()||LA()||q0()}}const L9=D9;var Y1="@firebase/auth",X1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O9(t){sr(new Un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BA(t)},c=new fU(r,s,i,l);return wU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sr(new Un("auth-internal",e=>{const n=zf(e.getProvider("auth").getImmediate());return(r=>new j9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(Y1,X1,M9(t)),en(Y1,X1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=5*60,F9=yA("authIdTokenMaxAge")||V9;let J1=null;const U9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F9)return;const s=n==null?void 0:n.token;J1!==s&&(J1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function B9(t=xu()){const e=Ii(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vU(t,{popupRedirectResolver:L9,persistence:[HU,DU,KA]}),r=yA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=U9(i.toString());kU(n,o,()=>o(n.currentUser)),CU(n,a=>o(a))}}const s=mA("auth");return s&&xU(n,`http://${s}`),n}function $9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=vr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O9("Browser");var z9="firebase",W9="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(z9,W9,"app");var Z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ai,nR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function k(){}k.prototype=S.prototype,I.F=S.prototype,I.prototype=new k,I.prototype.constructor=I,I.D=function(P,D,M){for(var N=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)N[Z-2]=arguments[Z];return S.prototype[D].apply(P,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,k){k||(k=0);const P=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)P[D]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(D=0;D<16;++D)P[D]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=I.g[0],k=I.g[1],D=I.g[2];let M=I.g[3],N;N=S+(M^k&(D^M))+P[0]+3614090360&4294967295,S=k+(N<<7&4294967295|N>>>25),N=M+(D^S&(k^D))+P[1]+3905402710&4294967295,M=S+(N<<12&4294967295|N>>>20),N=D+(k^M&(S^k))+P[2]+606105819&4294967295,D=M+(N<<17&4294967295|N>>>15),N=k+(S^D&(M^S))+P[3]+3250441966&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(M^k&(D^M))+P[4]+4118548399&4294967295,S=k+(N<<7&4294967295|N>>>25),N=M+(D^S&(k^D))+P[5]+1200080426&4294967295,M=S+(N<<12&4294967295|N>>>20),N=D+(k^M&(S^k))+P[6]+2821735955&4294967295,D=M+(N<<17&4294967295|N>>>15),N=k+(S^D&(M^S))+P[7]+4249261313&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(M^k&(D^M))+P[8]+1770035416&4294967295,S=k+(N<<7&4294967295|N>>>25),N=M+(D^S&(k^D))+P[9]+2336552879&4294967295,M=S+(N<<12&4294967295|N>>>20),N=D+(k^M&(S^k))+P[10]+4294925233&4294967295,D=M+(N<<17&4294967295|N>>>15),N=k+(S^D&(M^S))+P[11]+2304563134&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(M^k&(D^M))+P[12]+1804603682&4294967295,S=k+(N<<7&4294967295|N>>>25),N=M+(D^S&(k^D))+P[13]+4254626195&4294967295,M=S+(N<<12&4294967295|N>>>20),N=D+(k^M&(S^k))+P[14]+2792965006&4294967295,D=M+(N<<17&4294967295|N>>>15),N=k+(S^D&(M^S))+P[15]+1236535329&4294967295,k=D+(N<<22&4294967295|N>>>10),N=S+(D^M&(k^D))+P[1]+4129170786&4294967295,S=k+(N<<5&4294967295|N>>>27),N=M+(k^D&(S^k))+P[6]+3225465664&4294967295,M=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(M^S))+P[11]+643717713&4294967295,D=M+(N<<14&4294967295|N>>>18),N=k+(M^S&(D^M))+P[0]+3921069994&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(D^M&(k^D))+P[5]+3593408605&4294967295,S=k+(N<<5&4294967295|N>>>27),N=M+(k^D&(S^k))+P[10]+38016083&4294967295,M=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(M^S))+P[15]+3634488961&4294967295,D=M+(N<<14&4294967295|N>>>18),N=k+(M^S&(D^M))+P[4]+3889429448&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(D^M&(k^D))+P[9]+568446438&4294967295,S=k+(N<<5&4294967295|N>>>27),N=M+(k^D&(S^k))+P[14]+3275163606&4294967295,M=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(M^S))+P[3]+4107603335&4294967295,D=M+(N<<14&4294967295|N>>>18),N=k+(M^S&(D^M))+P[8]+1163531501&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(D^M&(k^D))+P[13]+2850285829&4294967295,S=k+(N<<5&4294967295|N>>>27),N=M+(k^D&(S^k))+P[2]+4243563512&4294967295,M=S+(N<<9&4294967295|N>>>23),N=D+(S^k&(M^S))+P[7]+1735328473&4294967295,D=M+(N<<14&4294967295|N>>>18),N=k+(M^S&(D^M))+P[12]+2368359562&4294967295,k=D+(N<<20&4294967295|N>>>12),N=S+(k^D^M)+P[5]+4294588738&4294967295,S=k+(N<<4&4294967295|N>>>28),N=M+(S^k^D)+P[8]+2272392833&4294967295,M=S+(N<<11&4294967295|N>>>21),N=D+(M^S^k)+P[11]+1839030562&4294967295,D=M+(N<<16&4294967295|N>>>16),N=k+(D^M^S)+P[14]+4259657740&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(k^D^M)+P[1]+2763975236&4294967295,S=k+(N<<4&4294967295|N>>>28),N=M+(S^k^D)+P[4]+1272893353&4294967295,M=S+(N<<11&4294967295|N>>>21),N=D+(M^S^k)+P[7]+4139469664&4294967295,D=M+(N<<16&4294967295|N>>>16),N=k+(D^M^S)+P[10]+3200236656&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(k^D^M)+P[13]+681279174&4294967295,S=k+(N<<4&4294967295|N>>>28),N=M+(S^k^D)+P[0]+3936430074&4294967295,M=S+(N<<11&4294967295|N>>>21),N=D+(M^S^k)+P[3]+3572445317&4294967295,D=M+(N<<16&4294967295|N>>>16),N=k+(D^M^S)+P[6]+76029189&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(k^D^M)+P[9]+3654602809&4294967295,S=k+(N<<4&4294967295|N>>>28),N=M+(S^k^D)+P[12]+3873151461&4294967295,M=S+(N<<11&4294967295|N>>>21),N=D+(M^S^k)+P[15]+530742520&4294967295,D=M+(N<<16&4294967295|N>>>16),N=k+(D^M^S)+P[2]+3299628645&4294967295,k=D+(N<<23&4294967295|N>>>9),N=S+(D^(k|~M))+P[0]+4096336452&4294967295,S=k+(N<<6&4294967295|N>>>26),N=M+(k^(S|~D))+P[7]+1126891415&4294967295,M=S+(N<<10&4294967295|N>>>22),N=D+(S^(M|~k))+P[14]+2878612391&4294967295,D=M+(N<<15&4294967295|N>>>17),N=k+(M^(D|~S))+P[5]+4237533241&4294967295,k=D+(N<<21&4294967295|N>>>11),N=S+(D^(k|~M))+P[12]+1700485571&4294967295,S=k+(N<<6&4294967295|N>>>26),N=M+(k^(S|~D))+P[3]+2399980690&4294967295,M=S+(N<<10&4294967295|N>>>22),N=D+(S^(M|~k))+P[10]+4293915773&4294967295,D=M+(N<<15&4294967295|N>>>17),N=k+(M^(D|~S))+P[1]+2240044497&4294967295,k=D+(N<<21&4294967295|N>>>11),N=S+(D^(k|~M))+P[8]+1873313359&4294967295,S=k+(N<<6&4294967295|N>>>26),N=M+(k^(S|~D))+P[15]+4264355552&4294967295,M=S+(N<<10&4294967295|N>>>22),N=D+(S^(M|~k))+P[6]+2734768916&4294967295,D=M+(N<<15&4294967295|N>>>17),N=k+(M^(D|~S))+P[13]+1309151649&4294967295,k=D+(N<<21&4294967295|N>>>11),N=S+(D^(k|~M))+P[4]+4149444226&4294967295,S=k+(N<<6&4294967295|N>>>26),N=M+(k^(S|~D))+P[11]+3174756917&4294967295,M=S+(N<<10&4294967295|N>>>22),N=D+(S^(M|~k))+P[2]+718787259&4294967295,D=M+(N<<15&4294967295|N>>>17),N=k+(M^(D|~S))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+M&4294967295}r.prototype.v=function(I,S){S===void 0&&(S=I.length);const k=S-this.blockSize,P=this.C;let D=this.h,M=0;for(;M<S;){if(D==0)for(;M<=k;)s(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<S;)if(P[D++]=I.charCodeAt(M++),D==this.blockSize){s(this,P),D=0;break}}else for(;M<S;)if(P[D++]=I[M++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=S},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var k=I.length-8;k<I.length;++k)I[k]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,k=0;k<4;++k)for(let P=0;P<32;P+=8)I[S++]=this.g[k]>>>P&255;return I};function i(I,S){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=S(I)}function o(I,S){this.h=S;const k=[];let P=!0;for(let D=I.length-1;D>=0;D--){const M=I[D]|0;P&&M==S||(k[D]=M,P=!1)}this.g=k}var a={};function l(I){return-128<=I&&I<128?i(I,function(S){return new o([S|0],S<0?-1:0)}):new o([I|0],I<0?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(I<0)return T(c(-I));const S=[];let k=1;for(let P=0;I>=k;P++)S[P]=I/k|0,k*=4294967296;return new o(S,0)}function d(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return T(d(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=c(Math.pow(S,8));let P=h;for(let M=0;M<I.length;M+=8){var D=Math.min(8,I.length-M);const N=parseInt(I.substring(M,M+D),S);D<8?(D=c(Math.pow(S,D)),P=P.j(D).add(c(N))):(P=P.j(k),P=P.add(c(N)))}return P}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-T(this).m();let I=0,S=1;for(let k=0;k<this.g.length;k++){const P=this.i(k);I+=(P>=0?P:4294967296+P)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(x(this))return"-"+T(this).toString(I);const S=c(Math.pow(I,6));var k=this;let P="";for(;;){const D=C(k,S).g;k=E(k,D.j(S));let M=((k.g.length>0?k.g[0]:k.h)>>>0).toString(I);if(k=D,_(k))return M+P;for(;M.length<6;)M="0"+M;P=M+P}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=E(this,I),x(I)?-1:_(I)?0:1};function T(I){const S=I.g.length,k=[];for(let P=0;P<S;P++)k[P]=~I.g[P];return new o(k,~I.h).add(p)}t.abs=function(){return x(this)?T(this):this},t.add=function(I){const S=Math.max(this.g.length,I.g.length),k=[];let P=0;for(let D=0;D<=S;D++){let M=P+(this.i(D)&65535)+(I.i(D)&65535),N=(M>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=N>>>16,M&=65535,N&=65535,k[D]=N<<16|M}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(I,S){return I.add(T(S))}t.j=function(I){if(_(this)||_(I))return h;if(x(this))return x(I)?T(this).j(T(I)):T(T(this).j(I));if(x(I))return T(this.j(T(I)));if(this.l(m)<0&&I.l(m)<0)return c(this.m()*I.m());const S=this.g.length+I.g.length,k=[];for(var P=0;P<2*S;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<I.g.length;D++){const M=this.i(P)>>>16,N=this.i(P)&65535,Z=I.i(D)>>>16,q=I.i(D)&65535;k[2*P+2*D]+=N*q,w(k,2*P+2*D),k[2*P+2*D+1]+=M*q,w(k,2*P+2*D+1),k[2*P+2*D+1]+=N*Z,w(k,2*P+2*D+1),k[2*P+2*D+2]+=M*Z,w(k,2*P+2*D+2)}for(I=0;I<S;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=S;I<2*S;I++)k[I]=0;return new o(k,0)};function w(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function b(I,S){this.g=I,this.h=S}function C(I,S){if(_(S))throw Error("division by zero");if(_(I))return new b(h,h);if(x(I))return S=C(T(I),S),new b(T(S.g),T(S.h));if(x(S))return S=C(I,T(S)),new b(T(S.g),S.h);if(I.g.length>30){if(x(I)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var k=p,P=S;P.l(I)<=0;)k=R(k),P=R(P);var D=O(k,1),M=O(P,1);for(P=O(P,2),k=O(k,2);!_(P);){var N=M.add(P);N.l(I)<=0&&(D=D.add(k),M=N),P=O(P,1),k=O(k,1)}return S=E(I,D.j(S)),new b(D,S)}for(D=h;I.l(S)>=0;){for(k=Math.max(1,Math.floor(I.m()/S.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),M=c(k),N=M.j(S);x(N)||N.l(I)>0;)k-=P,M=c(k),N=M.j(S);_(M)&&(M=p),D=D.add(M),I=E(I,N)}return new b(D,I)}t.B=function(I){return C(this,I).h},t.and=function(I){const S=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<S;P++)k[P]=this.i(P)&I.i(P);return new o(k,this.h&I.h)},t.or=function(I){const S=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<S;P++)k[P]=this.i(P)|I.i(P);return new o(k,this.h|I.h)},t.xor=function(I){const S=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<S;P++)k[P]=this.i(P)^I.i(P);return new o(k,this.h^I.h)};function R(I){const S=I.g.length+1,k=[];for(let P=0;P<S;P++)k[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(k,I.h)}function O(I,S){const k=S>>5;S%=32;const P=I.g.length-k,D=[];for(let M=0;M<P;M++)D[M]=S>0?I.i(M+k)>>>S|I.i(M+k+1)<<32-S:I.i(M+k);return new o(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,nR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ai=o}).apply(typeof Z1<"u"?Z1:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rR,Gl,sR,Qd,Ty,iR,oR,aR;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var v=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var V=u[A];if(!(V in v))break e;v=v[V]}u=u[u.length-1],A=v[u],g=g(A),g!=A&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var v=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.push([A,g[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,v){return u.call.apply(u.bind,arguments)}function c(u,g,v){return c=l,c.apply(null,arguments)}function d(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function h(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,V,B){for(var K=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)K[ve-2]=arguments[ve];return g.prototype[V].apply(A,K)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const v=Array(g);for(let A=0;A<g;A++)v[A]=u[A];return v}return[]}function _(u,g){for(let A=1;A<arguments.length;A++){const V=arguments[A];var v=typeof V;if(v=v!="object"?v:V?Array.isArray(V)?"array":v:"null",v=="array"||v=="object"&&typeof V.length=="number"){v=u.length||0;const B=V.length||0;u.length=v+B;for(let K=0;K<B;K++)u[v+K]=V[K]}else u.push(V)}}class x{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(u){o.setTimeout(()=>{throw u},0)}function E(){var u=I;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class w{constructor(){this.h=this.g=null}add(g,v){const A=b.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var b=new x(()=>new C,u=>u.reset());class C{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let R,O=!1,I=new w,S=()=>{const u=Promise.resolve(void 0);R=()=>{u.then(k)}};function k(){for(var u;u=E();){try{u.h.call(u.g)}catch(v){T(v)}var g=b;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}O=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};o.addEventListener("test",v,g),o.removeEventListener("test",v,g)}catch{}return u}();function N(u){return/^[\s\xa0]*$/.test(u)}function Z(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(Z,D),Z.prototype.init=function(u,g){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),Y=0;function z(u,g,v,A,V){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=V,this.key=++Y,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,g,v){for(const A in u)g.call(v,u[A],A,u)}function j(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function L(u){const g={};for(const v in u)g[v]=u[v];return g}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(u,g){let v,A;for(let V=1;V<arguments.length;V++){A=arguments[V];for(v in A)u[v]=A[v];for(let B=0;B<G.length;B++)v=G[B],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function re(u){this.src=u,this.g={},this.h=0}re.prototype.add=function(u,g,v,A,V){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const K=te(u,g,A,V);return K>-1?(g=u[K],v||(g.fa=!1)):(g=new z(g,this.src,B,!!A,V),g.fa=v,u.push(g)),g};function oe(u,g){const v=g.type;if(v in u.g){var A=u.g[v],V=Array.prototype.indexOf.call(A,g,void 0),B;(B=V>=0)&&Array.prototype.splice.call(A,V,1),B&&(F(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function te(u,g,v,A){for(let V=0;V<u.length;++V){const B=u[V];if(!B.da&&B.listener==g&&B.capture==!!v&&B.ha==A)return V}return-1}var ne="closure_lm_"+(Math.random()*1e6|0),ce={};function we(u,g,v,A,V){if(Array.isArray(g)){for(let B=0;B<g.length;B++)we(u,g[B],v,A,V);return null}return v=sn(v),u&&u[q]?u.J(g,v,a(A)?!!A.capture:!1,V):ie(u,g,v,!1,A,V)}function ie(u,g,v,A,V,B){if(!g)throw Error("Invalid event type");const K=a(V)?!!V.capture:!!V;let ve=rt(u);if(ve||(u[ne]=ve=new re(u)),v=ve.add(g,v,A,K,B),v.proxy)return v;if(A=ke(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)M||(V=K),V===void 0&&(V=!1),u.addEventListener(g.toString(),A,V);else if(u.attachEvent)u.attachEvent(he(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ke(){function u(v){return g.call(u.src,u.listener,v)}const g=Qe;return u}function _e(u,g,v,A,V){if(Array.isArray(g))for(var B=0;B<g.length;B++)_e(u,g[B],v,A,V);else A=a(A)?!!A.capture:!!A,v=sn(v),u&&u[q]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],v=te(g,v,A,V),v>-1&&(F(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=rt(u))&&(g=u.g[g.toString()],u=-1,g&&(u=te(g,v,A,V)),(v=u>-1?g[u]:null)&&Le(v))}function Le(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[q])oe(g.i,u);else{var v=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(v,A,u.capture):g.detachEvent?g.detachEvent(he(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=rt(g))?(oe(v,u),v.h==0&&(v.src=null,g[ne]=null)):F(u)}}}function he(u){return u in ce?ce[u]:ce[u]="on"+u}function Qe(u,g){if(u.da)u=!0;else{g=new Z(g,this);const v=u.listener,A=u.ha||u.src;u.fa&&Le(u),u=v.call(A,g)}return u}function rt(u){return u=u[ne],u instanceof re?u:null}var kt="__closure_events_fn_"+(Math.random()*1e9>>>0);function sn(u){return typeof u=="function"?u:(u[kt]||(u[kt]=function(g){return u.handleEvent(g)}),u[kt])}function je(){P.call(this),this.i=new re(this),this.M=this,this.G=null}h(je,P),je.prototype[q]=!0,je.prototype.removeEventListener=function(u,g,v,A){_e(this,u,g,v,A)};function Se(u,g){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var V=g;g=new D(A,u),ee(g,V)}V=!0;let B,K;if(v)for(K=v.length-1;K>=0;K--)B=g.g=v[K],V=ar(B,A,!0,g)&&V;if(B=g.g=u,V=ar(B,A,!0,g)&&V,V=ar(B,A,!1,g)&&V,v)for(K=0;K<v.length;K++)B=g.g=v[K],V=ar(B,A,!1,g)&&V}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let A=0;A<v.length;A++)F(v[A]);delete u.g[g],u.h--}}this.G=null},je.prototype.J=function(u,g,v,A){return this.i.add(String(u),g,!1,v,A)},je.prototype.K=function(u,g,v,A){return this.i.add(String(u),g,!0,v,A)};function ar(u,g,v,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let B=0;B<g.length;++B){const K=g[B];if(K&&!K.da&&K.capture==v){const ve=K.listener,_t=K.ha||K.src;K.fa&&oe(u.i,K),V=ve.call(_t,A)!==!1&&V}}return V&&!A.defaultPrevented}function Cs(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Ai(u){u.g=Cs(()=>{u.g=null,u.i&&(u.i=!1,Ai(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ri extends P{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(u){P.call(this),this.h=u,this.g={}}h(Yr,P);var Pi=[];function lr(u){U(u.g,function(g,v){this.g.hasOwnProperty(v)&&Le(g)},u),u.g={}}Yr.prototype.N=function(){Yr.Z.N.call(this),lr(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=o.JSON.stringify,Ir=o.JSON.parse,Ni=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function on(){}function Di(){}var Xr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dl(){D.call(this,"d")}h(dl,D);function Li(){D.call(this,"c")}h(Li,D);var Cr={},Mu=null;function ji(){return Mu=Mu||new je}Cr.Ia="serverreachability";function Ou(u){D.call(this,Cr.Ia,u)}h(Ou,D);function Mi(u){const g=ji();Se(g,new Ou(g))}Cr.STAT_EVENT="statevent";function Vu(u,g){D.call(this,Cr.STAT_EVENT,u),this.stat=g}h(Vu,D);function Re(u){const g=ji();Se(g,new Vu(g,u))}Cr.Ja="timingevent";function zt(u,g){D.call(this,Cr.Ja,u),this.size=g}h(zt,D);function wt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function gn(){this.g=!0}gn.prototype.ua=function(){this.g=!1};function yn(u,g,v,A,V,B){u.info(function(){if(u.g)if(B){var K="",ve=B.split("&");for(let Oe=0;Oe<ve.length;Oe++){var _t=ve[Oe].split("=");if(_t.length>1){const At=_t[0];_t=_t[1];const Rr=At.split("_");K=Rr.length>=2&&Rr[1]=="type"?K+(At+"="+_t+"&"):K+(At+"=redacted&")}}}else K=null;else K=B;return"XMLHTTP REQ ("+A+") [attempt "+V+"]: "+g+`
`+v+`
`+K})}function an(u,g,v,A,V,B,K){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+V+"]: "+g+`
`+v+`
`+B+" "+K})}function Mt(u,g,v,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+xt(u,v)+(A?" "+A:"")})}function ks(u,g){u.info(function(){return"TIMEOUT: "+g})}gn.prototype.info=function(){};function xt(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var V=A[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return Wn(B)}catch{return g}}var Cn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hn;function Jr(){}h(Jr,on),Jr.prototype.g=function(){return new XMLHttpRequest},Hn=new Jr;function cr(u){return encodeURIComponent(String(u))}function kr(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function vn(u,g,v,A){this.j=u,this.i=g,this.l=v,this.S=A||1,this.V=new Yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new jo}function jo(){this.i=null,this.g="",this.h=!1}var ix={},Tp={};function Sp(u,g,v){u.M=1,u.A=Uu(Ar(g)),u.u=v,u.R=!0,ox(u,null)}function ox(u,g){u.F=Date.now(),Fu(u),u.B=Ar(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),wx(v.i,"t",A),u.C=0,v=u.j.L,u.h=new jo,u.g=Ox(u.j,v?g:null,!u.u),u.P>0&&(u.O=new Ri(c(u.Y,u,u.g),u.P)),g=u.V,v=u.g,A=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(Pi[0]=V.toString()),V=Pi);for(let B=0;B<V.length;B++){const K=we(v,V[B],A||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Mi(),yn(u.i,u.v,u.B,u.l,u.S,u.u)}vn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Ps(u)==3?g.j():this.Y(u)},vn.prototype.Y=function(u){try{if(u==this.g)e:{const ve=Ps(this.g),_t=this.g.ya(),Oe=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||Ix(this.g)))){this.K||ve!=4||_t==7||(_t==8||Oe<=0?Mi(3):Mi(2)),Ip(this);var g=this.g.ca();this.X=g;var v=R2(this);if(this.o=g==200,an(this.i,this.v,this.B,this.l,this.S,ve,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,V=this.g;if((A=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var B=A;break t}}B=null}if(u=B)Mt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cp(this,u);else{this.o=!1,this.m=3,Re(12),Oi(this),hl(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<v.length;)if(At=P2(this,v),At==Tp){ve==4&&(this.m=4,Re(14),u=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}else if(At==ix){this.m=4,Re(15),Mt(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Mt(this.i,this.l,At,null),Cp(this,At);if(ax(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||v.length!=0||this.h.h||(this.m=1,Re(16),u=!1),this.o=this.o&&u,!u)Mt(this.i,this.l,v,"[Invalid Chunked Response]"),Oi(this),hl(this);else if(v.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),jp(K),K.P=!0,Re(11))}}else Mt(this.i,this.l,v,null),Cp(this,v);ve==4&&Oi(this),this.o&&!this.K&&(ve==4?Dx(this.j,this):(this.o=!1,Fu(this)))}else H2(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Re(12)):(this.m=0,Re(13)),Oi(this),hl(this)}}}catch{}finally{}};function R2(u){if(!ax(u))return u.g.la();const g=Ix(u.g);if(g==="")return"";let v="";const A=g.length,V=Ps(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Oi(u),hl(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<A;B++)u.h.h=!0,v+=u.h.i.decode(g[B],{stream:!(V&&B==A-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function ax(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function P2(u,g){var v=u.C,A=g.indexOf(`
`,v);return A==-1?Tp:(v=Number(g.substring(v,A)),isNaN(v)?ix:(A+=1,A+v>g.length?Tp:(g=g.slice(A,A+v),u.C=A+v,g)))}vn.prototype.cancel=function(){this.K=!0,Oi(this)};function Fu(u){u.T=Date.now()+u.H,lx(u,u.H)}function lx(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=wt(c(u.aa,u),g)}function Ip(u){u.D&&(o.clearTimeout(u.D),u.D=null)}vn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ks(this.i,this.B),this.M!=2&&(Mi(),Re(17)),Oi(this),this.m=2,hl(this)):lx(this,this.T-u)};function hl(u){u.j.I==0||u.K||Dx(u.j,u)}function Oi(u){Ip(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,lr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Cp(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||kp(v.h,u))){if(!u.L&&kp(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var V=A;if(V[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Hu(v),zu(v);else break e;Lp(v),Re(18)}}else v.xa=V[1],0<v.xa-v.K&&V[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=wt(c(v.Va,v),6e3));dx(v.h)<=1&&v.ta&&(v.ta=void 0)}else Fi(v,11)}else if((u.L||v.g==u)&&Hu(v),!N(g))for(V=v.Ba.g.parse(g),g=0;g<V.length;g++){let Oe=V[g];const At=Oe[0];if(!(At<=v.K))if(v.K=At,Oe=Oe[1],v.I==2)if(Oe[0]=="c"){v.M=Oe[1],v.ba=Oe[2];const Rr=Oe[3];Rr!=null&&(v.ka=Rr,v.j.info("VER="+v.ka));const Ui=Oe[4];Ui!=null&&(v.za=Ui,v.j.info("SVER="+v.za));const Ns=Oe[5];Ns!=null&&typeof Ns=="number"&&Ns>0&&(A=1.5*Ns,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Ds=u.g;if(Ds){const qu=Ds.g?Ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qu){var B=A.h;B.g||qu.indexOf("spdy")==-1&&qu.indexOf("quic")==-1&&qu.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Ap(B,B.h),B.h=null))}if(A.G){const Mp=Ds.g?Ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Mp&&(A.wa=Mp,Be(A.J,A.G,Mp))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var K=u;if(A.na=Mx(A,A.L?A.ba:null,A.W),K.L){hx(A.h,K);var ve=K,_t=A.O;_t&&(ve.H=_t),ve.D&&(Ip(ve),Fu(ve)),A.g=K}else Px(A);v.i.length>0&&Wu(v)}else Oe[0]!="stop"&&Oe[0]!="close"||Fi(v,7);else v.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Fi(v,7):Dp(v):Oe[0]!="noop"&&v.l&&v.l.qa(Oe),v.A=0)}}Mi(4)}catch{}}var N2=class{constructor(u,g){this.g=u,this.map=g}};function cx(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ux(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dx(u){return u.h?1:u.g?u.g.size:0}function kp(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ap(u,g){u.g?u.g.add(g):u.h=g}function hx(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}cx.prototype.cancel=function(){if(this.i=fx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function fx(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return m(u.i)}var px=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function D2(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let V,B=null;A>=0?(V=u[v].substring(0,A),B=u[v].substring(A+1)):V=u[v],g(V,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function As(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof As?(this.l=u.l,fl(this,u.j),this.o=u.o,this.g=u.g,pl(this,u.u),this.h=u.h,Rp(this,xx(u.i)),this.m=u.m):u&&(g=String(u).match(px))?(this.l=!1,fl(this,g[1]||"",!0),this.o=ml(g[2]||""),this.g=ml(g[3]||"",!0),pl(this,g[4]),this.h=ml(g[5]||"",!0),Rp(this,g[6]||"",!0),this.m=ml(g[7]||"")):(this.l=!1,this.i=new yl(null,this.l))}As.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(gl(g,mx,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(gl(g,mx,!0),"@"),u.push(cr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(gl(v,v.charAt(0)=="/"?M2:j2,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",gl(v,V2)),u.join("")},As.prototype.resolve=function(u){const g=Ar(this);let v=!!u.j;v?fl(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var A=u.h;if(v)pl(g,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var V=g.h.lastIndexOf("/");V!=-1&&(A=g.h.slice(0,V+1)+A)}if(V=A,V==".."||V==".")A="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){A=V.lastIndexOf("/",0)==0,V=V.split("/");const B=[];for(let K=0;K<V.length;){const ve=V[K++];ve=="."?A&&K==V.length&&B.push(""):ve==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&K==V.length&&B.push("")):(B.push(ve),A=!0)}A=B.join("/")}else A=V}return v?g.h=A:v=u.i.toString()!=="",v?Rp(g,xx(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Ar(u){return new As(u)}function fl(u,g,v){u.j=v?ml(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function pl(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Rp(u,g,v){g instanceof yl?(u.i=g,F2(u.i,u.l)):(v||(g=gl(g,O2)),u.i=new yl(g,u.l))}function Be(u,g,v){u.i.set(g,v)}function Uu(u){return Be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ml(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function gl(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,L2),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function L2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var mx=/[#\/\?@]/g,j2=/[#\?:]/g,M2=/[#\?]/g,O2=/[#\?@]/g,V2=/#/g;function yl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Vi(u){u.g||(u.g=new Map,u.h=0,u.i&&D2(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=yl.prototype,t.add=function(u,g){Vi(this),this.i=null,u=Mo(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function gx(u,g){Vi(u),g=Mo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function yx(u,g){return Vi(u),g=Mo(u,g),u.g.has(g)}t.forEach=function(u,g){Vi(this),this.g.forEach(function(v,A){v.forEach(function(V){u.call(g,V,A,this)},this)},this)};function vx(u,g){Vi(u);let v=[];if(typeof g=="string")yx(u,g)&&(v=v.concat(u.g.get(Mo(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}t.set=function(u,g){return Vi(this),this.i=null,u=Mo(this,u),yx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=vx(this,u),u.length>0?String(u[0]):g):g};function wx(u,g,v){gx(u,g),v.length>0&&(u.i=null,u.g.set(Mo(u,g),m(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var v=g[A];const V=cr(v);v=vx(this,v);for(let B=0;B<v.length;B++){let K=V;v[B]!==""&&(K+="="+cr(v[B])),u.push(K)}}return this.i=u.join("&")};function xx(u){const g=new yl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Mo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function F2(u,g){g&&!u.j&&(Vi(u),u.i=null,u.g.forEach(function(v,A){const V=A.toLowerCase();A!=V&&(gx(this,A),wx(this,V,v))},u)),u.j=g}function U2(u,g){const v=new gn;if(o.Image){const A=new Image;A.onload=d(Rs,v,"TestLoadImage: loaded",!0,g,A),A.onerror=d(Rs,v,"TestLoadImage: error",!1,g,A),A.onabort=d(Rs,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=d(Rs,v,"TestLoadImage: timeout",!1,g,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function B2(u,g){const v=new gn,A=new AbortController,V=setTimeout(()=>{A.abort(),Rs(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(B=>{clearTimeout(V),B.ok?Rs(v,"TestPingServer: ok",!0,g):Rs(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Rs(v,"TestPingServer: error",!1,g)})}function Rs(u,g,v,A,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),A(v)}catch{}}function $2(){this.g=new Ni}function Pp(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Pp,on),Pp.prototype.g=function(){return new Bu(this.i,this.h)};function Bu(u,g){je.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Bu,je),t=Bu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,wl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vl(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wl(this)),this.g&&(this.readyState=3,wl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_x(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function _x(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?vl(this):wl(this),this.readyState==3&&_x(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,vl(this))},t.Na=function(u){this.g&&(this.response=u,vl(this))},t.ga=function(){this.g&&vl(this)};function vl(u){u.readyState=4,u.l=null,u.j=null,u.B=null,wl(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function wl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bx(u){let g="";return U(u,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function Np(u,g,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=bx(v),typeof u=="string"?v!=null&&cr(v):Be(u,g,v))}function st(u){je.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(st,je);var z2=/^https?$/i,W2=["POST","PUT"];t=st.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hn.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){Ex(this,B);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var V in A)v.set(V,A[V]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())v.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),V=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(W2,g,void 0)>=0)||A||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of v)this.g.setRequestHeader(B,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Ex(this,B)}};function Ex(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Tx(u),$u(u)}function Tx(u){u.A||(u.A=!0,Se(u,"complete"),Se(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Se(this,"complete"),Se(this,"abort"),$u(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$u(this,!0)),st.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sx(this):this.Xa())},t.Xa=function(){Sx(this)};function Sx(u){if(u.h&&typeof i<"u"){if(u.v&&Ps(u)==4)setTimeout(u.Ca.bind(u),0);else if(Se(u,"readystatechange"),Ps(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var A;if(A=B===0){let K=String(u.D).match(px)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!z2.test(K?K.toLowerCase():"")}v=A}if(v)Se(u,"complete"),Se(u,"success");else{u.o=6;try{var V=Ps(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",Tx(u)}}finally{$u(u)}}}}function $u(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Se(u,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ps(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ps(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Ir(g)}};function Ix(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function H2(u){const g={};u=(u.g&&Ps(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(N(u[A]))continue;var v=kr(u[A]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=g[V]||[];g[V]=B,B.push(v)}j(g,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Cx(u){this.za=0,this.i=[],this.j=new gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xl("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xl("baseRetryDelayMs",5e3,u),this.Za=xl("retryDelaySeedMs",1e4,u),this.Ta=xl("forwardChannelMaxRetries",2,u),this.va=xl("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new cx(u&&u.concurrentRequestLimit),this.Ba=new $2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cx.prototype,t.ka=8,t.I=1,t.connect=function(u,g,v,A){Re(0),this.W=u,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Mx(this,null,this.W),Wu(this)};function Dp(u){if(kx(u),u.I==3){var g=u.V++,v=Ar(u.J);if(Be(v,"SID",u.M),Be(v,"RID",g),Be(v,"TYPE","terminate"),_l(u,v),g=new vn(u,u.j,g),g.M=2,g.A=Uu(Ar(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=g.A,v=!0),v||(g.g=Ox(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Fu(g)}jx(u)}function zu(u){u.g&&(jp(u),u.g.cancel(),u.g=null)}function kx(u){zu(u),u.v&&(o.clearTimeout(u.v),u.v=null),Hu(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Wu(u){if(!ux(u.h)&&!u.m){u.m=!0;var g=u.Ea;R||S(),O||(R(),O=!0),I.add(g,u),u.D=0}}function G2(u,g){return dx(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=wt(c(u.Ea,u,g),Lx(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new vn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=L(B),ee(B,this.U)):B=this.U),this.u!==null||this.R||(V.J=B,B=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Rx(this,V,g),v=Ar(this.J),Be(v,"RID",u),Be(v,"CVER",22),this.G&&Be(v,"X-HTTP-Session-Id",this.G),_l(this,v),B&&(this.R?g="headers="+cr(bx(B))+"&"+g:this.u&&Np(v,this.u,B)),Ap(this.h,V),this.Ra&&Be(v,"TYPE","init"),this.S?(Be(v,"$req",g),Be(v,"SID","null"),V.U=!0,Sp(V,v,null)):Sp(V,v,g),this.I=2}}else this.I==3&&(u?Ax(this,u):this.i.length==0||ux(this.h)||Ax(this))};function Ax(u,g){var v;g?v=g.l:v=u.V++;const A=Ar(u.J);Be(A,"SID",u.M),Be(A,"RID",v),Be(A,"AID",u.K),_l(u,A),u.u&&u.o&&Np(A,u.u,u.o),v=new vn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Rx(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ap(u.h,v),Sp(v,A,g)}function _l(u,g){u.H&&U(u.H,function(v,A){Be(g,A,v)}),u.l&&U({},function(v,A){Be(g,A,v)})}function Rx(u,g,v){v=Math.min(u.i.length,v);const A=u.l?c(u.l.Ka,u.l,u):null;e:{var V=u.i;let ve=-1;for(;;){const _t=["count="+v];ve==-1?v>0?(ve=V[0].g,_t.push("ofs="+ve)):ve=0:_t.push("ofs="+ve);let Oe=!0;for(let At=0;At<v;At++){var B=V[At].g;const Rr=V[At].map;if(B-=ve,B<0)ve=Math.max(0,V[At].g-100),Oe=!1;else try{B="req"+B+"_"||"";try{var K=Rr instanceof Map?Rr:Object.entries(Rr);for(const[Ui,Ns]of K){let Ds=Ns;a(Ns)&&(Ds=Wn(Ns)),_t.push(B+Ui+"="+encodeURIComponent(Ds))}}catch(Ui){throw _t.push(B+"type="+encodeURIComponent("_badmap")),Ui}}catch{A&&A(Rr)}}if(Oe){K=_t.join("&");break e}}K=void 0}return u=u.i.splice(0,v),g.G=u,K}function Px(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;R||S(),O||(R(),O=!0),I.add(g,u),u.A=0}}function Lp(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=wt(c(u.Da,u),Lx(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Nx(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=wt(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Re(10),zu(this),Nx(this))};function jp(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Nx(u){u.g=new vn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Ar(u.na);Be(g,"RID","rpc"),Be(g,"SID",u.M),Be(g,"AID",u.K),Be(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Be(g,"TO",u.ia),Be(g,"TYPE","xmlhttp"),_l(u,g),u.u&&u.o&&Np(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Uu(Ar(g)),v.u=null,v.R=!0,ox(v,u)}t.Va=function(){this.C!=null&&(this.C=null,zu(this),Lp(this),Re(19))};function Hu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Dx(u,g){var v=null;if(u.g==g){Hu(u),jp(u),u.g=null;var A=2}else if(kp(u.h,g))v=g.G,hx(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var V=u.D;A=ji(),Se(A,new zt(A,v)),Wu(u)}else Px(u);else if(V=g.m,V==3||V==0&&g.X>0||!(A==1&&G2(u,g)||A==2&&Lp(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),V){case 1:Fi(u,5);break;case 4:Fi(u,10);break;case 3:Fi(u,6);break;default:Fi(u,2)}}}function Lx(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Fi(u,g){if(u.j.info("Error code "+g),g==2){var v=c(u.bb,u),A=u.Ua;const V=!A;A=new As(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||fl(A,"https"),Uu(A),V?U2(A.toString(),v):B2(A.toString(),v)}else Re(2);u.I=0,u.l&&u.l.pa(g),jx(u),kx(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function jx(u){if(u.I=0,u.ja=[],u.l){const g=fx(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ja,g),_(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Mx(u,g,v){var A=v instanceof As?Ar(v):new As(v);if(A.g!="")g&&(A.g=g+"."+A.g),pl(A,A.u);else{var V=o.location;A=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const B=new As(null);A&&fl(B,A),g&&(B.g=g),V&&pl(B,V),v&&(B.h=v),A=B}return v=u.G,g=u.wa,v&&g&&Be(A,v,g),Be(A,"VER",u.ka),_l(u,A),A}function Ox(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new st(new Pp({ab:v})):new st(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vx(){}t=Vx.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gu(){}Gu.prototype.g=function(u,g){return new An(u,g)};function An(u,g){je.call(this),this.g=new Cx(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!N(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Oo(this)}h(An,je),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Dp(this.g)},An.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Wn(u),u=v);g.i.push(new N2(g.Ya++,u)),g.I==3&&Wu(g)},An.prototype.N=function(){this.g.l=null,delete this.j,Dp(this.g),delete this.g,An.Z.N.call(this)};function Fx(u){dl.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(Fx,dl);function Ux(){Li.call(this),this.status=1}h(Ux,Li);function Oo(u){this.g=u}h(Oo,Vx),Oo.prototype.ra=function(){Se(this.g,"a")},Oo.prototype.qa=function(u){Se(this.g,new Fx(u))},Oo.prototype.pa=function(u){Se(this.g,new Ux)},Oo.prototype.oa=function(){Se(this.g,"b")},Gu.prototype.createWebChannel=Gu.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,aR=function(){return new Gu},oR=function(){return ji()},iR=Cr,Ty={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cn.NO_ERROR=0,Cn.TIMEOUT=8,Cn.HTTP_ERROR=6,Qd=Cn,kn.COMPLETE="complete",sR=kn,Di.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",je.prototype.listen=je.prototype.J,Gl=Di,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,rR=st}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="12.8.0";function H9(t){Ja=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new U0("@firebase/firestore");function $o(){return yo.logLevel}function X(t,...e){if(yo.logLevel<=be.DEBUG){const n=e.map(J0);yo.debug(`Firestore (${Ja}): ${t}`,...n)}}function Es(t,...e){if(yo.logLevel<=be.ERROR){const n=e.map(J0);yo.error(`Firestore (${Ja}): ${t}`,...n)}}function vo(t,...e){if(yo.logLevel<=be.WARN){const n=e.map(J0);yo.warn(`Firestore (${Ja}): ${t}`,...n)}}function J0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lR(t,r,n)}function lR(t,e,n){let r=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Es(r),new Error(r)}function Pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||lR(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class G9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q9{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new cR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class K9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Q9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new K9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new eE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new eE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=X9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Sy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Dm(s)===Dm(i)?Ee(s,i):Dm(s)?1:-1}return Ee(t.length,e.length)}const J9=55296,Z9=57343;function Dm(t){const e=t.charCodeAt(0);return e>=J9&&e<=Z9}function Ma(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="__name__";class Lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Lr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ee(e.length,n.length)}static compareSegments(e,n){const r=Lr.isNumericId(e),s=Lr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Lr.extractNumericId(e).compare(Lr.extractNumericId(n)):Sy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}}class Fe extends Lr{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const eB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Lr{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return eB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Iy}static keyField(){return new Dt([Iy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Fe.fromString(e))}static fromName(e){return new se(Fe.fromString(e).popFirst(5))}static empty(){return new se(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e,n){if(!n)throw new Q($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hR(t,e,n,r){if(e===!0&&r===!0)throw new Q($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tE(t){if(!se.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nE(t){if(se.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qf(t);throw new Q($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tB(t,e){if(e<=0)throw new Q($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Tu(t,e){if(!fR(t))throw new Q($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=-62135596800,sE=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*sE);return new Me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rE)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sE}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:yt("string",Me._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Me(0,0))}static max(){return new ge(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=-1;function nB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new Me(n+1,0):new Me(n,r));return new mi(s,se.empty(),e)}function rB(t){return new mi(t.readTime,t.key,Kc)}class mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mi(ge.min(),se.empty(),Kc)}static max(){return new mi(ge.max(),se.empty(),Kc)}}function sB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==iB)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(s=>s?W.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new W((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new W((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function aB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=-1;function Qf(t){return t==null}function Gh(t){return t===0&&1/t==-1/0}function lB(t){return typeof t=="number"&&Number.isInteger(t)&&!Gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="";function cB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iE(e)),e=uB(t.get(n),e);return iE(e)}function uB(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case pR:n+="";break;default:n+=i}}return n}function iE(t){return t+pR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ci(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dB(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function mR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=i??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aE(this.data.getIterator())}getIteratorFrom(e){return new aE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class aE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new It(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gR("Invalid base64 string: "+i):i}}(e);return new jt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const hB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=hB.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yi(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="server_timestamp",vR="__type__",wR="__previous_value__",xR="__local_write_time__";function ew(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[vR])==null?void 0:r.stringValue)===yR}function Yf(t){const e=t.mapValue.fields[wR];return ew(e)?Yf(e):e}function Qc(t){const e=gi(t.mapValue.fields[xR].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n,r,s,i,o,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=h}}const qh="(default)";class Oa{constructor(e,n){this.projectId=e,this.database=n||qh}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database===qh}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}function pB(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Q($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="__type__",mB="__max__",wd={mapValue:{}},bR="__vector__",Kh="value";function vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ew(t)?4:yB(t)?9007199254740991:gB(t)?10:11:ue(28295,{value:t})}function qr(t,e){if(t===e)return!0;const n=vi(t);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gi(s.timestampValue),a=gi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return yi(s.bytesValue).isEqual(yi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=dt(s.doubleValue),a=dt(i.doubleValue);return o===a?Gh(o)===Gh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ma(t.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(oE(o)!==oE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qr(o[l],a[l])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function Yc(t,e){return(t.values||[]).find(n=>qr(n,e))!==void 0}function Va(t,e){if(t===e)return 0;const n=vi(t),r=vi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=dt(i.integerValue||i.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return lE(t.timestampValue,e.timestampValue);case 4:return lE(Qc(t),Qc(e));case 5:return Sy(t.stringValue,e.stringValue);case 6:return function(i,o){const a=yi(i),l=yi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(dt(i.latitude),dt(o.latitude));return a!==0?a:Ee(dt(i.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cE(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,m,_,x;const a=i.fields||{},l=o.fields||{},c=(p=a[Kh])==null?void 0:p.arrayValue,d=(m=l[Kh])==null?void 0:m.arrayValue,h=Ee(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return h!==0?h:cE(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wd.mapValue&&o===wd.mapValue)return 0;if(i===wd.mapValue)return 1;if(o===wd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Sy(l[h],d[h]);if(p!==0)return p;const m=Va(a[l[h]],c[d[h]]);if(m!==0)return m}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function lE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=gi(t),r=gi(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function cE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Va(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function Fa(t){return Cy(t)}function Cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Cy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Cy(n.fields[o])}`;return s+"}"}(t.mapValue):ue(61005,{value:t})}function Yd(t){switch(vi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(t);return e?16+Yd(e):16;case 5:return 2*t.stringValue.length;case 6:return yi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Yd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ci(r.fields,(i,o)=>{s+=i.length+Yd(o)}),s}(t.mapValue);default:throw ue(13486,{value:t})}}function uE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ky(t){return!!t&&"integerValue"in t}function tw(t){return!!t&&"arrayValue"in t}function dE(t){return!!t&&"nullValue"in t}function hE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xd(t){return!!t&&"mapValue"in t}function gB(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_R])==null?void 0:r.stringValue)===bR}function dc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ci(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dc(t.arrayValue.values[n]);return e}return{...t}}function yB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===mB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(n)}setAll(e){let n=Dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=dc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ci(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new dn(dc(this.value))}}function ER(t){const e=[];return Ci(t.fields,(n,r)=>{const s=new Dt([n]);if(Xd(r)){const i=ER(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xt(e,0,ge.min(),ge.min(),ge.min(),dn.empty(),0)}static newFoundDocument(e,n,r,s){return new Xt(e,1,n,ge.min(),r,s,0)}static newNoDocument(e,n){return new Xt(e,2,n,ge.min(),ge.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,ge.min(),ge.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.position=e,this.inclusive=n}}function fE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Va(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function pE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function vB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{}class gt extends TR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xB(e,n,r):n==="array-contains"?new EB(e,r):n==="in"?new TB(e,r):n==="not-in"?new SB(e,r):n==="array-contains-any"?new IB(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _B(e,r):new bB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Va(n,this.value)):n!==null&&vi(this.value)===vi(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends TR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new br(e,n)}matches(e){return SR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SR(t){return t.op==="and"}function IR(t){return wB(t)&&SR(t)}function wB(t){for(const e of t.filters)if(e instanceof br)return!1;return!0}function Ay(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Fa(t.value);if(IR(t))return t.filters.map(e=>Ay(e)).join(",");{const e=t.filters.map(n=>Ay(n)).join(",");return`${t.op}(${e})`}}function CR(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&qr(r.value,s.value)}(t,e):t instanceof br?function(r,s){return s instanceof br&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&CR(o,s.filters[a]),!0):!1}(t,e):void ue(19439)}function kR(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Fa(n.value)}`}(t):t instanceof br?function(n){return n.op.toString()+" {"+n.getFilters().map(kR).join(" ,")+"}"}(t):"Filter"}class xB extends gt{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class _B extends gt{constructor(e,n){super(e,"in",n),this.keys=AR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bB extends gt{constructor(e,n){super(e,"not-in",n),this.keys=AR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class EB extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tw(n)&&Yc(n.arrayValue,this.value)}}class TB extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}}class SB extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}}class IB extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function mE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new CB(t,e,n,r,s,i,o)}function nw(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ay(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Qf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fa(r)).join(",")),e.Te=n}return e.Te}function rw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pE(t.startAt,e.startAt)&&pE(t.endAt,e.endAt)}function Ry(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kB(t,e,n,r,s,i,o,a){return new tl(t,e,n,r,s,i,o,a)}function Xf(t){return new tl(t)}function gE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AB(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function RR(t){return t.collectionGroup!==null}function hc(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(Dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Xc(i,r))}),n.has(Dt.keyField().canonicalString())||e.Ie.push(new Xc(Dt.keyField(),r))}return e.Ie}function Wr(t){const e=fe(t);return e.Ee||(e.Ee=PR(e,hc(t))),e.Ee}function RB(t){const e=fe(t);return e.Re||(e.Re=PR(e,t.explicitOrderBy)),e.Re}function PR(t,e){if(t.limitType==="F")return mE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Xc(s.field,i)});const n=t.endAt?new Qh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qh(t.startAt.position,t.startAt.inclusive):null;return mE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Py(t,e){const n=t.filters.concat([e]);return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function PB(t,e){const n=t.explicitOrderBy.concat([e]);return new tl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Yh(t,e,n){return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jf(t,e){return rw(Wr(t),Wr(e))&&t.limitType===e.limitType}function NR(t){return`${nw(Wr(t))}|lt:${t.limitType}`}function zo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>kR(s)).join(", ")}]`),Qf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fa(s)).join(",")),`Target(${r})`}(Wr(t))}; limitType=${t.limitType})`}function Zf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of hc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=fE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hc(r),s)||r.endAt&&!function(o,a,l){const c=fE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hc(r),s))}(t,e)}function NB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DR(t){return(e,n)=>{let r=!1;for(const s of hc(t)){const i=DB(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function DB(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Va(l,c):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return mR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=new nt(se.comparator);function Ts(){return LB}const LR=new nt(se.comparator);function ql(...t){let e=LR;for(const n of t)e=e.insert(n.key,n);return e}function jR(t){let e=LR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zi(){return fc()}function MR(){return fc()}function fc(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const jB=new nt(se.comparator),MB=new It(se.comparator);function Te(...t){let e=MB;for(const n of t)e=e.add(n);return e}const OB=new It(Ee);function VB(){return OB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function OR(t){return{integerValue:""+t}}function FB(t,e){return lB(e)?OR(e):sw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this._=void 0}}function UB(t,e,n){return t instanceof Jc?function(s,i){const o={fields:{[vR]:{stringValue:yR},[xR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ew(i)&&(i=Yf(i)),i&&(o.fields[wR]=i),{mapValue:o}}(n,e):t instanceof Ua?FR(t,e):t instanceof Zc?UR(t,e):function(s,i){const o=VR(s,i),a=yE(o)+yE(s.Ae);return ky(o)&&ky(s.Ae)?OR(a):sw(s.serializer,a)}(t,e)}function BB(t,e,n){return t instanceof Ua?FR(t,e):t instanceof Zc?UR(t,e):n}function VR(t,e){return t instanceof Xh?function(r){return ky(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jc extends ep{}class Ua extends ep{constructor(e){super(),this.elements=e}}function FR(t,e){const n=BR(e);for(const r of t.elements)n.some(s=>qr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zc extends ep{constructor(e){super(),this.elements=e}}function UR(t,e){let n=BR(e);for(const r of t.elements)n=n.filter(s=>!qr(s,r));return{arrayValue:{values:n}}}class Xh extends ep{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yE(t){return dt(t.integerValue||t.doubleValue)}function BR(t){return tw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n){this.field=e,this.transform=n}}function $B(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof Zc&&s instanceof Zc?Ma(r.elements,s.elements,qr):r instanceof Xh&&s instanceof Xh?qr(r.Ae,s.Ae):r instanceof Jc&&s instanceof Jc}(t.transform,e.transform)}class zB{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tp{}function zR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new np(t.key,fn.none()):new Su(t.key,t.data,fn.none());{const n=t.data,r=dn.empty();let s=new It(Dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ki(t.key,r,new Ln(s.toArray()),fn.none())}}function WB(t,e,n){t instanceof Su?function(s,i,o){const a=s.value.clone(),l=wE(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ki?function(s,i,o){if(!Jd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=wE(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(WR(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pc(t,e,n,r){return t instanceof Su?function(i,o,a,l){if(!Jd(i.precondition,o))return a;const c=i.value.clone(),d=xE(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ki?function(i,o,a,l){if(!Jd(i.precondition,o))return a;const c=xE(i.fieldTransforms,l,o),d=o.data;return d.setAll(WR(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Jd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function HB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=VR(r.transform,s||null);i!=null&&(n===null&&(n=dn.empty()),n.set(r.field,i))}return n||null}function vE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ma(r,s,(i,o)=>$B(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Su extends tp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ki extends tp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wE(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,BB(o,a,n[s]))}return r}function xE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,UB(i,o,e))}return r}class np extends tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GB extends tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WB(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=MR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=zR(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(n,r)=>vE(n,r))&&Ma(this.baseMutations,e.baseMutations,(n,r)=>vE(n,r))}}class iw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return jB}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new iw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ce;function XB(t){switch(t){case $.OK:return ue(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function HR(t){if(t===void 0)return Es("GRPC error has no .code"),$.UNKNOWN;switch(t){case pt.OK:return $.OK;case pt.CANCELLED:return $.CANCELLED;case pt.UNKNOWN:return $.UNKNOWN;case pt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case pt.INTERNAL:return $.INTERNAL;case pt.UNAVAILABLE:return $.UNAVAILABLE;case pt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case pt.NOT_FOUND:return $.NOT_FOUND;case pt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case pt.ABORTED:return $.ABORTED;case pt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case pt.DATA_LOSS:return $.DATA_LOSS;default:return ue(39323,{code:t})}}(Ce=pt||(pt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=new ai([4294967295,4294967295],0);function _E(t){const e=JB().encode(t),n=new nR;return n.update(e),new Uint8Array(n.digest())}function bE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ai([n,r],0),new ai([s,i],0)]}class ow{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kl(`Invalid padding: ${n}`);if(r<0)throw new Kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ai.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ai.fromNumber(r)));return s.compare(ZB)===1&&(s=new ai([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_E(e),[r,s]=bE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ow(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=_E(e),[r,s]=bE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rp(ge.min(),s,new nt(Ee),Ts(),Te())}}class Iu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Iu(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class GR{constructor(e,n){this.targetId=e,this.Ce=n}}class qR{constructor(e,n,r=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class EE{constructor(){this.ve=0,this.Fe=TE(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}}),new Iu(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=TE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class e${constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.He=xd(),this.Je=xd(),this.Ze=new nt(Ee)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ry(i))if(r===0){const o=new se(i.path);this.et(n,o,Xt.newNoDocument(o,ge.min()))}else Pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=yi(r).toUint8Array()}catch(l){if(l instanceof gR)return vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ow(o,s,i)}catch(l){return vo(l instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ry(a.target)){const l=new se(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Xt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=Te();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new rp(e,n,this.Ze,this.je,r);return this.je=Ts(),this.He=xd(),this.Je=xd(),this.Ze=new nt(Ee),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new EE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new It(Ee),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new It(Ee),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new EE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xd(){return new nt(se.comparator)}function TE(){return new nt(se.comparator)}const t$={asc:"ASCENDING",desc:"DESCENDING"},n$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r$={and:"AND",or:"OR"};class s${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ny(t,e){return t.useProto3Json||Qf(e)?e:{value:e}}function Jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i$(t,e){return Jh(t,e.toTimestamp())}function Hr(t){return Pe(!!t,49232),ge.fromTimestamp(function(n){const r=gi(n);return new Me(r.seconds,r.nanos)}(t))}function aw(t,e){return Dy(t,e).canonicalString()}function Dy(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QR(t){const e=Fe.fromString(t);return Pe(tP(e),10190,{key:e.toString()}),e}function Ly(t,e){return aw(t.databaseId,e.path)}function Lm(t,e){const n=QR(e);if(n.get(1)!==t.databaseId.projectId)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(XR(n))}function YR(t,e){return aw(t.databaseId,e)}function o$(t){const e=QR(t);return e.length===4?Fe.emptyPath():XR(e)}function jy(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XR(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function SE(t,e,n){return{name:Ly(t,e),fields:n.value.mapValue.fields}}function a$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string",58123),jt.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),jt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?$.UNKNOWN:HR(c.code);return new Q(d,c.message||"")}(o);n=new qR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lm(t,r.document.name),i=Hr(r.document.updateTime),o=r.document.createTime?Hr(r.document.createTime):ge.min(),a=new dn({mapValue:{fields:r.document.fields}}),l=Xt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Zd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lm(t,r.document),i=r.readTime?Hr(r.readTime):ge.min(),o=Xt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Zd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lm(t,r.document),i=r.removedTargetIds||[];n=new Zd([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new YB(s,i),a=r.targetId;n=new GR(a,o)}}return n}function l$(t,e){let n;if(e instanceof Su)n={update:SE(t,e.key,e.value)};else if(e instanceof np)n={delete:Ly(t,e.key)};else if(e instanceof ki)n={update:SE(t,e.key,e.data),updateMask:y$(e.fieldMask)};else{if(!(e instanceof GB))return ue(16599,{dt:e.type});n={verify:Ly(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Jc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:i$(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)}(t,e.precondition)),n}function c$(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Hr(s.updateTime):Hr(i);return o.isEqual(ge.min())&&(o=Hr(i)),new zB(o,s.transformResults||[])}(n,e))):[]}function u$(t,e){return{documents:[YR(t,e.path)]}}function JR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YR(t,s);const i=function(c){if(c.length!==0)return eP(br.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:qs(p.field),direction:p$(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ny(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function d$(t,e,n,r){const{ft:s,parent:i}=JR(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d="aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:qs(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:qs(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function h$(t){let e=o$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=ZR(h);return p instanceof br&&IR(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(_){return new Xc(Wo(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Qf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Qh(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new Qh(m,p)}(n.endAt)),kB(e,s,o,i,a,"F",l,c)}function f$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wo(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wo(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wo(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wo(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Wo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return br.create(n.compositeFilter.filters.map(r=>ZR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function p$(t){return t$[t]}function m$(t){return n$[t]}function g$(t){return r$[t]}function qs(t){return{fieldPath:t.canonicalString()}}function Wo(t){return Dt.fromServerFormat(t.fieldPath)}function eP(t){return t instanceof gt?function(n){if(n.op==="=="){if(hE(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NAN"}};if(dE(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hE(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NAN"}};if(dE(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(n.field),op:m$(n.op),value:n.value}}}(t):t instanceof br?function(n){const r=n.getFilters().map(s=>eP(s));return r.length===1?r[0]:{compositeFilter:{op:g$(n.op),filters:r}}}(t):ue(54877,{filter:t})}function y$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function nP(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n,r,s,i=ge.min(),o=ge.min(),a=jt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.yt=e}}function w$(t){const e=h$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(){this.Sn=new _$}addToCollectionParentIndex(e,n){return this.Sn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(mi.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class _${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rP=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(rP,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ba(0)}static ar(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="LruGarbageCollector",b$=1048576;function kE([t,e],[n,r]){const s=Ee(t,n);return s===0?Ee(e,r):s}class E${constructor(e){this.Pr=e,this.buffer=new It(kE),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class T${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){X(CE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?X(CE,"Ignoring IndexedDB error during garbage collection: ",n):await Za(n)}await this.Ar(3e5)})}}class S${constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Kf.ce);const r=new E$(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(IE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IE):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),$o()<=be.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function I$(t,e){return new S$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&pc(r.mutation,s,Ln.empty(),Me.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=Zi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ql();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ts();const o=fc(),a=function(){return fc()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ki)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),pc(d.mutation,c,d.mutation.getFieldMask(),Me.now())):o.set(c.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new k$(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=fc();let s=new nt((o,a)=>o-a),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Ln.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Te()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=MR();d.forEach(p=>{if(!i.has(p)){const m=zR(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return AB(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):W.resolve(Zi());let a=Kc,l=i;return o.next(c=>W.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?W.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Te())).next(d=>({batchId:a,changes:jR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=ql();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ql();return this.indexManager.getCollectionParents(e,i).next(a=>W.forEach(a,l=>{const c=function(h,p){return new tl(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Xt.newInvalidDocument(d)))});let a=ql();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&pc(d.mutation,c,Ln.empty(),Me.now()),Zf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return W.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Hr(s.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:w$(s.bundledQuery),readTime:Hr(s.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(){this.overlays=new nt(se.comparator),this.Lr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zi();return W.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const s=Zi(),i=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return W.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new nt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Zi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return W.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KB(n,r));let i=this.Lr.get(n);i===void 0&&(i=Te(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.kr=new It(Rt.Kr),this.qr=new It(Rt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Rt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new se(new Fe([])),r=new Rt(n,e),s=new Rt(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new se(new Fe([])),r=new Rt(n,e),s=new Rt(n,e+1);let i=Te();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Rt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return se.comparator(e.key,n.key)||Ee(e.Hr,n.Hr)}static Ur(e,n){return Ee(e.Hr,n.Hr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new It(Rt.Kr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qB(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return W.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Z0:this.Yn-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),s=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),W.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ee);return n.forEach(s=>{const i=new Rt(s,0),o=new Rt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new se(i),0);let a=new It(Ee);return this.Jr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),W.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return W.forEach(n.mutations,s=>{const i=new Rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Rt(n,0),s=this.Jr.firstAfterOrEqual(r);return W.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.ti=e,this.docs=function(){return new nt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=Ts();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Xt.newInvalidDocument(s))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ts();const o=n.path,a=new se(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||sB(rB(d),r)<=0||(s.has(d.key)||Zf(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return W.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ni(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j$(this)}getSize(e){return W.resolve(this.size)}}class j$ extends C${constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this.persistence=e,this.ri=new Po(n=>nw(n),rw),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.ii=0,this.si=new lw,this.targetCount=0,this.oi=Ba._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),W.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ba(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.lr(n),W.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),W.waitFor(i).next(()=>s)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),W.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this._i={},this.overlays={},this.ai=new Kf(0),this.ui=!1,this.ui=!0,this.ci=new N$,this.referenceDelegate=e(this),this.li=new M$(this),this.indexManager=new x$,this.remoteDocumentCache=function(s){return new L$(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new v$(n),this.Pi=new R$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new P$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new D$(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new O$(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return W.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class O$ extends oB{constructor(e){super(),this.currentSequenceNumber=e}}class cw{constructor(e){this.persistence=e,this.Ri=new lw,this.Ai=null}static Vi(e){return new cw(e)}get di(){if(this.Ai)return this.Ai;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.di,r=>{const s=se.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,ge.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Zh{constructor(e,n){this.persistence=e,this.fi=new Po(r=>cB(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=I$(this,n)}static Vi(e,n){return new Zh(e,n)}Ti(){}Ii(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return W.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?W.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yd(e.data.value)),n}wr(e,n,r){return W.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return W.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new uw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return I5()?8:aB(rn())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new V$;return this.ys(e,n,o).next(a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?($o()<=be.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):($o()<=be.DEBUG&&X("QueryEngine","Query:",zo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?($o()<=be.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(n))):W.resolve())}gs(e,n){if(gE(n))return W.resolve(null);let r=Wr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yh(n,null,"F"),r=Wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Te(...i);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ss(n,c,o,l.readTime)?this.gs(e,Yh(n,null,"F")):this.Ds(e,c,n,l)}))})))}ps(e,n,r,s){return gE(n)||s.isEqual(ge.min())?W.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?W.resolve(null):($o()<=be.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zo(n)),this.Ds(e,o,n,nB(s,Kc)).next(a=>a))})}bs(e,n){let r=new It(DR(e));return n.forEach((s,i)=>{Zf(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return $o()<=be.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",zo(n)),this.fs.getDocumentsMatchingQuery(e,n,mi.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="LocalStore",U$=3e8;class B${constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new nt(Ee),this.Fs=new Po(i=>nw(i),rw),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A$(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function $$(t,e,n,r){return new B$(t,e,n,r)}async function iP(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Te();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ns:c,removedBatchIds:o,addedBatchIds:a}))})})}function z$(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=W.resolve();return p.forEach(_=>{m=m.next(()=>d.getEntry(l,_)).next(x=>{const T=c.docVersions.get(_);Pe(T!==null,48541),x.version.compareTo(T)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oP(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function W$(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.li.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.li.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(jt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(x,T,E){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=U$?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,m,d)&&a.push(n.li.updateTargetData(i,m))});let l=Ts(),c=Te();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(H$(i,o,e.documentUpdates).next(d=>{l=d.Bs,c=d.Ls})),!r.isEqual(ge.min())){const d=n.li.getLastRemoteSnapshotVersion(i).next(h=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return W.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.vs=s,i))}function H$(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ts();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X(dw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Bs:o,Ls:s}})}function G$(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Z0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q$(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,W.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Xs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function My(t,e,n){const r=fe(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!el(o))throw o;X(dw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function AE(t,e,n){const r=fe(t);let s=ge.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=fe(l),p=h.Fs.get(d);return p!==void 0?W.resolve(h.vs.get(p)):h.li.getTargetData(c,d)}(r,o,Wr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ge.min(),n?i:Te())).next(a=>(K$(r,NB(e),a),{documents:a,ks:i})))}function K$(t,e,n){let r=t.Ms.get(e)||ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class RE{constructor(){this.activeTargetIds=VB()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q${constructor(){this.vo=new RE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new RE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="ConnectivityMonitor";class NE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){X(PE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){X(PE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d=null;function Oy(){return _d===null?_d=function(){return 268435456+Math.round(2147483648*Math.random())}():_d++,"0x"+_d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="RestConnection",X$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class J${get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===qh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Oy(),a=this.Qo(e,n.toUriEncodedString());X(jm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:c}=new URL(a),d=Is(c);return this.zo(e,a,l,r,d).then(h=>(X(jm,`Received RPC '${e}' ${o}: `,h),h),h=>{throw vo(jm,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=X$[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection",Nl=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class _a extends J${constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!_a.c_){const e=oR();Nl(e,iR.STAT_EVENT,n=>{n.stat===Ty.PROXY?X(Gt,"STAT_EVENT: detected buffering proxy"):n.stat===Ty.NOPROXY&&X(Gt,"STAT_EVENT: detected no buffering proxy")}),_a.c_=!0}}zo(e,n,r,s,i){const o=Oy();return new Promise((a,l)=>{const c=new rR;c.setWithCredentials(!0),c.listenOnce(sR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Qd.NO_ERROR:const h=c.getResponseJson();X(Gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Qd.TIMEOUT:X(Gt,`RPC '${e}' ${o} timed out`),l(new Q($.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const p=c.getStatus();if(X(Gt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const x=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(_.status);l(new Q(x,_.message))}else l(new Q($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Q($.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{X(Gt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);X(Gt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Oy(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=i.join("");X(Gt,`Creating RPC '${e}' stream ${s}: ${c}`,a);const d=o.createWebChannel(c,a);this.I_(d);let h=!1,p=!1;const m=new Z$({Ho:_=>{p?X(Gt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(h||(X(Gt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),X(Gt,`RPC '${e}' stream ${s} sending:`,_),d.send(_))},Jo:()=>d.close()});return Nl(d,Gl.EventType.OPEN,()=>{p||(X(Gt,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),Nl(d,Gl.EventType.CLOSE,()=>{p||(p=!0,X(Gt,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(d))}),Nl(d,Gl.EventType.ERROR,_=>{p||(p=!0,vo(Gt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),m.o_(new Q($.UNAVAILABLE,"The operation could not be completed")))}),Nl(d,Gl.EventType.MESSAGE,_=>{var x;if(!p){const T=_.data[0];Pe(!!T,16349);const E=T,w=(E==null?void 0:E.error)||((x=E[0])==null?void 0:x.error);if(w){X(Gt,`RPC '${e}' stream ${s} received error:`,w);const b=w.status;let C=function(I){const S=pt[I];if(S!==void 0)return HR(S)}(b),R=w.message;C===void 0&&(C=$.INTERNAL,R="Unknown error status: "+b+" with message "+w.message),p=!0,m.o_(new Q(C,R)),d.close()}else X(Gt,`RPC '${e}' stream ${s} received:`,T),m.__(T)}}),_a.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return aR()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(t){return new _a(t)}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){return new s$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_a.c_=!1;class aP{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="PersistentStream";class lP{constructor(e,n,r,s,i,o,a,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aP(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(DE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(X(DE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tz extends lP{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=a$(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Hr(o.readTime):ge.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=jy(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ry(l)?{documents:u$(i,l)}:{query:JR(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KR(i,o.resumeToken);const c=Ny(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Jh(i,o.snapshotVersion.toTimestamp());const c=Ny(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=f$(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=jy(this.serializer),n.removeTarget=e,this.K_(n)}}class nz extends lP{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=c$(e.writeResults,e.commitTime),r=Hr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jy(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>l$(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{}class sz extends rz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Dy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q($.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,Dy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q($.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function iz(t,e,n,r){return new sz(t,e,n,r)}class oz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Es(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="RemoteStore";class az{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{No(this)&&(X(wo,"Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.Ea.add(4),await Cu(c),c.Va.set("Unknown"),c.Ea.delete(4),await ip(c)}(this))})}),this.Va=new oz(r,s)}}async function ip(t){if(No(t))for(const e of t.Ra)await e(!0)}async function Cu(t){for(const e of t.Ra)await e(!1)}function cP(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mw(n)?pw(n):nl(n).O_()&&fw(n,e))}function hw(t,e){const n=fe(t),r=nl(n);n.Ia.delete(e),r.O_()&&uP(n,e),n.Ia.size===0&&(r.O_()?r.L_():No(n)&&n.Va.set("Unknown"))}function fw(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).Z_(e)}function uP(t,e){t.da.$e(e),nl(t).X_(e)}function pw(t){t.da=new e$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.Va.ua()}function mw(t){return No(t)&&!nl(t).x_()&&t.Ia.size>0}function No(t){return fe(t).Ea.size===0}function dP(t){t.da=void 0}async function lz(t){t.Va.set("Online")}async function cz(t){t.Ia.forEach((e,n)=>{fw(t,e)})}async function uz(t,e){dP(t),mw(t)?(t.Va.ha(e),pw(t)):t.Va.set("Unknown")}async function dz(t,e,n){if(t.Va.set("Online"),e instanceof qR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))}(t,e)}catch(r){X(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ef(t,r)}else if(e instanceof Zd?t.da.Xe(e):e instanceof GR?t.da.st(e):t.da.tt(e),!n.isEqual(ge.min()))try{const r=await oP(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(jt.EMPTY_BYTE_STRING,d.snapshotVersion)),uP(i,l);const h=new Xs(d.target,l,c,d.sequenceNumber);fw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X(wo,"Failed to raise snapshot:",r),await ef(t,r)}}async function ef(t,e,n){if(!el(e))throw e;t.Ea.add(1),await Cu(t),t.Va.set("Offline"),n||(n=()=>oP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(wo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ip(t)})}function hP(t,e){return e().catch(n=>ef(t,n,e))}async function op(t){const e=fe(t),n=wi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Z0;for(;hz(e);)try{const s=await G$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,fz(e,s)}catch(s){await ef(e,s)}fP(e)&&pP(e)}function hz(t){return No(t)&&t.Ta.length<10}function fz(t,e){t.Ta.push(e);const n=wi(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function fP(t){return No(t)&&!wi(t).x_()&&t.Ta.length>0}function pP(t){wi(t).start()}async function pz(t){wi(t).ra()}async function mz(t){const e=wi(t);for(const n of t.Ta)e.ea(n.mutations)}async function gz(t,e,n){const r=t.Ta.shift(),s=iw.from(r,e,n);await hP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await op(t)}async function yz(t,e){e&&wi(t).Y_&&await async function(r,s){if(function(o){return XB(o)&&o!==$.ABORTED}(s.code)){const i=r.Ta.shift();wi(r).B_(),await hP(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await op(r)}}(t,e),fP(t)&&pP(t)}async function LE(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),X(wo,"RemoteStore received new credentials");const r=No(n);n.Ea.add(3),await Cu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ip(n)}async function vz(t,e){const n=fe(t);e?(n.Ea.delete(2),await ip(n)):e||(n.Ea.add(2),await Cu(n),n.Va.set("Unknown"))}function nl(t){return t.ma||(t.ma=function(n,r,s){const i=fe(n);return i.sa(),new tz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:lz.bind(null,t),Yo:cz.bind(null,t),t_:uz.bind(null,t),J_:dz.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),mw(t)?pw(t):t.Va.set("Unknown")):(await t.ma.stop(),dP(t))})),t.ma}function wi(t){return t.fa||(t.fa=function(n,r,s){const i=fe(n);return i.sa(),new nz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:pz.bind(null,t),t_:yz.bind(null,t),ta:mz.bind(null,t),na:gz.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await op(t)):(await t.fa.stop(),t.Ta.length>0&&(X(wo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new gw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yw(t,e){if(Es("AsyncQueue",`${e}: ${t}`),el(t))return new Q($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{static emptySet(e){return new ba(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=ql(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.ga=new nt(se.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $a{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $a(e,n,ba.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class xz{constructor(){this.queries=ME(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=ME(),i.forEach((o,a)=>{for(const l of a.ba)l.onError(r)})})(this,new Q($.ABORTED,"Firestore shutting down"))}}function ME(){return new Po(t=>NR(t),Jf)}async function vw(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new wz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=yw(o,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&xw(n)}async function ww(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _z(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&xw(n)}function bz(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function xw(t){t.Ca.forEach(e=>{e.next()})}var Vy,OE;(OE=Vy||(Vy={})).Ma="default",OE.Cache="cache";class _w{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.key=e}}class gP{constructor(e){this.key=e}}class Ez{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Te(),this.mutatedKeys=Te(),this.eu=DR(e),this.tu=new ba(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new jE,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=Zf(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;p&&m?p.data.isEqual(m.data)?_!==x&&(r.track({type:3,doc:m}),T=!0):this.su(p,m)||(r.track({type:2,doc:m}),T=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),T=!0):p&&!m&&(r.track({type:1,doc:p}),T=!0,(l||c)&&(a=!0)),T&&(m?(o=o.add(m),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,_){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Vt:T})}};return x(m)-x(_)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,c=l!==this.Xa;return this.Xa=l,o.length!==0||c?{snapshot:new $a(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new gP(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new mP(r))}),n}cu(e){this.Za=e.ks,this.Ya=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $a.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const bw="SyncEngine";class Tz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sz{constructor(e){this.key=e,this.hu=!1}}class Iz{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Po(a=>NR(a),Jf),this.Iu=new Map,this.Eu=new Set,this.Ru=new nt(se.comparator),this.Au=new Map,this.Vu=new lw,this.du={},this.mu=new Map,this.fu=Ba.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Cz(t,e,n=!0){const r=bP(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await yP(r,e,n,!0),s}async function kz(t,e){const n=bP(t);await yP(n,e,!0,!1)}async function yP(t,e,n,r){const s=await q$(t.localStore,Wr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Az(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&cP(t.remoteStore,s),a}async function Az(t,e,n,r,s){t.pu=(h,p,m)=>async function(x,T,E,w){let b=T.view.ru(E);b.Ss&&(b=await AE(x.localStore,T.query,!1).then(({documents:I})=>T.view.ru(I,b)));const C=w&&w.targetChanges.get(T.targetId),R=w&&w.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(b,x.isPrimaryClient,C,R);return FE(x,T.targetId,O.au),O.snapshot}(t,h,p,m);const i=await AE(t.localStore,e,!0),o=new Ez(e,i.ks),a=o.ru(i.documents),l=Iu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);FE(t,n,c.au);const d=new Tz(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function Rz(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Jf(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await My(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&hw(r.remoteStore,s.targetId),Fy(r,s.targetId)}).catch(Za)):(Fy(r,s.targetId),await My(r.localStore,s.targetId,!0))}async function Pz(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hw(n.remoteStore,r.targetId))}async function Nz(t,e,n){const r=Fz(t);try{const s=await function(o,a){const l=fe(o),c=Me.now(),d=a.reduce((m,_)=>m.add(_.key),Te());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Ts(),x=Te();return l.xs.getEntries(m,d).next(T=>{_=T,_.forEach((E,w)=>{w.isValidDocument()||(x=x.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(T=>{h=T;const E=[];for(const w of a){const b=HB(w,h.get(w.key).overlayedDocument);b!=null&&E.push(new ki(w.key,b,ER(b.value.mapValue),fn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,E,a)}).next(T=>{p=T;const E=T.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(m,T.batchId,E)})}).then(()=>({batchId:p.batchId,changes:jR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.du[o.currentUser.toKey()];c||(c=new nt(Ee)),c=c.insert(a,l),o.du[o.currentUser.toKey()]=c}(r,s.batchId,n),await ku(r,s.changes),await op(r.remoteStore)}catch(s){const i=yw(s,"Failed to persist write");n.reject(i)}}async function vP(t,e){const n=fe(t);try{const r=await W$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Pe(o.hu,14607):s.removedDocuments.size>0&&(Pe(o.hu,42227),o.hu=!1))}),await ku(n,r,e)}catch(r){await Za(r)}}function VE(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.ba)p.va(a)&&(c=!0)}),c&&xw(l)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Dz(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new nt(se.comparator);o=o.insert(i,Xt.newNoDocument(i,ge.min()));const a=Te().add(i),l=new rp(ge.min(),new Map,new nt(Ee),o,a);await vP(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),Ew(r)}else await My(r.localStore,e,!1).then(()=>Fy(r,e,n)).catch(Za)}async function Lz(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await z$(n.localStore,e);xP(n,r,null),wP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ku(n,s)}catch(s){await Za(s)}}async function jz(t,e,n){const r=fe(t);try{const s=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);xP(r,e,n),wP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ku(r,s)}catch(s){await Za(s)}}function wP(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function xP(t,e,n){const r=fe(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Fy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||_P(t,r)})}function _P(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(hw(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Ew(t))}function FE(t,e,n){for(const r of n)r instanceof mP?(t.Vu.addReference(r.key,e),Mz(t,r)):r instanceof gP?(X(bw,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||_P(t,r.key)):ue(19791,{wu:r})}function Mz(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(X(bw,"New document in limbo: "+n),t.Eu.add(r),Ew(t))}function Ew(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new se(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new Sz(n)),t.Ru=t.Ru.insert(n,r),cP(t.remoteStore,new Xs(Wr(Xf(n.path)),r,"TargetPurposeLimboResolution",Kf.ce))}}async function ku(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=uw.Es(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(l,c){const d=fe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>W.forEach(c,p=>W.forEach(p.Ts,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>W.forEach(p.Is,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!el(h))throw h;X(dw,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.vs.get(p),_=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(_);d.vs=d.vs.insert(p,x)}}}(r.localStore,i))}async function Oz(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){X(bw,"User change. New user:",e.toKey());const r=await iP(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Q($.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(n,r.Ns)}}function Vz(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function bP(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dz.bind(null,e),e.Pu.J_=_z.bind(null,e.eventManager),e.Pu.yu=bz.bind(null,e.eventManager),e}function Fz(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jz.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $$(this.persistence,new F$,e.initialUser,this.serializer)}Cu(e){return new sP(cw.Vi,this.serializer)}Du(e){return new Q$}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class Uz extends tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pe(this.persistence.referenceDelegate instanceof Zh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new T$(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new sP(r=>Zh.Vi(r,n),this.serializer)}}class Uy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oz.bind(null,this.syncEngine),await vz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xz}()}createDatastore(e){const n=sp(e.databaseInfo.databaseId),r=ez(e.databaseInfo);return iz(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new az(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>VE(this.syncEngine,n,0),function(){return NE.v()?new NE:new Y$}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new Iz(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);X(wo,"RemoteStore shutting down."),i.Ea.add(5),await Cu(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Uy.provider={build:()=>new Uy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="FirestoreClient";class Bz{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=Qt.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X(xi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(xi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Om(t,e){t.asyncQueue.verifyOperationInProgress(),X(xi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function UE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $z(t);X(xi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>LE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>LE(e.remoteStore,s)),t._onlineComponents=e}async function $z(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(xi,"Using user provided OfflineComponentProvider");try{await Om(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vo("Error using user provided cache. Falling back to memory cache: "+n),await Om(t,new tf)}}else X(xi,"Using default OfflineComponentProvider"),await Om(t,new Uz(void 0));return t._offlineComponents}async function Sw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(xi,"Using user provided OnlineComponentProvider"),await UE(t,t._uninitializedComponentsProvider._online)):(X(xi,"Using default OnlineComponentProvider"),await UE(t,new Uy))),t._onlineComponents}function zz(t){return Sw(t).then(e=>e.syncEngine)}function Wz(t){return Sw(t).then(e=>e.datastore)}async function nf(t){const e=await Sw(t),n=e.eventManager;return n.onListen=Cz.bind(null,e.syncEngine),n.onUnlisten=Rz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Pz.bind(null,e.syncEngine),n}function Hz(t,e,n,r){const s=new Tw(r),i=new _w(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>vw(await nf(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>ww(await nf(t),i))}}function Gz(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Tw({next:p=>{d.Nu(),o.enqueueAndForget(()=>ww(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Q($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Q($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new _w(Xf(a.path),d,{includeMetadataChanges:!0,Ka:!0});return vw(i,h)}(await nf(t),t.asyncQueue,e,n,r)),r.promise}function qz(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Tw({next:p=>{d.Nu(),o.enqueueAndForget(()=>ww(i,h)),p.fromCache&&l.source==="server"?c.reject(new Q($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new _w(a,d,{includeMetadataChanges:!0,Ka:!0});return vw(i,h)}(await nf(t),t.asyncQueue,e,n,r)),r.promise}function Kz(t,e,n){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await Wz(t);r.resolve(async function(o,a,l){var x;const c=fe(o),{request:d,gt:h,parent:p}=d$(c.serializer,RB(a),l);c.connection.Ko||delete d.parent;const m=(await c.jo("RunAggregationQuery",c.serializer.databaseId,p,d,1)).filter(T=>!!T.result);Pe(m.length===1,64727);const _=(x=m[0].result)==null?void 0:x.aggregateFields;return Object.keys(_).reduce((T,E)=>(T[h[E]]=_[E],T),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function Qz(t,e){const n=new zr;return t.asyncQueue.enqueueAndForget(async()=>Nz(await zz(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz="ComponentProvider",BE=new Map;function Xz(t,e,n,r,s){return new fB(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,EP(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="firestore.googleapis.com",$E=!0;class zE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TP,this.ssl=$E}else this.host=e.host,this.ssl=e.ssl??$E;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b$)throw new Q($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EP(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ap{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uR;switch(r.type){case"firstParty":return new Q9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=BE.get(n);r&&(X(Yz,"Removing Datastore"),BE.delete(n),r.terminate())}(this),Promise.resolve()}}function SP(t,e,n,r={}){var c;t=Bt(t,ap);const s=Is(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Uf(`https://${a}`),Bf("Firestore",!0)),i.host!==TP&&i.host!==a&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!pi(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Qt.MOCK_USER;else{d=vA(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Q($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Qt(p)}t._authCredentials=new G9(new cR(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qr(this.firestore,e,this._query)}}class Je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}toJSON(){return{type:Je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Tu(n,Je._jsonSchema))return new Je(e,r||null,new se(Fe.fromString(n.referencePath)))}}Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:yt("string",Je._jsonSchemaVersion),referencePath:yt("string")};class fs extends Qr{constructor(e,n,r){super(e,n,Xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new se(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function Ve(t,e,...n){if(t=De(t),dR("collection","path",e),t instanceof ap){const r=Fe.fromString(e,...n);return nE(r),new fs(t,null,r)}{if(!(t instanceof Je||t instanceof fs))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return nE(r),new fs(t.firestore,null,r)}}function et(t,e,...n){if(t=De(t),arguments.length===1&&(e=Gf.newId()),dR("doc","path",e),t instanceof ap){const r=Fe.fromString(e,...n);return tE(r),new Je(t,null,new se(r))}{if(!(t instanceof Je||t instanceof fs))throw new Q($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return tE(r),new Je(t.firestore,t instanceof fs?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="AsyncQueue";class HE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aP(this,"async_queue_retry"),this._c=()=>{const r=Mm();r&&X(WE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;X(WE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Es("INTERNAL UNHANDLED ERROR: ",GE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=gw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:GE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function GE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ir extends ap{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new HE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HE(e),this._firestoreClient=void 0,await e}}}function IP(t,e){const n=typeof t=="object"?t:xu(),r=typeof t=="string"?t:qh,s=Ii(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=F0("firestore");i&&SP(s,...i)}return s}function Do(t){if(t._terminated)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jz(t),t._firestoreClient}function Jz(t){var r,s,i,o;const e=t._freezeSettings(),n=Xz(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Bz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(jt.fromBase64String(e))}catch(n){throw new Q($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:yt("string",Nn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function CP(){return new rl(Iy)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:yt("string",wr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Zn(e.vectorValues);throw new Q($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:yt("string",Zn._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=/^__.*__$/;class e8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class kP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{dataSource:t})}}class lp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new lp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return rf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AP(this.dataSource)&&Zz.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class t8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sp(e)}createContext(e,n,r,s=!1){return new lp({dataSource:e,methodName:n,targetDoc:r,path:Dt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Au(t){const e=t._freezeSettings(),n=sp(t._databaseId);return new t8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Iw(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Aw("Data must be an object, but it was:",o,r);const a=NP(r,o);let l,c;if(i.merge)l=new Ln(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=xo(e,h,n);if(!o.contains(p))throw new Q($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);jP(d,p)||d.push(p)}l=new Ln(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new e8(new dn(a),l,c)}class cp extends sl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cp}}function n8(t,e,n){return new lp({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cw extends sl{_toFieldTransform(e){return new $R(e.path,new Jc)}isEqual(e){return e instanceof Cw}}class kw extends sl{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=n8(this,e,!0),r=this.Ac.map(i=>il(i,n)),s=new Ua(r);return new $R(e.path,s)}isEqual(e){return e instanceof kw&&pi(this.Ac,e.Ac)}}function RP(t,e,n,r){const s=t.createContext(1,e,n);Aw("Data must be an object, but it was:",s,r);const i=[],o=dn.empty();Ci(r,(l,c)=>{const d=LP(e,l,n);c=De(c);const h=s.childContextForFieldPath(d);if(c instanceof cp)i.push(d);else{const p=il(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new Ln(i);return new kP(o,a,s.fieldTransforms)}function PP(t,e,n,r,s,i){const o=t.createContext(1,e,n),a=[xo(e,r,n)],l=[s];if(i.length%2!=0)throw new Q($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(xo(e,i[p])),l.push(i[p+1]);const c=[],d=dn.empty();for(let p=a.length-1;p>=0;--p)if(!jP(c,a[p])){const m=a[p];let _=l[p];_=De(_);const x=o.childContextForFieldPath(m);if(_ instanceof cp)c.push(m);else{const T=il(_,x);T!=null&&(c.push(m),d.set(m,T))}}const h=new Ln(c);return new kP(d,h,o.fieldTransforms)}function r8(t,e,n,r=!1){return il(n,t.createContext(r?4:3,e))}function il(t,e){if(DP(t=De(t)))return Aw("Unsupported field value:",e,t),NP(t,e);if(t instanceof sl)return function(r,s){if(!AP(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=il(a,s.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Me.fromDate(r);return{timestampValue:Jh(s.serializer,i)}}if(r instanceof Me){const i=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jh(s.serializer,i)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nn)return{bytesValue:KR(s.serializer,r._byteString)};if(r instanceof Je){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:aw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zn)return function(o,a){const l=o instanceof Zn?o.toArray():o;return{mapValue:{fields:{[_R]:{stringValue:bR},[Kh]:{arrayValue:{values:l.map(d=>{if(typeof d!="number")throw a.createError("VectorValues must only contain numeric values.");return sw(a.serializer,d)})}}}}}}(r,s);if(nP(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qf(r)}`)}(t,e)}function NP(t,e){const n={};return mR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(t,(r,s)=>{const i=il(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function DP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof wr||t instanceof Nn||t instanceof Je||t instanceof sl||t instanceof Zn||nP(t))}function Aw(t,e,n){if(!DP(n)||!fR(n)){const r=qf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function xo(t,e,n){if((e=De(e))instanceof rl)return e._internalPath;if(typeof e=="string")return LP(t,e);throw rf("Field path arguments must be of type string or ",t,!1,void 0,n)}const s8=new RegExp("[~\\*/\\[\\]]");function LP(t,e,n){if(e.search(s8)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rl(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q($.INVALID_ARGUMENT,a+t+l)}function jP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ci(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Kh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>dt(o.doubleValue));return new Zn(n)}convertGeoPoint(e){return new wr(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const n=gi(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Pe(tP(r),9688,{name:e});const s=new Oa(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||Es(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends MP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function _o(){return new Cw("serverTimestamp")}function OP(...t){return new kw("arrayUnion",t)}const qE="@firebase/firestore",KE="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class FP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new dn({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(xo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i8 extends UP{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rw{}class dp extends Rw{}function ft(t,e,...n){let r=[];e instanceof Rw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof hp).length,a=i.filter(l=>l instanceof Ru).length;if(o>1||o>0&&a>0)throw new Q($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ru extends dp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ru(e,n,r)}_apply(e){const n=this._parse(e);return $P(e._query,n),new Qr(e.firestore,e.converter,Py(e._query,n))}_parse(e){const n=Au(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XE(h,d);const _=[];for(const x of h)_.push(YE(l,i,x));p={arrayValue:{values:_}}}else p=YE(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XE(h,d),p=r8(a,o,h,d==="in"||d==="not-in");return gt.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function St(t,e,n){const r=e,s=xo("where",t);return Ru._create(s,r,n)}class hp extends Rw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)$P(o,l),o=Py(o,l)}(e._query,n),new Qr(e.firestore,e.converter,Py(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fp extends dp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xc(i,o)}(e._query,this._field,this._direction);return new Qr(e.firestore,e.converter,PB(e._query,n))}}function ca(t,e="asc"){const n=e,r=xo("orderBy",t);return fp._create(r,n)}class pp extends dp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pp(e,n,r)}_apply(e){return new Qr(e.firestore,e.converter,Yh(e._query,this._limit,this._limitType))}}function ua(t){return tB("limit",t),pp._create("limit",t,"F")}function YE(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new Q($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RR(e)&&n.indexOf("/")!==-1)throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!se.isDocumentKey(r))throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uE(t,new se(r))}if(n instanceof Je)return uE(t,n._key);throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(n)}.`)}function XE(t,e){if(!Array.isArray(t)||t.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $P(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Pw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function zP(){return new VP("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){return WP(t,{count:zP()})}function WP(t,e){const n=Bt(t.firestore,ir),r=Do(n),s=dB(e,(i,o)=>new QB(o,i.aggregateType,i._internalFieldPath));return Kz(r,t._query,s).then(i=>function(a,l,c){const d=new up(a);return new FP(l,d,c)}(n,t,i))}class da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends UP{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:yt("string",li._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class mc extends li{data(e={}){return super.data(e)}}class ci{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new da(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mc(this._firestore,this._userDataWriter,r.key,r,new da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new mc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new mc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:o8(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ci._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci._jsonSchemaVersion="firestore/querySnapshot/1.0",ci._jsonSchema={type:yt("string",ci._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Au(e)}set(e,n,r){this._verifyNotCommitted();const s=Vm(e,this._firestore),i=Pw(s.converter,n,r),o=Iw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,fn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Vm(e,this._firestore);let o;return o=typeof(n=De(n))=="string"||n instanceof rl?PP(this._dataReader,"WriteBatch.update",i._key,n,r,s):RP(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vm(e,this._firestore);return this._mutations=this._mutations.concat(new np(n._key,fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vm(t,e){if((t=De(t)).firestore!==e)throw new Q($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t){t=Bt(t,Je);const e=Bt(t.firestore,ir),n=Do(e);return Gz(n,t._key).then(r=>qP(e,t,r))}function Jt(t){t=Bt(t,Qr);const e=Bt(t.firestore,ir),n=Do(e),r=new up(e);return BP(t._query),qz(n,t._query).then(s=>new ci(e,r,t,s))}function GP(t,e,n){t=Bt(t,Je);const r=Bt(t.firestore,ir),s=Pw(t.converter,e,n),i=Au(r);return ol(r,[Iw(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fn.none())])}function er(t,e,n,...r){t=Bt(t,Je);const s=Bt(t.firestore,ir),i=Au(s);let o;return o=typeof(e=De(e))=="string"||e instanceof rl?PP(i,"updateDoc",t._key,e,n,r):RP(i,"updateDoc",t._key,e),ol(s,[o.toMutation(t._key,fn.exists(!0))])}function mp(t){return ol(Bt(t.firestore,ir),[new np(t._key,fn.none())])}function bo(t,e){const n=Bt(t.firestore,ir),r=et(t),s=Pw(t.converter,e),i=Au(t.firestore);return ol(n,[Iw(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function Lo(t,...e){var c,d,h;t=De(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||QE(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(QE(e[r])){const p=e[r];e[r]=(c=p.next)==null?void 0:c.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(h=p.complete)==null?void 0:h.bind(p)}let i,o,a;if(t instanceof Je)o=Bt(t.firestore,ir),a=Xf(t._key.path),i={next:p=>{e[r]&&e[r](qP(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=Bt(t,Qr);o=Bt(p.firestore,ir),a=p._query;const m=new up(o);i={next:_=>{e[r]&&e[r](new ci(o,m,p,_))},error:e[r+1],complete:e[r+2]},BP(t._query)}const l=Do(o);return Hz(l,a,s,i)}function ol(t,e){const n=Do(t);return Qz(n,e)}function qP(t,e,n){const r=n.docs.get(e._key),s=new up(t);return new li(t,s,e._key,r,new da(n.hasPendingWrites,n.fromCache),e.converter)}function KP(t){return t=Bt(t,ir),Do(t),new HP(t,e=>ol(t,e))}(function(e,n=!0){H9(Ro),sr(new Un("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ir(new q9(r.getProvider("auth-internal")),new Y9(o,r.getProvider("app-check-internal")),pB(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),en(qE,KE,e),en(qE,KE,"esm2020")})();const QP=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:MP,AggregateField:VP,AggregateQuerySnapshot:FP,Bytes:Nn,CollectionReference:fs,DocumentReference:Je,DocumentSnapshot:li,FieldPath:rl,FieldValue:sl,Firestore:ir,FirestoreError:Q,GeoPoint:wr,Query:Qr,QueryCompositeFilterConstraint:hp,QueryConstraint:dp,QueryDocumentSnapshot:mc,QueryFieldFilterConstraint:Ru,QueryLimitConstraint:pp,QueryOrderByConstraint:fp,QuerySnapshot:ci,SnapshotMetadata:da,Timestamp:Me,VectorValue:Zn,WriteBatch:HP,_AutoId:Gf,_ByteString:jt,_DatabaseId:Oa,_DocumentKey:se,_EmptyAuthCredentialsProvider:uR,_FieldPath:Dt,_cast:Bt,_logWarn:vo,_validateIsNotUsedTogether:hR,addDoc:bo,arrayUnion:OP,collection:Ve,connectFirestoreEmulator:SP,count:zP,deleteDoc:mp,doc:et,documentId:CP,ensureFirestoreConfigured:Do,executeWrite:ol,getAggregateFromServer:WP,getCountFromServer:Ql,getDoc:Pu,getDocs:Jt,getFirestore:IP,limit:ua,onSnapshot:Lo,orderBy:ca,query:ft,serverTimestamp:_o,setDoc:GP,updateDoc:er,where:St,writeBatch:KP},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebasestorage.googleapis.com",XP="storageBucket",a8=2*60*1e3,l8=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends Sr{constructor(e,n,r=0){super(Fm(e),`Firebase Storage: ${n} (${Fm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function Fm(t){return"storage/"+t}function Nw(){const t="An unknown error occurred, please check the error payload for server response.";return new ct(lt.UNKNOWN,t)}function c8(t){return new ct(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function u8(t){return new ct(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function d8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(lt.UNAUTHENTICATED,t)}function h8(){return new ct(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function f8(t){return new ct(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function p8(){return new ct(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m8(){return new ct(lt.CANCELED,"User canceled the upload/download.")}function g8(t){return new ct(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function y8(t){return new ct(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function v8(){return new ct(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XP+"' property when initializing the app?")}function w8(){return new ct(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function x8(){return new ct(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _8(t){return new ct(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function By(t){return new ct(lt.INVALID_ARGUMENT,t)}function JP(){return new ct(lt.APP_DELETED,"The Firebase app was deleted.")}function b8(t){return new ct(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gc(t,e){return new ct(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Dl(t){throw new ct(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(r.path==="")return r;throw y8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),_={bucket:1,path:3},x=n===YP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",E=new RegExp(`^https?://${x}/${s}/${T}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:m,indices:_,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<b.length;C++){const R=b[C],O=R.regex.exec(e);if(O){const I=O[R.indices.bucket];let S=O[R.indices.path];S||(S=""),r=new jn(I,S),R.postModify(r);break}}if(r==null)throw g8(e);return r}}class E8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...T){c||(c=!0,e.apply(null,T))}function h(T){s=setTimeout(()=>{s=null,t(m,l())},T)}function p(){i&&clearTimeout(i)}function m(T,...E){if(c){p();return}if(T){p(),d.call(null,T,...E);return}if(l()||o){p(),d.call(null,T,...E);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let _=!1;function x(T){_||(_=!0,p(),!c&&(s!==null?(T||(a=2),clearTimeout(s),h(0)):T||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function S8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){return t!==void 0}function C8(t){return typeof t=="object"&&!Array.isArray(t)}function Dw(t){return typeof t=="string"||t instanceof String}function JE(t){return Lw()&&t instanceof Blob}function Lw(){return typeof Blob<"u"}function ZE(t,e,n,r){if(r<e)throw By(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw By(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ZP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ao;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ao||(ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,x)=>{this.resolve_=_,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new bd(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ao.NO_ERROR,l=i.getStatus();if(!a||k8(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ao.ABORT;r(!1,new bd(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new bd(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());I8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Nw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?JP():m8();o(l)}else{const l=p8();o(l)}};this.canceled_?n(!1,new bd(!1,null,!0)):this.backoffId_=T8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function R8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function P8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function N8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function D8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function L8(t,e,n,r,s,i,o=!0,a=!1){const l=ZP(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return N8(d,e),R8(d,n),P8(d,i),D8(d,r),new A8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function M8(...t){const e=j8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Lw())return new Blob(t);throw new ct(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function O8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t){if(typeof atob>"u")throw _8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Um{constructor(e,n){this.data=e,this.contentType=n||null}}function F8(t,e){switch(t){case Mr.RAW:return new Um(eN(e));case Mr.BASE64:case Mr.BASE64URL:return new Um(tN(t,e));case Mr.DATA_URL:return new Um(B8(e),$8(e))}throw Nw()}function eN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function U8(t){let e;try{e=decodeURIComponent(t)}catch{throw gc(Mr.DATA_URL,"Malformed data URL.")}return eN(e)}function tN(t,e){switch(t){case Mr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw gc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Mr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw gc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=V8(e)}catch(s){throw s.message.includes("polyfill")?s:gc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class nN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw gc(Mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=z8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function B8(t){const e=new nN(t);return e.base64?tN(Mr.BASE64,e.rest):U8(e.rest)}function $8(t){return new nN(t).contentType}function z8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){let r=0,s="";JE(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(JE(this.data_)){const r=this.data_,s=O8(r,e,n);return s===null?null:new Ks(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ks(r,!0)}}static getBlob(...e){if(Lw()){const n=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(M8.apply(null,n))}else{const n=e.map(o=>Dw(o)?F8(Mr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ks(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){let e;try{e=JSON.parse(t)}catch{return null}return C8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function H8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function sN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(t,e){return e}class ln{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||G8}}let Ed=null;function q8(t){return!Dw(t)||t.length<2?t:sN(t)}function iN(){if(Ed)return Ed;const t=[];t.push(new ln("bucket")),t.push(new ln("generation")),t.push(new ln("metageneration")),t.push(new ln("name","fullPath",!0));function e(i,o){return q8(o)}const n=new ln("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ln("size");return s.xform=r,t.push(s),t.push(new ln("timeCreated")),t.push(new ln("updated")),t.push(new ln("md5Hash",null,!0)),t.push(new ln("cacheControl",null,!0)),t.push(new ln("contentDisposition",null,!0)),t.push(new ln("contentEncoding",null,!0)),t.push(new ln("contentLanguage",null,!0)),t.push(new ln("contentType",null,!0)),t.push(new ln("metadata","customMetadata",!0)),Ed=t,Ed}function K8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Q8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return K8(r,t),r}function oN(t,e,n){const r=rN(e);return r===null?null:Q8(t,r,n)}function Y8(t,e,n,r){const s=rN(e);if(s===null||!Dw(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=jw(p,n,r),_=ZP({alt:"media",token:c});return m+_})[0]}function X8(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class aN{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){if(!t)throw Nw()}function J8(t,e){function n(r,s){const i=oN(t,s,e);return lN(i!==null),i}return n}function Z8(t,e){function n(r,s){const i=oN(t,s,e);return lN(i!==null),Y8(i,s,t.host,t._protocol)}return n}function cN(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=h8():s=d8():n.getStatus()===402?s=u8(t.bucket):n.getStatus()===403?s=f8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function e7(t){const e=cN(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=c8(t.path)),i.serverResponse=s.serverResponse,i}return n}function t7(t,e,n){const r=e.fullServerUrl(),s=jw(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new aN(s,i,Z8(t,n),o);return a.errorHandler=e7(e),a}function n7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function r7(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=n7(null,e)),r}function s7(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let C=0;C<2;C++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=r7(e,r,s),d=X8(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Ks.getBlob(h,r,p);if(m===null)throw w8();const _={name:c.fullPath},x=jw(i,t.host,t._protocol),T="POST",E=t.maxUploadRetryTime,w=new aN(x,T,J8(t,n),E);return w.urlParams=_,w.headers=o,w.body=m.uploadData(),w.errorHandler=cN(e),w}class i7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Dl("cannot .send() more than once");if(Is(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o7 extends i7{initXhr(){this.xhr_.responseType="text"}}function uN(){return new o7}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Eo(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sN(this._location.path)}get storage(){return this._service}get parent(){const e=W8(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new Eo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw b8(e)}}function a7(t,e,n){t._throwIfRoot("uploadBytes");const r=s7(t.storage,t._location,iN(),new Ks(e,!0),n);return t.storage.makeRequestWithTokens(r,uN).then(s=>({metadata:s,ref:t}))}function l7(t){t._throwIfRoot("getDownloadURL");const e=t7(t.storage,t._location,iN());return t.storage.makeRequestWithTokens(e,uN).then(n=>{if(n===null)throw x8();return n})}function c7(t,e){const n=H8(t._location.path,e),r=new jn(t._location.bucket,n);return new Eo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t){return/^[A-Za-z]+:\/\//.test(t)}function d7(t,e){return new Eo(t,e)}function dN(t,e){if(t instanceof Mw){const n=t;if(n._bucket==null)throw v8();const r=new Eo(n,n._bucket);return e!=null?dN(r,e):r}else return e!==void 0?c7(t,e):t}function h7(t,e){if(e&&u7(e)){if(t instanceof Mw)return d7(t,e);throw By("To use ref(service, url), the first argument must be a Storage instance.")}else return dN(t,e)}function eT(t,e){const n=e==null?void 0:e[XP];return n==null?null:jn.makeFromBucketSpec(n,t)}function f7(t,e,n,r={}){t.host=`${e}:${n}`;const s=Is(e);s&&(Uf(`https://${t.host}/b`),Bf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:vA(i,t.app.options.projectId))}class Mw{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=YP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a8,this._maxUploadRetryTime=l8,this._requests=new Set,s!=null?this._bucket=jn.makeFromBucketSpec(s,this._host):this._bucket=eT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=eT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ZE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ZE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new E8(JP());{const o=L8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const tT="@firebase/storage",nT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="storage";function p7(t,e,n){return t=De(t),a7(t,e,n)}function m7(t){return t=De(t),l7(t)}function g7(t,e){return t=De(t),h7(t,e)}function y7(t=xu(),e){t=De(t);const r=Ii(t,hN).getImmediate({identifier:e}),s=F0("storage");return s&&v7(r,...s),r}function v7(t,e,n,r={}){f7(t,e,n,r)}function w7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Mw(n,r,s,e,Ro)}function x7(){sr(new Un(hN,w7,"PUBLIC").setMultipleInstances(!0)),en(tT,nT,""),en(tT,nT,"esm2020")}x7();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="us-central1";class b7{constructor(e,n,r,s,i=$y,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new _7(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=$y}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function E7(t,e,n){const r=Is(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Uf(t.emulatorOrigin+"/backends"),Bf("Functions",!0))}const rT="@firebase/functions",sT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="auth-internal",S7="app-check-internal",I7="messaging-internal";function C7(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(T7),o=n.getProvider(I7),a=n.getProvider(S7);return new b7(s,i,o,a,r)};sr(new Un(fN,e,"PUBLIC").setMultipleInstances(!0)),en(rT,sT,t),en(rT,sT,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(t=xu(),e=$y){const r=Ii(De(t),fN).getImmediate({identifier:e}),s=F0("functions");return s&&A7(r,...s),r}function A7(t,e,n){E7(De(t),e,n)}C7();const pN="@firebase/installations",Ow="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=1e4,gN=`w:${Ow}`,yN="FIS_v2",R7="https://firebaseinstallations.googleapis.com/v1",P7=60*60*1e3,N7="installations",D7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},To=new Ao(N7,D7,L7);function vN(t){return t instanceof Sr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN({projectId:t}){return`${R7}/projects/${t}/installations`}function xN(t){return{token:t.token,requestStatus:2,expiresIn:M7(t.expiresIn),creationTime:Date.now()}}async function _N(t,e){const r=(await e.json()).error;return To.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function bN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function j7(t,{refreshToken:e}){const n=bN(t);return n.append("Authorization",O7(e)),n}async function EN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function M7(t){return Number(t.replace("s","000"))}function O7(t){return`${yN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V7({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=wN(t),s=bN(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:yN,appId:t.appId,sdkVersion:gN},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await EN(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:xN(c.authToken)}}else throw await _N("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7=/^[cdef][\w-]{21}$/,zy="";function B7(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$7(t);return U7.test(n)?n:zy}catch{return zy}}function $7(t){return F7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new Map;function IN(t,e){const n=gp(t);CN(n,e),z7(n,e)}function CN(t,e){const n=SN.get(t);if(n)for(const r of n)r(e)}function z7(t,e){const n=W7();n&&n.postMessage({key:t,fid:e}),H7()}let eo=null;function W7(){return!eo&&"BroadcastChannel"in self&&(eo=new BroadcastChannel("[Firebase] FID Change"),eo.onmessage=t=>{CN(t.data.key,t.data.fid)}),eo}function H7(){SN.size===0&&eo&&(eo.close(),eo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7="firebase-installations-database",q7=1,So="firebase-installations-store";let Bm=null;function Vw(){return Bm||(Bm=$f(G7,q7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(So)}}})),Bm}async function sf(t,e){const n=gp(t),s=(await Vw()).transaction(So,"readwrite"),i=s.objectStore(So),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&IN(t,e.fid),e}async function kN(t){const e=gp(t),r=(await Vw()).transaction(So,"readwrite");await r.objectStore(So).delete(e),await r.done}async function yp(t,e){const n=gp(t),s=(await Vw()).transaction(So,"readwrite"),i=s.objectStore(So),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&IN(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(t){let e;const n=await yp(t.appConfig,r=>{const s=K7(r),i=Q7(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===zy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function K7(t){const e=t||{fid:B7(),registrationStatus:0};return AN(e)}function Q7(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(To.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Y7(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:X7(t)}:{installationEntry:e}}async function Y7(t,e){try{const n=await V7(t,e);return sf(t.appConfig,n)}catch(n){throw vN(n)&&n.customData.serverCode===409?await kN(t.appConfig):await sf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function X7(t){let e=await iT(t.appConfig);for(;e.registrationStatus===1;)await TN(100),e=await iT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Fw(t);return r||n}return e}function iT(t){return yp(t,e=>{if(!e)throw To.create("installation-not-found");return AN(e)})}function AN(t){return J7(t)?{fid:t.fid,registrationStatus:0}:t}function J7(t){return t.registrationStatus===1&&t.registrationTime+mN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7({appConfig:t,heartbeatServiceProvider:e},n){const r=eW(t,n),s=j7(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:gN,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await EN(()=>fetch(r,a));if(l.ok){const c=await l.json();return xN(c)}else throw await _N("Generate Auth Token",l)}function eW(t,{fid:e}){return`${wN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(t,e=!1){let n;const r=await yp(t.appConfig,i=>{if(!RN(i))throw To.create("not-registered");const o=i.authToken;if(!e&&rW(o))return i;if(o.requestStatus===1)return n=tW(t,e),i;{if(!navigator.onLine)throw To.create("app-offline");const a=iW(i);return n=nW(t,a),a}});return n?await n:r.authToken}async function tW(t,e){let n=await oT(t.appConfig);for(;n.authToken.requestStatus===1;)await TN(100),n=await oT(t.appConfig);const r=n.authToken;return r.requestStatus===0?Uw(t,e):r}function oT(t){return yp(t,e=>{if(!RN(e))throw To.create("not-registered");const n=e.authToken;return oW(n)?{...e,authToken:{requestStatus:0}}:e})}async function nW(t,e){try{const n=await Z7(t,e),r={...e,authToken:n};return await sf(t.appConfig,r),n}catch(n){if(vN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await kN(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await sf(t.appConfig,r)}throw n}}function RN(t){return t!==void 0&&t.registrationStatus===2}function rW(t){return t.requestStatus===2&&!sW(t)}function sW(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+P7}function iW(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function oW(t){return t.requestStatus===1&&t.requestTime+mN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t){const e=t,{installationEntry:n,registrationPromise:r}=await Fw(e);return r?r.catch(console.error):Uw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lW(t,e=!1){const n=t;return await cW(n),(await Uw(n,e)).token}async function cW(t){const{registrationPromise:e}=await Fw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(t){if(!t||!t.options)throw $m("App Configuration");if(!t.name)throw $m("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw $m(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $m(t){return To.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="installations",dW="installations-internal",hW=t=>{const e=t.getProvider("app").getImmediate(),n=uW(e),r=Ii(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fW=t=>{const e=t.getProvider("app").getImmediate(),n=Ii(e,PN).getImmediate();return{getId:()=>aW(n),getToken:s=>lW(n,s)}};function pW(){sr(new Un(PN,hW,"PUBLIC")),sr(new Un(dW,fW,"PRIVATE"))}pW();en(pN,Ow);en(pN,Ow,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW="/firebase-messaging-sw.js",gW="/firebase-cloud-messaging-push-scope",NN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yW="https://fcmregistrations.googleapis.com/v1",DN="google.c.a.c_id",vW="google.c.a.c_l",wW="google.c.a.ts",xW="google.c.a.e",aT=1e4;var lT;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(lT||(lT={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var eu;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(eu||(eu={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _W(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="fcm_token_details_db",bW=5,cT="fcm_token_object_Store";async function EW(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(zm))return null;let e=null;return(await $f(zm,bW,{upgrade:async(r,s,i,o)=>{if(s<2||!r.objectStoreNames.contains(cT))return;const a=o.objectStore(cT),l=await a.index("fcmSenderId").get(t);if(await a.clear(),!!l){if(s===2){const c=l;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:c.createTime??Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:ts(c.vapidKey)}}}else if(s===3){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:ts(c.auth),p256dh:ts(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:ts(c.vapidKey)}}}else if(s===4){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:ts(c.auth),p256dh:ts(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:ts(c.vapidKey)}}}}}})).close(),await km(zm),await km("fcm_vapid_details_db"),await km("undefined"),TW(e)?e:null}function TW(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW="firebase-messaging-database",IW=1,tu="firebase-messaging-store";let Wm=null;function LN(){return Wm||(Wm=$f(SW,IW,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(tu)}}})),Wm}async function CW(t){const e=jN(t),r=await(await LN()).transaction(tu).objectStore(tu).get(e);if(r)return r;{const s=await EW(t.appConfig.senderId);if(s)return await Bw(t,s),s}}async function Bw(t,e){const n=jN(t),s=(await LN()).transaction(tu,"readwrite");return await s.objectStore(tu).put(e,n),await s.done,e}function jN({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},tn=new Ao("messaging","Messaging",kW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AW(t,e){const n=await zw(t),r=MN(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch($w(t.appConfig),s)).json()}catch(o){throw tn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw tn.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw tn.create("token-subscribe-no-token");return i.token}async function RW(t,e){const n=await zw(t),r=MN(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${$w(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw tn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw tn.create("token-update-failed",{errorInfo:o})}if(!i.token)throw tn.create("token-update-no-token");return i.token}async function PW(t,e){const r={method:"DELETE",headers:await zw(t)};try{const i=await(await fetch(`${$w(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw tn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw tn.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function $w({projectId:t}){return`${yW}/projects/${t}/registrations`}async function zw({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function MN({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==NN&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW=7*24*60*60*1e3;async function DW(t){const e=await jW(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ts(e.getKey("auth")),p256dh:ts(e.getKey("p256dh"))},r=await CW(t.firebaseDependencies);if(r){if(MW(r.subscriptionOptions,n))return Date.now()>=r.createTime+NW?LW(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await PW(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return uT(t.firebaseDependencies,n)}else return uT(t.firebaseDependencies,n)}async function LW(t,e){try{const n=await RW(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await Bw(t.firebaseDependencies,r),n}catch(n){throw n}}async function uT(t,e){const r={token:await AW(t,e),createTime:Date.now(),subscriptionOptions:e};return await Bw(t,r),r.token}async function jW(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_W(e)})}function MW(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return OW(e,t),VW(e,t),FW(e,t),e}function OW(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function VW(t,e){e.data&&(t.data=e.data)}function FW(t,e){var s,i,o,a;if(!e.fcmOptions&&!((s=e.notification)!=null&&s.click_action))return;t.fcmOptions={};const n=((i=e.fcmOptions)==null?void 0:i.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t){return typeof t=="object"&&!!t&&DN in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t){if(!t||!t.options)throw Hm("App Configuration Object");if(!t.name)throw Hm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Hm(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Hm(t){return tn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=BW(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zW(t){try{t.swRegistration=await navigator.serviceWorker.register(mW,{scope:gW}),t.swRegistration.update().catch(()=>{}),await WW(t.swRegistration)}catch(e){throw tn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function WW(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${aT} ms`)),aT),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=i=>{var o;((o=i.target)==null?void 0:o.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HW(t,e){if(!e&&!t.swRegistration&&await zW(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw tn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GW(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=NN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){if(!navigator)throw tn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw tn.create("permission-blocked");return await GW(t,e==null?void 0:e.vapidKey),await HW(t,e==null?void 0:e.serviceWorkerRegistration),DW(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qW(t,e,n){const r=KW(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[DN],message_name:n[vW],message_time:n[wW],message_device_time:Math.floor(Date.now()/1e3)})}function KW(t){switch(t){case eu.NOTIFICATION_CLICKED:return"notification_open";case eu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QW(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===eu.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(dT(n)):t.onMessageHandler.next(dT(n)));const r=n.data;UW(r)&&r[xW]==="1"&&await qW(t,n.messageType,r)}const hT="@firebase/messaging",fT="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW=t=>{const e=new $W(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>QW(e,n)),e},XW=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>ON(e,r)}};function JW(){sr(new Un("messaging",YW,"PUBLIC")),sr(new Un("messaging-internal",XW,"PRIVATE")),en(hT,fT),en(hT,fT,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZW(){try{await xA()}catch{return!1}return typeof window<"u"&&wA()&&C5()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(t,e){if(!navigator)throw tn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(t=xu()){return ZW().then(e=>{if(!e)throw tn.create("unsupported-browser")},e=>{throw tn.create("indexed-db-unsupported")}),Ii(De(t),"messaging").getImmediate()}async function nH(t,e){return t=De(t),ON(t,e)}function rH(t,e){return t=De(t),eH(t,e)}JW();const sH={apiKey:"AIzaSyB5IxD6TIYVHcQ1UHtGz9PRATJTK_QpOWs",authDomain:"wishu-c16d5.firebaseapp.com",projectId:"wishu-c16d5",storageBucket:"wishu-c16d5.firebasestorage.app",messagingSenderId:"159437089644",appId:"1:159437089644:web:3df478217e65a7d12fa149"},Nu=EA(sH),Gm=B9(Nu),le=IP(Nu),iH=y7(Nu);k7(Nu,"europe-west1");const pT=tH(Nu),oH=new rs,VN=y.createContext({user:null,loading:!0,signInWithGoogle:async()=>{},logout:async()=>{},userProfile:null}),aH=({children:t})=>{const[e,n]=y.useState(null),[r,s]=y.useState(!0),[i,o]=y.useState(null),a=async()=>{try{await YU(Gm,oH)}catch(c){throw console.error("Google verify failed",c),c}},l=async()=>{await RU(Gm),n(null),o(null)};return y.useEffect(()=>{let c=null;const d=AU(Gm,async h=>{console.log("AuthContext: State changed",h==null?void 0:h.uid),n(h),c&&(c(),c=null),h?c=Lo(et(le,"users",h.uid),p=>{if(p.exists())o(p.data());else{const m={displayName:h.displayName,email:h.email,photoURL:h.photoURL,createdAt:new Date().toISOString()};GP(et(le,"users",h.uid),m,{merge:!0}),o(m)}},p=>{console.error("AuthContext: Profile sync error",p)}):o(null),s(!1)});return()=>{d(),c&&c()}},[]),f.jsx(VN.Provider,{value:{user:e,loading:r,signInWithGoogle:a,logout:l,userProfile:i},children:t})},vt=()=>y.useContext(VN),lH=()=>{const{i18n:t}=Ti(),e=()=>{const n=t.language==="en"?"he":"en";t.changeLanguage(n)};return y.useEffect(()=>{document.dir=t.dir(),document.documentElement.lang=t.language},[t.language]),f.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"fixed top-4 right-4 z-50 px-4 py-2 bg-white/80 backdrop-blur-sm border border-romantic-pink rounded-full shadow-sm text-deep-rose font-medium transition-all hover:bg-romantic-pink/10",children:t.language==="en"?"HE":"EN"})},cH=()=>{const{t}=Ti(),{signInWithGoogle:e,user:n}=vt(),r=Ct(),s=async()=>{try{if(n){r("/dashboard");return}await e()}catch(i){console.error("Login failed",i)}};return f.jsxs("div",{className:"min-h-screen bg-darkbg flex flex-col items-center justify-center p-6 text-center font-sans relative overflow-hidden",children:[f.jsx(lH,{}),f.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-primary/20 rounded-full blur-[120px]"}),f.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-secondary/10 rounded-full blur-[120px]"}),f.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"relative z-10 max-w-lg",children:[f.jsxs(Ge.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"w-24 h-24 bg-white/5 rounded-3xl flex items-center justify-center mx-auto mb-8 relative",children:[f.jsx(jh,{className:"w-16 h-16 text-primary",strokeWidth:2}),f.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-secondary font-bold text-2xl pt-2",children:"U"})]}),f.jsxs("h1",{className:"text-5xl font-bold text-white mb-6 leading-tight",children:["Wish",f.jsx("span",{className:"text-primary",children:"U"})]}),f.jsx("p",{className:"text-xl text-slate-300 mb-12 font-light leading-relaxed",children:t("welcome","Make your partner's wishes come true.")}),f.jsxs(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"group relative px-8 py-4 bg-white text-darkbg rounded-full font-bold text-lg shadow-xl hover:shadow-2xl hover:shadow-primary/20 transition-all flex items-center gap-3 mx-auto",children:[f.jsx(Hc,{className:"w-5 h-5 text-primary"}),f.jsx("span",{children:t("get_started","Get Started")})]})]}),!1]})};function FN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=FN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function uH(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=FN(t))&&(r&&(r+=" "),r+=e);return r}const Ww="-",dH=t=>{const e=fH(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Ww);return a[0]===""&&a.length!==1&&a.shift(),UN(a,e)||hH(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},UN=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?UN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ww);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},mT=/^\[(.+)\]$/,hH=t=>{if(mT.test(t)){const e=mT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},fH=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return mH(Object.entries(t.classGroups),n).forEach(([i,o])=>{Wy(o,r,i,e)}),r},Wy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:gT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(pH(s)){Wy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Wy(o,gT(e,i),n,r)})})},gT=(t,e)=>{let n=t;return e.split(Ww).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},pH=t=>t.isThemeGetter,mH=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,gH=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},BN="!",yH=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let T=0;T<a.length;T++){let E=a[T];if(c===0){if(E===s&&(r||a.slice(T,T+i)===e)){l.push(a.slice(d,T)),d=T+i;continue}if(E==="/"){h=T;continue}}E==="["?c++:E==="]"&&c--}const p=l.length===0?a:a.substring(d),m=p.startsWith(BN),_=m?p.substring(1):p,x=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:_,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:o}):o},vH=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},wH=t=>({cache:gH(t.cacheSize),parseClassName:yH(t),...dH(t)}),xH=/\s+/,_H=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(xH);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let _=!!m,x=r(_?p.substring(0,m):p);if(!x){if(!_){a=c+(a.length>0?" "+a:a);continue}if(x=r(p),!x){a=c+(a.length>0?" "+a:a);continue}_=!1}const T=vH(d).join(":"),E=h?T+BN:T,w=E+x;if(i.includes(w))continue;i.push(w);const b=s(x,_);for(let C=0;C<b.length;++C){const R=b[C];i.push(E+R)}a=c+(a.length>0?" "+a:a)}return a};function bH(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=$N(e))&&(r&&(r+=" "),r+=n);return r}const $N=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=$N(t[r]))&&(n&&(n+=" "),n+=e);return n};function EH(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=wH(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=_H(l,n);return s(l,d),d}return function(){return i(bH.apply(null,arguments))}}const $e=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},zN=/^\[(?:([a-z-]+):)?(.+)\]$/i,TH=/^\d+\/\d+$/,SH=new Set(["px","full","screen"]),IH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zr=t=>Ea(t)||SH.has(t)||TH.test(t),Ms=t=>al(t,"length",VH),Ea=t=>!!t&&!Number.isNaN(Number(t)),qm=t=>al(t,"number",Ea),Ll=t=>!!t&&Number.isInteger(Number(t)),PH=t=>t.endsWith("%")&&Ea(t.slice(0,-1)),ye=t=>zN.test(t),Os=t=>IH.test(t),NH=new Set(["length","size","percentage"]),DH=t=>al(t,NH,WN),LH=t=>al(t,"position",WN),jH=new Set(["image","url"]),MH=t=>al(t,jH,UH),OH=t=>al(t,"",FH),jl=()=>!0,al=(t,e,n)=>{const r=zN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},VH=t=>CH.test(t)&&!kH.test(t),WN=()=>!1,FH=t=>AH.test(t),UH=t=>RH.test(t),BH=()=>{const t=$e("colors"),e=$e("spacing"),n=$e("blur"),r=$e("brightness"),s=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),l=$e("contrast"),c=$e("grayscale"),d=$e("hueRotate"),h=$e("invert"),p=$e("gap"),m=$e("gradientColorStops"),_=$e("gradientColorStopPositions"),x=$e("inset"),T=$e("margin"),E=$e("opacity"),w=$e("padding"),b=$e("saturate"),C=$e("scale"),R=$e("sepia"),O=$e("skew"),I=$e("space"),S=$e("translate"),k=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",ye,e],M=()=>[ye,e],N=()=>["",Zr,Ms],Z=()=>["auto",Ea,ye],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",ye],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Ea,ye];return{cacheSize:500,separator:":",theme:{colors:[jl],spacing:[Zr,Ms],blur:["none","",Os,ye],brightness:L(),borderColor:[t],borderRadius:["none","","full",Os,ye],borderSpacing:M(),borderWidth:N(),contrast:L(),grayscale:U(),hueRotate:L(),invert:U(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[PH,Ms],inset:D(),margin:D(),opacity:L(),padding:M(),saturate:L(),scale:L(),sepia:U(),skew:L(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[Os]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),ye]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ll,ye]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Ll,ye]}],"grid-cols":[{"grid-cols":[jl]}],"col-start-end":[{col:["auto",{span:["full",Ll,ye]},ye]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[jl]}],"row-start-end":[{row:["auto",{span:[Ll,ye]},ye]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,e]}],"min-w":[{"min-w":[ye,e,"min","max","fit"]}],"max-w":[{"max-w":[ye,e,"none","full","min","max","fit","prose",{screen:[Os]},Os]}],h:[{h:[ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Os,Ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qm]}],"font-family":[{font:[jl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",Ea,qm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zr,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zr,Ms]}],"underline-offset":[{"underline-offset":["auto",Zr,ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),LH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",DH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},MH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Zr,ye]}],"outline-w":[{outline:[Zr,Ms]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Zr,Ms]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Os,OH]}],"shadow-color":[{shadow:[jl]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Os,ye]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Ll,ye]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Zr,Ms,qm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$H=EH(BH);function zH(...t){return $H(uH(t))}function Hy(t){if(!t)return"";try{const e=new URL(t);return e.protocol.startsWith("http")?(e.searchParams.set("tag","wishu-21"),e.toString()):t}catch{return t}}function Gy(t){if(!t)return null;const e=t.split("-").map(Number);if(e.length!==3)return null;const[n,r,s]=e,i=new Date;i.setHours(0,0,0,0);let o=new Date(i.getFullYear(),r-1,s);o<i&&o.setFullYear(i.getFullYear()+1);const a=o.getTime()-i.getTime(),l=Math.ceil(a/(1e3*60*60*24));return{date:o,daysLeft:l}}var Hw={};(function t(e,n,r,s){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;try{var j=new OffscreenCanvas(1,1),L=j.getContext("2d");L.fillRect(0,0,1,1);var G=j.transferToImageBitmap();L.createPattern(G,"no-repeat")}catch{return!1}return!0}();function l(){}function c(j){var L=n.exports.Promise,G=L!==void 0?L:e.Promise;return typeof G=="function"?new G(j):(j(l,l),null)}var d=function(j,L){return{transform:function(G){if(j)return G;if(L.has(G))return L.get(G);var ee=new OffscreenCanvas(G.width,G.height),re=ee.getContext("2d");return re.drawImage(G,0,0),L.set(G,ee),ee},clear:function(){L.clear()}}}(a,new Map),h=function(){var j=Math.floor(16.666666666666668),L,G,ee={},re=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(L=function(oe){var te=Math.random();return ee[te]=requestAnimationFrame(function ne(ce){re===ce||re+j-1<ce?(re=ce,delete ee[te],oe()):ee[te]=requestAnimationFrame(ne)}),te},G=function(oe){ee[oe]&&cancelAnimationFrame(ee[oe])}):(L=function(oe){return setTimeout(oe,j)},G=function(oe){return clearTimeout(oe)}),{frame:L,cancel:G}}(),p=function(){var j,L,G={};function ee(re){function oe(te,ne){re.postMessage({options:te||{},callback:ne})}re.init=function(ne){var ce=ne.transferControlToOffscreen();re.postMessage({canvas:ce},[ce])},re.fire=function(ne,ce,we){if(L)return oe(ne,null),L;var ie=Math.random().toString(36).slice(2);return L=c(function(ke){function _e(Le){Le.data.callback===ie&&(delete G[ie],re.removeEventListener("message",_e),L=null,d.clear(),we(),ke())}re.addEventListener("message",_e),oe(ne,ie),G[ie]=_e.bind(null,{data:{callback:ie}})}),L},re.reset=function(){re.postMessage({reset:!0});for(var ne in G)G[ne](),delete G[ne]}}return function(){if(j)return j;if(!r&&i){var re=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{j=new Worker(URL.createObjectURL(new Blob([re])))}catch(oe){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",oe),null}ee(j)}return j}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(j,L){return L?L(j):j}function x(j){return j!=null}function T(j,L,G){return _(j&&x(j[L])?j[L]:m[L],G)}function E(j){return j<0?0:Math.floor(j)}function w(j,L){return Math.floor(Math.random()*(L-j))+j}function b(j){return parseInt(j,16)}function C(j){return j.map(R)}function R(j){var L=String(j).replace(/[^0-9a-f]/gi,"");return L.length<6&&(L=L[0]+L[0]+L[1]+L[1]+L[2]+L[2]),{r:b(L.substring(0,2)),g:b(L.substring(2,4)),b:b(L.substring(4,6))}}function O(j){var L=T(j,"origin",Object);return L.x=T(L,"x",Number),L.y=T(L,"y",Number),L}function I(j){j.width=document.documentElement.clientWidth,j.height=document.documentElement.clientHeight}function S(j){var L=j.getBoundingClientRect();j.width=L.width,j.height=L.height}function k(j){var L=document.createElement("canvas");return L.style.position="fixed",L.style.top="0px",L.style.left="0px",L.style.pointerEvents="none",L.style.zIndex=j,L}function P(j,L,G,ee,re,oe,te,ne,ce){j.save(),j.translate(L,G),j.rotate(oe),j.scale(ee,re),j.arc(0,0,1,te,ne,ce),j.restore()}function D(j){var L=j.angle*(Math.PI/180),G=j.spread*(Math.PI/180);return{x:j.x,y:j.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:j.startVelocity*.5+Math.random()*j.startVelocity,angle2D:-L+(.5*G-Math.random()*G),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:j.color,shape:j.shape,tick:0,totalTicks:j.ticks,decay:j.decay,drift:j.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:j.gravity*3,ovalScalar:.6,scalar:j.scalar,flat:j.flat}}function M(j,L){L.x+=Math.cos(L.angle2D)*L.velocity+L.drift,L.y+=Math.sin(L.angle2D)*L.velocity+L.gravity,L.velocity*=L.decay,L.flat?(L.wobble=0,L.wobbleX=L.x+10*L.scalar,L.wobbleY=L.y+10*L.scalar,L.tiltSin=0,L.tiltCos=0,L.random=1):(L.wobble+=L.wobbleSpeed,L.wobbleX=L.x+10*L.scalar*Math.cos(L.wobble),L.wobbleY=L.y+10*L.scalar*Math.sin(L.wobble),L.tiltAngle+=.1,L.tiltSin=Math.sin(L.tiltAngle),L.tiltCos=Math.cos(L.tiltAngle),L.random=Math.random()+2);var G=L.tick++/L.totalTicks,ee=L.x+L.random*L.tiltCos,re=L.y+L.random*L.tiltSin,oe=L.wobbleX+L.random*L.tiltCos,te=L.wobbleY+L.random*L.tiltSin;if(j.fillStyle="rgba("+L.color.r+", "+L.color.g+", "+L.color.b+", "+(1-G)+")",j.beginPath(),o&&L.shape.type==="path"&&typeof L.shape.path=="string"&&Array.isArray(L.shape.matrix))j.fill(z(L.shape.path,L.shape.matrix,L.x,L.y,Math.abs(oe-ee)*.1,Math.abs(te-re)*.1,Math.PI/10*L.wobble));else if(L.shape.type==="bitmap"){var ne=Math.PI/10*L.wobble,ce=Math.abs(oe-ee)*.1,we=Math.abs(te-re)*.1,ie=L.shape.bitmap.width*L.scalar,ke=L.shape.bitmap.height*L.scalar,_e=new DOMMatrix([Math.cos(ne)*ce,Math.sin(ne)*ce,-Math.sin(ne)*we,Math.cos(ne)*we,L.x,L.y]);_e.multiplySelf(new DOMMatrix(L.shape.matrix));var Le=j.createPattern(d.transform(L.shape.bitmap),"no-repeat");Le.setTransform(_e),j.globalAlpha=1-G,j.fillStyle=Le,j.fillRect(L.x-ie/2,L.y-ke/2,ie,ke),j.globalAlpha=1}else if(L.shape==="circle")j.ellipse?j.ellipse(L.x,L.y,Math.abs(oe-ee)*L.ovalScalar,Math.abs(te-re)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI):P(j,L.x,L.y,Math.abs(oe-ee)*L.ovalScalar,Math.abs(te-re)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI);else if(L.shape==="star")for(var he=Math.PI/2*3,Qe=4*L.scalar,rt=8*L.scalar,kt=L.x,sn=L.y,je=5,Se=Math.PI/je;je--;)kt=L.x+Math.cos(he)*rt,sn=L.y+Math.sin(he)*rt,j.lineTo(kt,sn),he+=Se,kt=L.x+Math.cos(he)*Qe,sn=L.y+Math.sin(he)*Qe,j.lineTo(kt,sn),he+=Se;else j.moveTo(Math.floor(L.x),Math.floor(L.y)),j.lineTo(Math.floor(L.wobbleX),Math.floor(re)),j.lineTo(Math.floor(oe),Math.floor(te)),j.lineTo(Math.floor(ee),Math.floor(L.wobbleY));return j.closePath(),j.fill(),L.tick<L.totalTicks}function N(j,L,G,ee,re){var oe=L.slice(),te=j.getContext("2d"),ne,ce,we=c(function(ie){function ke(){ne=ce=null,te.clearRect(0,0,ee.width,ee.height),d.clear(),re(),ie()}function _e(){r&&!(ee.width===s.width&&ee.height===s.height)&&(ee.width=j.width=s.width,ee.height=j.height=s.height),!ee.width&&!ee.height&&(G(j),ee.width=j.width,ee.height=j.height),te.clearRect(0,0,ee.width,ee.height),oe=oe.filter(function(Le){return M(te,Le)}),oe.length?ne=h.frame(_e):ke()}ne=h.frame(_e),ce=ke});return{addFettis:function(ie){return oe=oe.concat(ie),we},canvas:j,promise:we,reset:function(){ne&&h.cancel(ne),ce&&ce()}}}function Z(j,L){var G=!j,ee=!!T(L||{},"resize"),re=!1,oe=T(L,"disableForReducedMotion",Boolean),te=i&&!!T(L||{},"useWorker"),ne=te?p():null,ce=G?I:S,we=j&&ne?!!j.__confetti_initialized:!1,ie=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ke;function _e(he,Qe,rt){for(var kt=T(he,"particleCount",E),sn=T(he,"angle",Number),je=T(he,"spread",Number),Se=T(he,"startVelocity",Number),ar=T(he,"decay",Number),Cs=T(he,"gravity",Number),Ai=T(he,"drift",Number),Ri=T(he,"colors",C),Yr=T(he,"ticks",Number),Pi=T(he,"shapes"),lr=T(he,"scalar"),Wn=!!T(he,"flat"),Ir=O(he),Ni=kt,on=[],Di=j.width*Ir.x,Xr=j.height*Ir.y;Ni--;)on.push(D({x:Di,y:Xr,angle:sn,spread:je,startVelocity:Se,color:Ri[Ni%Ri.length],shape:Pi[w(0,Pi.length)],ticks:Yr,decay:ar,gravity:Cs,drift:Ai,scalar:lr,flat:Wn}));return ke?ke.addFettis(on):(ke=N(j,on,ce,Qe,rt),ke.promise)}function Le(he){var Qe=oe||T(he,"disableForReducedMotion",Boolean),rt=T(he,"zIndex",Number);if(Qe&&ie)return c(function(Se){Se()});G&&ke?j=ke.canvas:G&&!j&&(j=k(rt),document.body.appendChild(j)),ee&&!we&&ce(j);var kt={width:j.width,height:j.height};ne&&!we&&ne.init(j),we=!0,ne&&(j.__confetti_initialized=!0);function sn(){if(ne){var Se={getBoundingClientRect:function(){if(!G)return j.getBoundingClientRect()}};ce(Se),ne.postMessage({resize:{width:Se.width,height:Se.height}});return}kt.width=kt.height=null}function je(){ke=null,ee&&(re=!1,e.removeEventListener("resize",sn)),G&&j&&(document.body.contains(j)&&document.body.removeChild(j),j=null,we=!1)}return ee&&!re&&(re=!0,e.addEventListener("resize",sn,!1)),ne?ne.fire(he,kt,je):_e(he,kt,je)}return Le.reset=function(){ne&&ne.reset(),ke&&ke.reset()},Le}var q;function Y(){return q||(q=Z(null,{useWorker:!0,resize:!0})),q}function z(j,L,G,ee,re,oe,te){var ne=new Path2D(j),ce=new Path2D;ce.addPath(ne,new DOMMatrix(L));var we=new Path2D;return we.addPath(ce,new DOMMatrix([Math.cos(te)*re,Math.sin(te)*re,-Math.sin(te)*oe,Math.cos(te)*oe,G,ee])),we}function F(j){if(!o)throw new Error("path confetti are not supported in this browser");var L,G;typeof j=="string"?L=j:(L=j.path,G=j.matrix);var ee=new Path2D(L),re=document.createElement("canvas"),oe=re.getContext("2d");if(!G){for(var te=1e3,ne=te,ce=te,we=0,ie=0,ke,_e,Le=0;Le<te;Le+=2)for(var he=0;he<te;he+=2)oe.isPointInPath(ee,Le,he,"nonzero")&&(ne=Math.min(ne,Le),ce=Math.min(ce,he),we=Math.max(we,Le),ie=Math.max(ie,he));ke=we-ne,_e=ie-ce;var Qe=10,rt=Math.min(Qe/ke,Qe/_e);G=[rt,0,0,rt,-Math.round(ke/2+ne)*rt,-Math.round(_e/2+ce)*rt]}return{type:"path",path:L,matrix:G}}function U(j){var L,G=1,ee="#000000",re='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof j=="string"?L=j:(L=j.text,G="scalar"in j?j.scalar:G,re="fontFamily"in j?j.fontFamily:re,ee="color"in j?j.color:ee);var oe=10*G,te=""+oe+"px "+re,ne=new OffscreenCanvas(oe,oe),ce=ne.getContext("2d");ce.font=te;var we=ce.measureText(L),ie=Math.ceil(we.actualBoundingBoxRight+we.actualBoundingBoxLeft),ke=Math.ceil(we.actualBoundingBoxAscent+we.actualBoundingBoxDescent),_e=2,Le=we.actualBoundingBoxLeft+_e,he=we.actualBoundingBoxAscent+_e;ie+=_e+_e,ke+=_e+_e,ne=new OffscreenCanvas(ie,ke),ce=ne.getContext("2d"),ce.font=te,ce.fillStyle=ee,ce.fillText(L,Le,he);var Qe=1/G;return{type:"bitmap",bitmap:ne.transferToImageBitmap(),matrix:[Qe,0,0,Qe,-ie*Qe/2,-ke*Qe/2]}}n.exports=function(){return Y().apply(this,arguments)},n.exports.reset=function(){Y().reset()},n.exports.create=Z,n.exports.shapeFromPath=F,n.exports.shapeFromText=U})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Hw,!1);const WH=Hw.exports;Hw.exports.create;const qy=({gift:t,isOwner:e,onEdit:n})=>{const{t:r}=Ti(),{user:s}=vt(),i=Ct(),o=async()=>{if(e||!s)return;const m=t.status==="purchased";if(m&&t.purchasedBy&&t.purchasedBy!==s.uid){alert("This gift was marked as purchased by someone else.");return}const _=m?"available":"purchased";_==="purchased"&&WH({particleCount:100,spread:70,origin:{y:.6},colors:["#0F766E","#F97316","#FFFFFF"]});try{await er(et(le,"gifts",t.id),{status:_,purchasedBy:_==="purchased"?s.uid:null})}catch(x){console.error("Failed to update status",x)}},a=async m=>{if(m.preventDefault(),m.stopPropagation(),!!e)try{await er(et(le,"gifts",t.id),{isFavorite:!t.isFavorite})}catch(_){console.error("Failed to toggle favorite",_)}},l=async m=>{if(m.preventDefault(),m.stopPropagation(),confirm(r("delete_confirm")||"Delete this gift?"))try{await mp(et(le,"gifts",t.id))}catch(_){console.error("Failed to delete gift",_)}},c=t.status==="purchased",d=!e&&c,h=c&&!!t.purchasedBy&&t.purchasedBy!==(s==null?void 0:s.uid),p=()=>{e&&n?n(t):i(`/gift/${t.id}`)};return f.jsxs(Ge.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:p,className:`
                flex flex-col items-center transition-all duration-300 group relative cursor-pointer
            `,children:[f.jsxs("div",{className:"relative w-full aspect-[4/5] mb-4",children:[f.jsx("div",{className:`w-full h-full rounded-2xl overflow-hidden ${d?"grayscale-[0.5]":""}`,children:t.imageUrl?f.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-50 text-slate-300",children:f.jsx(mo,{size:40,strokeWidth:1.5})})}),f.jsxs("div",{className:"absolute inset-0 flex items-start justify-between p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(e||t.isFavorite)&&f.jsx("button",{onClick:a,className:`w-8 h-8 bg-white rounded-full flex items-center justify-center transition-all shadow-sm ${t.isFavorite?"text-secondary":"text-slate-300 hover:text-secondary"}`,disabled:!e,children:f.jsx(O0,{size:16,fill:t.isFavorite?"currentColor":"none"})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("a",{href:Hy(t.link),target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-slate-400 hover:text-primary transition-all shadow-sm",children:f.jsx(sA,{size:14})}),e&&f.jsx("button",{onClick:l,className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-danger hover:bg-red-50 transition-all shadow-sm",children:f.jsx(uA,{size:14})})]})]}),!e&&f.jsx("button",{onClick:o,disabled:h,className:`absolute bottom-3 right-3 w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all z-20 ${h?"bg-slate-100 text-slate-400 cursor-not-allowed":d?"bg-success text-white":"bg-primary text-white hover:scale-105"}`,children:h?f.jsx(e5,{size:16}):d?f.jsx(io,{size:18}):f.jsx(cA,{size:18})})]}),f.jsxs("div",{className:"flex flex-col items-center gap-1 w-full px-2",children:[f.jsxs("div",{className:"text-[10px] text-slate-400 font-sans uppercase tracking-tight",children:["CODE: ",t.id.slice(0,5)]}),f.jsx("h3",{className:`font-bold text-primary text-sm text-center line-clamp-2 min-h-[2.5rem] ${d?"line-through text-slate-300":""}`,children:t.title}),f.jsx("div",{className:"bg-[#0C0C4F] text-white px-5 py-1 rounded-full text-xs font-bold mt-1 shadow-sm",children:t.price||"Gift"})]})]})};function Km({className:t,...e}){return f.jsx("div",{className:zH("animate-pulse rounded-md bg-slate-200/50",t),...e})}const HN=y.createContext(void 0),HH=({children:t})=>{const[e,n]=y.useState(null);return f.jsx(HN.Provider,{value:{editingGift:e,setEditingGift:n},children:t})},Gw=()=>{const t=y.useContext(HN);if(t===void 0)throw new Error("useModal must be used within a ModalProvider");return t},GH=({showFavorites:t,top5Ids:e,searchQuery:n=""})=>{const{user:r}=vt(),[s,i]=y.useState([]),[o,a]=y.useState(!0),{setEditingGift:l}=Gw();y.useEffect(()=>{if(!r)return;const p=ft(Ve(le,"gifts"),St("ownerId","==",r.uid)),m=Lo(p,_=>{const x=_.docs.map(T=>({id:T.id,...T.data()}));x.sort((T,E)=>{var C,R;const w=((C=T.createdAt)==null?void 0:C.seconds)||0;return(((R=E.createdAt)==null?void 0:R.seconds)||0)-w}),i(x),a(!1)},_=>{console.error("Owner query error",_),a(!1)});return()=>m()},[r]);const c=s.filter(p=>{var x;const m=t?p.isFavorite:!0,_=n?p.title.toLowerCase().includes(n.toLowerCase())||((x=p.note)==null?void 0:x.toLowerCase().includes(n.toLowerCase())):!0;return m&&_}),d=e?e.map(p=>s.find(m=>m.id===p)).filter(Boolean):[],h=e?c.filter(p=>!e.includes(p.id)):c;return o?f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(6)].map((p,m)=>f.jsxs("div",{className:"flex flex-col space-y-3",children:[f.jsx(Km,{className:"h-32 w-full rounded-2xl"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Km,{className:"h-4 w-3/4"}),f.jsx(Km,{className:"h-3 w-1/2"})]})]},m))}):s.length===0?f.jsxs("div",{className:"text-center py-12 px-6",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx(Hc,{size:32})}),f.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No wishes yet"}),f.jsx("p",{className:"text-slate-400 text-sm",children:"Use the + button to add your first wish!"})]}):f.jsxs("div",{className:"pb-28",children:[d.length>0&&!t&&f.jsx("section",{className:"mb-10",children:f.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 via-amber-50 to-yellow-50 p-6 rounded-3xl border border-yellow-200/50 shadow-sm relative overflow-hidden group",children:[f.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-yellow-400/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-yellow-400/20 transition-all duration-700"}),f.jsxs("div",{className:"flex items-center gap-3 mb-6 relative z-10",children:[f.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600 shadow-inner",children:f.jsx(Hc,{size:20,fill:"currentColor"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold text-yellow-900 leading-tight",children:"Top 5 Favorites"}),f.jsx("p",{className:"text-xs text-yellow-700/80 font-medium tracking-wide uppercase",children:"Most Wanted"})]})]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 relative z-10",children:d.map((p,m)=>f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute -top-3 -left-3 w-8 h-8 rounded-full bg-gradient-to-br from-yellow-300 to-yellow-500 shadow-lg flex items-center justify-center text-white font-bold text-sm z-20 border-2 border-white",children:m+1}),f.jsx(qy,{gift:p,isOwner:(r==null?void 0:r.uid)===p.ownerId,onEdit:l})]},p.id))})]})}),t&&h.length===0?f.jsxs("div",{className:"text-center py-12 px-6",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})}),f.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No favorites yet"}),f.jsx("p",{className:"text-slate-400 text-sm",children:"Heart items to see them here."})]}):f.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12",children:h.map(p=>f.jsx(qy,{gift:p,isOwner:(r==null?void 0:r.uid)===p.ownerId,onEdit:l},p.id))})]})},$i=[{id:1,title:"Fresh Flowers",subtitle:"Order now for 20% off",bg:"bg-gradient-to-r from-secondary to-pink-400"},{id:2,title:"Tech Gadgets",subtitle:"Latest deals on electronics",bg:"bg-gradient-to-r from-primary to-primary-light"},{id:3,title:"Experience Days",subtitle:"Gift memories, not things",bg:"bg-gradient-to-r from-accent to-yellow-400",textColor:"text-primary"}],qH=({fullWidth:t=!1})=>{const[e,n]=y.useState(0);return y.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%$i.length)},5e3);return()=>clearInterval(r)},[]),f.jsxs("div",{className:`w-full h-32 md:h-40 relative overflow-hidden shadow-lg group ${t?"rounded-none mb-0":"rounded-2xl mb-6"}`,children:[f.jsx(ws,{mode:"wait",children:f.jsxs(Ge.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5},className:`absolute inset-0 ${$i[e].bg} flex items-center justify-center ${$i[e].textColor||"text-white"} p-6`,children:[f.jsx("div",{className:"absolute inset-0 bg-black/5"}),f.jsxs("div",{className:"relative z-10 text-center",children:[f.jsx("p",{className:"font-bold text-xl mb-1",children:$i[e].title}),f.jsx("p",{className:"text-sm opacity-90",children:$i[e].subtitle}),f.jsx("button",{className:"mt-3 bg-primary text-white text-xs font-bold px-5 py-2.5 rounded-full shadow-md hover:scale-105 transition-transform",children:"Shop Now"})]})]},$i[e].id)}),f.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-1.5 z-20",children:$i.map((r,s)=>f.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${s===e?"bg-primary w-4":"bg-primary/30"}`},s))})]})},GN=y.createContext(void 0),KH=({children:t})=>{const[e,n]=y.useState("");return f.jsx(GN.Provider,{value:{searchQuery:e,setSearchQuery:n},children:t})},vp=()=>{const t=y.useContext(GN);if(t===void 0)throw new Error("useSearch must be used within a SearchProvider");return t},QH=()=>{const{searchQuery:t}=vp();return f.jsxs("div",{className:"bg-white font-sans",children:[f.jsx("div",{className:"w-full mb-6 relative z-0",children:f.jsx(qH,{fullWidth:!0})}),f.jsx("main",{className:"px-6 relative z-0",children:f.jsx(GH,{showFavorites:!1,searchQuery:t})})]})},YH=()=>{const t=Ct(),{user:e}=vt(),{searchQuery:n}=vp(),[r,s]=y.useState([]),[i,o]=y.useState([]),[a,l]=y.useState(!0);y.useEffect(()=>{if(!e)return;const m=ft(Ve(le,"friendships"),St("users","array-contains",e.uid)),_=Lo(m,async x=>{const T=x.docs.map(b=>({id:b.id,...b.data()})),E=await Promise.all(T.filter(b=>b.status==="pending"&&b.senderId!==e.uid).map(async b=>{const C=b.senderId,R=await Jt(ft(Ve(le,"users"),St("__name__","==",C))),O=R.empty?{displayName:"Unknown"}:R.docs[0].data();return{...b,friend:{uid:C,...O}}}));o(E);const w=await Promise.all(T.filter(b=>b.status==="accepted").map(async b=>{const C=b.users.find(I=>I!==e.uid);if(!C)return null;const R=await Jt(ft(Ve(le,"users"),St("__name__","==",C))),O=R.empty?{displayName:"User"}:R.docs[0].data();return{...b,friendId:C,friend:{uid:C,...O}}}));s(w.filter(Boolean)),l(!1)});return()=>_()},[e]);const c=r.filter(m=>m.friend.displayName.toLowerCase().includes(n.toLowerCase())),d=async m=>{try{await er(et(le,"friendships",m),{status:"accepted"})}catch(_){console.error(_)}},h=async m=>{try{await mp(et(le,"friendships",m))}catch(_){console.error(_)}},p=async()=>{if(!e)return;const m={title:"Join me on WishU",text:"Let's share wishlists on WishU! Join me here:",url:`${window.location.origin}/invite?from=${e.uid}`};try{navigator.share?await navigator.share(m):(navigator.clipboard.writeText(m.url),alert("Link copied!"))}catch(_){console.log(_)}};return f.jsx("div",{className:"bg-white font-sans",children:f.jsxs("main",{className:"px-6 space-y-8 pt-6 pb-28",children:[i.length>0&&f.jsxs("section",{children:[f.jsxs("h2",{className:"font-bold text-darkbg mb-3 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse"}),"Friend Requests"]}),f.jsx("div",{className:"space-y-3",children:i.map(m=>f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-orange-100 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:m.friend.photoURL||"https://i.pravatar.cc/150",className:"w-10 h-10 rounded-full bg-slate-200"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-darkbg text-sm",children:m.friend.displayName||"Unknown"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Wants to connect"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>h(m.id),className:"p-2 bg-slate-50 text-slate-400 rounded-full hover:bg-red-50 hover:text-red-500",children:f.jsx(_r,{size:18})}),f.jsx("button",{onClick:()=>d(m.id),className:"p-2 bg-primary/10 text-primary rounded-full hover:bg-primary hover:text-white",children:f.jsx(io,{size:18})})]})]},m.id))})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h2",{className:"font-bold text-darkbg",children:["Your Friends (",c.length,")"]}),f.jsxs("button",{onClick:p,className:"text-primary text-sm font-medium flex items-center gap-1",children:[f.jsx(Lh,{size:16})," Invite"]})]}),a?f.jsx("div",{className:"flex justify-center p-8",children:f.jsx(Sn,{className:"animate-spin text-primary"})}):c.length===0?f.jsxs("div",{className:"text-center py-10 px-6 bg-white rounded-3xl border border-dashed border-slate-200",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx(Oh,{size:32})}),f.jsx("h3",{className:"font-bold text-slate-700 mb-1",children:"No friends yet"}),f.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Search for people above or invite them to join WishU!"}),f.jsx("button",{onClick:p,className:"bg-darkbg text-white px-6 py-3 rounded-xl text-sm font-bold shadow-lg",children:"Invite Friends"})]}):f.jsx("div",{className:"space-y-3",children:c.map(m=>{var _;return f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-50 hover:border-primary/20 flex flex-col gap-3",children:[f.jsxs("div",{onClick:()=>t(`/friend/${m.friendId}`),className:"flex items-center gap-4 cursor-pointer",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:m.friend.photoURL||`https://ui-avatars.com/api/?name=${m.friend.displayName}`,alt:m.friend.displayName,className:"w-12 h-12 rounded-full object-cover bg-slate-200"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 border-2 border-white rounded-full"})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold text-slate-800",children:m.friend.displayName}),f.jsx("p",{className:"text-xs text-slate-400",children:"Tap to see wishlist"})]}),f.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-slate-400",children:f.jsx(Hc,{size:16})})]}),f.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-slate-50",children:[f.jsx("span",{className:"text-xs text-slate-400",children:"Group:"}),f.jsxs("select",{value:((_=m.groups)==null?void 0:_[m.friendId])||"Friends",onChange:async x=>{const T=x.target.value;await er(et(le,"friendships",m.id),{[`groups.${m.friendId}`]:T})},className:"bg-slate-50 text-xs font-medium text-slate-600 rounded-lg px-2 py-1 border border-slate-200 focus:outline-none focus:border-primary",children:[f.jsx("option",{value:"Friends",children:"Friends"}),f.jsx("option",{value:"Family",children:"Family"}),f.jsx("option",{value:"Partner",children:"Partner"}),f.jsx("option",{value:"Work",children:"Work"}),f.jsx("option",{value:"Other",children:"Other"})]})]})]},m.id)})})]})]})})},qN=y.createContext(void 0),XH=({children:t})=>{const[e,n]=y.useState({showSearch:!0,showBackButton:!1}),r=()=>{n({showSearch:!0,showBackButton:!1,title:void 0,subtitle:void 0,customBottomBar:void 0})};return f.jsx(qN.Provider,{value:{headerState:e,setHeaderState:n,resetHeader:r},children:t})},KN=()=>{const t=y.useContext(qN);if(!t)throw new Error("useHeader must be used within a HeaderProvider");return t},QN=y.createContext(void 0),qw=()=>{const t=y.useContext(QN);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},JH=({children:t})=>{const[e,n]=y.useState(null),r=(s,i="success")=>{n({message:s,type:i}),setTimeout(()=>n(null),3e3)};return f.jsxs(QN.Provider,{value:{showToast:r},children:[t,f.jsx(ws,{children:e&&f.jsxs(Ge.div,{initial:{opacity:0,y:50,x:"-50%"},animate:{opacity:1,y:0,x:"-50%"},exit:{opacity:0,y:20,x:"-50%"},className:`fixed bottom-24 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full shadow-xl flex items-center gap-3 font-medium text-sm whitespace-nowrap
                            ${e.type==="success"?"bg-darkbg text-white":"bg-red-500 text-white"}
                        `,children:[f.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${e.type==="success"?"bg-green-500":"bg-white/20"}`,children:e.type==="success"?f.jsx(io,{size:14}):f.jsx(_r,{size:14})}),e.message]})})]})},ZH=({onRecordingComplete:t,onCancel:e})=>{const n=y.useRef(null),r=y.useRef(null),[s,i]=y.useState(!1),[o,a]=y.useState(null),[l,c]=y.useState(0),[d,h]=y.useState(""),[p,m]=y.useState(null);y.useEffect(()=>(_(),()=>x()),[]);const _=async()=>{try{const R=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});m(R),n.current&&(n.current.srcObject=R)}catch(R){h("Camera access denied. Please check permissions."),console.error(R)}},x=()=>{p&&(p.getTracks().forEach(R=>R.stop()),m(null))},T=()=>{if(!p)return;c(3);let R=3;const O=setInterval(()=>{R--,c(R),R===0&&(clearInterval(O),E())},1e3)},E=()=>{if(!p)return;const R=new MediaRecorder(p);r.current=R;const O=[];R.ondataavailable=I=>{I.data.size>0&&O.push(I.data)},R.onstop=()=>{const I=new Blob(O,{type:"video/webm"});a(I),n.current&&(n.current.srcObject=null,n.current.src=URL.createObjectURL(I),n.current.controls=!0,n.current.play())},R.start(),i(!0)},w=()=>{r.current&&s&&(r.current.stop(),i(!1))},b=()=>{a(null),n.current&&(n.current.src="",n.current.controls=!1),_()},C=()=>{o&&(x(),t(o))};return d?f.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl p-8 text-center",children:[f.jsx("p",{children:d}),f.jsx("button",{onClick:e,className:"mt-4 text-sm underline",children:"Close"})]}):f.jsxs("div",{className:"bg-black rounded-3xl overflow-hidden shadow-2xl relative w-full aspect-[9/16] max-h-[60vh] flex flex-col",children:[f.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!o,className:"w-full h-full object-cover flex-1"}),f.jsx("div",{className:"absolute inset-x-0 bottom-0 p-6 bg-gradient-to-t from-black/80 to-transparent",children:f.jsx("div",{className:"flex justify-center items-center gap-8",children:o?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:b,className:"p-3 bg-white/10 rounded-full text-white hover:bg-white/20",children:f.jsx(s5,{size:24})}),f.jsx("button",{onClick:C,className:"w-14 h-14 bg-green-500 rounded-full flex items-center justify-center text-white shadow-lg transform hover:scale-105 active:scale-95 transition-all",children:f.jsx(io,{size:28})})]}):s?f.jsx("button",{onClick:w,className:"w-16 h-16 rounded-full border-4 border-white flex items-center justify-center hover:bg-white/20 transition-all",children:f.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-sm"})}):f.jsx(f.Fragment,{children:l>0?f.jsx("div",{className:"text-6xl font-bold text-white animate-ping",children:l}):f.jsx("button",{onClick:T,className:"w-16 h-16 rounded-full border-4 border-white flex items-center justify-center hover:bg-white/20 transition-all",children:f.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full"})})})})}),!s&&!o&&f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/40 rounded-full text-white backdrop-blur-sm",children:f.jsx(eG,{})})]})},eG=()=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),YN=({isOpen:t,onClose:e,recipient:n,eventType:r})=>{const{user:s}=vt(),{showToast:i}=qw(),[o,a]=y.useState("party"),[l,c]=y.useState(""),[d,h]=y.useState(!1),[p,m]=y.useState(!1),[_,x]=y.useState(null),[T,E]=y.useState(!1),w=async()=>{h(!0);try{await new Promise(O=>setTimeout(O,1500));const C=n.name||"Friend";let R="";o==="party"&&(R=`Happy ${r==="birthday"?"Birthday":"Day"} ${C}!  Ready to party?!`),o==="minimal"&&(R=`Best wishes, ${C}.`),o==="heart"&&(R=`Sending you lots of love on your special day, ${C}! `),o==="funny"&&(R=`Happy Birthday ${C}! Don't worry, I won't tell anyone how old you really are. `),c(R),i("AI Message Generated!","success")}catch{i("Failed to generate","error")}finally{h(!1)}},b=async()=>{if(s){E(!0);try{let C="";if(_){const P=g7(iH,`greetings/${s.uid}_${Date.now()}.webm`);await p7(P,_),C=await m7(P)}const R={fromId:s.uid,toId:n.uid,friendName:n.name,senderName:s.displayName||"Friend",type:r,theme:o,message:l,videoUrl:C,createdAt:_o(),read:!1},O=await bo(Ve(le,"greetings"),R);await bo(Ve(le,"notifications"),{userId:n.uid,type:"greeting",title:`Greeting received from ${s.displayName||"a friend"}`,message:l.substring(0,100)+(l.length>100?"...":""),data:{greetingId:O.id,senderName:s.displayName||"a friend"},read:!1,createdAt:_o()});const I=`${window.location.origin}/greeting/${O.id}`,S=l||`Happy ${r==="birthday"?"Birthday":"Day"} ${n.name}!`,k={title:`Greeting for ${n.name}`,text:`${S}

I made a special card for you:`,url:I};if(navigator.share)try{await navigator.share(k)}catch(P){console.log("Share was cancelled or failed",P),P.name!=="AbortError"&&(navigator.clipboard.writeText(`${k.text} ${k.url}`),i("Greeting link copied to clipboard!","success"))}else navigator.clipboard.writeText(`${k.text} ${k.url}`),i("Greeting link copied to clipboard!","success");e(),c(""),x(null),m(!1)}catch(C){console.error(C),i("Failed to send greeting","error")}finally{E(!1)}}};return f.jsxs(ws,{children:[t&&f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-darkbg/80 z-[60] flex items-center justify-center p-4 backdrop-blur-sm",onClick:e,children:f.jsxs(Ge.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},className:"bg-white rounded-3xl p-6 w-full max-w-sm shadow-2xl relative overflow-hidden flex flex-col max-h-[90vh]",onClick:C=>C.stopPropagation(),children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 z-10",children:f.jsx(_r,{size:18})}),f.jsx("h2",{className:"text-xl font-bold text-darkbg mb-1",children:"Send Greeting"}),f.jsxs("p",{className:"text-slate-400 text-xs mb-4",children:["To ",n.name]}),f.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2 scrollbar-hide",children:["party","minimal","heart","funny"].map(C=>f.jsx("button",{onClick:()=>a(C),className:`px-3 py-1.5 rounded-full text-xs font-bold border ${o===C?"bg-primary text-white border-primary":"bg-white text-slate-500 border-slate-200"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))}),f.jsxs("div",{className:`aspect-video rounded-xl mb-4 flex items-center justify-center p-6 text-center text-white shadow-inner relative overflow-hidden transition-all duration-300
                            ${o==="party"?"bg-gradient-to-br from-indigo-400 to-cyan-400":o==="heart"?"bg-gradient-to-br from-rose-400 to-red-400":o==="funny"?"bg-gradient-to-br from-yellow-400 to-orange-400":"bg-slate-100 text-slate-800"}
                        `,children:[o==="party"&&f.jsx(V0,{className:"absolute top-2 right-2 opacity-50"}),o==="heart"&&f.jsx(mo,{className:"absolute top-2 right-2 opacity-50"}),f.jsx("p",{className:`font-medium ${o==="minimal"?"font-sans":"font-handwriting text-lg shadow-sm"}`,children:l||(o==="funny"?"Getting old?":"Best Wishes!")})]}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("textarea",{value:l,onChange:C=>c(C.target.value),placeholder:"Write your personal wish...",className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 h-24 resize-none"}),f.jsxs("button",{onClick:w,disabled:d,className:"absolute bottom-2 right-2 text-xs bg-white border border-slate-200 px-2 py-1 rounded-lg text-primary flex items-center gap-1 shadow-sm hover:bg-slate-50",children:[d?f.jsx(Sn,{size:12,className:"animate-spin"}):f.jsx(Hc,{size:12}),"AI Magic"]})]}),f.jsx("div",{className:"mb-4",children:_?f.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-video",children:[f.jsx("video",{src:URL.createObjectURL(_),className:"w-full h-full object-cover",controls:!0}),f.jsx("button",{onClick:()=>x(null),className:"absolute top-2 right-2 bg-black/50 text-white p-1 rounded-full hover:bg-red-500",children:f.jsx(_r,{size:14})})]}):f.jsxs("button",{onClick:()=>m(!0),className:"w-full py-3 border border-dashed border-slate-300 rounded-xl text-slate-500 hover:bg-slate-50 hover:border-primary/50 hover:text-primary transition-all flex items-center justify-center gap-2",children:[f.jsx(l5,{size:18}),"Record Video Message"]})}),f.jsxs("button",{onClick:b,disabled:T,className:"w-full bg-darkbg text-white font-bold py-3 rounded-xl shadow-lg shadow-darkbg/20 active:scale-95 transition-transform flex items-center justify-center gap-2 disabled:opacity-50",children:[T?f.jsx(Sn,{className:"animate-spin"}):f.jsx(Lh,{size:18}),T?"Uploading...":"Send Greeting"]})]})}),f.jsx(ws,{children:p&&f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black z-[70] flex items-center justify-center",children:f.jsx(ZH,{onRecordingComplete:C=>{x(C),m(!1)},onCancel:()=>m(!1)})})})]})},tG=()=>{const{id:t}=Xv(),e=Ct(),{user:n}=vt(),{setHeaderState:r,resetHeader:s}=KN(),[i,o]=y.useState([]),[a,l]=y.useState("Friend"),[c,d]=y.useState("all"),[h,p]=y.useState(!0),[m,_]=y.useState(null),[x,T]=y.useState(null),{setEditingGift:E}=Gw(),w=(n==null?void 0:n.uid)===t;y.useEffect(()=>{if(!m)return;const S=()=>{const P=new Date,D=m.date.getTime()-P.getTime();if(D<=0){T({days:0,hours:0,minutes:0});return}const M=Math.floor(D/(1e3*60*60*24)),N=Math.floor(D%(1e3*60*60*24)/(1e3*60*60)),Z=Math.floor(D%(1e3*60*60)/(1e3*60));T({days:M,hours:N,minutes:Z})};S();const k=setInterval(S,6e4);return()=>clearInterval(k)},[m]),y.useEffect(()=>()=>s(),[]),y.useEffect(()=>{r({title:w?"My Wishlist":`${a}'s Wishlist`,showBackButton:!0,showSearch:!1,customBottomBar:f.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1",children:[f.jsx("button",{onClick:()=>e("/calendar"),className:"px-3 py-1.5 bg-accent text-white rounded-full text-xs font-bold whitespace-nowrap shadow-sm shadow-accent/20 flex items-center gap-1 flex-shrink-0",children:"Offer Wish "}),f.jsx("div",{className:"w-[1px] h-6 bg-slate-100 mx-1 flex-shrink-0"}),[{id:"all",label:"All"},{id:"low",label:"<249"},{id:"mid",label:"250-399"},{id:"high",label:"400-699"},{id:"premium",label:"700+"}].map(S=>f.jsx("button",{onClick:()=>d(S.id),className:`px-4 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors flex-shrink-0 border ${c===S.id?"bg-darkbg text-white border-darkbg":"bg-slate-50 text-slate-500 border-slate-100 hover:bg-slate-100"}`,children:S.label},S.id))]})})},[a,w,c]),y.useEffect(()=>{if(!t||!n)return;let S="Friends";const k=async()=>{const N=ft(Ve(le,"friendships"),St("users","array-contains",n.uid)),q=(await Jt(N)).docs.find(Y=>Y.data().users.includes(t));if(q){const Y=q.data().groups||{};Y[n.uid]&&(S=Y[n.uid])}},P=async()=>{try{const N=await Pu(et(le,"users",t));if(N.exists()){const Z=N.data();l(Z.displayName||"Friend");let q=null;const Y=new Date;Y.setHours(0,0,0,0);const z=(F,U)=>{const j=Gy(F);if(j){const L=j.date.getTime()-Y.getTime();L>=0&&(!q||L<q.diff)&&(q={title:U,date:j.date,diff:L})}};Z.birthDate&&z(Z.birthDate,"Birthday"),Z.importantDates&&Array.isArray(Z.importantDates)&&Z.importantDates.forEach(F=>z(F.date,F.title||"Special Day")),q&&_({title:q.title,date:q.date})}}catch(N){console.error(N)}},D=async()=>{await k();const N=ft(Ve(le,"gifts"),St("ownerId","==",t));return Lo(N,q=>{const z=q.docs.map(F=>({id:F.id,...F.data()})).filter(F=>!F.visibility||F.visibility.length===0?!0:F.visibility.includes(S));z.sort((F,U)=>{var j,L;return(((j=U.createdAt)==null?void 0:j.seconds)||0)-(((L=F.createdAt)==null?void 0:L.seconds)||0)}),o(z),p(!1)})};P();const M=D();return()=>{M.then(N=>N&&N())}},[t,n]);const b=S=>S&&parseInt(S.replace(/[^0-9]/g,""))||0,C=i.filter(S=>{const k=b(S.price);switch(c){case"low":return k<249;case"mid":return k>=250&&k<=399;case"high":return k>=400&&k<=699;case"premium":return k>=700;default:return!0}}),[R,O]=y.useState(!1),I=m&&new Date().toDateString()===m.date.toDateString();return f.jsxs("div",{className:"min-h-screen bg-lightbg font-sans pb-10",children:[f.jsxs("main",{className:"px-6 py-6 space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"relative z-10",children:m&&x?I?f.jsxs("div",{className:"text-center animate-pulse",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2 text-teal-100 uppercase tracking-widest text-xs font-bold",children:[f.jsx(T1,{size:14}),"Happening Now!"]}),f.jsxs("h2",{className:"text-3xl font-black mb-2",children:["Today is ",a,"'s ",m.title,"! "]}),f.jsx("div",{className:"text-lg opacity-90 mb-4",children:"Don't forget to send your wishes!"}),f.jsxs("button",{onClick:()=>O(!0),className:"inline-flex items-center gap-2 bg-white text-teal-600 px-6 py-3 rounded-full font-bold text-base shadow-lg hover:bg-teal-50 transition-all hover:scale-105",children:[f.jsx(b1,{size:18}),"Send Greeting"]})]}):f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2 text-teal-100 uppercase tracking-widest text-xs font-bold",children:[f.jsx(T1,{size:14}),"Upcoming Event"]}),f.jsx("h2",{className:"text-2xl font-bold mb-1",children:m.title}),f.jsxs("div",{className:"text-4xl font-black mb-4 tracking-tight tabular-nums",children:[x.days,"d ",x.hours,"h ",x.minutes,"m"]}),f.jsxs("button",{onClick:()=>O(!0),className:"inline-flex items-center gap-2 bg-white text-teal-600 px-5 py-2.5 rounded-full font-bold text-sm shadow-sm hover:bg-teal-50 transition-colors",children:[f.jsx(b1,{size:16}),"Send Greeting"]})]}):f.jsxs("div",{className:"text-center py-4",children:[f.jsx("p",{className:"font-medium text-lg opacity-90",children:"No upcoming events on the horizon"}),f.jsx("p",{className:"text-sm text-teal-100",children:"Make every day special anyway!"})]})})]}),h?f.jsx("div",{className:"flex justify-center p-10 text-slate-400",children:"Loading..."}):C.length===0?f.jsxs("div",{className:"text-center mt-10 p-6 bg-white rounded-2xl border border-dashed border-slate-200",children:[f.jsx("p",{className:"text-slate-500 font-medium",children:"No gifts found"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Try a different filter or check back later."})]}):f.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-12",children:C.map(S=>f.jsx(qy,{gift:S,isOwner:w,onEdit:E},S.id))})]}),f.jsx(YN,{isOpen:R,onClose:()=>O(!1),recipient:{uid:t||"",name:a},eventType:m!=null&&m.title.toLowerCase().includes("birthday")?"birthday":"other"})]})},nG=()=>{const t=Ct(),{user:e}=vt(),{searchQuery:n}=vp(),[r,s]=y.useState([]),[i,o]=y.useState(!0),[a,l]=y.useState(null);y.useEffect(()=>{(async()=>{if(e)try{const h=ft(Ve(le,"friendships"),St("users","array-contains",e.uid)),p=await Jt(h),m=[];if(p.docs.forEach(w=>{const b=w.data();if(b.status==="accepted"){const C=b.users.find(R=>R!==e.uid);C&&m.push(C)}}),m.length===0){s([]),o(!1);return}const _=await Promise.all(m.map(w=>Jt(ft(Ve(le,"users"),St("__name__","==",w))))),x=[];new Date().setHours(0,0,0,0),_.forEach(w=>{if(!w.empty){const b=w.docs[0].data(),C=w.docs[0].id;if(console.log(`Processing friend ${b.displayName}:`,b),b.birthDate){const R=Gy(b.birthDate);R&&x.push({id:`${C}_bday`,friendId:C,friendName:b.displayName||"Friend",friendPhoto:b.photoURL,type:"birthday",date:R.date,dateStr:R.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),daysLeft:R.daysLeft,originalDate:b.birthDate,title:"Birthday"})}b.importantDates&&Array.isArray(b.importantDates)&&(console.log("Found important dates:",b.importantDates),b.importantDates.forEach((R,O)=>{console.log("Processing date:",R);const I=Gy(R.date);I?x.push({id:`${C}_date_${O}`,friendId:C,friendName:b.displayName||"Friend",friendPhoto:b.photoURL,type:"other",date:I.date,dateStr:I.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),daysLeft:I.daysLeft,originalDate:R.date,title:R.title||"Special Day"}):console.warn("Invalid date format:",R.date)}))}});const E=x.filter(w=>w.type==="birthday"&&w.daysLeft<=3);for(const w of E){const b=new Date().getFullYear(),C=`bday_${w.friendId}_${b}`,R=ft(Ve(le,"notifications"),St("userId","==",e.uid),St("data.notifKey","==",C));(await Jt(R)).empty&&await bo(Ve(le,"notifications"),{userId:e.uid,type:"birthday",title:`${w.friendName}'s birthday is approaching!`,message:`It's in ${w.daysLeft} ${w.daysLeft===1?"day":"days"}. Check their wishlist for ideas.`,data:{friendId:w.friendId,friendName:w.friendName,notifKey:C},read:!1,createdAt:_o()})}x.sort((w,b)=>w.daysLeft-b.daysLeft),console.log("Final Loaded Events:",x),s(x)}catch(h){console.error("Error fetching calendar:",h)}finally{o(!1)}})()},[e]);const c=r.filter(d=>{var h;return d.friendName.toLowerCase().includes(n.toLowerCase())||((h=d.title)==null?void 0:h.toLowerCase().includes(n.toLowerCase()))});return f.jsxs("div",{className:"bg-white font-sans",children:[f.jsx("main",{className:"px-6 space-y-4 pt-6 pb-28",children:i?f.jsx("div",{className:"flex justify-center py-10",children:f.jsx(Sn,{className:"animate-spin text-primary"})}):c.length===0?f.jsxs("div",{className:"text-center mt-10 p-6 bg-white rounded-3xl border border-dashed border-slate-200",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:f.jsx(rA,{size:32})}),f.jsx("p",{className:"text-slate-500 font-medium mb-1",children:"No upcoming events found."}),f.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Add friends or ask them to set their birthday!"}),f.jsx("button",{onClick:()=>t("/friends"),className:"bg-darkbg text-white px-4 py-2 rounded-xl text-sm font-bold",children:"Find Friends"})]}):c.map(d=>f.jsxs("div",{onClick:()=>t(`/friend/${d.friendId}`),className:"flex items-center gap-4 py-4 border-b border-slate-50 active:opacity-70 transition-opacity cursor-pointer",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:d.friendPhoto||`https://ui-avatars.com/api/?name=${d.friendName}`,alt:d.friendName,className:"w-12 h-12 rounded-full object-cover bg-slate-200"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-accent rounded-full flex items-center justify-center text-white text-[10px]",children:""})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold text-slate-800",children:d.friendName}),f.jsxs("p",{className:"text-sm text-slate-500",children:[d.dateStr,"  ",d.title]})]}),f.jsxs("div",{className:"text-center min-w-[50px]",children:[f.jsx("span",{className:"block text-xl font-bold text-primary",children:d.daysLeft}),f.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-medium",children:"Days"})]}),f.jsx("button",{onClick:h=>{h.stopPropagation(),l(d)},className:"bg-secondary p-2 rounded-xl text-slate-600 hover:bg-slate-200",children:f.jsx(aA,{size:18})})]},d.id))}),f.jsx(YN,{isOpen:!!a,onClose:()=>l(null),recipient:{uid:(a==null?void 0:a.friendId)||"",name:(a==null?void 0:a.friendName)||"",photoURL:a==null?void 0:a.friendPhoto},eventType:(a==null?void 0:a.type)||"birthday"})]})},me=t=>typeof t=="string",Ml=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},yT=t=>t==null?"":""+t,rG=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},sG=/###/g,vT=t=>t&&t.indexOf("###")>-1?t.replace(sG,"."):t,wT=t=>!t||me(t),yc=(t,e,n)=>{const r=me(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(wT(t))return{};const i=vT(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return wT(t)?{}:{obj:t,k:vT(r[s])}},xT=(t,e,n)=>{const{obj:r,k:s}=yc(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=yc(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=yc(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},iG=(t,e,n,r)=>{const{obj:s,k:i}=yc(t,e,Object);s[i]=s[i]||[],s[i].push(n)},of=(t,e)=>{const{obj:n,k:r}=yc(t,e);if(n)return n[r]},oG=(t,e,n)=>{const r=of(t,n);return r!==void 0?r:of(e,n)},XN=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?me(t[r])||t[r]instanceof String||me(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):XN(t[r],e[r],n):t[r]=e[r]);return t},Fo=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var aG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const lG=t=>me(t)?t.replace(/[&<>"'\/]/g,e=>aG[e]):t;class cG{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const uG=[" ",",","?","!",";"],dG=new cG(20),hG=(t,e,n)=>{e=e||"",n=n||"";const r=uG.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=dG.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},Ky=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=i;l<r.length;++l)if(l!==i&&(a+=n),a+=r[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},af=t=>t&&t.replace("_","-"),fG={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class lf{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||fG,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(me(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new lf(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new lf(this.logger,e)}}var Or=new lf;class wp{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}}class _T extends wp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):me(r)&&i?a.push(...r.split(i)):a.push(r)));const l=of(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!me(r)?l:Ky(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),xT(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(me(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let l=of(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?XN(l,r,i):l={...l,...r},xT(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var JN={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,s))}),e}};const bT={};class cf extends wp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),rG(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Or.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!hG(e,r,s);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:me(i)?[i]:i};const c=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(s)}return{key:e,namespaces:me(i)?[i]:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(d){const C=n.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${C}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${C}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const h=this.resolve(e,n);let p=h&&h.res;const m=h&&h.usedKey||o,_=h&&h.exactUsedKey||o,x=Object.prototype.toString.apply(p),T=["[object Number]","[object Function]","[object RegExp]"],E=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,b=!me(p)&&typeof p!="boolean"&&typeof p!="number";if(w&&p&&b&&T.indexOf(x)<0&&!(me(E)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,p,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(h.res=C,h.usedParams=this.getUsedParamsDetails(n),h):C}if(i){const C=Array.isArray(p),R=C?[]:{},O=C?_:m;for(const I in p)if(Object.prototype.hasOwnProperty.call(p,I)){const S=`${O}${i}${I}`;R[I]=this.translate(S,{...n,joinArrays:!1,ns:a}),R[I]===S&&(R[I]=p[I])}p=R}}else if(w&&me(E)&&Array.isArray(p))p=p.join(E),p&&(p=this.extendTranslation(p,e,n,r));else{let C=!1,R=!1;const O=n.count!==void 0&&!me(n.count),I=cf.hasDefaultValue(n),S=O?this.pluralResolver.getSuffix(c,n.count,n):"",k=n.ordinal&&O?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",P=O&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),D=P&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${S}`]||n[`defaultValue${k}`]||n.defaultValue;!this.isValidLookup(p)&&I&&(C=!0,p=D),this.isValidLookup(p)||(R=!0,p=o);const N=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&R?void 0:p,Z=I&&D!==p&&this.options.updateMissing;if(R||C||Z){if(this.logger.log(Z?"updateKey":"missingKey",c,l,o,Z?D:p),i){const F=this.resolve(o,{...n,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let F=0;F<Y.length;F++)q.push(Y[F]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(n.lng||this.language):q.push(n.lng||this.language);const z=(F,U,j)=>{const L=I&&j!==p?j:N;this.options.missingKeyHandler?this.options.missingKeyHandler(F,l,U,L,Z,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(F,l,U,L,Z,n),this.emit("missingKey",F,l,U,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?q.forEach(F=>{const U=this.pluralResolver.getSuffixes(F,n);P&&n[`defaultValue${this.options.pluralSeparator}zero`]&&U.indexOf(`${this.options.pluralSeparator}zero`)<0&&U.push(`${this.options.pluralSeparator}zero`),U.forEach(j=>{z([F],o+j,n[`defaultValue${j}`]||D)})}):z(q,o,D))}p=this.extendTranslation(p,e,n,h,r),R&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(R||C)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,C?p:void 0):p=this.options.parseMissingKeyHandler(p))}return s?(h.res=p,h.usedParams=this.getUsedParamsDetails(n),h):p}extendTranslation(e,n,r,s,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=me(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let h=r.replace&&!me(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||s.usedLng,r),c){const p=e.match(this.interpolator.nestingRegexp),m=p&&p.length;d<m&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,m=new Array(p),_=0;_<p;_++)m[_]=arguments[_];return i&&i[0]===m[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${n[0]}`),null):o.translate(...m,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=me(a)?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=JN.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,i,o,a;return me(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),d=c.key;s=d;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=n.count!==void 0&&!me(n.count),m=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),_=n.context!==void 0&&(me(n.context)||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(T=>{this.isValidLookup(r)||(a=T,!bT[`${x[0]}-${T}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(bT[`${x[0]}-${T}`]=!0,this.logger.warn(`key "${s}" for languages "${x.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(E=>{if(this.isValidLookup(r))return;o=E;const w=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(w,d,E,T,n);else{let C;p&&(C=this.pluralResolver.getSuffix(E,n.count,n));const R=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(w.push(d+C),n.ordinal&&C.indexOf(O)===0&&w.push(d+C.replace(O,this.options.pluralSeparator)),m&&w.push(d+R)),_){const I=`${d}${this.options.contextSeparator}${n.context}`;w.push(I),p&&(w.push(I+C),n.ordinal&&C.indexOf(O)===0&&w.push(I+C.replace(O,this.options.pluralSeparator)),m&&w.push(I+R))}}let b;for(;b=w.pop();)this.isValidLookup(r)||(i=b,r=this.getResource(E,T,b,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!me(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Qm=t=>t.charAt(0).toUpperCase()+t.slice(1);class ET{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Or.create("languageUtils")}getScriptPartFromCode(e){if(e=af(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=af(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(me(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Qm(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Qm(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Qm(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),me(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return me(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):me(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}let pG=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],mG={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const gG=["v1","v2","v3"],yG=["v4"],TT={zero:0,one:1,two:2,few:3,many:4,other:5},vG=()=>{const t={};return pG.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:mG[e.fc]}})}),t};class wG{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Or.create("pluralResolver"),(!this.options.compatibilityJSON||yG.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=vG(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=af(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,i)=>TT[s]-TT[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!gG.includes(this.options.compatibilityJSON)}}const ST=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=oG(t,e,n);return!i&&s&&me(n)&&(i=Ky(t,n,r),i===void 0&&(i=Ky(e,n,r))),i},Ym=t=>t.replace(/\$/g,"$$$$");class xG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Or.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:m,nestingSuffix:_,nestingSuffixEscaped:x,nestingOptionsSeparator:T,maxReplaces:E,alwaysFormat:w}=e.interpolation;this.escape=n!==void 0?n:lG,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Fo(i):o||"{{",this.suffix=a?Fo(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Fo(p):m||Fo("$t("),this.nestingSuffix=_?Fo(_):x||Fo(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=E||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=m=>{if(m.indexOf(this.formatSeparator)<0){const E=ST(n,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,r,{...s,...n,interpolationkey:m}):E}const _=m.split(this.formatSeparator),x=_.shift().trim(),T=_.join(this.formatSeparator).trim();return this.format(ST(n,l,x,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...s,...n,interpolationkey:x})};this.resetRegExp();const d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,h=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Ym(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Ym(this.escape(m)):Ym(m)}].forEach(m=>{for(a=0;i=m.regex.exec(e);){const _=i[1].trim();if(o=c(_),o===void 0)if(typeof d=="function"){const T=d(e,i,s);o=me(T)?T:""}else if(s&&Object.prototype.hasOwnProperty.call(s,_))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${e}`),o="";else!me(o)&&!this.useRawValueToEscape&&(o=yT(o));const x=m.safeValue(o);if(e=e.replace(i[0],x),h?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const a=(l,c)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const h=l.split(new RegExp(`${d}[ ]*{`));let p=`{${h[1]}`;l=h[0],p=this.interpolate(p,o);const m=p.match(/'/g),_=p.match(/"/g);(m&&m.length%2===0&&!_||_.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),c&&(o={...c,...o})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,x),`${l}${d}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!me(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const d=s[1].split(this.formatSeparator).map(h=>h.trim());s[1]=d.shift(),l=d,c=!0}if(i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!me(i))return i;me(i)||(i=yT(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),c&&(i=l.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const _G=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=c),c==="false"&&(n[d]=!1),c==="true"&&(n[d]=!0),isNaN(c)||(n[d]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},Uo=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(af(r),s),e[o]=a),a(n)}};class bG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Or.create("formatter"),this.options=e,this.formats={number:Uo((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return i=>s.format(i)}),currency:Uo((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>s.format(i)}),datetime:Uo((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return i=>s.format(i)}),relativetime:Uo((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return i=>s.format(i,r.range||"day")}),list:Uo((n,r)=>{const s=new Intl.ListFormat(n,{...r});return i=>s.format(i)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Uo(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{const{formatName:c,formatOptions:d}=_G(l);if(this.formats[c]){let h=a;try{const p=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},m=p.locale||p.lng||s.locale||s.lng||r;h=this.formats[c](a,m,{...d,...s,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const EG=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class TG extends wp{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Or.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},l={};return e.forEach(c=>{let d=!0;n.forEach(h=>{const p=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,d=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[h]===void 0&&(l[h]=!0)))}),d||(a[c]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{iG(l.loaded,[i],o),EG(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const d=l.loaded[c];d.length&&d.forEach(h=>{a[c][h]===void 0&&(a[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(c,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(d=>a(null,d)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();me(e)&&(e=this.languageUtils.toResolveHierarchy(e)),me(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let d;c.length===5?d=c(e,n,r,s,l):d=c(e,n,r,s),d&&typeof d.then=="function"?d.then(h=>a(null,h)).catch(a):a(null,d)}catch(d){a(d)}else c(e,n,r,s,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const IT=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),me(t[1])&&(e.defaultValue=t[1]),me(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),CT=t=>(me(t.ns)&&(t.ns=[t.ns]),me(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),me(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Td=()=>{},SG=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class nu extends wp{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=CT(e),this.services={},this.logger=Or,this.modules={external:[]},SG(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(me(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=IT();this.options={...s,...this.options,...CT(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Or.init(i(this.modules.logger),this.options):Or.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=bG);const h=new ET(this.options);this.store=new _T(this.options.resources,this.options);const p=this.services;p.logger=Or,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new wG(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=i(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new xG(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new TG(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(m){for(var _=arguments.length,x=new Array(_>1?_-1:0),T=1;T<_;T++)x[T-1]=arguments[T];e.emit(m,...x)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new cf(this.services,this.options),this.translator.on("*",function(m){for(var _=arguments.length,x=new Array(_>1?_-1:0),T=1;T<_;T++)x[T-1]=arguments[T];e.emit(m,...x)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Td),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const l=Ml(),c=()=>{const d=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),r(h,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Td;const s=me(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const s=Ml();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Td),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&JN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=Ml();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=me(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,d=>{o(d,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,n,r){var s=this;const i=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),h=2;h<c;h++)d[h-2]=arguments[h];l=s.options.overloadTranslationOptionHandler([o,a].concat(d))}else l={...a};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const p=s.options.keySeparator||".";let m;return l.keyPrefix&&Array.isArray(o)?m=o.map(_=>`${l.keyPrefix}${p}${_}`):m=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,s.t(m,l)};return me(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=Ml();return this.options.ns?(me(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Ml();me(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new ET(IT());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new nu(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Td;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new nu(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new _T(this.store.data,s),i.services.resourceStore=i.store),i.translator=new cf(i.services,s),i.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];i.emit(a,...c)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const at=nu.createInstance();at.createInstance=nu.createInstance;at.createInstance;at.dir;at.init;at.loadResources;at.reloadResources;at.use;at.changeLanguage;at.getFixedT;at.t;at.exists;at.setDefaultNamespace;at.hasLoadedNamespace;at.loadNamespaces;at.loadLanguages;function IG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ru(t){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ru(t)}function CG(t,e){if(ru(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function kG(t){var e=CG(t,"string");return ru(e)=="symbol"?e:e+""}function AG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kG(r.key),r)}}function RG(t,e,n){return e&&AG(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var ZN=[],PG=ZN.forEach,NG=ZN.slice;function DG(t){return PG.call(NG.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var kT=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,LG=function(e,n,r){var s=r||{};s.path=s.path||"/";var i=encodeURIComponent(n),o="".concat(e,"=").concat(i);if(s.maxAge>0){var a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(s.domain){if(!kT.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(s.domain)}if(s.path){if(!kT.test(s.path))throw new TypeError("option path is invalid");o+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite){var l=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},AT={create:function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),s&&(i.domain=s),document.cookie=LG(e,encodeURIComponent(n),i)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),s=0;s<r.length;s++){for(var i=r[s];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(n)===0)return i.substring(n.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},jG={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=AT.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&AT.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},MG={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=r.substring(1),i=s.split("&"),o=0;o<i.length;o++){var a=i[o].indexOf("=");if(a>0){var l=i[o].substring(0,a);l===e.lookupQuerystring&&(n=i[o].substring(a+1))}}}return n}},Ol=null,RT=function(){if(Ol!==null)return Ol;try{Ol=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ol=!1}return Ol},OG={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&RT()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&RT()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},Vl=null,PT=function(){if(Vl!==null)return Vl;try{Vl=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Vl=!1}return Vl},VG={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&PT()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&PT()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},FG={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},UG={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},BG={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},$G={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}},e2=!1;try{document.cookie,e2=!0}catch{}var t2=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];e2||t2.splice(1,1);function zG(){return{order:t2,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var n2=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};IG(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return RG(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=DG(r,this.options||{},zG()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(jG),this.addDetector(MG),this.addDetector(OG),this.addDetector(VG),this.addDetector(FG),this.addDetector(UG),this.addDetector(BG),this.addDetector($G)}},{key:"addDetector",value:function(n){return this.detectors[n.name]=n,this}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var s=[];return n.forEach(function(i){if(r.detectors[i]){var o=r.detectors[i].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(s=s.concat(o))}}),s=s.map(function(i){return r.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var s=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(i){s.detectors[i]&&s.detectors[i].cacheUserLanguage(n,s.options)}))}}])}();n2.type="languageDetector";at.use(n2).use(fO).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:{en:{translation:{welcome:"Make your partner's wishes come true",get_started:"Get Started",subtitle:"Create, share, and fulfill wishes in a space designed for connection and love.",greeting:"Good Morning,",search_placeholder:"Search your wishes...",cat_all:"All",cat_beauty:"Beauty",cat_fashion:"Fashion",cat_home:"Home",cat_tech:"Tech",cat_books:"Books",onboarding_step1_title:"About You",onboarding_step1_desc:"Let's start with your details.",name_label:"Your Name",name_placeholder:"e.g. Sarah",dob_label:"Date of Birth",onboarding_step2_title:"Important Dates",onboarding_step2_desc:"Anniversaries, birthdays, or special moments.",date_title_placeholder:"Link Title (e.g. Anniversary)",add_date:"Add another date",onboarding_step3_title:"Your Partner",onboarding_step3_desc:"Who are we inviting to join you?",partner_name_label:"Partner's Name",partner_name_placeholder:"e.g. David",message_label:"Personal Message",message_placeholder:"Write something sweet to invite them...",onboarding_step4_title:"Invitation Ready!",onboarding_step4_desc:"Share this link with your partner to connect.",copy_link:"Copy Link",skip_dashboard:"Go to Dashboard",create_invite:"Create Invitation",next:"Next",my_birthday:"My Birthday",auto_birthday_hint:"We automatically added your birthday!",msg_sugg_1:"I can't wait to share my dreams with you!",msg_sugg_2:"Let's build our wishlist together.",msg_sugg_3:"You're the only one I want to share this with.",copied:"Copied!",my_wishlist:"My Wishlist",our_wishlist:"Our Wishlist",add_gift:"Add Gift",paste_link:"Paste a product link...",fetching_data:"Fetching details...",gift_title:"Gift Name",price:"Price",mark_purchased:"Mark as Purchased",purchased:"Purchased",available:"Available",gift_added:"Gift added successfully!",error_scraping:"Couldn't fetch details. Please fill manually.",delete_confirm:"Delete this gift?",profile_title:"My Profile",full_name:"Full Name",birth_date:"Birth Date",notifications_title:"Notifications",push_notifications:"Push Notifications",push_notifications_desc:"Get notified when partner adds a wish or completes one.",share_title:"Share My Wishes",share_button:"Share My List",share_desc:"Anyone with the link can view your list.",partner_manage:"Partner Connection",connected_with:"Connected with",disconnect:"Disconnect Partner",disconnect_confirm:"Are you sure you want to disconnect? You won't see their wishlist anymore.",invite_partner:"Invite Partner",invite_desc:"Send this link to connect accounts:",create_invite_link:"Create Invite Link",save_changes:"Save Changes",profile_updated:"Profile updated successfully!",language_settings:"Language Settings",select_language:"Select Language",days_left:"Days Left",hours_left:"Hours",event_today:"It's Today! ",no_upcoming_events:"No upcoming events",purchased_msg:"Great choice! We won't tell them. ",welcome_back:"Welcome back,",top5_title:"Top 5 Favorites",top5_desc:"Rank your most wanted gifts",top5_section_title:"Your Top 5",add_from_wishlist:"Add from Wishlist",drag_instruction:"Drag to reorder",most_wanted:"Most Wanted",install_title:"Install WishU",install_desc_android:"Add to home screen for quick access",install_desc_ios:"Add WishU to your home screen for quick sharing and notifications.",install_ios_instruction:"Tap Share and select 'Add to Home Screen'",install_button:"Install Now",install_android_manual:"Tap the menu icon () and select 'Add to Home screen'",close:"Close"}},he:{translation:{welcome:"    /  ",get_started:" ",subtitle:",       .",greeting:" ,",search_placeholder:" ...",cat_all:"",cat_beauty:"",cat_fashion:"",cat_home:"",cat_tech:"",cat_books:"",onboarding_step1_title:" ",onboarding_step1_desc:"   .",name_label:" ",name_placeholder:": ",dob_label:" ",onboarding_step2_title:" ",onboarding_step2_desc:" ,     .",date_title_placeholder:" (:  )",add_date:"  ",onboarding_step3_title:" ",onboarding_step3_desc:"   ?",partner_name_label:" ",partner_name_placeholder:": ",message_label:" ",message_placeholder:"   ...",onboarding_step4_title:" !",onboarding_step4_desc:"      .",copy_link:" ",skip_dashboard:"  ",create_invite:" ",next:"",my_birthday:"  ",auto_birthday_hint:"     !",msg_sugg_1:"     !",msg_sugg_2:"      .",msg_sugg_3:"       .",copied:"!",my_wishlist:" ",our_wishlist:" ",add_gift:" ",paste_link:"  ...",fetching_data:" ...",gift_title:" ",price:"",mark_purchased:" ",purchased:"",available:"",gift_added:"  !",error_scraping:"   .   .",delete_confirm:"  ?",profile_title:" ",full_name:" ",birth_date:" ",notifications_title:"",push_notifications:" ",push_notifications_desc:"      .",share_title:"  ",share_button:"   ",share_desc:"        .",partner_manage:" ",connected_with:" ",disconnect:" ",disconnect_confirm:"  ?  /     .",invite_partner:" ",invite_desc:"/    :",create_invite_link:"  ",save_changes:" ",profile_updated:"  !",language_settings:"",select_language:" ",days_left:" ",hours_left:"",event_today:"  ! ",no_upcoming_events:"  ",top5_title:"Top 5 Favorites",top5_desc:"Rank your most wanted gifts",top5_section_title:"Your Top 5",add_from_wishlist:"Add from Wishlist",drag_instruction:"Drag to reorder",most_wanted:"Most Wanted",purchased_msg:" !   . ",welcome_back:" ,",install_title:" WishU",install_desc_android:"    ",install_desc_ios:"  WishU       .",install_ios_instruction:"    '  '",install_button:" ",install_android_manual:"    ()  '  '",close:""}}}});at.on("languageChanged",t=>{document.documentElement.dir=at.dir(t),document.documentElement.lang=t});const r2=y.createContext(void 0),s2=({children:t})=>{const{user:e}=vt(),[n,r]=y.useState([]),[s,i]=y.useState(0),[o,a]=y.useState(!0);y.useEffect(()=>{if(!e){r([]),i(0),a(!1);return}const p=ft(Ve(le,"notifications"),St("userId","==",e.uid),ca("createdAt","desc"),ua(50)),m=Lo(p,_=>{const x=_.docs.map(T=>({id:T.id,...T.data()}));r(x),i(x.filter(T=>!T.read).length),a(!1)});return()=>m()},[e]);const l=async()=>{if(e)try{if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}const p=await Notification.requestPermission();p==="granted"?(console.log("Notification permission granted."),await c(e.uid)):console.log("Notification permission not granted. Status:",p)}catch(p){console.error("Error requesting notification permission:",p)}},c=async p=>{let m;try{m=await navigator.serviceWorker.ready,console.log("Unified Service Worker ready:",m)}catch(x){console.error("Service Worker retrieval failed:",x);return}const _="BOg0fY_axcqBSiHLkhEyD2ul6PBDBsgPrqkt1Tvz0hPa-72shQ7aLJY28WCCHEuPGFZy080LDtzuI4E1jwxmYXc";try{const x=await nH(pT,{vapidKey:_,serviceWorkerRegistration:m});if(console.log("FCM Token retrieved:",x),x)try{await er(et(le,"users",p),{fcmTokens:OP(x)}),console.log("FCM Token saved to Firestore for user:",p)}catch(T){console.error("Error saving token to Firestore:",T)}}catch(x){console.error("Error getting FCM token:",x)}};y.useEffect(()=>{e&&Notification.permission==="granted"&&c(e.uid);const p=rH(pT,m=>{var _,x;console.log("Foreground message received:",m),Notification.permission==="granted"&&new Notification(((_=m.notification)==null?void 0:_.title)||"New Message",{body:(x=m.notification)==null?void 0:x.body,icon:"/pwa-192x192.png"})});return()=>{p()}},[e]);const d=async p=>{try{await er(et(le,"notifications",p),{read:!0})}catch(m){console.error("Error marking notification as read:",m)}},h=async()=>{if(!e||s===0)return;const p=n.filter(_=>!_.read),m=KP(le);p.forEach(_=>{m.update(et(le,"notifications",_.id),{read:!0})});try{await m.commit()}catch(_){console.error("Error marking all as read:",_)}};return f.jsx(r2.Provider,{value:{notifications:n,unreadCount:s,markAsRead:d,markAllAsRead:h,requestPermission:l,loading:o},children:t})},Kw=()=>{const t=y.useContext(r2);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t},WG=()=>{const{t}=Ti(),{user:e,userProfile:n,logout:r}=vt(),{requestPermission:s}=Kw(),i=Ct(),[o,a]=y.useState(""),[l,c]=y.useState(""),[d,h]=y.useState(""),[p,m]=y.useState(!1),[_,x]=y.useState({Friends:{enabled:!0,first:"1week",second:"1day"},Family:{enabled:!0,first:"1week",second:"1day"},Partner:{enabled:!0,first:"1week",second:"1day"},Work:{enabled:!0,first:"1week",second:"1day"},Other:{enabled:!0,first:"1week",second:"1day"}}),[T,E]=y.useState(!1),[w,b]=y.useState(!1),[C,R]=y.useState(""),[O,I]=y.useState(""),[S,k]=y.useState("birthday"),[P,D]=y.useState([]);y.useEffect(()=>{n!=null&&n.importantDates&&D(n.importantDates)},[n]),y.useEffect(()=>{n&&(a(n.displayName||""),c(n.birthDate||n.dob||""),h(n.photoURL||(e==null?void 0:e.photoURL)||""),m(n.notificationsEnabled||!1),n.notificationPreferences&&x(n.notificationPreferences))},[n,e]);const M=async()=>{if(e){E(!0);try{await er(et(le,"users",e.uid),{displayName:o,birthDate:l,photoURL:d,notificationsEnabled:p,notificationPreferences:_}),alert(t("profile_updated"))}catch(U){console.error(U),alert("Error updating profile")}finally{E(!1)}}},N=async()=>{if(!e)return;const U={title:"My Wishlist on WishU",text:"Hey! Check out my wishlist on WishU:",url:`${window.location.origin}/invite?from=${e.uid}`};if(navigator.share)try{await navigator.share(U)}catch(j){console.log("Error sharing",j)}else navigator.clipboard.writeText(U.url),b(!0),setTimeout(()=>b(!1),2e3)},Z=async()=>{const U=!p;m(U),U&&await s()},q=(U,j,L)=>{x(G=>({...G,[U]:{...G[U],[j]:L}}))},Y=async()=>{await r(),i("/")},z=[{label:"1 month before",value:"1month"},{label:"2 weeks before",value:"2weeks"},{label:"1 week before",value:"1week"},{label:"3 days before",value:"3days"}],F=[{label:"1 day before",value:"1day"},{label:"On the day of",value:"on-day"},{label:"None",value:"none"}];return f.jsxs("div",{className:"bg-white font-sans",children:[f.jsxs("main",{className:"px-6 space-y-8 pb-32",children:[f.jsx("div",{className:"flex justify-center",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 overflow-hidden border-4 border-white shadow-lg",children:d?f.jsx("img",{src:d,alt:"Profile",className:"w-full h-full object-cover"}):f.jsx(my,{className:"w-full h-full p-6 text-slate-400"})}),f.jsx("button",{className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full shadow-lg hover:scale-110 transition-transform",children:f.jsx(Y3,{size:16})})]})}),f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-500",children:f.jsx("span",{className:"text-lg font-bold",children:"Aa"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"font-bold text-darkbg",children:t("language_settings")}),f.jsx("p",{className:"text-xs text-slate-400",children:t("select_language")})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>at.changeLanguage("en"),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${at.language==="en"?"bg-darkbg text-white shadow-md":"bg-slate-50 text-slate-500 hover:bg-slate-100"}`,children:"English"}),f.jsx("button",{onClick:()=>at.changeLanguage("he"),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${at.language==="he"?"bg-darkbg text-white shadow-md":"bg-slate-50 text-slate-500 hover:bg-slate-100"}`,children:""})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-4 flex items-center gap-2",children:[f.jsx(my,{size:20,className:"text-primary"}),t("onboarding_step1_title")]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:t("full_name")}),f.jsx("input",{type:"text",value:o,onChange:U=>a(U.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-darkbg focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:t("birth_date")}),f.jsx("input",{type:"date",value:l,onChange:U=>c(U.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-darkbg focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),f.jsxs("div",{className:"pt-6 border-t border-slate-100 mt-6",children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Other Important Dates"}),f.jsx("div",{className:"space-y-3 mb-4",children:P.map((U,j)=>f.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-xl border border-slate-100",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-darkbg text-sm",children:U.title}),f.jsxs("p",{className:"text-xs text-slate-500 capitalize",children:[U.type,"  ",U.date]})]}),f.jsx("button",{onClick:async()=>{if(!e)return;const L=[...P];L.splice(j,1),D(L),await er(et(le,"users",e.uid),{importantDates:L})},className:"p-2 text-red-400 hover:bg-red-50 rounded-lg",children:f.jsx(_r,{size:16})})]},j))}),f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsx("input",{placeholder:"Title (e.g. Anniversary)",value:C,onChange:U=>R(U.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"date",value:O,onChange:U=>I(U.target.value),className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm"}),f.jsxs("select",{value:S,onChange:U=>k(U.target.value),className:"bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm",children:[f.jsx("option",{value:"birthday",children:"Birthday"}),f.jsx("option",{value:"anniversary",children:"Anniversary"}),f.jsx("option",{value:"other",children:"Other"})]})]})]}),f.jsx("button",{onClick:async()=>{if(!e||!C||!O)return;const U={title:C,date:O,type:S},j=[...P,U];D(j),R(""),I(""),await er(et(le,"users",e.uid),{importantDates:j}),alert(t("date_added")||"Date added! It will appear on your calendar.")},className:"bg-darkbg text-white p-3 rounded-xl shadow-lg hover:bg-black transition-colors",children:f.jsx(Vf,{size:20})})]}),(C||O)&&f.jsx("p",{className:"text-red-500 text-xs mt-2 font-bold animate-pulse",children:"Don't forget to click (+) to add this date!"})]})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-4 flex items-center gap-2",children:[f.jsx(Wc,{size:20,className:"text-primary"}),t("notifications_title")]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-darkbg",children:t("push_notifications")}),f.jsx("p",{className:"text-xs text-slate-400 mt-1 max-w-[200px]",children:t("push_notifications_desc")})]}),f.jsx("button",{onClick:Z,className:`w-12 h-6 rounded-full transition-colors relative ${p?"bg-primary":"bg-slate-200"}`,children:f.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${p?"translate-x-6":""}`})})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-6 flex items-center gap-2",children:[f.jsx(Wc,{size:20,className:"text-primary"}),"Notification Preferences"]}),f.jsx("div",{className:"space-y-8",children:["Friends","Family","Partner","Work","Other"].map(U=>{const j=_[U]||{enabled:!0,first:"1week",second:"1day"};return f.jsxs("div",{className:"space-y-4 border-b border-slate-50 pb-6 last:border-0 last:pb-0",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"font-bold text-darkbg flex items-center gap-2",children:U}),f.jsx("button",{onClick:()=>q(U,"enabled",!j.enabled),className:`w-10 h-5 rounded-full transition-colors relative ${j.enabled?"bg-primary":"bg-slate-200"}`,children:f.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${j.enabled?"translate-x-5":""}`})})]}),j.enabled&&f.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"First Reminder"}),f.jsx("select",{value:j.first,onChange:L=>q(U,"first",L.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-xl px-4 py-3 text-sm text-darkbg outline-none focus:ring-2 focus:ring-primary/20 appearance-none",children:z.map(L=>f.jsx("option",{value:L.value,children:L.label},L.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Follow-up Reminder"}),f.jsx("select",{value:j.second,onChange:L=>q(U,"second",L.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-xl px-4 py-3 text-sm text-darkbg outline-none focus:ring-2 focus:ring-primary/20 appearance-none",children:F.map(L=>f.jsx("option",{value:L.value,children:L.label},L.value))})]})]})]},U)})})]}),f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-secondary/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsxs("h2",{className:"text-lg font-bold text-darkbg mb-4 flex items-center gap-2",children:[f.jsx(Lh,{size:20,className:"text-primary"}),t("share_title")]}),f.jsx("p",{className:"text-sm text-slate-500 mb-6",children:t("share_desc")}),f.jsxs("button",{onClick:N,className:"w-full py-3 bg-darkbg text-white rounded-xl font-bold shadow-lg shadow-darkbg/20 flex items-center justify-center gap-2 active:scale-95 transition-all",children:[w?f.jsx(io,{size:18}):f.jsx(Lh,{size:18}),t(w?"copied":"share_button")]}),e&&f.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg flex items-center justify-between gap-2 overflow-hidden border border-slate-200",children:[f.jsxs("span",{className:"text-xs text-slate-500 truncate font-mono",children:[window.location.origin,"/invite?from=",e.uid]}),f.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/invite?from=${e.uid}`),b(!0),setTimeout(()=>b(!1),2e3)},className:"p-2 bg-white rounded-md shadow-sm border border-slate-100 hover:text-primary",children:w?f.jsx(io,{size:14}):f.jsx(X3,{size:14})})]})]}),(n==null?void 0:n.isAdmin)&&f.jsxs("section",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 flex items-center justify-between relative overflow-hidden group cursor-pointer",onClick:()=>i("/admin"),children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-deepNavy/5 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-deepNavy flex items-center justify-center text-white shadow-lg shadow-deepNavy/20 group-hover:scale-110 transition-transform duration-300",children:f.jsx(a5,{size:24})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold text-deepNavy group-hover:text-primaryPink transition-colors",children:"Admin Dashboard"}),f.jsx("p",{className:"text-sm text-slate-500",children:"View stats & activity"})]})]}),f.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 group-hover:bg-primaryPink group-hover:text-white transition-all",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("path",{d:"m9 18 6-6-6-6"})})})]}),f.jsxs("button",{onClick:Y,className:"w-full py-4 text-red-400 font-medium hover:text-red-500 flex items-center justify-center gap-2",children:[f.jsx(t5,{size:18}),"Log Out"]}),f.jsx("div",{className:"h-8"})," "]}),f.jsx("div",{className:"px-6 mb-12",children:f.jsxs("button",{onClick:M,disabled:T,className:"w-full bg-primary text-white py-4 rounded-xl font-bold shadow-lg shadow-primary/20 flex items-center justify-center gap-2 active:scale-95 transition-all",children:[T?f.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):f.jsx(io,{size:18}),t("save_changes")]})})]})},HG=()=>{const{id:t}=Xv(),e=Ct(),{user:n}=vt(),[r,s]=y.useState(null),[i,o]=y.useState(!0);return y.useEffect(()=>{(async()=>{if(t)try{const l=await Pu(et(le,"gifts",t));l.exists()&&s({id:l.id,...l.data()})}catch(l){console.error("Error fetching gift details",l)}finally{o(!1)}})()},[t]),i?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsx(Sn,{className:"animate-spin text-primary",size:32})}):r?f.jsxs("div",{className:"bg-white min-h-screen font-sans pb-40 overflow-x-hidden relative",children:[f.jsx("div",{className:"absolute bg-[#E79BE3] rounded-full z-0 opacity-95 shadow-inner",style:{top:"-10%",right:"-20%",width:"90vw",height:"90vw",maxWidth:"500px",maxHeight:"500px"}}),f.jsx("div",{className:"px-6 pt-4 relative z-20",children:f.jsx("button",{onClick:()=>e(-1),className:"w-10 h-10 bg-white/70 backdrop-blur-xl rounded-full flex items-center justify-center text-slate-600 hover:text-primary transition-all shadow-md border border-white/30",children:f.jsx(M0,{size:20})})}),f.jsxs("main",{className:"px-6 flex flex-col items-center relative z-10",children:[f.jsx("div",{className:"relative w-full flex justify-center items-center py-6 mt-12",children:f.jsxs("div",{className:"relative w-72 h-72 flex items-center justify-center translate-x-4",children:[r.imageUrl?f.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-contain relative z-10"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#E79BE3]/40",children:f.jsx(O0,{size:140,strokeWidth:.5})}),f.jsx("a",{href:Hy(r.link),target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-4 right-4 w-12 h-12 bg-[#DFE137] rounded-full flex items-center justify-center text-black shadow-xl hover:scale-110 active:scale-90 transition-transform z-20",children:f.jsx(cA,{size:20,strokeWidth:2.5})})]})}),f.jsxs("div",{className:"w-full mt-2 space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-3xl font-black text-[#0C0C4F] mb-1 leading-tight",children:r.title}),f.jsx("p",{className:"text-2xl font-black text-[#0C0C4F]",children:r.price||"Priceless"})]}),f.jsx("div",{className:"pt-2",children:f.jsx("p",{className:"text-slate-500 leading-relaxed font-light text-base text-center max-w-sm mx-auto",children:r.note||"This beautiful item is waiting to be yours. A perfect addition to any collection, crafted with care and designed to bring joy and elegance to your daily life."})}),f.jsx("div",{className:"pt-8 mb-10 flex flex-col items-center gap-2 opacity-10",children:f.jsxs("div",{className:"text-[10px] text-slate-400 font-mono tracking-tighter uppercase font-bold",children:["CODE: ",r.id.slice(0,8)]})})]})]}),f.jsx("div",{className:"fixed bottom-[105px] left-6 right-6 flex justify-center z-50 pointer-events-none",children:f.jsxs("a",{href:Hy(r.link),target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto bg-[#0C0C4F] text-white px-10 py-5 rounded-full font-bold uppercase tracking-[0.2em] text-xs shadow-2xl hover:scale-105 active:scale-95 transition-all flex items-center gap-3",children:["View in Store",f.jsx(sA,{size:16})]})})]}):f.jsxs("div",{className:"text-center py-20 px-6",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Gift Not Found"}),f.jsx("button",{onClick:()=>e(-1),className:"text-primary font-bold",children:"Go Back"})]})},GG="modulepreload",qG=function(t){return"/"+t},NT={},i2=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=qG(l),l in NT)return;NT[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":GG,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function KG(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const xp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ll(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Qw(t){return"nodeType"in t}function In(t){var e,n;return t?ll(t)?t:Qw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Yw(t){const{Document:e}=In(t);return t instanceof e}function Du(t){return ll(t)?!1:t instanceof In(t).HTMLElement}function o2(t){return t instanceof In(t).SVGElement}function cl(t){return t?ll(t)?t.document:Qw(t)?Yw(t)?t:Du(t)||o2(t)?t.ownerDocument:document:document:document}const Kr=xp?y.useLayoutEffect:y.useEffect;function Xw(t){const e=y.useRef(t);return Kr(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function QG(){const t=y.useRef(null),e=y.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function su(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return Kr(()=>{n.current!==t&&(n.current=t)},e),n}function Lu(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function uf(t){const e=Xw(t),n=y.useRef(null),r=y.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Qy(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let Xm={};function ju(t,e){return y.useMemo(()=>{if(e)return e;const n=Xm[t]==null?0:Xm[t]+1;return Xm[t]=n,t+"-"+n},[t,e])}function a2(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[l,c]of a){const d=i[l];d!=null&&(i[l]=d+t*c)}return i},{...e})}}const Ta=a2(1),iu=a2(-1);function YG(t){return"clientX"in t&&"clientY"in t}function Jw(t){if(!t)return!1;const{KeyboardEvent:e}=In(t.target);return e&&t instanceof e}function XG(t){if(!t)return!1;const{TouchEvent:e}=In(t.target);return e&&t instanceof e}function Yy(t){if(XG(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return YG(t)?{x:t.clientX,y:t.clientY}:null}const ou=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[ou.Translate.toString(t),ou.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),DT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function JG(t){return t.matches(DT)?t:t.querySelector(DT)}const ZG={display:"none"};function eq(t){let{id:e,value:n}=t;return un.createElement("div",{id:e,style:ZG},n)}function tq(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return un.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function nq(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const l2=y.createContext(null);function rq(t){const e=y.useContext(l2);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function sq(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const iq={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},oq={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function aq(t){let{announcements:e=oq,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=iq}=t;const{announce:i,announcement:o}=nq(),a=ju("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),rq(y.useMemo(()=>({onDragStart(h){let{active:p}=h;i(e.onDragStart({active:p}))},onDragMove(h){let{active:p,over:m}=h;e.onDragMove&&i(e.onDragMove({active:p,over:m}))},onDragOver(h){let{active:p,over:m}=h;i(e.onDragOver({active:p,over:m}))},onDragEnd(h){let{active:p,over:m}=h;i(e.onDragEnd({active:p,over:m}))},onDragCancel(h){let{active:p,over:m}=h;i(e.onDragCancel({active:p,over:m}))}}),[i,e])),!l)return null;const d=un.createElement(un.Fragment,null,un.createElement(eq,{id:r,value:s.draggable}),un.createElement(tq,{id:a,announcement:o}));return n?ra.createPortal(d,n):d}var Et;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Et||(Et={}));function df(){}function LT(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function lq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Er=Object.freeze({x:0,y:0});function c2(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function u2(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function cq(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function jT(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function d2(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function MT(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const uq=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=MT(e,e.left,e.top),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=c2(MT(l),s);i.push({id:a,data:{droppableContainer:o,value:c}})}}return i.sort(u2)},dq=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=jT(e),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=jT(l),d=s.reduce((p,m,_)=>p+c2(c[_],m),0),h=Number((d/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:h}})}}return i.sort(u2)};function hq(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const l=e.width*e.height,c=t.width*t.height,d=o*a,h=d/(l+c-d);return Number(h.toFixed(4))}return 0}const fq=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const l=hq(a,e);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(cq)};function pq(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function h2(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Er}function mq(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const gq=mq(1);function yq(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function vq(t,e,n){const r=yq(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,l=t.left-o-(1-s)*parseFloat(n),c=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?t.width/s:t.width,h=i?t.height/i:t.height;return{width:d,height:h,top:c,right:l+d,bottom:c+h,left:l}}const wq={ignoreTransform:!1};function ul(t,e){e===void 0&&(e=wq);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=In(t).getComputedStyle(t);c&&(n=vq(n,c,d))}const{top:r,left:s,width:i,height:o,bottom:a,right:l}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:l}}function OT(t){return ul(t,{ignoreTransform:!0})}function xq(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function _q(t,e){return e===void 0&&(e=In(t).getComputedStyle(t)),e.position==="fixed"}function bq(t,e){e===void 0&&(e=In(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function _p(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Yw(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Du(s)||o2(s)||n.includes(s))return n;const i=In(t).getComputedStyle(s);return s!==t&&bq(s,i)&&n.push(s),_q(s,i)?n:r(s.parentNode)}return t?r(t):n}function f2(t){const[e]=_p(t,1);return e??null}function Jm(t){return!xp||!t?null:ll(t)?t:Qw(t)?Yw(t)||t===cl(t).scrollingElement?window:Du(t)?t:null:null}function p2(t){return ll(t)?t.scrollX:t.scrollLeft}function m2(t){return ll(t)?t.scrollY:t.scrollTop}function Xy(t){return{x:p2(t),y:m2(t)}}var Nt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Nt||(Nt={}));function g2(t){return!xp||!t?!1:t===document.scrollingElement}function y2(t){const e={x:0,y:0},n=g2(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const Eq={x:.2,y:.2};function Tq(t,e,n,r,s){let{top:i,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=Eq);const{isTop:c,isBottom:d,isLeft:h,isRight:p}=y2(t),m={x:0,y:0},_={x:0,y:0},x={height:e.height*s.y,width:e.width*s.x};return!c&&i<=e.top+x.height?(m.y=Nt.Backward,_.y=r*Math.abs((e.top+x.height-i)/x.height)):!d&&l>=e.bottom-x.height&&(m.y=Nt.Forward,_.y=r*Math.abs((e.bottom-x.height-l)/x.height)),!p&&a>=e.right-x.width?(m.x=Nt.Forward,_.x=r*Math.abs((e.right-x.width-a)/x.width)):!h&&o<=e.left+x.width&&(m.x=Nt.Backward,_.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:m,speed:_}}function Sq(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function v2(t){return t.reduce((e,n)=>Ta(e,Xy(n)),Er)}function Iq(t){return t.reduce((e,n)=>e+p2(n),0)}function Cq(t){return t.reduce((e,n)=>e+m2(n),0)}function kq(t,e){if(e===void 0&&(e=ul),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);f2(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Aq=[["x",["left","right"],Iq],["y",["top","bottom"],Cq]];class Zw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_p(n),s=v2(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of Aq)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),d=s[i]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Rq(t){const{EventTarget:e}=In(t);return t instanceof e?t:cl(t)}function Zm(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Kn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Kn||(Kn={}));function VT(t){t.preventDefault()}function Pq(t){t.stopPropagation()}var Ie;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ie||(Ie={}));const w2={start:[Ie.Space,Ie.Enter],cancel:[Ie.Esc],end:[Ie.Space,Ie.Enter,Ie.Tab]},Nq=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ie.Right:return{...n,x:n.x+25};case Ie.Left:return{...n,x:n.x-25};case Ie.Down:return{...n,y:n.y+25};case Ie.Up:return{...n,y:n.y-25}}};class ex{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new vc(cl(n)),this.windowListeners=new vc(In(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Kn.Resize,this.handleCancel),this.windowListeners.add(Kn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Kn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&kq(r),n(Er)}handleKeyDown(e){if(Jw(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=w2,coordinateGetter:o=Nq,scrollBehavior:a="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:Er;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(e,{active:n,context:r.current,currentCoordinates:d});if(h){const p=iu(h,d),m={x:0,y:0},{scrollableAncestors:_}=r.current;for(const x of _){const T=e.code,{isTop:E,isRight:w,isLeft:b,isBottom:C,maxScroll:R,minScroll:O}=y2(x),I=Sq(x),S={x:Math.min(T===Ie.Right?I.right-I.width/2:I.right,Math.max(T===Ie.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(T===Ie.Down?I.bottom-I.height/2:I.bottom,Math.max(T===Ie.Down?I.top:I.top+I.height/2,h.y))},k=T===Ie.Right&&!w||T===Ie.Left&&!b,P=T===Ie.Down&&!C||T===Ie.Up&&!E;if(k&&S.x!==h.x){const D=x.scrollLeft+p.x,M=T===Ie.Right&&D<=R.x||T===Ie.Left&&D>=O.x;if(M&&!p.y){x.scrollTo({left:D,behavior:a});return}M?m.x=x.scrollLeft-D:m.x=T===Ie.Right?x.scrollLeft-R.x:x.scrollLeft-O.x,m.x&&x.scrollBy({left:-m.x,behavior:a});break}else if(P&&S.y!==h.y){const D=x.scrollTop+p.y,M=T===Ie.Down&&D<=R.y||T===Ie.Up&&D>=O.y;if(M&&!p.x){x.scrollTo({top:D,behavior:a});return}M?m.y=x.scrollTop-D:m.y=T===Ie.Down?x.scrollTop-R.y:x.scrollTop-O.y,m.y&&x.scrollBy({top:-m.y,behavior:a});break}}this.handleMove(e,Ta(iu(h,this.referenceCoordinates),m))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ex.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=w2,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function FT(t){return!!(t&&"distance"in t)}function UT(t){return!!(t&&"delay"in t)}class tx{constructor(e,n,r){var s;r===void 0&&(r=Rq(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=cl(o),this.documentListeners=new vc(this.document),this.listeners=new vc(r),this.windowListeners=new vc(In(o)),this.initialCoordinates=(s=Yy(i))!=null?s:Er,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Kn.Resize,this.handleCancel),this.windowListeners.add(Kn.DragStart,VT),this.windowListeners.add(Kn.VisibilityChange,this.handleCancel),this.windowListeners.add(Kn.ContextMenu,VT),this.documentListeners.add(Kn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(UT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(FT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Kn.Click,Pq,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Kn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(n=Yy(e))!=null?n:Er,c=iu(s,l);if(!r&&a){if(FT(a)){if(a.tolerance!=null&&Zm(c,a.tolerance))return this.handleCancel();if(Zm(c,a.distance))return this.handleStart()}if(UT(a)&&Zm(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ie.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Dq={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nx extends tx{constructor(e){const{event:n}=e,r=cl(n.target);super(e,Dq,r)}}nx.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Lq={move:{name:"mousemove"},end:{name:"mouseup"}};var Jy;(function(t){t[t.RightClick=2]="RightClick"})(Jy||(Jy={}));class jq extends tx{constructor(e){super(e,Lq,cl(e.event.target))}}jq.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Jy.RightClick?!1:(r==null||r({event:n}),!0)}}];const eg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Mq extends tx{constructor(e){super(e,eg)}static setup(){return window.addEventListener(eg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eg.move.name,e)};function e(){}}}Mq.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var wc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(wc||(wc={}));var hf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(hf||(hf={}));function Oq(t){let{acceleration:e,activator:n=wc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=hf.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:h,threshold:p}=t;const m=Fq({delta:h,disabled:!i}),[_,x]=QG(),T=y.useRef({x:0,y:0}),E=y.useRef({x:0,y:0}),w=y.useMemo(()=>{switch(n){case wc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case wc.DraggableRect:return s}},[n,s,l]),b=y.useRef(null),C=y.useCallback(()=>{const O=b.current;if(!O)return;const I=T.current.x*E.current.x,S=T.current.y*E.current.y;O.scrollBy(I,S)},[]),R=y.useMemo(()=>a===hf.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!i||!c.length||!w){x();return}for(const O of R){if((r==null?void 0:r(O))===!1)continue;const I=c.indexOf(O),S=d[I];if(!S)continue;const{direction:k,speed:P}=Tq(O,S,w,e,p);for(const D of["x","y"])m[D][k[D]]||(P[D]=0,k[D]=0);if(P.x>0||P.y>0){x(),b.current=O,_(C,o),T.current=P,E.current=k;return}}T.current={x:0,y:0},E.current={x:0,y:0},x()},[e,C,r,x,i,o,JSON.stringify(w),JSON.stringify(m),_,c,R,d,JSON.stringify(p)])}const Vq={x:{[Nt.Backward]:!1,[Nt.Forward]:!1},y:{[Nt.Backward]:!1,[Nt.Forward]:!1}};function Fq(t){let{delta:e,disabled:n}=t;const r=Qy(e);return Lu(s=>{if(n||!r||!s)return Vq;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Nt.Backward]:s.x[Nt.Backward]||i.x===-1,[Nt.Forward]:s.x[Nt.Forward]||i.x===1},y:{[Nt.Backward]:s.y[Nt.Backward]||i.y===-1,[Nt.Forward]:s.y[Nt.Forward]||i.y===1}}},[n,e,r])}function Uq(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Lu(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function Bq(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var au;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(au||(au={}));var Zy;(function(t){t.Optimized="optimized"})(Zy||(Zy={}));const BT=new Map;function $q(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=y.useState(null),{frequency:a,measure:l,strategy:c}=s,d=y.useRef(t),h=T(),p=su(h),m=y.useCallback(function(E){E===void 0&&(E=[]),!p.current&&o(w=>w===null?E:w.concat(E.filter(b=>!w.includes(b))))},[p]),_=y.useRef(null),x=Lu(E=>{if(h&&!n)return BT;if(!E||E===BT||d.current!==t||i!=null){const w=new Map;for(let b of t){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const C=b.node.current,R=C?new Zw(l(C),C):null;b.rect.current=R,R&&w.set(b.id,R)}return w}return E},[t,i,n,h,l]);return y.useEffect(()=>{d.current=t},[t]),y.useEffect(()=>{h||m()},[n,h]),y.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),y.useEffect(()=>{h||typeof a!="number"||_.current!==null||(_.current=setTimeout(()=>{m(),_.current=null},a))},[a,h,m,...r]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:i!=null};function T(){switch(c){case au.Always:return!1;case au.BeforeDragging:return n;default:return!n}}}function x2(t,e){return Lu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function zq(t,e){return x2(t,e)}function Wq(t){let{callback:e,disabled:n}=t;const r=Xw(e),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function bp(t){let{callback:e,disabled:n}=t;const r=Xw(e),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Hq(t){return new Zw(ul(t),t)}function $T(t,e,n){e===void 0&&(e=Hq);const[r,s]=y.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const o=Wq({callback(l){if(t)for(const c of l){const{type:d,target:h}=c;if(d==="childList"&&h instanceof HTMLElement&&h.contains(t)){i();break}}}}),a=bp({callback:i});return Kr(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function Gq(t){const e=x2(t);return h2(t,e)}const zT=[];function qq(t){const e=y.useRef(t),n=Lu(r=>t?r&&r!==zT&&t&&e.current&&t.parentNode===e.current.parentNode?r:_p(t):zT,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function Kq(t){const[e,n]=y.useState(null),r=y.useRef(t),s=y.useCallback(i=>{const o=Jm(i.target);o&&n(a=>a?(a.set(o,Xy(o)),new Map(a)):null)},[]);return y.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(l=>{const c=Jm(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,Xy(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(l=>{const c=Jm(l);c==null||c.removeEventListener("scroll",s)})}},[s,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Ta(i,o),Er):v2(t):Er,[t,e])}function WT(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==Er;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?iu(t,n.current):Er}function Qq(t){y.useEffect(()=>{if(!xp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Yq(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function _2(t){return y.useMemo(()=>t?xq(t):null,[t])}const HT=[];function Xq(t,e){e===void 0&&(e=ul);const[n]=t,r=_2(n?In(n):null),[s,i]=y.useState(HT);function o(){i(()=>t.length?t.map(l=>g2(l)?r:new Zw(e(l),l)):HT)}const a=bp({callback:o});return Kr(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),s}function Jq(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Du(e)?e:t}function Zq(t){let{measure:e}=t;const[n,r]=y.useState(null),s=y.useCallback(c=>{for(const{target:d}of c)if(Du(d)){r(h=>{const p=e(d);return h?{...h,width:p.width,height:p.height}:p});break}},[e]),i=bp({callback:s}),o=y.useCallback(c=>{const d=Jq(c);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?e(d):null)},[e,i]),[a,l]=uf(o);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const eK=[{sensor:nx,options:{}},{sensor:ex,options:{}}],tK={current:{}},eh={draggable:{measure:OT},droppable:{measure:OT,strategy:au.WhileDragging,frequency:Zy.Optimized},dragOverlay:{measure:ul}};class xc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const nK={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new xc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:df},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eh,measureDroppableContainers:df,windowRect:null,measuringScheduled:!1},rK={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:df,draggableNodes:new Map,over:null,measureDroppableContainers:df},Ep=y.createContext(rK),b2=y.createContext(nK);function sK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new xc}}}function iK(t,e){switch(e.type){case Et.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Et.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Et.DragEnd:case Et.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Et.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new xc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Et.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new xc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Et.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new xc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function oK(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=y.useContext(Ep),i=Qy(r),o=Qy(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Jw(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const h=JG(d);if(h){h.focus();break}}})}},[r,e,s,o,i]),null}function aK(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function lK(t){return y.useMemo(()=>({draggable:{...eh.draggable,...t==null?void 0:t.draggable},droppable:{...eh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...eh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function cK(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=y.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Kr(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=n(c),h=h2(d,r);if(o||(h.x=0),a||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=f2(c);p&&p.scrollBy({top:h.y,left:h.x})}},[e,o,a,r,n])}const E2=y.createContext({...Er,scaleX:1,scaleY:1});var Bs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Bs||(Bs={}));const uK=y.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:d=eK,collisionDetection:h=fq,measuring:p,modifiers:m,..._}=e;const x=y.useReducer(iK,void 0,sK),[T,E]=x,[w,b]=sq(),[C,R]=y.useState(Bs.Uninitialized),O=C===Bs.Initialized,{draggable:{active:I,nodes:S,translate:k},droppable:{containers:P}}=T,D=I!=null?S.get(I):null,M=y.useRef({initial:null,translated:null}),N=y.useMemo(()=>{var Re;return I!=null?{id:I,data:(Re=D==null?void 0:D.data)!=null?Re:tK,rect:M}:null},[I,D]),Z=y.useRef(null),[q,Y]=y.useState(null),[z,F]=y.useState(null),U=su(_,Object.values(_)),j=ju("DndDescribedBy",o),L=y.useMemo(()=>P.getEnabled(),[P]),G=lK(p),{droppableRects:ee,measureDroppableContainers:re,measuringScheduled:oe}=$q(L,{dragging:O,dependencies:[k.x,k.y],config:G.droppable}),te=Uq(S,I),ne=y.useMemo(()=>z?Yy(z):null,[z]),ce=Vu(),we=zq(te,G.draggable.measure);cK({activeNode:I!=null?S.get(I):null,config:ce.layoutShiftCompensation,initialRect:we,measure:G.draggable.measure});const ie=$T(te,G.draggable.measure,we),ke=$T(te?te.parentElement:null),_e=y.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Le=P.getNodeFor((n=_e.current.over)==null?void 0:n.id),he=Zq({measure:G.dragOverlay.measure}),Qe=(r=he.nodeRef.current)!=null?r:te,rt=O?(s=he.rect)!=null?s:ie:null,kt=!!(he.nodeRef.current&&he.rect),sn=Gq(kt?null:ie),je=_2(Qe?In(Qe):null),Se=qq(O?Le??te:null),ar=Xq(Se),Cs=aK(m,{transform:{x:k.x-sn.x,y:k.y-sn.y,scaleX:1,scaleY:1},activatorEvent:z,active:N,activeNodeRect:ie,containerNodeRect:ke,draggingNodeRect:rt,over:_e.current.over,overlayNodeRect:he.rect,scrollableAncestors:Se,scrollableAncestorRects:ar,windowRect:je}),Ai=ne?Ta(ne,k):null,Ri=Kq(Se),Yr=WT(Ri),Pi=WT(Ri,[ie]),lr=Ta(Cs,Yr),Wn=rt?gq(rt,Cs):null,Ir=N&&Wn?h({active:N,collisionRect:Wn,droppableRects:ee,droppableContainers:L,pointerCoordinates:Ai}):null,Ni=d2(Ir,"id"),[on,Di]=y.useState(null),Xr=kt?Cs:Ta(Cs,Pi),dl=pq(Xr,(i=on==null?void 0:on.rect)!=null?i:null,ie),Li=y.useRef(null),Cr=y.useCallback((Re,zt)=>{let{sensor:wt,options:gn}=zt;if(Z.current==null)return;const yn=S.get(Z.current);if(!yn)return;const an=Re.nativeEvent,Mt=new wt({active:Z.current,activeNode:yn,event:an,options:gn,context:_e,onAbort(xt){if(!S.get(xt))return;const{onDragAbort:kn}=U.current,Hn={id:xt};kn==null||kn(Hn),w({type:"onDragAbort",event:Hn})},onPending(xt,Cn,kn,Hn){if(!S.get(xt))return;const{onDragPending:cr}=U.current,kr={id:xt,constraint:Cn,initialCoordinates:kn,offset:Hn};cr==null||cr(kr),w({type:"onDragPending",event:kr})},onStart(xt){const Cn=Z.current;if(Cn==null)return;const kn=S.get(Cn);if(!kn)return;const{onDragStart:Hn}=U.current,Jr={activatorEvent:an,active:{id:Cn,data:kn.data,rect:M}};ra.unstable_batchedUpdates(()=>{Hn==null||Hn(Jr),R(Bs.Initializing),E({type:Et.DragStart,initialCoordinates:xt,active:Cn}),w({type:"onDragStart",event:Jr}),Y(Li.current),F(an)})},onMove(xt){E({type:Et.DragMove,coordinates:xt})},onEnd:ks(Et.DragEnd),onCancel:ks(Et.DragCancel)});Li.current=Mt;function ks(xt){return async function(){const{active:kn,collisions:Hn,over:Jr,scrollAdjustedTranslate:cr}=_e.current;let kr=null;if(kn&&cr){const{cancelDrop:vn}=U.current;kr={activatorEvent:an,active:kn,collisions:Hn,delta:cr,over:Jr},xt===Et.DragEnd&&typeof vn=="function"&&await Promise.resolve(vn(kr))&&(xt=Et.DragCancel)}Z.current=null,ra.unstable_batchedUpdates(()=>{E({type:xt}),R(Bs.Uninitialized),Di(null),Y(null),F(null),Li.current=null;const vn=xt===Et.DragEnd?"onDragEnd":"onDragCancel";if(kr){const jo=U.current[vn];jo==null||jo(kr),w({type:vn,event:kr})}})}}},[S]),Mu=y.useCallback((Re,zt)=>(wt,gn)=>{const yn=wt.nativeEvent,an=S.get(gn);if(Z.current!==null||!an||yn.dndKit||yn.defaultPrevented)return;const Mt={active:an};Re(wt,zt.options,Mt)===!0&&(yn.dndKit={capturedBy:zt.sensor},Z.current=gn,Cr(wt,zt))},[S,Cr]),ji=Bq(d,Mu);Qq(d),Kr(()=>{ie&&C===Bs.Initializing&&R(Bs.Initialized)},[ie,C]),y.useEffect(()=>{const{onDragMove:Re}=U.current,{active:zt,activatorEvent:wt,collisions:gn,over:yn}=_e.current;if(!zt||!wt)return;const an={active:zt,activatorEvent:wt,collisions:gn,delta:{x:lr.x,y:lr.y},over:yn};ra.unstable_batchedUpdates(()=>{Re==null||Re(an),w({type:"onDragMove",event:an})})},[lr.x,lr.y]),y.useEffect(()=>{const{active:Re,activatorEvent:zt,collisions:wt,droppableContainers:gn,scrollAdjustedTranslate:yn}=_e.current;if(!Re||Z.current==null||!zt||!yn)return;const{onDragOver:an}=U.current,Mt=gn.get(Ni),ks=Mt&&Mt.rect.current?{id:Mt.id,rect:Mt.rect.current,data:Mt.data,disabled:Mt.disabled}:null,xt={active:Re,activatorEvent:zt,collisions:wt,delta:{x:yn.x,y:yn.y},over:ks};ra.unstable_batchedUpdates(()=>{Di(ks),an==null||an(xt),w({type:"onDragOver",event:xt})})},[Ni]),Kr(()=>{_e.current={activatorEvent:z,active:N,activeNode:te,collisionRect:Wn,collisions:Ir,droppableRects:ee,draggableNodes:S,draggingNode:Qe,draggingNodeRect:rt,droppableContainers:P,over:on,scrollableAncestors:Se,scrollAdjustedTranslate:lr},M.current={initial:rt,translated:Wn}},[N,te,Ir,Wn,S,Qe,rt,ee,P,on,Se,lr]),Oq({...ce,delta:k,draggingRect:Wn,pointerCoordinates:Ai,scrollableAncestors:Se,scrollableAncestorRects:ar});const Ou=y.useMemo(()=>({active:N,activeNode:te,activeNodeRect:ie,activatorEvent:z,collisions:Ir,containerNodeRect:ke,dragOverlay:he,draggableNodes:S,droppableContainers:P,droppableRects:ee,over:on,measureDroppableContainers:re,scrollableAncestors:Se,scrollableAncestorRects:ar,measuringConfiguration:G,measuringScheduled:oe,windowRect:je}),[N,te,ie,z,Ir,ke,he,S,P,ee,on,re,Se,ar,G,oe,je]),Mi=y.useMemo(()=>({activatorEvent:z,activators:ji,active:N,activeNodeRect:ie,ariaDescribedById:{draggable:j},dispatch:E,draggableNodes:S,over:on,measureDroppableContainers:re}),[z,ji,N,ie,E,j,S,on,re]);return un.createElement(l2.Provider,{value:b},un.createElement(Ep.Provider,{value:Mi},un.createElement(b2.Provider,{value:Ou},un.createElement(E2.Provider,{value:dl},c)),un.createElement(oK,{disabled:(a==null?void 0:a.restoreFocus)===!1})),un.createElement(aq,{...a,hiddenTextDescribedById:j}));function Vu(){const Re=(q==null?void 0:q.autoScrollEnabled)===!1,zt=typeof l=="object"?l.enabled===!1:l===!1,wt=O&&!Re&&!zt;return typeof l=="object"?{...l,enabled:wt}:{enabled:wt}}}),dK=y.createContext(null),GT="button",hK="Draggable";function fK(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=ju(hK),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:h,over:p}=y.useContext(Ep),{role:m=GT,roleDescription:_="draggable",tabIndex:x=0}=s??{},T=(l==null?void 0:l.id)===e,E=y.useContext(T?E2:dK),[w,b]=uf(),[C,R]=uf(),O=Yq(o,e),I=su(n);Kr(()=>(h.set(e,{id:e,key:i,node:w,activatorNode:C,data:I}),()=>{const k=h.get(e);k&&k.key===i&&h.delete(e)}),[h,e]);const S=y.useMemo(()=>({role:m,tabIndex:x,"aria-disabled":r,"aria-pressed":T&&m===GT?!0:void 0,"aria-roledescription":_,"aria-describedby":d.draggable}),[r,m,x,T,_,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:S,isDragging:T,listeners:r?void 0:O,node:w,over:p,setNodeRef:b,setActivatorNodeRef:R,transform:E}}function pK(){return y.useContext(b2)}const mK="Droppable",gK={timeout:25};function yK(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=ju(mK),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(Ep),d=y.useRef({disabled:n}),h=y.useRef(!1),p=y.useRef(null),m=y.useRef(null),{disabled:_,updateMeasurementsFor:x,timeout:T}={...gK,...s},E=su(x??r),w=y.useCallback(()=>{if(!h.current){h.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(E.current)?E.current:[E.current]),m.current=null},T)},[T]),b=bp({callback:w,disabled:_||!o}),C=y.useCallback((S,k)=>{b&&(k&&(b.unobserve(k),h.current=!1),S&&b.observe(S))},[b]),[R,O]=uf(C),I=su(e);return y.useEffect(()=>{!b||!R.current||(b.disconnect(),h.current=!1,b.observe(R.current))},[R,b]),y.useEffect(()=>(a({type:Et.RegisterDroppable,element:{id:r,key:i,disabled:n,node:R,rect:p,data:I}}),()=>a({type:Et.UnregisterDroppable,key:i,id:r})),[r]),y.useEffect(()=>{n!==d.current.disabled&&(a({type:Et.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,a]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:R,over:l,setNodeRef:O}}function rx(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function vK(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Sd(t){return t!==null&&t>=0}function wK(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function xK(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const T2=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=rx(e,r,n),o=e[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},Id={scaleX:1,scaleY:1},_K=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const a=(e=i[n])!=null?e:r;if(!a)return null;if(s===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...Id}:null}const l=bK(i,s,n);return s>n&&s<=o?{x:0,y:-a.height-l,...Id}:s<n&&s>=o?{x:0,y:a.height+l,...Id}:{x:0,y:0,...Id}};function bK(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const S2="Sortable",I2=un.createContext({activeIndex:-1,containerId:S2,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:T2,disabled:{draggable:!1,droppable:!1}});function EK(t){let{children:e,id:n,items:r,strategy:s=T2,disabled:i=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:d}=pK(),h=ju(S2,n),p=a.rect!==null,m=y.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),_=o!=null,x=o?m.indexOf(o.id):-1,T=c?m.indexOf(c.id):-1,E=y.useRef(m),w=!wK(m,E.current),b=T!==-1&&x===-1||w,C=xK(i);Kr(()=>{w&&_&&d(m)},[w,m,_,d]),y.useEffect(()=>{E.current=m},[m]);const R=y.useMemo(()=>({activeIndex:x,containerId:h,disabled:C,disableTransforms:b,items:m,overIndex:T,useDragOverlay:p,sortedRects:vK(m,l),strategy:s}),[x,h,C.draggable,C.droppable,b,m,T,l,p,s]);return un.createElement(I2.Provider,{value:R},e)}const TK=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return rx(n,r,s).indexOf(e)},SK=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==i&&s===o?!1:n?!0:o!==s&&e===l},IK={duration:200,easing:"ease"},C2="transform",CK=ou.Transition.toString({property:C2,duration:0,easing:"linear"}),kK={roleDescription:"sortable"};function AK(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=y.useState(null),a=y.useRef(n);return Kr(()=>{if(!e&&n!==a.current&&r.current){const l=s.current;if(l){const c=ul(r.current,{ignoreTransform:!0}),d={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(d.x||d.y)&&o(d)}}n!==a.current&&(a.current=n)},[e,n,r,s]),y.useEffect(()=>{i&&o(null)},[i]),i}function RK(t){let{animateLayoutChanges:e=SK,attributes:n,disabled:r,data:s,getNewIndex:i=TK,id:o,strategy:a,resizeObserverConfig:l,transition:c=IK}=t;const{items:d,containerId:h,activeIndex:p,disabled:m,disableTransforms:_,sortedRects:x,overIndex:T,useDragOverlay:E,strategy:w}=y.useContext(I2),b=PK(r,m),C=d.indexOf(o),R=y.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...s}),[h,s,C,d]),O=y.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:I,node:S,isOver:k,setNodeRef:P}=yK({id:o,data:R,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...l}}),{active:D,activatorEvent:M,activeNodeRect:N,attributes:Z,setNodeRef:q,listeners:Y,isDragging:z,over:F,setActivatorNodeRef:U,transform:j}=fK({id:o,data:R,attributes:{...kK,...n},disabled:b.draggable}),L=KG(P,q),G=!!D,ee=G&&!_&&Sd(p)&&Sd(T),re=!E&&z,oe=re&&ee?j:null,ne=ee?oe??(a??w)({rects:x,activeNodeRect:N,activeIndex:p,overIndex:T,index:C}):null,ce=Sd(p)&&Sd(T)?i({id:o,items:d,activeIndex:p,overIndex:T}):C,we=D==null?void 0:D.id,ie=y.useRef({activeId:we,items:d,newIndex:ce,containerId:h}),ke=d!==ie.current.items,_e=e({active:D,containerId:h,isDragging:z,isSorting:G,id:o,index:C,items:d,newIndex:ie.current.newIndex,previousItems:ie.current.items,previousContainerId:ie.current.containerId,transition:c,wasDragging:ie.current.activeId!=null}),Le=AK({disabled:!_e,index:C,node:S,rect:I});return y.useEffect(()=>{G&&ie.current.newIndex!==ce&&(ie.current.newIndex=ce),h!==ie.current.containerId&&(ie.current.containerId=h),d!==ie.current.items&&(ie.current.items=d)},[G,ce,h,d]),y.useEffect(()=>{if(we===ie.current.activeId)return;if(we!=null&&ie.current.activeId==null){ie.current.activeId=we;return}const Qe=setTimeout(()=>{ie.current.activeId=we},50);return()=>clearTimeout(Qe)},[we]),{active:D,activeIndex:p,attributes:Z,data:R,rect:I,index:C,newIndex:ce,items:d,isOver:k,isSorting:G,isDragging:z,listeners:Y,node:S,overIndex:T,over:F,setNodeRef:L,setActivatorNodeRef:U,setDroppableNodeRef:P,setDraggableNodeRef:q,transform:Le??ne,transition:he()};function he(){if(Le||ke&&ie.current.newIndex===C)return CK;if(!(re&&!Jw(M)||!c)&&(G||_e))return ou.Transition.toString({...c,property:C2})}}function PK(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function ff(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const NK=[Ie.Down,Ie.Right,Ie.Up,Ie.Left],DK=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:a}}=e;if(NK.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=s.get(h.id);if(p)switch(t.code){case Ie.Down:r.top<p.top&&l.push(h);break;case Ie.Up:r.top>p.top&&l.push(h);break;case Ie.Left:r.left>p.left&&l.push(h);break;case Ie.Right:r.left<p.left&&l.push(h);break}});const c=dq({collisionRect:r,droppableRects:s,droppableContainers:l});let d=d2(c,"id");if(d===(o==null?void 0:o.id)&&c.length>1&&(d=c[1].id),d!=null){const h=i.get(n.id),p=i.get(d),m=p?s.get(p.id):null,_=p==null?void 0:p.node.current;if(_&&m&&h&&p){const T=_p(_).some((O,I)=>a[I]!==O),E=k2(h,p),w=LK(h,p),b=T||!E?{x:0,y:0}:{x:w?r.width-m.width:0,y:w?r.height-m.height:0},C={x:m.left,y:m.top};return b.x&&b.y?C:iu(C,b)}}}};function k2(t,e){return!ff(t)||!ff(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function LK(t,e){return!ff(t)||!ff(e)||!k2(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const jK=({id:t,gift:e,index:n,onRemove:r})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l}=RK({id:t}),c={transform:ou.Transform.toString(a),transition:l};return f.jsxs("div",{ref:o,style:c,...s,...i,className:"bg-white p-3 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-3 mb-3 touch-none",children:[f.jsx("div",{className:"text-slate-300",children:f.jsx(J3,{size:20})}),f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${n===0?"bg-yellow-100 text-yellow-600":n===1?"bg-slate-100 text-slate-500":n===2?"bg-orange-100 text-orange-600":"bg-slate-50 text-slate-400"}`,children:n<3?f.jsx(dA,{size:14}):n+1}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("p",{className:"font-medium text-darkbg truncate",children:(e==null?void 0:e.title)||"Unknown Gift"})}),f.jsx("button",{onClick:()=>r(t),className:"p-2 text-slate-300 hover:text-red-400",children:f.jsx(_r,{size:18})})]})},MK=()=>{const{user:t,userProfile:e}=vt(),[n,r]=y.useState([]),[s,i]=y.useState([]),[o,a]=y.useState(""),l=lq(LT(nx,{activationConstraint:{distance:5}}),LT(ex,{coordinateGetter:DK}));y.useEffect(()=>{(async()=>{if(t)try{e!=null&&e.top5&&i(e.top5);const{collection:T,query:E,where:w,getDocs:b}=await i2(async()=>{const{collection:I,query:S,where:k,getDocs:P}=await Promise.resolve().then(()=>QP);return{collection:I,query:S,where:k,getDocs:P}},[]),C=E(T(le,"gifts"),w("ownerId","==",t.uid)),O=(await b(C)).docs.map(I=>({id:I.id,...I.data()}));r(O)}catch(T){console.error("Error loading top 5 data",T)}})()},[t,e]);const c=x=>{const{active:T,over:E}=x;T.id!==E.id&&i(w=>{const b=w.indexOf(T.id),C=w.indexOf(E.id),R=rx(w,b,C);return d(R),R})},d=async x=>{if(t)try{await er(et(le,"users",t.uid),{top5:x})}catch(T){console.error("Error saving top 5",T)}},h=x=>{if(s.length>=5){alert("You can only have 5 top wishes! Remove one first.");return}if(s.includes(x))return;const T=[...s,x];i(T),d(T)},p=x=>{const T=s.filter(E=>E!==x);i(T),d(T)},m=s.map(x=>n.find(T=>T.id===x)).filter(Boolean),_=n.filter(x=>{var T;return!s.includes(x.id)&&((T=x.title)==null?void 0:T.toLowerCase().includes(o.toLowerCase()))});return f.jsxs("div",{className:"min-h-screen bg-lightbg font-sans pb-32",children:[f.jsxs("header",{className:"bg-darkbg text-white px-6 pt-12 pb-8 rounded-b-3xl shadow-xl mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(dA,{className:"text-yellow-400",size:24}),f.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Top 5 Wishes"})]}),f.jsx("p",{className:"text-slate-400 text-sm",children:"Rank your most wanted gifts for your partner to see."})]}),f.jsxs("main",{className:"px-6 space-y-6",children:[f.jsxs("section",{children:[f.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3 flex justify-between",children:f.jsxs("span",{children:["Your Top 5 (",s.length,"/5)"]})}),f.jsx(uK,{sensors:l,collisionDetection:uq,onDragEnd:c,children:f.jsx(EK,{items:s,strategy:_K,children:f.jsxs("div",{className:"space-y-1",children:[m.map((x,T)=>f.jsx(jK,{id:x.id,gift:x,index:T,onRemove:p},x.id)),s.length===0&&f.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center text-slate-400",children:[f.jsx(E1,{size:32,className:"mb-2 opacity-20"}),f.jsx("p",{className:"text-sm",children:"Drag or add gifts here"})]})]})})})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Add from Wishlist"}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx(lA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-300",size:16}),f.jsx("input",{type:"text",placeholder:"Search gifts...",value:o,onChange:x=>a(x.target.value),className:"w-full bg-white pl-9 pr-4 py-3 rounded-xl border border-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),f.jsxs("div",{className:"space-y-3",children:[_.map(x=>f.jsxs(Ge.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-white p-3 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[f.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0",children:x.imageUrl?f.jsx("img",{src:x.imageUrl,alt:x.title,className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:f.jsx(E1,{size:12})})}),f.jsx("p",{className:"text-sm font-medium text-darkbg truncate",children:x.title})]}),f.jsx("button",{onClick:()=>h(x.id),disabled:s.length>=5,className:"w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white transition-colors",children:f.jsx(Vf,{size:16})})]},x.id)),_.length===0&&o&&f.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:"No gifts found."})]})]})]})]})},OK=()=>{const[t]=TC(),e=Ct(),{user:n,loading:r}=vt(),[s,i]=y.useState(!1);return y.useEffect(()=>{const o=setTimeout(()=>{i(!0)},1500);return()=>clearTimeout(o)},[]),y.useEffect(()=>{if(r||!s)return;const o=t.get("url"),a=t.get("text"),l=t.get("title");let c=o;if(!c&&a){const d=a.match(/(https?:\/\/[^\s]+)/g);d&&d.length>0&&(c=d[0])}if(!c&&a&&a.startsWith("http")&&(c=a),!c){console.warn("ShareTarget: No URL found"),e("/dashboard",{replace:!0});return}n?e("/dashboard",{replace:!0,state:{openAddGift:!0,initialUrl:c,initialTitle:l||""}}):(localStorage.setItem("pendingShareUrl",c),l&&localStorage.setItem("pendingShareTitle",l),e("/login",{replace:!0}))},[n,r,s,t,e]),f.jsx("div",{className:"flex items-center justify-center h-screen bg-lightbg text-darkbg font-sans",children:f.jsxs("div",{className:"flex flex-col items-center gap-6 p-8 bg-white rounded-3xl shadow-xl max-w-sm w-full mx-4 text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center text-primary animate-pulse",children:f.jsx(mo,{size:32})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold mb-2",children:"Processing Gift..."}),f.jsx("p",{className:"text-slate-500 text-sm",children:"Do not close the app."})]}),f.jsx("div",{className:"w-full bg-slate-100 h-1.5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-primary animate-progress-indeterminate"})})]})})},VK=()=>{const{id:t}=Xv(),e=Ct(),[n,r]=y.useState(null),[s,i]=y.useState(!0);if(y.useEffect(()=>{(async()=>{if(t)try{const h=et(le,"greetings",t),p=await Pu(h);p.exists()&&r(p.data())}catch(h){console.error(h)}finally{i(!1)}})()},[t]),s)return f.jsx("div",{className:"min-h-screen bg-lightbg flex items-center justify-center",children:f.jsx(Sn,{className:"animate-spin text-primary"})});if(!n)return f.jsx("div",{className:"min-h-screen bg-lightbg flex items-center justify-center",children:"Greeting not found."});const{theme:o,message:a,senderName:l,videoUrl:c}=n;return f.jsxs("div",{className:"min-h-screen bg-lightbg flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[o==="party"&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 pointer-events-none"}),f.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-in fade-in zoom-in duration-500",children:[f.jsxs("div",{className:`p-8 text-center text-white relative overflow-hidden
                    ${o==="party"?"bg-gradient-to-br from-indigo-400 to-cyan-400":o==="heart"?"bg-gradient-to-br from-rose-400 to-red-400":o==="funny"?"bg-gradient-to-br from-yellow-400 to-orange-400":"bg-slate-100 text-slate-800"}
                 `,children:[o==="party"&&f.jsx(V0,{className:"absolute top-4 right-4 opacity-50 w-8 h-8"}),o==="heart"&&f.jsx(mo,{className:"absolute top-4 right-4 opacity-50 w-8 h-8"}),f.jsxs("h1",{className:"text-3xl font-bold mb-2 font-handwriting",children:[l," sent you a wish!"]})]}),c&&f.jsx("div",{className:"aspect-video bg-black relative group",children:f.jsx("video",{src:c,className:"w-full h-full object-cover",controls:!0,autoPlay:!0})}),f.jsx("div",{className:"p-8 text-center",children:f.jsxs("p",{className:"text-xl font-medium text-slate-700 leading-relaxed font-handwriting",children:['"',a,'"']})}),f.jsx("div",{className:"p-6 bg-slate-50 border-t border-slate-100 text-center",children:f.jsx("button",{onClick:()=>e("/"),className:"text-primary font-bold text-sm hover:underline",children:"Send a return wish on WishU"})})]})]})},FK=()=>{const{t}=Ti(),[e,n]=y.useState(!1),[r,s]=y.useState(null),[i,o]=y.useState(!1),[a,l]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const p=localStorage.getItem("installPromptDismissedAt");if(p&&(Date.now()-parseInt(p,10))/864e5<7)return;const m=window.navigator.userAgent.toLowerCase(),_=/iphone|ipad|ipod/.test(m);if(o(_),_){const E=setTimeout(()=>n(!0),3e3);return()=>clearTimeout(E)}const x=E=>{E.preventDefault(),s(E),n(!0)};window.addEventListener("beforeinstallprompt",x);const T=setTimeout(()=>{n(E=>E||!0)},5e3);return()=>{window.removeEventListener("beforeinstallprompt",x),clearTimeout(T)}},[]);const c=async()=>{if(r){r.prompt();const{outcome:h}=await r.userChoice;console.log(`User choice: ${h}`),s(null),n(!1)}else l(!0)},d=()=>{n(!1),localStorage.setItem("installPromptDismissedAt",Date.now().toString())};return e?f.jsx(ws,{children:f.jsx("div",{className:"fixed inset-x-0 bottom-0 z-50 pointer-events-none flex justify-center pb-6 px-4",children:f.jsxs(Ge.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"pointer-events-auto w-full max-w-sm bg-white/90 backdrop-blur-md border border-pink-100 rounded-3xl shadow-2xl p-5 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-pink-200/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-purple-200/20 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2"}),f.jsx("button",{onClick:d,className:"absolute top-3 right-3 p-1 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors","aria-label":t("close"),children:f.jsx(_r,{size:18})}),f.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-2xl flex items-center justify-center text-primary",children:f.jsx(O0,{size:20,fill:"currentColor"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-darkbg text-lg leading-tight",children:t("install_title")}),f.jsx("p",{className:"text-xs text-slate-500",children:t(i?"install_desc_ios":"install_desc_android")})]})]}),i?f.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 flex items-center gap-3 border border-slate-100",children:[f.jsx(o5,{size:20,className:"text-blue-500 animate-bounce"}),f.jsx("p",{className:"text-sm text-slate-600 font-medium",children:t("install_ios_instruction")})]}):f.jsx(f.Fragment,{children:a?f.jsxs(Ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-amber-50 rounded-xl p-3 flex items-center gap-3 border border-amber-100",children:[f.jsx(n5,{size:20,className:"text-amber-600 animate-bounce"}),f.jsx("p",{className:"text-sm text-slate-700 font-medium",children:t("install_android_manual")})]}):f.jsx("button",{onClick:c,className:"w-full bg-primary text-white font-bold py-3 rounded-xl shadow-lg shadow-primary/30 active:scale-95 transition-all text-sm",children:t("install_button")})})]})]})})}):null},UK=()=>{const[t]=TC(),e=Ct(),{user:n,loading:r}=vt(),{showToast:s}=qw(),i=y.useRef(!1);return y.useEffect(()=>{if(r||i.current)return;(async()=>{const a=t.get("from");if(!a){e("/");return}if(n){if(i.current=!0,n.uid===a){e("/dashboard");return}try{const l=ft(Ve(le,"friendships"),St("users","array-contains",n.uid));(await Jt(l)).docs.some(h=>h.data().users.includes(a))||(await bo(Ve(le,"friendships"),{users:[n.uid,a],senderId:a,status:"accepted",createdAt:_o()}),s("You are now connected!","success")),e(`/friend/${a}`)}catch(l){console.error("Invite error",l),e("/")}}else localStorage.setItem("pendingInvite",a),e("/")})()},[t,n,r,e,s]),f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-darkbg text-primary",children:"Connecting..."})},BK=()=>{const{user:t}=vt(),{showToast:e}=qw(),n=y.useRef(!1);return y.useEffect(()=>{(async()=>{if(!t||n.current)return;const s=localStorage.getItem("pendingInvite");if(s){if(s===t.uid){localStorage.removeItem("pendingInvite");return}try{const i=ft(Ve(le,"friendships"),St("users","array-contains",t.uid));(await Jt(i)).docs.some(l=>l.data().users.includes(s))||(await bo(Ve(le,"friendships"),{users:[t.uid,s],senderId:s,status:"accepted",createdAt:_o()}),e("You are now connected with your friend!","success")),localStorage.removeItem("pendingInvite"),n.current=!0}catch(i){console.error("Error creating friendship from invite:",i)}}})()},[t,e]),null},sx=({onAddClick:t})=>{const e=Tr(),n=Ct(),{user:r}=vt(),s=e.pathname,[i,o]=y.useState(0),a=l=>l==="/dashboard"?s==="/dashboard"||s==="/":s===l||s.startsWith(l+"/");return y.useEffect(()=>{if(!r)return;const l=ft(Ve(le,"friendships"),St("receiverId","==",r.uid),St("status","==","pending")),c=Lo(l,d=>{o(d.docs.length)});return()=>c()},[r]),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 pointer-events-auto",children:f.jsxs("div",{className:"bg-primary pt-3 pb-6 px-4 flex justify-around items-center border-t border-white/5 shadow-[0_-5px_25px_rgba(0,0,0,0.3)] relative min-h-[85px]",children:[f.jsxs("div",{className:"flex flex-1 justify-around items-center",children:[f.jsx(Cd,{icon:f.jsx(Z3,{size:24,strokeWidth:2.5}),label:"Home",active:a("/dashboard"),onClick:()=>n("/dashboard")}),f.jsxs("div",{className:"relative",children:[f.jsx(Cd,{icon:f.jsx(Oh,{size:24,strokeWidth:2.5}),label:"Friends",active:a("/friends"),onClick:()=>n("/friends")}),i>0&&f.jsx("div",{className:"absolute top-1 -right-1 bg-secondary text-primary text-[10px] font-bold w-4 h-4 flex items-center justify-center rounded-full",children:i})]})]}),f.jsx("div",{className:"relative flex justify-center w-20",children:f.jsx(Ge.button,{whileHover:{scale:1.1,y:-45},whileTap:{scale:.95},onClick:t,className:"w-16 h-16 bg-secondary rounded-full flex items-center justify-center shadow-[0_10px_20px_rgba(231,155,227,0.3)] text-white cursor-pointer absolute -top-12 border-4 border-white transition-all active:shadow-inner",children:f.jsx(Vf,{size:36,strokeWidth:3.5})})}),f.jsxs("div",{className:"flex flex-1 justify-around items-center",children:[f.jsx(Cd,{icon:f.jsx(rA,{size:24,strokeWidth:2.5}),label:"Dates",active:a("/calendar"),onClick:()=>n("/calendar")}),f.jsx(Cd,{icon:f.jsx(my,{size:24,strokeWidth:2.5}),label:"Profile",active:a("/profile"),onClick:()=>n("/profile")})]})]})})},Cd=({icon:t,active:e=!1,onClick:n})=>f.jsx(Ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,className:`p-2 transition-all duration-300 relative group flex flex-col items-center justify-center ${e?"text-white":"text-white/80 hover:text-white"}`,children:e?f.jsxs("div",{className:"flex flex-col items-center",children:[t,f.jsx(Ge.div,{layoutId:"active-dot",className:"w-1.5 h-1.5 bg-secondary rounded-full mt-1"})]}):t}),lo=y.forwardRef(({label:t,error:e,className:n="",...r},s)=>f.jsxs("div",{className:"mb-4 w-full",children:[t&&f.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ms-1",children:t}),f.jsx("input",{ref:s,className:`w-full bg-white border border-slate-200 rounded-2xl px-5 py-4 text-darkbg placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent transition-all shadow-sm ${e?"border-red-500 focus:ring-red-200":""} ${n}`,...r}),e&&f.jsx("p",{className:"text-red-500 text-sm mt-1 ms-1",children:e})]}));lo.displayName="Input";const $K=y.forwardRef(({label:t,error:e,className:n="",...r},s)=>f.jsxs("div",{className:"mb-4 w-full",children:[t&&f.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ms-1",children:t}),f.jsx("textarea",{ref:s,className:`w-full bg-white border border-slate-200 rounded-2xl px-5 py-4 text-darkbg placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent transition-all shadow-sm resize-none ${e?"border-red-500 focus:ring-red-200":""} ${n}`,...r}),e&&f.jsx("p",{className:"text-red-500 text-sm mt-1 ms-1",children:e})]}));$K.displayName="TextArea";const zK=["hm.com","adidas.co.il","adidas.com","zara.com"],WK=t=>{try{const e=new URL(t).hostname.toLowerCase();return zK.some(n=>e.includes(n))}catch{return!1}},HK=t=>{try{const e=new URL(t),n=[];return e.searchParams.forEach((r,s)=>{const i=s.toLowerCase();(i.startsWith("utm_")||i==="fbclid"||i==="gclid"||i==="msclkid"||i.startsWith("mc_")||i.startsWith("_ga")||i==="affiliate"||i==="clickid")&&n.push(s)}),n.forEach(r=>e.searchParams.delete(r)),e.toString()}catch{return t}},GK=async t=>{console.log("Scraper: Calling Firebase Cloud Function for:",t);try{const e=await fetch("https://europe-west1-wishu-c16d5.cloudfunctions.net/scrapeProductDetails",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})});if(!e.ok){const r=await e.text();return console.error("Scraper: Cloud function failed with status",e.status,r),null}const n=await e.json();return console.log("Scraper: Cloud function returned:",n),n.error?(console.warn("Scraper: Cloud function error:",n.error),null):n}catch(e){return console.error("Scraper: Cloud function failed:",e),null}},A2=async t=>{var e;console.log("Scraper: Starting fetch for URL:",t);try{if(!t)return console.log("Scraper: Empty URL provided"),null;if(WK(t))return console.log("Scraper: Blocked domain:",t),{title:"",description:"",image:"",url:t,isBlocked:!0,message:"This site blocks automated access. Please enter details manually.",priceSource:"none"};const n=HK(t),r=await GK(n);return r&&(r.title||r.price)?(console.log("Scraper: Success!",{title:(e=r.title)==null?void 0:e.substring(0,50),price:r.price}),{title:r.title,description:r.description,image:r.image,url:n,price:r.price,currency:r.currency,isBlocked:!1,priceSource:r.priceSource}):(console.warn("Scraper: No data from cloud function"),{title:"",description:"",image:"",url:t,isBlocked:!0,message:"Could not fetch product details. Please enter manually.",priceSource:"none"})}catch(n){return console.error("Scraper failed:",n),{title:"",description:"",image:"",url:t,isBlocked:!0,message:"We couldn't grab the details automatically. Please enter them manually.",priceSource:"none"}}},qK=({onClose:t,initialUrl:e})=>{const{t:n}=Ti(),{user:r}=vt(),[s,i]=y.useState(e||""),[o,a]=y.useState(""),[l,c]=y.useState(""),[d,h]=y.useState(""),[p,m]=y.useState(["Friends","Family","Partner","Work","Other"]),[_,x]=y.useState(!1),[T,E]=y.useState(!1),[w,b]=y.useState(""),[C,R]=y.useState(!1),[O,I]=y.useState(!1),S=y.useRef(""),k=y.useRef(null),P=y.useRef(null);y.useEffect(()=>{let q=!1,Y;const z=setTimeout(async()=>{if(console.log("AddGift: Effect triggered with link:",s),s&&s.startsWith("http")&&s!==S.current){console.log("AddGift: Starting scrape for:",s),E(!0),b(" Searching deeply for price... (this may take 15-20 seconds)"),S.current=s,Y=setTimeout(()=>{var U;q||(console.log("AddGift: Still searching - prompting manual input"),b(" Deep search in progress... You can enter details manually below while we keep looking."),(U=P.current)==null||U.focus())},8e3);const F=await A2(s);if(clearTimeout(Y),q)return;console.log("AddGift: Scrape result:",F),F?F.isBlocked?(b(F.message||"Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=P.current)==null?void 0:U.focus()},100)):(F.title&&!o&&a(F.title),F.image&&!d&&h(F.image),F.price?(l?b(` Found price: ${F.price} (keeping your entry)`):(c(F.price),b(` Price found: ${F.price}`)),setTimeout(()=>b(""),3e3)):(b(" Price not found. Please enter manually."),l||setTimeout(()=>{var U;return(U=P.current)==null?void 0:U.focus()},100))):(console.warn("AddGift: Scraper returned no data"),b("Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=P.current)==null?void 0:U.focus()},100)),E(!1)}else(!s||!s.startsWith("http"))&&console.log("AddGift: Link ignored (empty or no http)")},800);return()=>{q=!0,clearTimeout(z),clearTimeout(Y)}},[s]);const D=q=>/\d/.test(q),M=q=>{var F;const Y=(F=q.target.files)==null?void 0:F[0];if(!Y)return;const z=new FileReader;z.onloadend=()=>{h(z.result)},z.readAsDataURL(Y)},N=async()=>{if(I(!0),!D(l)){R(!0);return}if(R(!1),!o){console.warn("Missing title");return}if(!r){console.warn("Missing user");return}x(!0);try{await bo(Ve(le,"gifts"),{ownerId:r.uid,title:o,price:l,link:s,imageUrl:d,status:"available",visibility:p,createdAt:_o()}),t()}catch(q){console.error("Failed to add gift",q),alert("Error adding gift")}finally{x(!1)}},Z=O&&!D(l);return f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-end sm:items-center justify-center p-4 sm:p-6",children:f.jsxs(Ge.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"bg-lightbg w-full max-w-lg rounded-3xl p-6 shadow-2xl relative max-h-[90vh] overflow-y-auto scrollbar-thin",children:[f.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 bg-slate-100 rounded-full text-slate-500 hover:bg-slate-200",children:f.jsx(_r,{size:20})}),f.jsx("h2",{className:"text-2xl font-bold text-darkbg mb-6 text-center",children:n("add_gift")}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(lo,{value:s,onChange:q=>i(q.target.value),placeholder:n("paste_link"),label:"Link",className:"pl-10"}),f.jsx("div",{className:"absolute left-3 top-[38px] text-slate-400",children:T?f.jsx(Sn,{size:18,className:"animate-spin text-primary"}):f.jsx(oA,{size:18})})]}),w&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-xl text-amber-700 text-sm animate-pulse",children:[f.jsx(Dh,{size:18}),f.jsx("span",{children:w})]}),f.jsxs("div",{className:"flex gap-4 p-3 bg-white rounded-2xl shadow-sm border border-slate-100",children:[f.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center relative cursor-pointer group",onClick:()=>{var q;return(q=k.current)==null?void 0:q.click()},children:d?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:f.jsx(Mh,{size:20,className:"text-white"})})]}):f.jsxs("div",{className:"flex flex-col items-center gap-1 text-slate-300",children:[f.jsx(iA,{size:24}),f.jsx("span",{className:"text-[10px]",children:"Upload"})]})}),f.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:M,className:"hidden"}),f.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[f.jsx("h4",{className:"font-semibold text-sm text-darkbg truncate",children:o||"Gift Title"}),f.jsx("p",{className:"text-xs text-slate-500 truncate",children:s||"Paste a link above"}),!d&&f.jsxs("button",{onClick:()=>{var q;return(q=k.current)==null?void 0:q.click()},className:"mt-1 text-xs text-primary font-medium flex items-center gap-1",children:[f.jsx(Mh,{size:12}),"Upload image"]})]})]}),f.jsx(lo,{value:o,onChange:q=>a(q.target.value),placeholder:n("gift_title"),label:n("gift_title")}),f.jsxs("div",{children:[f.jsx(lo,{ref:P,value:l,onChange:q=>{c(q.target.value),C&&D(q.target.value)&&R(!1)},placeholder:n("price")+" (e.g. 100)",label:n("price")+" *",className:Z?"border-red-500 focus:ring-red-500":""}),Z&&f.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[f.jsx(Dh,{size:12}),"Price is required"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Who can see this?"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["Friends","Family","Partner","Work","Other"].map(q=>f.jsx("button",{onClick:()=>{p.includes(q)?m(p.filter(Y=>Y!==q)):m([...p,q])},className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-colors ${p.includes(q)?"bg-darkbg text-white border-darkbg":"bg-white text-slate-400 border-slate-200"}`,children:q},q))})]})]}),f.jsxs("button",{onClick:N,disabled:!o||_,className:"w-full py-4 bg-primary text-white rounded-2xl font-bold text-lg shadow-xl shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:hover:scale-100 mt-4 flex items-center justify-center gap-2",children:[_?f.jsx(Sn,{className:"animate-spin"}):f.jsx(Vf,{size:20}),n("add_gift")]})]})})},KK=({gift:t,onClose:e})=>{const{t:n}=Ti(),{user:r}=vt(),[s,i]=y.useState(t.link||""),[o,a]=y.useState(t.title||""),[l,c]=y.useState(t.price||""),[d,h]=y.useState(t.imageUrl||""),[p,m]=y.useState(t.visibility||["Friends","Family","Partner","Work","Other"]),[_,x]=y.useState(!1),[T,E]=y.useState(!1),[w,b]=y.useState(""),[C,R]=y.useState(!1),[O,I]=y.useState(!1),S=y.useRef(null),k=y.useRef(null),P=z=>/\d/.test(z),D=async()=>{if(!s)return;E(!0),b(" Searching for price...");const z=setTimeout(()=>{var F;b(" Still searching... You can update details manually below."),(F=k.current)==null||F.focus()},4e3);try{const F=await A2(s);clearTimeout(z),F?F.isBlocked?(b(F.message||"Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100)):(F.title&&a(F.title),F.image&&h(F.image),F.price?(c(F.price),b(` Price found: ${F.price}`),setTimeout(()=>b(""),3e3)):(b(" Price not found. Please enter manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100))):(b("Could not fetch details. Please add manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100))}catch(F){clearTimeout(z),console.error("Resync failed",F),b("Sync failed. Please update manually."),setTimeout(()=>{var U;return(U=k.current)==null?void 0:U.focus()},100)}finally{E(!1)}},M=z=>{var j;const F=(j=z.target.files)==null?void 0:j[0];if(!F)return;const U=new FileReader;U.onloadend=()=>{h(U.result)},U.readAsDataURL(F)},N=async()=>{if(I(!0),!P(l)){R(!0);return}if(R(!1),!(!r||!o)){x(!0);try{await er(et(le,"gifts",t.id),{title:o,price:l,link:s,imageUrl:d,visibility:p,updatedAt:new Date}),e()}catch(z){console.error("Failed to update gift",z),alert("Error updating gift")}finally{x(!1)}}},Z=async()=>{if(confirm(n("delete_confirm")||"Are you sure you want to delete this gift?")){x(!0);try{await mp(et(le,"gifts",t.id)),e()}catch(z){console.error("Failed to delete gift",z),alert("Error deleting gift"),x(!1)}}},q=z=>{p.includes(z)?m(p.filter(F=>F!==z)):m([...p,z])},Y=O&&!P(l);return f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",onClick:e,children:f.jsxs(Ge.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-lightbg w-full max-w-lg rounded-3xl p-6 shadow-2xl relative max-h-[90vh] overflow-y-auto scrollbar-thin",onClick:z=>z.stopPropagation(),children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-slate-100 rounded-full text-slate-500 hover:bg-slate-200 transition-colors",children:f.jsx(_r,{size:20})}),f.jsx("h2",{className:"text-2xl font-bold text-darkbg mb-6",children:"Edit Gift"}),f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(lo,{value:s,onChange:z=>i(z.target.value),placeholder:n("paste_link"),label:"Link",className:"pl-10"}),f.jsx("div",{className:"absolute left-3 top-[38px] text-slate-400",children:f.jsx(oA,{size:18})})]}),f.jsx("button",{onClick:D,disabled:T,className:"p-3 bg-secondary text-slate-600 rounded-xl hover:bg-slate-300 transition-colors mb-[2px]",title:"Re-sync data",children:T?f.jsx(Sn,{size:20,className:"animate-spin"}):f.jsx(r5,{size:20})})]}),w&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-xl text-amber-700 text-sm animate-pulse",children:[f.jsx(Dh,{size:18}),f.jsx("span",{children:w})]}),f.jsxs("div",{className:"flex gap-4 p-3 bg-white rounded-2xl shadow-sm border border-slate-100",children:[f.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center relative cursor-pointer group",onClick:()=>{var z;return(z=S.current)==null?void 0:z.click()},children:d?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:f.jsx(Mh,{size:20,className:"text-white"})})]}):f.jsxs("div",{className:"flex flex-col items-center gap-1 text-slate-300",children:[f.jsx(iA,{size:24}),f.jsx("span",{className:"text-[10px]",children:"Upload"})]})}),f.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:M,className:"hidden"}),f.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[f.jsx("h4",{className:"font-semibold text-sm text-darkbg truncate",children:o}),f.jsx("p",{className:"text-xs text-slate-500 truncate",children:s}),!d&&f.jsxs("button",{onClick:()=>{var z;return(z=S.current)==null?void 0:z.click()},className:"mt-1 text-xs text-primary font-medium flex items-center gap-1",children:[f.jsx(Mh,{size:12}),"Upload image"]})]})]}),f.jsx(lo,{value:o,onChange:z=>a(z.target.value),placeholder:"Gift Title",label:"Title"}),f.jsxs("div",{children:[f.jsx(lo,{ref:k,value:l,onChange:z=>{c(z.target.value),C&&P(z.target.value)&&R(!1)},placeholder:"Price (e.g. 100)",label:"Price *",className:Y?"border-red-500 focus:ring-red-500":""}),Y&&f.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[f.jsx(Dh,{size:12}),"Price is required"]})]}),f.jsxs("div",{className:"p-4 bg-white rounded-2xl border border-slate-100",children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Who can see this?"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["Friends","Family","Partner","Work","Other"].map(z=>f.jsx("button",{onClick:()=>q(z),className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-colors ${p.includes(z)?"bg-darkbg text-white border-darkbg":"bg-white text-slate-400 border-slate-200 hover:border-slate-300"}`,children:z},z))})]}),f.jsxs("div",{className:"flex gap-3 pt-2",children:[f.jsx("button",{onClick:Z,disabled:_,className:"px-4 py-3 bg-red-50 text-red-500 rounded-xl font-bold hover:bg-red-100 transition-colors flex items-center gap-2",children:f.jsx(uA,{size:20})}),f.jsxs("button",{onClick:N,disabled:!o||_,className:"flex-1 py-3 bg-primary text-white rounded-xl font-bold hover:brightness-110 active:scale-95 transition-all flex items-center justify-center gap-2",children:[_?f.jsx(Sn,{className:"animate-spin"}):f.jsx(i5,{size:20}),"Save Changes"]})]})]})]})})},QK=({greetingId:t,onClose:e})=>{const[n,r]=y.useState(null),[s,i]=y.useState(!1);y.useEffect(()=>{(async()=>{if(t){i(!0);try{const l=await Pu(et(le,"greetings",t));l.exists()&&r(l.data())}catch(l){console.error("Error fetching greeting:",l)}finally{i(!1)}}})()},[t]);const o=a=>{a.target===a.currentTarget&&e()};return t?f.jsx(ws,{children:f.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-darkbg/90 backdrop-blur-md z-[100] flex items-center justify-center p-4 overflow-hidden",onClick:o,children:[f.jsx(Ge.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] aspect-square bg-secondary rounded-full -z-10",style:{filter:"blur(40px)"}}),f.jsxs(Ge.div,{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},className:"bg-white rounded-[40px] w-full max-w-lg shadow-2xl relative overflow-hidden flex flex-col",onClick:a=>a.stopPropagation(),children:[f.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full text-slate-500 hover:bg-slate-200 transition-all z-20",children:f.jsx(_r,{size:20})}),s?f.jsxs("div",{className:"p-20 flex flex-col items-center justify-center gap-4",children:[f.jsx(Sn,{className:"animate-spin text-primary",size:32}),f.jsx("p",{className:"text-slate-400 font-medium",children:"Opening your wish..."})]}):n?f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("div",{className:`p-10 text-center text-white relative overflow-hidden
                                ${n.theme==="party"?"bg-gradient-to-br from-indigo-500 to-cyan-400":n.theme==="heart"?"bg-gradient-to-br from-rose-500 to-red-400":n.theme==="funny"?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-primary"}
                            `,children:[f.jsxs("div",{className:"relative z-10",children:[f.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:n.theme==="party"?f.jsx(V0,{size:32}):f.jsx(mo,{size:32})}),f.jsx("h2",{className:"text-3xl font-black italic tracking-tight mb-2 uppercase",children:"Message From"}),f.jsx("p",{className:"text-5xl font-black drop-shadow-lg",children:n.senderName})]}),f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"})]}),f.jsxs("div",{className:"p-10 text-center space-y-8",children:[n.videoUrl&&f.jsx("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl bg-black border-4 border-slate-50 aspect-video group",children:f.jsx("video",{src:n.videoUrl,controls:!0,className:"w-full h-full object-cover",poster:`https://ui-avatars.com/api/?name=${n.senderName}&background=E79BE3&color=fff&size=512`})}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"text-primary/10 text-9xl font-black absolute -top-12 left-1/2 -translate-x-1/2 select-none",children:""}),f.jsx("p",{className:"text-2xl font-bold text-darkbg leading-relaxed font-handwriting relative z-10 px-4",children:n.message})]}),f.jsx("button",{onClick:e,className:"w-full py-4 bg-darkbg text-white rounded-2xl font-black text-lg tracking-wide uppercase hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl shadow-darkbg/20",children:"Close Wish"})]})]}):f.jsx("div",{className:"p-12 text-center text-slate-500",children:"Greeting not found or has been deleted."})]})]})}):null},YK=({onOpenGreeting:t})=>{const[e,n]=y.useState(!1),{notifications:r,unreadCount:s,markAsRead:i,loading:o}=Kw(),a=Ct(),l=y.useRef(null);y.useEffect(()=>{const d=h=>{l.current&&!l.current.contains(h.target)&&n(!1)};return e&&document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[e]);const c=async d=>{n(!1),d.read||await i(d.id),d.type==="greeting"&&d.data.greetingId?t(d.data.greetingId):d.type==="birthday"&&d.data.friendId&&a(`/friend/${d.data.friendId}`)};return f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>n(!e),className:"p-2 text-primary hover:bg-slate-50 rounded-full transition-colors relative",children:[f.jsx(Wc,{size:24}),s>0&&f.jsx("span",{className:"absolute top-1.5 right-1.5 w-5 h-5 bg-accent text-darkbg text-[10px] font-bold flex items-center justify-center rounded-full border-2 border-white",children:s>9?"9+":s})]}),f.jsx(ws,{children:e&&f.jsxs(f.Fragment,{children:[f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[60] sm:hidden",onClick:()=>n(!1)}),f.jsxs(Ge.div,{ref:l,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"absolute right-0 top-full mt-2 w-[320px] sm:w-[380px] bg-white rounded-3xl shadow-2xl border border-slate-100 z-[70] overflow-hidden flex flex-col max-h-[500px]",children:[f.jsxs("div",{className:"p-4 border-b border-slate-50 flex items-center justify-between bg-white sticky top-0 z-10",children:[f.jsx("h3",{className:"font-bold text-darkbg",children:"Notifications"}),f.jsx("button",{onClick:()=>n(!1),className:"p-1 text-slate-400",children:f.jsx(_r,{size:18})})]}),f.jsxs("div",{className:"overflow-y-auto scrollbar-thin",children:[o&&f.jsx("div",{className:"p-10 flex justify-center",children:f.jsx(Sn,{className:"animate-spin text-primary"})}),!o&&r.length===0&&f.jsxs("div",{className:"p-12 text-center",children:[f.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-300",children:f.jsx(Wc,{size:24})}),f.jsx("p",{className:"text-sm text-slate-400",children:"No notifications yet"})]}),!o&&r.map(d=>{var h;return f.jsxs("button",{onClick:()=>c(d),className:`w-full text-left p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors flex items-start gap-3 relative ${d.read?"":"bg-primary/5"}`,children:[f.jsx("div",{className:`mt-1 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                                            ${d.type==="greeting"?"bg-pink-100 text-pink-500":"bg-blue-100 text-blue-500"}
                                        `,children:d.type==="greeting"?f.jsx(aA,{size:16}):f.jsx(Q3,{size:16})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-bold text-darkbg mb-0.5",children:d.title}),d.message&&f.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:d.message}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-1 uppercase font-medium",children:(h=d.createdAt)!=null&&h.toDate?d.createdAt.toDate().toLocaleDateString():"Just now"})]}),!d.read&&f.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),f.jsx("div",{className:"mt-2 text-slate-300",children:f.jsx(q3,{size:14})})]},d.id)})]}),r.length>0&&f.jsx("div",{className:"p-3 bg-slate-50 text-center",children:f.jsx("button",{onClick:()=>n(!1),className:"text-xs text-slate-500 font-bold hover:text-primary",children:"Close"})})]})]})})]})},XK=({onSearch:t,onOpenGreeting:e=()=>{}})=>{const{searchQuery:n,setSearchQuery:r}=vp(),{headerState:s}=KN(),i=Ct(),o=a=>{r(a),t==null||t(a)};return f.jsx("header",{className:"bg-white px-6 pt-[5px] pb-[10px] sticky top-0 z-50",children:f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("div",{className:"w-10 flex justify-start",children:s.showBackButton?f.jsx("button",{onClick:()=>i(-1),className:"p-2 text-primary bg-secondary/20 rounded-full hover:bg-secondary/30 transition-colors",children:f.jsx(M0,{size:20})}):f.jsx("div",{className:"w-10"})}),f.jsx("div",{className:"flex-1 flex justify-center",children:f.jsx("img",{src:"/wishu_logo.png",alt:"WishU",className:"w-[160px] h-auto object-contain mix-blend-multiply"})}),f.jsx("div",{className:"w-10 flex justify-end",children:f.jsx(YK,{onOpenGreeting:e})})]}),s.title&&f.jsxs("div",{className:"text-center mb-2",children:[f.jsx("h1",{className:"text-lg font-bold text-darkbg",children:s.title}),s.subtitle&&f.jsx("p",{className:"text-xs text-slate-400",children:s.subtitle})]}),f.jsx("div",{className:"relative w-full",children:s.customBottomBar?s.customBottomBar:f.jsxs("div",{className:"relative w-full",children:[f.jsx(lA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary",size:20}),f.jsx("input",{type:"text",value:n,placeholder:"",onChange:a=>o(a.target.value),className:"w-full bg-secondary text-primary font-medium rounded-full py-3.5 pl-12 pr-6 outline-none border-none placeholder-primary/60 focus:ring-2 focus:ring-primary/20 shadow-sm"})]})})]})})},JK=()=>f.jsx(KH,{children:f.jsx(HH,{children:f.jsx(s2,{children:f.jsx(XH,{children:f.jsx(ZK,{})})})})}),ZK=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState(""),[s,i]=y.useState(null),{editingGift:o,setEditingGift:a}=Gw(),l=Tr(),c=Ct();y.useEffect(()=>{const h=l.state;h!=null&&h.openAddGift&&(h!=null&&h.initialUrl)&&(console.log("MainLayout: Opening AddGift with shared URL:",h.initialUrl),r(h.initialUrl),e(!0),c(l.pathname,{replace:!0,state:{}}))},[l.state,l.pathname,c]);const d=()=>{e(!1),r("")};return f.jsxs("div",{className:"min-h-screen bg-white font-sans",children:[f.jsx(XK,{onSearch:h=>console.log("Search:",h),onOpenGreeting:i}),f.jsx("div",{className:"pb-24",children:f.jsx(vM,{})}),f.jsx(sx,{onAddClick:()=>e(!0)}),f.jsx(ws,{children:t&&f.jsx(qK,{onClose:d,initialUrl:n})}),f.jsx(ws,{children:o&&f.jsx(KK,{gift:o,onClose:()=>a(null)})}),f.jsx(QK,{greetingId:s,onClose:()=>i(null)})]})},Bo=({title:t,value:e,icon:n,trend:r,trendUp:s,onClick:i})=>f.jsxs("div",{onClick:i,className:`bg-white p-6 rounded-2xl shadow-sm border border-slate-100 transition-all duration-300 flex flex-col justify-between h-full
            ${i?"cursor-pointer hover:shadow-md hover:scale-[1.02] active:scale-[0.98]":"hover:shadow-md"}
            `,children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsx("div",{className:"p-3 bg-slate-50 rounded-xl text-primaryPink",children:n}),r&&f.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${s?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-slate-500 text-sm font-medium mb-1",children:t}),f.jsx("p",{className:"text-3xl font-bold text-deepNavy",children:e})]})]}),eQ=()=>{const t=Ct(),{requestPermission:e}=Kw(),{user:n}=vt(),[r,s]=y.useState({users:0,wishes:0,greetings:0,notifications:0,purchasedCount:0,totalValue:0}),[i,o]=y.useState([]),[a,l]=y.useState([]),[c,d]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const p=Ve(le,"users"),m=Ve(le,"gifts"),_=Ve(le,"greetings"),x=Ve(le,"NotificationQueue"),[T,E,w,b]=await Promise.all([Ql(p),Ql(m),Ql(_),Jt(ft(Ve(le,"notifications"),ca("createdAt","desc"),ua(5)))]);console.log("Recent notifications:",b.docs.map(Y=>Y.data()));let C=0;try{C=(await Ql(x)).data().count}catch(Y){console.log("NotificationQueue collection might not exist yet",Y)}const R=ft(m,St("status","==","purchased")),O=await Jt(R),I=O.size;let S=0;O.forEach(Y=>{const z=Y.data();if(z.price){const F=parseFloat(z.price.toString().replace(/[^0-9.]/g,""));isNaN(F)||(S+=F)}}),s({users:T.data().count,wishes:E.data().count,greetings:w.data().count,notifications:C,purchasedCount:I,totalValue:Math.round(S)});const k=ft(p,ca("createdAt","desc"),ua(20)),P=ft(m,ca("createdAt","desc"),ua(20)),D=ft(_,ca("createdAt","desc"),ua(20)),[M,N,Z]=await Promise.all([Jt(k),Jt(P),Jt(D)]),q=[];M.forEach(Y=>{const z=Y.data();z.createdAt&&q.push({id:Y.id,type:"user",title:"New User Joined",subtitle:z.displayName||z.email||"Anonymous",timestamp:z.createdAt instanceof Me?z.createdAt:Me.fromDate(new Date(z.createdAt)),image:z.photoURL})}),N.forEach(Y=>{const z=Y.data();z.createdAt&&q.push({id:Y.id,type:"gift",title:"New Wish Added",subtitle:z.title,timestamp:z.createdAt,image:z.image})}),Z.forEach(Y=>{const z=Y.data();z.createdAt&&q.push({id:Y.id,type:"greeting",title:"Greeting Sent",subtitle:`From ${z.senderName} to ${z.recipientName||"Friend"}`,timestamp:z.createdAt})}),q.sort((Y,z)=>z.timestamp.seconds-Y.timestamp.seconds),o(q.slice(0,20)),l(b.docs.map(Y=>({id:Y.id,...Y.data()}))),window.recentNotifs=b.docs.map(Y=>({id:Y.id,...Y.data()}))}catch(p){console.error("Error fetching admin data:",p)}finally{d(!1)}})()},[]),c?f.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading dashboard data..."}):f.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans",children:[f.jsx("header",{className:"bg-white border-b border-slate-200 px-8 py-4 sticky top-0 z-10 flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primaryPink rounded-xl flex items-center justify-center text-white font-bold text-xl",children:"A"}),f.jsx("h1",{className:"text-xl font-bold text-deepNavy",children:"Admin Dashboard v2.0"})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-8 pb-32",children:[f.jsxs("div",{className:"mb-6 flex justify-end gap-3",children:[f.jsx("button",{onClick:e,className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg shadow-blue-200 hover:scale-105 active:scale-95 transition-all",children:"ENABLE NOTIFICATIONS"}),f.jsx("button",{onClick:async()=>{if(!n){alert("You must be logged in to send a test notification.");return}try{const{addDoc:h,collection:p,serverTimestamp:m}=await i2(async()=>{const{addDoc:_,collection:x,serverTimestamp:T}=await Promise.resolve().then(()=>QP);return{addDoc:_,collection:x,serverTimestamp:T}},void 0);await h(p(le,"notifications"),{userId:n.uid,title:"Test from Dashboard v2",message:`This is a valid test! (User: ${n.email})`,type:"test",createdAt:m()}),alert("Test notification sent to your device!")}catch(h){alert("Error sending test: "+h),console.error(h)}},className:"px-6 py-3 bg-primaryPink text-white rounded-xl font-bold shadow-lg shadow-pink-200 hover:scale-105 active:scale-95 transition-all",children:"SEND TEST NOTIFICATION"})]}),f.jsxs("div",{className:"mb-10 p-6 bg-white rounded-2xl shadow-sm border border-slate-100",children:[f.jsx("h3",{className:"text-lg font-bold text-deepNavy mb-4",children:"Recent Notifications (Debug)"}),f.jsxs("div",{className:"space-y-2",children:[r.notifications===0&&f.jsx("p",{className:"text-slate-400",children:"No pending notifications found via stats count."}),a.length>0?a.map(h=>f.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100 text-sm",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"ID:"})," ",h.id]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Title:"})," ",h.title]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Created:"})," ",h.createdAt?new Date(h.createdAt.seconds*1e3).toLocaleString():"Pending..."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"UserID:"})," ",h.userId]})]},h.id)):f.jsx("p",{className:"text-slate-400 text-sm",children:"No recent notifications fetched."})]})]}),f.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[f.jsx(Bo,{title:"Total Users",value:r.users,icon:f.jsx(Oh,{size:24})}),f.jsx(Bo,{title:"Total Wishes",value:r.wishes,icon:f.jsx(mo,{size:24})}),f.jsx(Bo,{title:"Engagement (Greetings)",value:r.greetings,icon:f.jsx(_1,{size:24})}),f.jsx(Bo,{title:"Pending Notifications",value:r.notifications,icon:f.jsx(Wc,{size:24})}),f.jsx(Bo,{title:"Purchased Gifts",value:r.purchasedCount,icon:f.jsx(jh,{size:24}),onClick:()=>t("/admin/purchased")}),f.jsx(Bo,{title:"Total Value",value:`${r.totalValue.toLocaleString()}`,icon:f.jsx(K3,{size:24})})]}),f.jsxs("section",{className:"bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden",children:[f.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center gap-2",children:[f.jsx(G3,{className:"text-primaryPink",size:20}),f.jsx("h2",{className:"text-lg font-bold text-deepNavy",children:"Recent Activity"})]}),f.jsxs("div",{className:"divide-y divide-slate-100 max-h-[800px] overflow-y-auto",children:[i.map(h=>f.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 hover:bg-slate-50 transition-colors",children:[f.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 
                                    ${h.type==="user"?"bg-blue-100 text-blue-600":h.type==="gift"?"bg-pink-100 text-pink-600":"bg-amber-100 text-amber-600"}`,children:[h.type==="user"&&f.jsx(Oh,{size:18}),h.type==="gift"&&f.jsx(mo,{size:18}),h.type==="greeting"&&f.jsx(_1,{size:18})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-semibold text-deepNavy truncate",children:h.title}),f.jsx("p",{className:"text-sm text-slate-500 truncate",children:h.subtitle})]}),f.jsxs("div",{className:"text-xs text-slate-400 whitespace-nowrap",children:[h.timestamp.toDate().toLocaleDateString()," ",h.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},`${h.type}-${h.id}`)),i.length===0&&f.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"No recent activity found."})]})]})]}),f.jsx(sx,{})]})},tQ=()=>{const t=Ct(),[e,n]=y.useState([]),[r,s]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const o=ft(Ve(le,"gifts"),St("status","==","purchased")),a=await Jt(o),l=[],c=new Set;a.forEach(m=>{const _=m.data();l.push({id:m.id,title:_.title,price:_.price,ownerId:_.ownerId,purchasedBy:_.purchasedBy,imageUrl:_.imageUrl}),_.ownerId&&c.add(_.ownerId),_.purchasedBy&&c.add(_.purchasedBy)});const d=new Map,h=Array.from(c);if(h.length>0){const m=ft(Ve(le,"users"),St(CP(),"in",h.slice(0,30)));(await Jt(m)).forEach(x=>{const T=x.data();d.set(x.id,T.displayName||T.email||"Unknown User")})}const p=l.map(m=>({...m,ownerName:d.get(m.ownerId)||"Unknown Recipient",purchasedByName:m.purchasedBy&&d.get(m.purchasedBy)||"Unknown Buyer"}));n(p)}catch(o){console.error("Error fetching purchased gifts:",o)}finally{s(!1)}})()},[]),f.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans pb-24",children:[f.jsxs("header",{className:"bg-white border-b border-slate-200 px-6 py-4 sticky top-0 z-10 flex items-center gap-4",children:[f.jsx("button",{onClick:()=>t("/admin"),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors",children:f.jsx(M0,{size:20,className:"text-deepNavy"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(jh,{className:"text-primaryPink",size:24}),f.jsx("h1",{className:"text-xl font-bold text-deepNavy",children:"Purchased Gifts"})]})]}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8",children:r?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(Sn,{className:"animate-spin text-slate-400"})}):f.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Gift"}),f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Cost"}),f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Buyer"}),f.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Recipient"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:e.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-400 text-sm",children:"No gifts have been purchased yet."})}):e.map(i=>{var o;return f.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[i.imageUrl?f.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 overflow-hidden shrink-0",children:f.jsx("img",{src:i.imageUrl,alt:"",className:"w-full h-full object-cover"})}):f.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center shrink-0",children:f.jsx(jh,{size:16,className:"text-slate-400"})}),f.jsx("span",{className:"font-medium text-deepNavy truncate max-w-[200px]",children:i.title})]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:i.price||"-"})}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("div",{className:"text-sm text-slate-700 font-medium",children:i.purchasedByName}),f.jsxs("div",{className:"text-xs text-slate-400 font-mono hidden sm:block",children:[(o=i.purchasedBy)==null?void 0:o.slice(0,6),"..."]})]}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("div",{className:"text-sm text-slate-700 font-medium",children:i.ownerName}),f.jsxs("div",{className:"text-xs text-slate-400 font-mono hidden sm:block",children:[i.ownerId.slice(0,6),"..."]})]})]},i.id)})})]})})})}),f.jsx(sx,{})]})},qT=({children:t})=>{const{user:e,loading:n,userProfile:r}=vt();return n?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 text-slate-400",children:f.jsx(Sn,{className:"animate-spin"})}):!e||!(r!=null&&r.isAdmin)?f.jsx(Nr,{to:"/",replace:!0}):f.jsx(f.Fragment,{children:t})};function nQ(){const{user:t,loading:e}=vt(),{i18n:n}=Ti();return y.useEffect(()=>{document.dir=n.dir(),document.documentElement.lang=n.language,document.documentElement.setAttribute("dir",n.dir())},[n.language]),e?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-darkbg text-primary",children:"Loading..."}):f.jsx(JH,{children:f.jsx(s2,{children:f.jsxs(y.Suspense,{fallback:f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-darkbg text-primary",children:"Loading..."}),children:[f.jsxs(xM,{children:[f.jsx(qt,{path:"/",element:t?f.jsx(Nr,{to:"/dashboard"}):f.jsx(cH,{})}),f.jsx(qt,{path:"/admin",element:f.jsx(qT,{children:f.jsx(eQ,{})})}),f.jsx(qt,{path:"/admin/purchased",element:f.jsx(qT,{children:f.jsx(tQ,{})})}),f.jsxs(qt,{element:f.jsx(JK,{}),children:[f.jsx(qt,{path:"/dashboard",element:t?f.jsx(QH,{}):f.jsx(Nr,{to:"/"})}),f.jsx(qt,{path:"/friends",element:t?f.jsx(YH,{}):f.jsx(Nr,{to:"/"})}),f.jsx(qt,{path:"/friend/:id",element:t?f.jsx(tG,{}):f.jsx(Nr,{to:"/"})}),f.jsx(qt,{path:"/calendar",element:t?f.jsx(nG,{}):f.jsx(Nr,{to:"/"})}),f.jsx(qt,{path:"/profile",element:t?f.jsx(WG,{}):f.jsx(Nr,{to:"/"})}),f.jsx(qt,{path:"/top5",element:t?f.jsx(MK,{}):f.jsx(Nr,{to:"/"})}),f.jsx(qt,{path:"/gift/:id",element:t?f.jsx(HG,{}):f.jsx(Nr,{to:"/"})}),f.jsx(qt,{path:"/share-target",element:f.jsx(OK,{})})]}),f.jsx(qt,{path:"/greeting/:id",element:f.jsx(VK,{})}),f.jsx(qt,{path:"/invite",element:f.jsx(UK,{})}),f.jsx(qt,{path:"*",element:f.jsx(Nr,{to:"/"})})]}),f.jsx(BK,{}),f.jsx(FK,{})]})})})}tg.createRoot(document.getElementById("root")).render(f.jsx(un.StrictMode,{children:f.jsx(HM,{children:f.jsx(aH,{children:f.jsx(nQ,{})})})}));
